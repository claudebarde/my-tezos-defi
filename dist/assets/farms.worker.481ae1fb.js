(function(){"use strict";var Kt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof{}<"u"?{}:typeof self<"u"?self:{};function Lg(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),t}function wf(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var K0={exports:{}},Ef=function(t,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return t.apply(r,i)}},Og=Ef,Vn=Object.prototype.toString;function $0(e){return Array.isArray(e)}function z0(e){return typeof e>"u"}function Ig(e){return e!==null&&!z0(e)&&e.constructor!==null&&!z0(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function _f(e){return Vn.call(e)==="[object ArrayBuffer]"}function Ng(e){return Vn.call(e)==="[object FormData]"}function Mg(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&_f(e.buffer),t}function Bg(e){return typeof e=="string"}function Cg(e){return typeof e=="number"}function Sf(e){return e!==null&&typeof e=="object"}function qo(e){if(Vn.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Ug(e){return Vn.call(e)==="[object Date]"}function kg(e){return Vn.call(e)==="[object File]"}function Dg(e){return Vn.call(e)==="[object Blob]"}function Af(e){return Vn.call(e)==="[object Function]"}function Fg(e){return Sf(e)&&Af(e.pipe)}function Hg(e){return Vn.call(e)==="[object URLSearchParams]"}function Kg(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function $g(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function V0(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),$0(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function j0(){var e={};function t(i,s){qo(e[s])&&qo(i)?e[s]=j0(e[s],i):qo(i)?e[s]=j0({},i):$0(i)?e[s]=i.slice():e[s]=i}for(var r=0,n=arguments.length;r<n;r++)V0(arguments[r],t);return e}function zg(e,t,r){return V0(t,function(i,s){r&&typeof i=="function"?e[s]=Og(i,r):e[s]=i}),e}function Vg(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var fr={isArray:$0,isArrayBuffer:_f,isBuffer:Ig,isFormData:Ng,isArrayBufferView:Mg,isString:Bg,isNumber:Cg,isObject:Sf,isPlainObject:qo,isUndefined:z0,isDate:Ug,isFile:kg,isBlob:Dg,isFunction:Af,isStream:Fg,isURLSearchParams:Hg,isStandardBrowserEnv:$g,forEach:V0,merge:j0,extend:zg,trim:Kg,stripBOM:Vg},rs=fr;function Pf(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Tf=function(t,r,n){if(!r)return t;var i;if(n)i=n(r);else if(rs.isURLSearchParams(r))i=r.toString();else{var s=[];rs.forEach(r,function(u,h){u===null||typeof u>"u"||(rs.isArray(u)?h=h+"[]":u=[u],rs.forEach(u,function(y){rs.isDate(y)?y=y.toISOString():rs.isObject(y)&&(y=JSON.stringify(y)),s.push(Pf(h)+"="+Pf(y))}))}),i=s.join("&")}if(i){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t},jg=fr;function Wo(){this.handlers=[]}Wo.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1},Wo.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},Wo.prototype.forEach=function(t){jg.forEach(this.handlers,function(n){n!==null&&t(n)})};var Gg=Wo,qg=fr,Wg=function(t,r){qg.forEach(t,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(t[r]=i,delete t[s])})},Rf=function(t,r,n,i,s){return t.config=r,n&&(t.code=n),t.request=i,t.response=s,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},Lf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Yg=Rf,Of=function(t,r,n,i,s){var o=new Error(t);return Yg(o,r,n,i,s)},Xg=Of,Zg=function(t,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):r(Xg("Request failed with status code "+n.status,n.config,null,n.request,n))},Yo=fr,Jg=Yo.isStandardBrowserEnv()?function(){return{write:function(r,n,i,s,o,a){var u=[];u.push(r+"="+encodeURIComponent(n)),Yo.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),Yo.isString(s)&&u.push("path="+s),Yo.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Qg=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},tv=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},ev=Qg,rv=tv,nv=function(t,r){return t&&!ev(r)?rv(t,r):r},G0=fr,iv=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],sv=function(t){var r={},n,i,s;return t&&G0.forEach(t.split(`
`),function(a){if(s=a.indexOf(":"),n=G0.trim(a.substr(0,s)).toLowerCase(),i=G0.trim(a.substr(s+1)),n){if(r[n]&&iv.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r},If=fr,ov=If.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(s){var o=s;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){var a=If.isString(o)?i(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function q0(e){this.message=e}q0.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},q0.prototype.__CANCEL__=!0;var Xo=q0,Zo=fr,av=Zg,cv=Jg,uv=Tf,fv=nv,hv=sv,lv=ov,W0=Of,dv=Lf,pv=Xo,Nf=function(t){return new Promise(function(n,i){var s=t.data,o=t.headers,a=t.responseType,u;function h(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}Zo.isFormData(s)&&delete o["Content-Type"];var f=new XMLHttpRequest;if(t.auth){var y=t.auth.username||"",w=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.Authorization="Basic "+btoa(y+":"+w)}var L=fv(t.baseURL,t.url);f.open(t.method.toUpperCase(),uv(L,t.params,t.paramsSerializer),!0),f.timeout=t.timeout;function I(){if(!!f){var C="getAllResponseHeaders"in f?hv(f.getAllResponseHeaders()):null,k=!a||a==="text"||a==="json"?f.responseText:f.response,T={data:k,status:f.status,statusText:f.statusText,headers:C,config:t,request:f};av(function(F){n(F),h()},function(F){i(F),h()},T),f=null}}if("onloadend"in f?f.onloadend=I:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(I)},f.onabort=function(){!f||(i(W0("Request aborted",t,"ECONNABORTED",f)),f=null)},f.onerror=function(){i(W0("Network Error",t,null,f)),f=null},f.ontimeout=function(){var k=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",T=t.transitional||dv;t.timeoutErrorMessage&&(k=t.timeoutErrorMessage),i(W0(k,t,T.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",f)),f=null},Zo.isStandardBrowserEnv()){var B=(t.withCredentials||lv(L))&&t.xsrfCookieName?cv.read(t.xsrfCookieName):void 0;B&&(o[t.xsrfHeaderName]=B)}"setRequestHeader"in f&&Zo.forEach(o,function(k,T){typeof s>"u"&&T.toLowerCase()==="content-type"?delete o[T]:f.setRequestHeader(T,k)}),Zo.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),a&&a!=="json"&&(f.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&f.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(u=function(C){!f||(i(!C||C&&C.type?new pv("canceled"):C),f.abort(),f=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u))),s||(s=null),f.send(s)})},Ve=fr,Mf=Wg,gv=Rf,vv=Lf,mv={"Content-Type":"application/x-www-form-urlencoded"};function Bf(e,t){!Ve.isUndefined(e)&&Ve.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function xv(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=Nf),e}function bv(e,t,r){if(Ve.isString(e))try{return(t||JSON.parse)(e),Ve.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var Jo={transitional:vv,adapter:xv(),transformRequest:[function(t,r){return Mf(r,"Accept"),Mf(r,"Content-Type"),Ve.isFormData(t)||Ve.isArrayBuffer(t)||Ve.isBuffer(t)||Ve.isStream(t)||Ve.isFile(t)||Ve.isBlob(t)?t:Ve.isArrayBufferView(t)?t.buffer:Ve.isURLSearchParams(t)?(Bf(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Ve.isObject(t)||r&&r["Content-Type"]==="application/json"?(Bf(r,"application/json"),bv(t)):t}],transformResponse:[function(t){var r=this.transitional||Jo.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&Ve.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(s)throw o.name==="SyntaxError"?gv(o,this,"E_JSON_PARSE"):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ve.forEach(["delete","get","head"],function(t){Jo.headers[t]={}}),Ve.forEach(["post","put","patch"],function(t){Jo.headers[t]=Ve.merge(mv)});var Y0=Jo,yv=fr,wv=Y0,Ev=function(t,r,n){var i=this||wv;return yv.forEach(n,function(o){t=o.call(i,t,r)}),t},Cf=function(t){return!!(t&&t.__CANCEL__)},Uf=fr,X0=Ev,_v=Cf,Sv=Y0,Av=Xo;function Z0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Av("canceled")}var Pv=function(t){Z0(t),t.headers=t.headers||{},t.data=X0.call(t,t.data,t.headers,t.transformRequest),t.headers=Uf.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Uf.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var r=t.adapter||Sv.adapter;return r(t).then(function(i){return Z0(t),i.data=X0.call(t,i.data,i.headers,t.transformResponse),i},function(i){return _v(i)||(Z0(t),i&&i.response&&(i.response.data=X0.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})},gr=fr,kf=function(t,r){r=r||{};var n={};function i(f,y){return gr.isPlainObject(f)&&gr.isPlainObject(y)?gr.merge(f,y):gr.isPlainObject(y)?gr.merge({},y):gr.isArray(y)?y.slice():y}function s(f){if(gr.isUndefined(r[f])){if(!gr.isUndefined(t[f]))return i(void 0,t[f])}else return i(t[f],r[f])}function o(f){if(!gr.isUndefined(r[f]))return i(void 0,r[f])}function a(f){if(gr.isUndefined(r[f])){if(!gr.isUndefined(t[f]))return i(void 0,t[f])}else return i(void 0,r[f])}function u(f){if(f in r)return i(t[f],r[f]);if(f in t)return i(void 0,t[f])}var h={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return gr.forEach(Object.keys(t).concat(Object.keys(r)),function(y){var w=h[y]||s,L=w(y);gr.isUndefined(L)&&w!==u||(n[y]=L)}),n},Df={version:"0.26.1"},Tv=Df.version,J0={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){J0[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var Ff={};J0.transitional=function(t,r,n){function i(s,o){return"[Axios v"+Tv+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(t===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!Ff[o]&&(Ff[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(s,o,a):!0}};function Rv(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-- >0;){var s=n[i],o=t[s];if(o){var a=e[s],u=a===void 0||o(a,s,e);if(u!==!0)throw new TypeError("option "+s+" must be "+u);continue}if(r!==!0)throw Error("Unknown option "+s)}}var Lv={assertOptions:Rv,validators:J0},Hf=fr,Ov=Tf,Kf=Gg,$f=Pv,Qo=kf,zf=Lv,ns=zf.validators;function Ks(e){this.defaults=e,this.interceptors={request:new Kf,response:new Kf}}Ks.prototype.request=function(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Qo(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&zf.assertOptions(n,{silentJSONParsing:ns.transitional(ns.boolean),forcedJSONParsing:ns.transitional(ns.boolean),clarifyTimeoutError:ns.transitional(ns.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(L){typeof L.runWhen=="function"&&L.runWhen(r)===!1||(s=s&&L.synchronous,i.unshift(L.fulfilled,L.rejected))});var o=[];this.interceptors.response.forEach(function(L){o.push(L.fulfilled,L.rejected)});var a;if(!s){var u=[$f,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(o),a=Promise.resolve(r);u.length;)a=a.then(u.shift(),u.shift());return a}for(var h=r;i.length;){var f=i.shift(),y=i.shift();try{h=f(h)}catch(w){y(w);break}}try{a=$f(h)}catch(w){return Promise.reject(w)}for(;o.length;)a=a.then(o.shift(),o.shift());return a},Ks.prototype.getUri=function(t){return t=Qo(this.defaults,t),Ov(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},Hf.forEach(["delete","get","head","options"],function(t){Ks.prototype[t]=function(r,n){return this.request(Qo(n||{},{method:t,url:r,data:(n||{}).data}))}}),Hf.forEach(["post","put","patch"],function(t){Ks.prototype[t]=function(r,n,i){return this.request(Qo(i||{},{method:t,url:r,data:n}))}});var Iv=Ks,Nv=Xo;function is(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(i){t=i});var r=this;this.promise.then(function(n){if(!!r._listeners){var i,s=r._listeners.length;for(i=0;i<s;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,s=new Promise(function(o){r.subscribe(o),i=o}).then(n);return s.cancel=function(){r.unsubscribe(i)},s},e(function(i){r.reason||(r.reason=new Nv(i),t(r.reason))})}is.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},is.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]},is.prototype.unsubscribe=function(t){if(!!this._listeners){var r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}},is.source=function(){var t,r=new is(function(i){t=i});return{token:r,cancel:t}};var Mv=is,Bv=function(t){return function(n){return t.apply(null,n)}},Cv=fr,Uv=function(t){return Cv.isObject(t)&&t.isAxiosError===!0},Vf=fr,kv=Ef,ta=Iv,Dv=kf,Fv=Y0;function jf(e){var t=new ta(e),r=kv(ta.prototype.request,t);return Vf.extend(r,ta.prototype,t),Vf.extend(r,t),r.create=function(i){return jf(Dv(e,i))},r}var zr=jf(Fv);zr.Axios=ta,zr.Cancel=Xo,zr.CancelToken=Mv,zr.isCancel=Cf,zr.VERSION=Df.version,zr.all=function(t){return Promise.all(t)},zr.spread=Bv,zr.isAxiosError=Uv,K0.exports=zr,K0.exports.default=zr;var Gf=K0.exports;function Hv(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{h(n.next(f))}catch(y){o(y)}}function u(f){try{h(n.throw(f))}catch(y){o(y)}}function h(f){f.done?s(f.value):i(f.value).then(a,u)}h((n=n.apply(e,t||[])).next())})}var $s;(function(e){e[e.CONTINUE=100]="CONTINUE",e[e.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",e[e.PROCESSING=102]="PROCESSING",e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.ACCEPTED=202]="ACCEPTED",e[e.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.RESET_CONTENT=205]="RESET_CONTENT",e[e.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",e[e.MULTI_STATUS=207]="MULTI_STATUS",e[e.ALREADY_REPORTED=208]="ALREADY_REPORTED",e[e.IM_USED=226]="IM_USED",e[e.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",e[e.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",e[e.FOUND=302]="FOUND",e[e.SEE_OTHER=303]="SEE_OTHER",e[e.NOT_MODIFIED=304]="NOT_MODIFIED",e[e.USE_PROXY=305]="USE_PROXY",e[e.SWITCH_PROXY=306]="SWITCH_PROXY",e[e.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",e[e.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",e[e.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",e[e.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",e[e.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",e[e.CONFLICT=409]="CONFLICT",e[e.GONE=410]="GONE",e[e.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",e[e.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",e[e.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",e[e.URI_TOO_LONG=414]="URI_TOO_LONG",e[e.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",e[e.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",e[e.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",e[e.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",e[e.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",e[e.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",e[e.LOCKED=423]="LOCKED",e[e.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",e[e.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",e[e.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",e[e.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",e[e.BAD_GATEWAY=502]="BAD_GATEWAY",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",e[e.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",e[e.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",e[e.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",e[e.LOOP_DETECTED=508]="LOOP_DETECTED",e[e.NOT_EXTENDED=510]="NOT_EXTENDED",e[e.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"})($s||($s={}));var ea;(function(e){e.TEXT="text",e.JSON="json"})(ea||(ea={}));class ra extends Error{constructor(t,r,n,i,s){super(t),this.message=t,this.status=r,this.statusText=n,this.body=i,this.url=s,this.name="HttpResponse"}}class Kv extends Error{constructor(t){super(t),this.errorDetail=t,this.name="HttpRequestFailed"}}class Q0{constructor(t=3e4){this.timeout=t}serialize(t){if(!t)return"";const r=[];for(const i in t)if(t.hasOwnProperty(i)&&typeof t[i]<"u"){const s=typeof t[i].toJSON=="function"?t[i].toJSON():t[i];if(s===null){r.push(encodeURIComponent(i));continue}if(Array.isArray(s)){s.forEach(o=>{r.push(encodeURIComponent(i)+"="+encodeURIComponent(o))});continue}r.push(encodeURIComponent(i)+"="+encodeURIComponent(s))}const n=r.join("&");return n?`?${n}`:""}createRequest({url:t,method:r,timeout:n=this.timeout,query:i,headers:s={},json:o=!0},a){return Hv(this,void 0,void 0,function*(){let u,h;s["Content-Type"]||(s["Content-Type"]="application/json"),o?u=ea.JSON:(u=ea.TEXT,h=[f=>f]);try{return(yield Gf.request({url:t+this.serialize(i),method:r??"GET",headers:s,responseType:u,transformResponse:h,timeout:n,data:a})).data}catch(f){if(Gf.isAxiosError(f)&&f.response){let y;throw typeof f.response.data=="object"?y=JSON.stringify(f.response.data):y=f.response.data,new ra(`Http error response: (${f.response.status}) ${y}`,f.response.status,f.response.statusText,y,t+this.serialize(i))}else throw new Kv(f)}})}}var $v=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,tc=Math.ceil,Vr=Math.floor,hr="[BigNumber Error] ",qf=hr+"Number primitive has more than 15 significant digits: ",Br=1e14,Et=14,ec=9007199254740991,rc=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],jn=1e7,ke=1e9;function Wf(e){var t,r,n,i=T.prototype={constructor:T,toString:null,valueOf:null},s=new T(1),o=20,a=4,u=-7,h=21,f=-1e7,y=1e7,w=!1,L=1,I=0,B={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},C="0123456789abcdefghijklmnopqrstuvwxyz",k=!0;function T(O,M){var x,b,c,l,g,v,d,A,R=this;if(!(R instanceof T))return new T(O,M);if(M==null){if(O&&O._isBigNumber===!0){R.s=O.s,!O.c||O.e>y?R.c=R.e=null:O.e<f?R.c=[R.e=0]:(R.e=O.e,R.c=O.c.slice());return}if((v=typeof O=="number")&&O*0==0){if(R.s=1/O<0?(O=-O,-1):1,O===~~O){for(l=0,g=O;g>=10;g/=10,l++);l>y?R.c=R.e=null:(R.e=l,R.c=[O]);return}A=String(O)}else{if(!$v.test(A=String(O)))return n(R,A,v);R.s=A.charCodeAt(0)==45?(A=A.slice(1),-1):1}(l=A.indexOf("."))>-1&&(A=A.replace(".","")),(g=A.search(/e/i))>0?(l<0&&(l=g),l+=+A.slice(g+1),A=A.substring(0,g)):l<0&&(l=A.length)}else{if(be(M,2,C.length,"Base"),M==10&&k)return R=new T(O),z(R,o+R.e+1,a);if(A=String(O),v=typeof O=="number"){if(O*0!=0)return n(R,A,v,M);if(R.s=1/O<0?(A=A.slice(1),-1):1,T.DEBUG&&A.replace(/^0\.0*|\./,"").length>15)throw Error(qf+O)}else R.s=A.charCodeAt(0)===45?(A=A.slice(1),-1):1;for(x=C.slice(0,M),l=g=0,d=A.length;g<d;g++)if(x.indexOf(b=A.charAt(g))<0){if(b=="."){if(g>l){l=d;continue}}else if(!c&&(A==A.toUpperCase()&&(A=A.toLowerCase())||A==A.toLowerCase()&&(A=A.toUpperCase()))){c=!0,g=-1,l=0;continue}return n(R,String(O),v,M)}v=!1,A=r(A,M,10,R.s),(l=A.indexOf("."))>-1?A=A.replace(".",""):l=A.length}for(g=0;A.charCodeAt(g)===48;g++);for(d=A.length;A.charCodeAt(--d)===48;);if(A=A.slice(g,++d)){if(d-=g,v&&T.DEBUG&&d>15&&(O>ec||O!==Vr(O)))throw Error(qf+R.s*O);if((l=l-g-1)>y)R.c=R.e=null;else if(l<f)R.c=[R.e=0];else{if(R.e=l,R.c=[],g=(l+1)%Et,l<0&&(g+=Et),g<d){for(g&&R.c.push(+A.slice(0,g)),d-=Et;g<d;)R.c.push(+A.slice(g,g+=Et));g=Et-(A=A.slice(g)).length}else g-=d;for(;g--;A+="0");R.c.push(+A)}}else R.c=[R.e=0]}T.clone=Wf,T.ROUND_UP=0,T.ROUND_DOWN=1,T.ROUND_CEIL=2,T.ROUND_FLOOR=3,T.ROUND_HALF_UP=4,T.ROUND_HALF_DOWN=5,T.ROUND_HALF_EVEN=6,T.ROUND_HALF_CEIL=7,T.ROUND_HALF_FLOOR=8,T.EUCLID=9,T.config=T.set=function(O){var M,x;if(O!=null)if(typeof O=="object"){if(O.hasOwnProperty(M="DECIMAL_PLACES")&&(x=O[M],be(x,0,ke,M),o=x),O.hasOwnProperty(M="ROUNDING_MODE")&&(x=O[M],be(x,0,8,M),a=x),O.hasOwnProperty(M="EXPONENTIAL_AT")&&(x=O[M],x&&x.pop?(be(x[0],-ke,0,M),be(x[1],0,ke,M),u=x[0],h=x[1]):(be(x,-ke,ke,M),u=-(h=x<0?-x:x))),O.hasOwnProperty(M="RANGE"))if(x=O[M],x&&x.pop)be(x[0],-ke,-1,M),be(x[1],1,ke,M),f=x[0],y=x[1];else if(be(x,-ke,ke,M),x)f=-(y=x<0?-x:x);else throw Error(hr+M+" cannot be zero: "+x);if(O.hasOwnProperty(M="CRYPTO"))if(x=O[M],x===!!x)if(x)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))w=x;else throw w=!x,Error(hr+"crypto unavailable");else w=x;else throw Error(hr+M+" not true or false: "+x);if(O.hasOwnProperty(M="MODULO_MODE")&&(x=O[M],be(x,0,9,M),L=x),O.hasOwnProperty(M="POW_PRECISION")&&(x=O[M],be(x,0,ke,M),I=x),O.hasOwnProperty(M="FORMAT"))if(x=O[M],typeof x=="object")B=x;else throw Error(hr+M+" not an object: "+x);if(O.hasOwnProperty(M="ALPHABET"))if(x=O[M],typeof x=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(x))k=x.slice(0,10)=="0123456789",C=x;else throw Error(hr+M+" invalid: "+x)}else throw Error(hr+"Object expected: "+O);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[u,h],RANGE:[f,y],CRYPTO:w,MODULO_MODE:L,POW_PRECISION:I,FORMAT:B,ALPHABET:C}},T.isBigNumber=function(O){if(!O||O._isBigNumber!==!0)return!1;if(!T.DEBUG)return!0;var M,x,b=O.c,c=O.e,l=O.s;t:if({}.toString.call(b)=="[object Array]"){if((l===1||l===-1)&&c>=-ke&&c<=ke&&c===Vr(c)){if(b[0]===0){if(c===0&&b.length===1)return!0;break t}if(M=(c+1)%Et,M<1&&(M+=Et),String(b[0]).length==M){for(M=0;M<b.length;M++)if(x=b[M],x<0||x>=Br||x!==Vr(x))break t;if(x!==0)return!0}}}else if(b===null&&c===null&&(l===null||l===1||l===-1))return!0;throw Error(hr+"Invalid BigNumber: "+O)},T.maximum=T.max=function(){return F(arguments,i.lt)},T.minimum=T.min=function(){return F(arguments,i.gt)},T.random=function(){var O=9007199254740992,M=Math.random()*O&2097151?function(){return Vr(Math.random()*O)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(x){var b,c,l,g,v,d=0,A=[],R=new T(s);if(x==null?x=o:be(x,0,ke),g=tc(x/Et),w)if(crypto.getRandomValues){for(b=crypto.getRandomValues(new Uint32Array(g*=2));d<g;)v=b[d]*131072+(b[d+1]>>>11),v>=9e15?(c=crypto.getRandomValues(new Uint32Array(2)),b[d]=c[0],b[d+1]=c[1]):(A.push(v%1e14),d+=2);d=g/2}else if(crypto.randomBytes){for(b=crypto.randomBytes(g*=7);d<g;)v=(b[d]&31)*281474976710656+b[d+1]*1099511627776+b[d+2]*4294967296+b[d+3]*16777216+(b[d+4]<<16)+(b[d+5]<<8)+b[d+6],v>=9e15?crypto.randomBytes(7).copy(b,d):(A.push(v%1e14),d+=7);d=g/7}else throw w=!1,Error(hr+"crypto unavailable");if(!w)for(;d<g;)v=M(),v<9e15&&(A[d++]=v%1e14);for(g=A[--d],x%=Et,g&&x&&(v=rc[Et-x],A[d]=Vr(g/v)*v);A[d]===0;A.pop(),d--);if(d<0)A=[l=0];else{for(l=-1;A[0]===0;A.splice(0,1),l-=Et);for(d=1,v=A[0];v>=10;v/=10,d++);d<Et&&(l-=Et-d)}return R.e=l,R.c=A,R}}(),T.sum=function(){for(var O=1,M=arguments,x=new T(M[0]);O<M.length;)x=x.plus(M[O++]);return x},r=function(){var O="0123456789";function M(x,b,c,l){for(var g,v=[0],d,A=0,R=x.length;A<R;){for(d=v.length;d--;v[d]*=b);for(v[0]+=l.indexOf(x.charAt(A++)),g=0;g<v.length;g++)v[g]>c-1&&(v[g+1]==null&&(v[g+1]=0),v[g+1]+=v[g]/c|0,v[g]%=c)}return v.reverse()}return function(x,b,c,l,g){var v,d,A,R,S,p,P,H,G=x.indexOf("."),Y=o,rt=a;for(G>=0&&(R=I,I=0,x=x.replace(".",""),H=new T(b),p=H.pow(x.length-G),I=R,H.c=M(wn(_r(p.c),p.e,"0"),10,c,O),H.e=H.c.length),P=M(x,b,c,g?(v=C,O):(v=O,C)),A=R=P.length;P[--R]==0;P.pop());if(!P[0])return v.charAt(0);if(G<0?--A:(p.c=P,p.e=A,p.s=l,p=t(p,H,Y,rt,c),P=p.c,S=p.r,A=p.e),d=A+Y+1,G=P[d],R=c/2,S=S||d<0||P[d+1]!=null,S=rt<4?(G!=null||S)&&(rt==0||rt==(p.s<0?3:2)):G>R||G==R&&(rt==4||S||rt==6&&P[d-1]&1||rt==(p.s<0?8:7)),d<1||!P[0])x=S?wn(v.charAt(1),-Y,v.charAt(0)):v.charAt(0);else{if(P.length=d,S)for(--c;++P[--d]>c;)P[d]=0,d||(++A,P=[1].concat(P));for(R=P.length;!P[--R];);for(G=0,x="";G<=R;x+=v.charAt(P[G++]));x=wn(x,A,v.charAt(0))}return x}}(),t=function(){function O(b,c,l){var g,v,d,A,R=0,S=b.length,p=c%jn,P=c/jn|0;for(b=b.slice();S--;)d=b[S]%jn,A=b[S]/jn|0,g=P*d+A*p,v=p*d+g%jn*jn+R,R=(v/l|0)+(g/jn|0)+P*A,b[S]=v%l;return R&&(b=[R].concat(b)),b}function M(b,c,l,g){var v,d;if(l!=g)d=l>g?1:-1;else for(v=d=0;v<l;v++)if(b[v]!=c[v]){d=b[v]>c[v]?1:-1;break}return d}function x(b,c,l,g){for(var v=0;l--;)b[l]-=v,v=b[l]<c[l]?1:0,b[l]=v*g+b[l]-c[l];for(;!b[0]&&b.length>1;b.splice(0,1));}return function(b,c,l,g,v){var d,A,R,S,p,P,H,G,Y,rt,nt,q,Z,W,_,j,it,st=b.s==c.s?1:-1,ut=b.c,ot=c.c;if(!ut||!ut[0]||!ot||!ot[0])return new T(!b.s||!c.s||(ut?ot&&ut[0]==ot[0]:!ot)?NaN:ut&&ut[0]==0||!ot?st*0:st/0);for(G=new T(st),Y=G.c=[],A=b.e-c.e,st=l+A+1,v||(v=Br,A=Er(b.e/Et)-Er(c.e/Et),st=st/Et|0),R=0;ot[R]==(ut[R]||0);R++);if(ot[R]>(ut[R]||0)&&A--,st<0)Y.push(1),S=!0;else{for(W=ut.length,j=ot.length,R=0,st+=2,p=Vr(v/(ot[0]+1)),p>1&&(ot=O(ot,p,v),ut=O(ut,p,v),j=ot.length,W=ut.length),Z=j,rt=ut.slice(0,j),nt=rt.length;nt<j;rt[nt++]=0);it=ot.slice(),it=[0].concat(it),_=ot[0],ot[1]>=v/2&&_++;do{if(p=0,d=M(ot,rt,j,nt),d<0){if(q=rt[0],j!=nt&&(q=q*v+(rt[1]||0)),p=Vr(q/_),p>1)for(p>=v&&(p=v-1),P=O(ot,p,v),H=P.length,nt=rt.length;M(P,rt,H,nt)==1;)p--,x(P,j<H?it:ot,H,v),H=P.length,d=1;else p==0&&(d=p=1),P=ot.slice(),H=P.length;if(H<nt&&(P=[0].concat(P)),x(rt,P,nt,v),nt=rt.length,d==-1)for(;M(ot,rt,j,nt)<1;)p++,x(rt,j<nt?it:ot,nt,v),nt=rt.length}else d===0&&(p++,rt=[0]);Y[R++]=p,rt[0]?rt[nt++]=ut[Z]||0:(rt=[ut[Z]],nt=1)}while((Z++<W||rt[0]!=null)&&st--);S=rt[0]!=null,Y[0]||Y.splice(0,1)}if(v==Br){for(R=1,st=Y[0];st>=10;st/=10,R++);z(G,l+(G.e=R+A*Et-1)+1,g,S)}else G.e=A,G.r=+S;return G}}();function D(O,M,x,b){var c,l,g,v,d;if(x==null?x=a:be(x,0,8),!O.c)return O.toString();if(c=O.c[0],g=O.e,M==null)d=_r(O.c),d=b==1||b==2&&(g<=u||g>=h)?ia(d,g):wn(d,g,"0");else if(O=z(new T(O),M,x),l=O.e,d=_r(O.c),v=d.length,b==1||b==2&&(M<=l||l<=u)){for(;v<M;d+="0",v++);d=ia(d,l)}else if(M-=g,d=wn(d,l,"0"),l+1>v){if(--M>0)for(d+=".";M--;d+="0");}else if(M+=l-v,M>0)for(l+1==v&&(d+=".");M--;d+="0");return O.s<0&&c?"-"+d:d}function F(O,M){for(var x,b=1,c=new T(O[0]);b<O.length;b++)if(x=new T(O[b]),x.s)M.call(c,x)&&(c=x);else{c=x;break}return c}function V(O,M,x){for(var b=1,c=M.length;!M[--c];M.pop());for(c=M[0];c>=10;c/=10,b++);return(x=b+x*Et-1)>y?O.c=O.e=null:x<f?O.c=[O.e=0]:(O.e=x,O.c=M),O}n=function(){var O=/^(-?)0([xbo])(?=\w[\w.]*$)/i,M=/^([^.]+)\.$/,x=/^\.([^.]+)$/,b=/^-?(Infinity|NaN)$/,c=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(l,g,v,d){var A,R=v?g:g.replace(c,"");if(b.test(R))l.s=isNaN(R)?null:R<0?-1:1;else{if(!v&&(R=R.replace(O,function(S,p,P){return A=(P=P.toLowerCase())=="x"?16:P=="b"?2:8,!d||d==A?p:S}),d&&(A=d,R=R.replace(M,"$1").replace(x,"0.$1")),g!=R))return new T(R,A);if(T.DEBUG)throw Error(hr+"Not a"+(d?" base "+d:"")+" number: "+g);l.s=null}l.c=l.e=null}}();function z(O,M,x,b){var c,l,g,v,d,A,R,S=O.c,p=rc;if(S){t:{for(c=1,v=S[0];v>=10;v/=10,c++);if(l=M-c,l<0)l+=Et,g=M,d=S[A=0],R=d/p[c-g-1]%10|0;else if(A=tc((l+1)/Et),A>=S.length)if(b){for(;S.length<=A;S.push(0));d=R=0,c=1,l%=Et,g=l-Et+1}else break t;else{for(d=v=S[A],c=1;v>=10;v/=10,c++);l%=Et,g=l-Et+c,R=g<0?0:d/p[c-g-1]%10|0}if(b=b||M<0||S[A+1]!=null||(g<0?d:d%p[c-g-1]),b=x<4?(R||b)&&(x==0||x==(O.s<0?3:2)):R>5||R==5&&(x==4||b||x==6&&(l>0?g>0?d/p[c-g]:0:S[A-1])%10&1||x==(O.s<0?8:7)),M<1||!S[0])return S.length=0,b?(M-=O.e+1,S[0]=p[(Et-M%Et)%Et],O.e=-M||0):S[0]=O.e=0,O;if(l==0?(S.length=A,v=1,A--):(S.length=A+1,v=p[Et-l],S[A]=g>0?Vr(d/p[c-g]%p[g])*v:0),b)for(;;)if(A==0){for(l=1,g=S[0];g>=10;g/=10,l++);for(g=S[0]+=v,v=1;g>=10;g/=10,v++);l!=v&&(O.e++,S[0]==Br&&(S[0]=1));break}else{if(S[A]+=v,S[A]!=Br)break;S[A--]=0,v=1}for(l=S.length;S[--l]===0;S.pop());}O.e>y?O.c=O.e=null:O.e<f&&(O.c=[O.e=0])}return O}function $(O){var M,x=O.e;return x===null?O.toString():(M=_r(O.c),M=x<=u||x>=h?ia(M,x):wn(M,x,"0"),O.s<0?"-"+M:M)}return i.absoluteValue=i.abs=function(){var O=new T(this);return O.s<0&&(O.s=1),O},i.comparedTo=function(O,M){return ss(this,new T(O,M))},i.decimalPlaces=i.dp=function(O,M){var x,b,c,l=this;if(O!=null)return be(O,0,ke),M==null?M=a:be(M,0,8),z(new T(l),O+l.e+1,M);if(!(x=l.c))return null;if(b=((c=x.length-1)-Er(this.e/Et))*Et,c=x[c])for(;c%10==0;c/=10,b--);return b<0&&(b=0),b},i.dividedBy=i.div=function(O,M){return t(this,new T(O,M),o,a)},i.dividedToIntegerBy=i.idiv=function(O,M){return t(this,new T(O,M),0,1)},i.exponentiatedBy=i.pow=function(O,M){var x,b,c,l,g,v,d,A,R,S=this;if(O=new T(O),O.c&&!O.isInteger())throw Error(hr+"Exponent not an integer: "+$(O));if(M!=null&&(M=new T(M)),v=O.e>14,!S.c||!S.c[0]||S.c[0]==1&&!S.e&&S.c.length==1||!O.c||!O.c[0])return R=new T(Math.pow(+$(S),v?2-na(O):+$(O))),M?R.mod(M):R;if(d=O.s<0,M){if(M.c?!M.c[0]:!M.s)return new T(NaN);b=!d&&S.isInteger()&&M.isInteger(),b&&(S=S.mod(M))}else{if(O.e>9&&(S.e>0||S.e<-1||(S.e==0?S.c[0]>1||v&&S.c[1]>=24e7:S.c[0]<8e13||v&&S.c[0]<=9999975e7)))return l=S.s<0&&na(O)?-0:0,S.e>-1&&(l=1/l),new T(d?1/l:l);I&&(l=tc(I/Et+2))}for(v?(x=new T(.5),d&&(O.s=1),A=na(O)):(c=Math.abs(+$(O)),A=c%2),R=new T(s);;){if(A){if(R=R.times(S),!R.c)break;l?R.c.length>l&&(R.c.length=l):b&&(R=R.mod(M))}if(c){if(c=Vr(c/2),c===0)break;A=c%2}else if(O=O.times(x),z(O,O.e+1,1),O.e>14)A=na(O);else{if(c=+$(O),c===0)break;A=c%2}S=S.times(S),l?S.c&&S.c.length>l&&(S.c.length=l):b&&(S=S.mod(M))}return b?R:(d&&(R=s.div(R)),M?R.mod(M):l?z(R,I,a,g):R)},i.integerValue=function(O){var M=new T(this);return O==null?O=a:be(O,0,8),z(M,M.e+1,O)},i.isEqualTo=i.eq=function(O,M){return ss(this,new T(O,M))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(O,M){return ss(this,new T(O,M))>0},i.isGreaterThanOrEqualTo=i.gte=function(O,M){return(M=ss(this,new T(O,M)))===1||M===0},i.isInteger=function(){return!!this.c&&Er(this.e/Et)>this.c.length-2},i.isLessThan=i.lt=function(O,M){return ss(this,new T(O,M))<0},i.isLessThanOrEqualTo=i.lte=function(O,M){return(M=ss(this,new T(O,M)))===-1||M===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(O,M){var x,b,c,l,g=this,v=g.s;if(O=new T(O,M),M=O.s,!v||!M)return new T(NaN);if(v!=M)return O.s=-M,g.plus(O);var d=g.e/Et,A=O.e/Et,R=g.c,S=O.c;if(!d||!A){if(!R||!S)return R?(O.s=-M,O):new T(S?g:NaN);if(!R[0]||!S[0])return S[0]?(O.s=-M,O):new T(R[0]?g:a==3?-0:0)}if(d=Er(d),A=Er(A),R=R.slice(),v=d-A){for((l=v<0)?(v=-v,c=R):(A=d,c=S),c.reverse(),M=v;M--;c.push(0));c.reverse()}else for(b=(l=(v=R.length)<(M=S.length))?v:M,v=M=0;M<b;M++)if(R[M]!=S[M]){l=R[M]<S[M];break}if(l&&(c=R,R=S,S=c,O.s=-O.s),M=(b=S.length)-(x=R.length),M>0)for(;M--;R[x++]=0);for(M=Br-1;b>v;){if(R[--b]<S[b]){for(x=b;x&&!R[--x];R[x]=M);--R[x],R[b]+=Br}R[b]-=S[b]}for(;R[0]==0;R.splice(0,1),--A);return R[0]?V(O,R,A):(O.s=a==3?-1:1,O.c=[O.e=0],O)},i.modulo=i.mod=function(O,M){var x,b,c=this;return O=new T(O,M),!c.c||!O.s||O.c&&!O.c[0]?new T(NaN):!O.c||c.c&&!c.c[0]?new T(c):(L==9?(b=O.s,O.s=1,x=t(c,O,0,3),O.s=b,x.s*=b):x=t(c,O,0,L),O=c.minus(x.times(O)),!O.c[0]&&L==1&&(O.s=c.s),O)},i.multipliedBy=i.times=function(O,M){var x,b,c,l,g,v,d,A,R,S,p,P,H,G,Y,rt=this,nt=rt.c,q=(O=new T(O,M)).c;if(!nt||!q||!nt[0]||!q[0])return!rt.s||!O.s||nt&&!nt[0]&&!q||q&&!q[0]&&!nt?O.c=O.e=O.s=null:(O.s*=rt.s,!nt||!q?O.c=O.e=null:(O.c=[0],O.e=0)),O;for(b=Er(rt.e/Et)+Er(O.e/Et),O.s*=rt.s,d=nt.length,S=q.length,d<S&&(H=nt,nt=q,q=H,c=d,d=S,S=c),c=d+S,H=[];c--;H.push(0));for(G=Br,Y=jn,c=S;--c>=0;){for(x=0,p=q[c]%Y,P=q[c]/Y|0,g=d,l=c+g;l>c;)A=nt[--g]%Y,R=nt[g]/Y|0,v=P*A+R*p,A=p*A+v%Y*Y+H[l]+x,x=(A/G|0)+(v/Y|0)+P*R,H[l--]=A%G;H[l]=x}return x?++b:H.splice(0,1),V(O,H,b)},i.negated=function(){var O=new T(this);return O.s=-O.s||null,O},i.plus=function(O,M){var x,b=this,c=b.s;if(O=new T(O,M),M=O.s,!c||!M)return new T(NaN);if(c!=M)return O.s=-M,b.minus(O);var l=b.e/Et,g=O.e/Et,v=b.c,d=O.c;if(!l||!g){if(!v||!d)return new T(c/0);if(!v[0]||!d[0])return d[0]?O:new T(v[0]?b:c*0)}if(l=Er(l),g=Er(g),v=v.slice(),c=l-g){for(c>0?(g=l,x=d):(c=-c,x=v),x.reverse();c--;x.push(0));x.reverse()}for(c=v.length,M=d.length,c-M<0&&(x=d,d=v,v=x,M=c),c=0;M;)c=(v[--M]=v[M]+d[M]+c)/Br|0,v[M]=Br===v[M]?0:v[M]%Br;return c&&(v=[c].concat(v),++g),V(O,v,g)},i.precision=i.sd=function(O,M){var x,b,c,l=this;if(O!=null&&O!==!!O)return be(O,1,ke),M==null?M=a:be(M,0,8),z(new T(l),O,M);if(!(x=l.c))return null;if(c=x.length-1,b=c*Et+1,c=x[c]){for(;c%10==0;c/=10,b--);for(c=x[0];c>=10;c/=10,b++);}return O&&l.e+1>b&&(b=l.e+1),b},i.shiftedBy=function(O){return be(O,-ec,ec),this.times("1e"+O)},i.squareRoot=i.sqrt=function(){var O,M,x,b,c,l=this,g=l.c,v=l.s,d=l.e,A=o+4,R=new T("0.5");if(v!==1||!g||!g[0])return new T(!v||v<0&&(!g||g[0])?NaN:g?l:1/0);if(v=Math.sqrt(+$(l)),v==0||v==1/0?(M=_r(g),(M.length+d)%2==0&&(M+="0"),v=Math.sqrt(+M),d=Er((d+1)/2)-(d<0||d%2),v==1/0?M="5e"+d:(M=v.toExponential(),M=M.slice(0,M.indexOf("e")+1)+d),x=new T(M)):x=new T(v+""),x.c[0]){for(d=x.e,v=d+A,v<3&&(v=0);;)if(c=x,x=R.times(c.plus(t(l,c,A,1))),_r(c.c).slice(0,v)===(M=_r(x.c)).slice(0,v))if(x.e<d&&--v,M=M.slice(v-3,v+1),M=="9999"||!b&&M=="4999"){if(!b&&(z(c,c.e+o+2,0),c.times(c).eq(l))){x=c;break}A+=4,v+=4,b=1}else{(!+M||!+M.slice(1)&&M.charAt(0)=="5")&&(z(x,x.e+o+2,1),O=!x.times(x).eq(l));break}}return z(x,x.e+o+1,a,O)},i.toExponential=function(O,M){return O!=null&&(be(O,0,ke),O++),D(this,O,M,1)},i.toFixed=function(O,M){return O!=null&&(be(O,0,ke),O=O+this.e+1),D(this,O,M)},i.toFormat=function(O,M,x){var b,c=this;if(x==null)O!=null&&M&&typeof M=="object"?(x=M,M=null):O&&typeof O=="object"?(x=O,O=M=null):x=B;else if(typeof x!="object")throw Error(hr+"Argument not an object: "+x);if(b=c.toFixed(O,M),c.c){var l,g=b.split("."),v=+x.groupSize,d=+x.secondaryGroupSize,A=x.groupSeparator||"",R=g[0],S=g[1],p=c.s<0,P=p?R.slice(1):R,H=P.length;if(d&&(l=v,v=d,d=l,H-=l),v>0&&H>0){for(l=H%v||v,R=P.substr(0,l);l<H;l+=v)R+=A+P.substr(l,v);d>0&&(R+=A+P.slice(l)),p&&(R="-"+R)}b=S?R+(x.decimalSeparator||"")+((d=+x.fractionGroupSize)?S.replace(new RegExp("\\d{"+d+"}\\B","g"),"$&"+(x.fractionGroupSeparator||"")):S):R}return(x.prefix||"")+b+(x.suffix||"")},i.toFraction=function(O){var M,x,b,c,l,g,v,d,A,R,S,p,P=this,H=P.c;if(O!=null&&(v=new T(O),!v.isInteger()&&(v.c||v.s!==1)||v.lt(s)))throw Error(hr+"Argument "+(v.isInteger()?"out of range: ":"not an integer: ")+$(v));if(!H)return new T(P);for(M=new T(s),A=x=new T(s),b=d=new T(s),p=_r(H),l=M.e=p.length-P.e-1,M.c[0]=rc[(g=l%Et)<0?Et+g:g],O=!O||v.comparedTo(M)>0?l>0?M:A:v,g=y,y=1/0,v=new T(p),d.c[0]=0;R=t(v,M,0,1),c=x.plus(R.times(b)),c.comparedTo(O)!=1;)x=b,b=c,A=d.plus(R.times(c=A)),d=c,M=v.minus(R.times(c=M)),v=c;return c=t(O.minus(x),b,0,1),d=d.plus(c.times(A)),x=x.plus(c.times(b)),d.s=A.s=P.s,l=l*2,S=t(A,b,l,a).minus(P).abs().comparedTo(t(d,x,l,a).minus(P).abs())<1?[A,b]:[d,x],y=g,S},i.toNumber=function(){return+$(this)},i.toPrecision=function(O,M){return O!=null&&be(O,1,ke),D(this,O,M,2)},i.toString=function(O){var M,x=this,b=x.s,c=x.e;return c===null?b?(M="Infinity",b<0&&(M="-"+M)):M="NaN":(O==null?M=c<=u||c>=h?ia(_r(x.c),c):wn(_r(x.c),c,"0"):O===10&&k?(x=z(new T(x),o+c+1,a),M=wn(_r(x.c),x.e,"0")):(be(O,2,C.length,"Base"),M=r(wn(_r(x.c),c,"0"),10,O,b,!0)),b<0&&x.c[0]&&(M="-"+M)),M},i.valueOf=i.toJSON=function(){return $(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,e!=null&&T.set(e),T}function Er(e){var t=e|0;return e>0||e===t?t:t-1}function _r(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=Et-t.length;r--;t="0"+t);s+=t}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function ss(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,u=e.e,h=t.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=u==h,!i||!s)return n?0:!i^r?1:-1;if(!n)return u>h^r?1:-1;for(a=(u=i.length)<(h=s.length)?u:h,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return u==h?0:u>h^r?1:-1}function be(e,t,r,n){if(e<t||e>r||e!==Vr(e))throw Error(hr+(n||"Argument")+(typeof e=="number"?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function na(e){var t=e.c.length-1;return Er(e.e/Et)==t&&e.c[t]%2!=0}function ia(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function wn(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(n=e.length,++t>n){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var vt=Wf(),En={},sa={};sa.byteLength=jv,sa.toByteArray=qv,sa.fromByteArray=Xv;for(var jr=[],Sr=[],zv=typeof Uint8Array<"u"?Uint8Array:Array,nc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",os=0,Vv=nc.length;os<Vv;++os)jr[os]=nc[os],Sr[nc.charCodeAt(os)]=os;Sr["-".charCodeAt(0)]=62,Sr["_".charCodeAt(0)]=63;function Yf(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function jv(e){var t=Yf(e),r=t[0],n=t[1];return(r+n)*3/4-n}function Gv(e,t,r){return(t+r)*3/4-r}function qv(e){var t,r=Yf(e),n=r[0],i=r[1],s=new zv(Gv(e,n,i)),o=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)t=Sr[e.charCodeAt(u)]<<18|Sr[e.charCodeAt(u+1)]<<12|Sr[e.charCodeAt(u+2)]<<6|Sr[e.charCodeAt(u+3)],s[o++]=t>>16&255,s[o++]=t>>8&255,s[o++]=t&255;return i===2&&(t=Sr[e.charCodeAt(u)]<<2|Sr[e.charCodeAt(u+1)]>>4,s[o++]=t&255),i===1&&(t=Sr[e.charCodeAt(u)]<<10|Sr[e.charCodeAt(u+1)]<<4|Sr[e.charCodeAt(u+2)]>>2,s[o++]=t>>8&255,s[o++]=t&255),s}function Wv(e){return jr[e>>18&63]+jr[e>>12&63]+jr[e>>6&63]+jr[e&63]}function Yv(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),i.push(Wv(n));return i.join("")}function Xv(e){for(var t,r=e.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(Yv(e,o,o+s>a?a:o+s));return n===1?(t=e[r-1],i.push(jr[t>>2]+jr[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],i.push(jr[t>>10]+jr[t>>4&63]+jr[t<<2&63]+"=")),i.join("")}var ic={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ic.read=function(e,t,r,n,i){var s,o,a=i*8-n-1,u=(1<<a)-1,h=u>>1,f=-7,y=r?i-1:0,w=r?-1:1,L=e[t+y];for(y+=w,s=L&(1<<-f)-1,L>>=-f,f+=a;f>0;s=s*256+e[t+y],y+=w,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+e[t+y],y+=w,f-=8);if(s===0)s=1-h;else{if(s===u)return o?NaN:(L?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-h}return(L?-1:1)*o*Math.pow(2,s-n)},ic.write=function(e,t,r,n,i,s){var o,a,u,h=s*8-i-1,f=(1<<h)-1,y=f>>1,w=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=n?0:s-1,I=n?1:-1,B=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+y>=1?t+=w/u:t+=w*Math.pow(2,1-y),t*u>=2&&(o++,u/=2),o+y>=f?(a=0,o=f):o+y>=1?(a=(t*u-1)*Math.pow(2,i),o=o+y):(a=t*Math.pow(2,y-1)*Math.pow(2,i),o=0));i>=8;e[r+L]=a&255,L+=I,a/=256,i-=8);for(o=o<<i|a,h+=i;h>0;e[r+L]=o&255,L+=I,o/=256,h-=8);e[r+L-I]|=B*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=sa,r=ic,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=T,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const N=new Uint8Array(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,Uint8Array.prototype),Object.setPrototypeOf(N,m),N.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.byteOffset}});function o(N){if(N>i)throw new RangeError('The value "'+N+'" is invalid for option "size"');const m=new Uint8Array(N);return Object.setPrototypeOf(m,a.prototype),m}function a(N,m,E){if(typeof N=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(N)}return u(N,m,E)}a.poolSize=8192;function u(N,m,E){if(typeof N=="string")return w(N,m);if(ArrayBuffer.isView(N))return I(N);if(N==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(ft(N,ArrayBuffer)||N&&ft(N.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ft(N,SharedArrayBuffer)||N&&ft(N.buffer,SharedArrayBuffer)))return B(N,m,E);if(typeof N=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const U=N.valueOf&&N.valueOf();if(U!=null&&U!==N)return a.from(U,m,E);const K=C(N);if(K)return K;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof N[Symbol.toPrimitive]=="function")return a.from(N[Symbol.toPrimitive]("string"),m,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}a.from=function(N,m,E){return u(N,m,E)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function h(N){if(typeof N!="number")throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function f(N,m,E){return h(N),N<=0?o(N):m!==void 0?typeof E=="string"?o(N).fill(m,E):o(N).fill(m):o(N)}a.alloc=function(N,m,E){return f(N,m,E)};function y(N){return h(N),o(N<0?0:k(N)|0)}a.allocUnsafe=function(N){return y(N)},a.allocUnsafeSlow=function(N){return y(N)};function w(N,m){if((typeof m!="string"||m==="")&&(m="utf8"),!a.isEncoding(m))throw new TypeError("Unknown encoding: "+m);const E=D(N,m)|0;let U=o(E);const K=U.write(N,m);return K!==E&&(U=U.slice(0,K)),U}function L(N){const m=N.length<0?0:k(N.length)|0,E=o(m);for(let U=0;U<m;U+=1)E[U]=N[U]&255;return E}function I(N){if(ft(N,Uint8Array)){const m=new Uint8Array(N);return B(m.buffer,m.byteOffset,m.byteLength)}return L(N)}function B(N,m,E){if(m<0||N.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(N.byteLength<m+(E||0))throw new RangeError('"length" is outside of buffer bounds');let U;return m===void 0&&E===void 0?U=new Uint8Array(N):E===void 0?U=new Uint8Array(N,m):U=new Uint8Array(N,m,E),Object.setPrototypeOf(U,a.prototype),U}function C(N){if(a.isBuffer(N)){const m=k(N.length)|0,E=o(m);return E.length===0||N.copy(E,0,0,m),E}if(N.length!==void 0)return typeof N.length!="number"||Wt(N.length)?o(0):L(N);if(N.type==="Buffer"&&Array.isArray(N.data))return L(N.data)}function k(N){if(N>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return N|0}function T(N){return+N!=N&&(N=0),a.alloc(+N)}a.isBuffer=function(m){return m!=null&&m._isBuffer===!0&&m!==a.prototype},a.compare=function(m,E){if(ft(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),ft(E,Uint8Array)&&(E=a.from(E,E.offset,E.byteLength)),!a.isBuffer(m)||!a.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===E)return 0;let U=m.length,K=E.length;for(let J=0,Q=Math.min(U,K);J<Q;++J)if(m[J]!==E[J]){U=m[J],K=E[J];break}return U<K?-1:K<U?1:0},a.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(m,E){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return a.alloc(0);let U;if(E===void 0)for(E=0,U=0;U<m.length;++U)E+=m[U].length;const K=a.allocUnsafe(E);let J=0;for(U=0;U<m.length;++U){let Q=m[U];if(ft(Q,Uint8Array))J+Q.length>K.length?(a.isBuffer(Q)||(Q=a.from(Q)),Q.copy(K,J)):Uint8Array.prototype.set.call(K,Q,J);else if(a.isBuffer(Q))Q.copy(K,J);else throw new TypeError('"list" argument must be an Array of Buffers');J+=Q.length}return K};function D(N,m){if(a.isBuffer(N))return N.length;if(ArrayBuffer.isView(N)||ft(N,ArrayBuffer))return N.byteLength;if(typeof N!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);const E=N.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&E===0)return 0;let K=!1;for(;;)switch(m){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return Vt(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return fe(N).length;default:if(K)return U?-1:Vt(N).length;m=(""+m).toLowerCase(),K=!0}}a.byteLength=D;function F(N,m,E){let U=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,m>>>=0,E<=m))return"";for(N||(N="utf8");;)switch(N){case"hex":return S(this,m,E);case"utf8":case"utf-8":return g(this,m,E);case"ascii":return A(this,m,E);case"latin1":case"binary":return R(this,m,E);case"base64":return l(this,m,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p(this,m,E);default:if(U)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),U=!0}}a.prototype._isBuffer=!0;function V(N,m,E){const U=N[m];N[m]=N[E],N[E]=U}a.prototype.swap16=function(){const m=this.length;if(m%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let E=0;E<m;E+=2)V(this,E,E+1);return this},a.prototype.swap32=function(){const m=this.length;if(m%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let E=0;E<m;E+=4)V(this,E,E+3),V(this,E+1,E+2);return this},a.prototype.swap64=function(){const m=this.length;if(m%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let E=0;E<m;E+=8)V(this,E,E+7),V(this,E+1,E+6),V(this,E+2,E+5),V(this,E+3,E+4);return this},a.prototype.toString=function(){const m=this.length;return m===0?"":arguments.length===0?g(this,0,m):F.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(m){if(!a.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m?!0:a.compare(this,m)===0},a.prototype.inspect=function(){let m="";const E=e.INSPECT_MAX_BYTES;return m=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim(),this.length>E&&(m+=" ... "),"<Buffer "+m+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(m,E,U,K,J){if(ft(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),!a.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(E===void 0&&(E=0),U===void 0&&(U=m?m.length:0),K===void 0&&(K=0),J===void 0&&(J=this.length),E<0||U>m.length||K<0||J>this.length)throw new RangeError("out of range index");if(K>=J&&E>=U)return 0;if(K>=J)return-1;if(E>=U)return 1;if(E>>>=0,U>>>=0,K>>>=0,J>>>=0,this===m)return 0;let Q=J-K,at=U-E;const Dt=Math.min(Q,at),lt=this.slice(K,J),gt=m.slice(E,U);for(let Tt=0;Tt<Dt;++Tt)if(lt[Tt]!==gt[Tt]){Q=lt[Tt],at=gt[Tt];break}return Q<at?-1:at<Q?1:0};function z(N,m,E,U,K){if(N.length===0)return-1;if(typeof E=="string"?(U=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,Wt(E)&&(E=K?0:N.length-1),E<0&&(E=N.length+E),E>=N.length){if(K)return-1;E=N.length-1}else if(E<0)if(K)E=0;else return-1;if(typeof m=="string"&&(m=a.from(m,U)),a.isBuffer(m))return m.length===0?-1:$(N,m,E,U,K);if(typeof m=="number")return m=m&255,typeof Uint8Array.prototype.indexOf=="function"?K?Uint8Array.prototype.indexOf.call(N,m,E):Uint8Array.prototype.lastIndexOf.call(N,m,E):$(N,[m],E,U,K);throw new TypeError("val must be string, number or Buffer")}function $(N,m,E,U,K){let J=1,Q=N.length,at=m.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(N.length<2||m.length<2)return-1;J=2,Q/=2,at/=2,E/=2}function Dt(gt,Tt){return J===1?gt[Tt]:gt.readUInt16BE(Tt*J)}let lt;if(K){let gt=-1;for(lt=E;lt<Q;lt++)if(Dt(N,lt)===Dt(m,gt===-1?0:lt-gt)){if(gt===-1&&(gt=lt),lt-gt+1===at)return gt*J}else gt!==-1&&(lt-=lt-gt),gt=-1}else for(E+at>Q&&(E=Q-at),lt=E;lt>=0;lt--){let gt=!0;for(let Tt=0;Tt<at;Tt++)if(Dt(N,lt+Tt)!==Dt(m,Tt)){gt=!1;break}if(gt)return lt}return-1}a.prototype.includes=function(m,E,U){return this.indexOf(m,E,U)!==-1},a.prototype.indexOf=function(m,E,U){return z(this,m,E,U,!0)},a.prototype.lastIndexOf=function(m,E,U){return z(this,m,E,U,!1)};function O(N,m,E,U){E=Number(E)||0;const K=N.length-E;U?(U=Number(U),U>K&&(U=K)):U=K;const J=m.length;U>J/2&&(U=J/2);let Q;for(Q=0;Q<U;++Q){const at=parseInt(m.substr(Q*2,2),16);if(Wt(at))return Q;N[E+Q]=at}return Q}function M(N,m,E,U){return dt(Vt(m,N.length-E),N,E,U)}function x(N,m,E,U){return dt(yt(m),N,E,U)}function b(N,m,E,U){return dt(fe(m),N,E,U)}function c(N,m,E,U){return dt(wt(m,N.length-E),N,E,U)}a.prototype.write=function(m,E,U,K){if(E===void 0)K="utf8",U=this.length,E=0;else if(U===void 0&&typeof E=="string")K=E,U=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite(U)?(U=U>>>0,K===void 0&&(K="utf8")):(K=U,U=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const J=this.length-E;if((U===void 0||U>J)&&(U=J),m.length>0&&(U<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");let Q=!1;for(;;)switch(K){case"hex":return O(this,m,E,U);case"utf8":case"utf-8":return M(this,m,E,U);case"ascii":case"latin1":case"binary":return x(this,m,E,U);case"base64":return b(this,m,E,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c(this,m,E,U);default:if(Q)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),Q=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function l(N,m,E){return m===0&&E===N.length?t.fromByteArray(N):t.fromByteArray(N.slice(m,E))}function g(N,m,E){E=Math.min(N.length,E);const U=[];let K=m;for(;K<E;){const J=N[K];let Q=null,at=J>239?4:J>223?3:J>191?2:1;if(K+at<=E){let Dt,lt,gt,Tt;switch(at){case 1:J<128&&(Q=J);break;case 2:Dt=N[K+1],(Dt&192)===128&&(Tt=(J&31)<<6|Dt&63,Tt>127&&(Q=Tt));break;case 3:Dt=N[K+1],lt=N[K+2],(Dt&192)===128&&(lt&192)===128&&(Tt=(J&15)<<12|(Dt&63)<<6|lt&63,Tt>2047&&(Tt<55296||Tt>57343)&&(Q=Tt));break;case 4:Dt=N[K+1],lt=N[K+2],gt=N[K+3],(Dt&192)===128&&(lt&192)===128&&(gt&192)===128&&(Tt=(J&15)<<18|(Dt&63)<<12|(lt&63)<<6|gt&63,Tt>65535&&Tt<1114112&&(Q=Tt))}}Q===null?(Q=65533,at=1):Q>65535&&(Q-=65536,U.push(Q>>>10&1023|55296),Q=56320|Q&1023),U.push(Q),K+=at}return d(U)}const v=4096;function d(N){const m=N.length;if(m<=v)return String.fromCharCode.apply(String,N);let E="",U=0;for(;U<m;)E+=String.fromCharCode.apply(String,N.slice(U,U+=v));return E}function A(N,m,E){let U="";E=Math.min(N.length,E);for(let K=m;K<E;++K)U+=String.fromCharCode(N[K]&127);return U}function R(N,m,E){let U="";E=Math.min(N.length,E);for(let K=m;K<E;++K)U+=String.fromCharCode(N[K]);return U}function S(N,m,E){const U=N.length;(!m||m<0)&&(m=0),(!E||E<0||E>U)&&(E=U);let K="";for(let J=m;J<E;++J)K+=xt[N[J]];return K}function p(N,m,E){const U=N.slice(m,E);let K="";for(let J=0;J<U.length-1;J+=2)K+=String.fromCharCode(U[J]+U[J+1]*256);return K}a.prototype.slice=function(m,E){const U=this.length;m=~~m,E=E===void 0?U:~~E,m<0?(m+=U,m<0&&(m=0)):m>U&&(m=U),E<0?(E+=U,E<0&&(E=0)):E>U&&(E=U),E<m&&(E=m);const K=this.subarray(m,E);return Object.setPrototypeOf(K,a.prototype),K};function P(N,m,E){if(N%1!==0||N<0)throw new RangeError("offset is not uint");if(N+m>E)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(m,E,U){m=m>>>0,E=E>>>0,U||P(m,E,this.length);let K=this[m],J=1,Q=0;for(;++Q<E&&(J*=256);)K+=this[m+Q]*J;return K},a.prototype.readUintBE=a.prototype.readUIntBE=function(m,E,U){m=m>>>0,E=E>>>0,U||P(m,E,this.length);let K=this[m+--E],J=1;for(;E>0&&(J*=256);)K+=this[m+--E]*J;return K},a.prototype.readUint8=a.prototype.readUInt8=function(m,E){return m=m>>>0,E||P(m,1,this.length),this[m]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(m,E){return m=m>>>0,E||P(m,2,this.length),this[m]|this[m+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(m,E){return m=m>>>0,E||P(m,2,this.length),this[m]<<8|this[m+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(m,E){return m=m>>>0,E||P(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+this[m+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(m,E){return m=m>>>0,E||P(m,4,this.length),this[m]*16777216+(this[m+1]<<16|this[m+2]<<8|this[m+3])},a.prototype.readBigUInt64LE=pt(function(m){m=m>>>0,st(m,"offset");const E=this[m],U=this[m+7];(E===void 0||U===void 0)&&ut(m,this.length-8);const K=E+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24,J=this[++m]+this[++m]*2**8+this[++m]*2**16+U*2**24;return BigInt(K)+(BigInt(J)<<BigInt(32))}),a.prototype.readBigUInt64BE=pt(function(m){m=m>>>0,st(m,"offset");const E=this[m],U=this[m+7];(E===void 0||U===void 0)&&ut(m,this.length-8);const K=E*2**24+this[++m]*2**16+this[++m]*2**8+this[++m],J=this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+U;return(BigInt(K)<<BigInt(32))+BigInt(J)}),a.prototype.readIntLE=function(m,E,U){m=m>>>0,E=E>>>0,U||P(m,E,this.length);let K=this[m],J=1,Q=0;for(;++Q<E&&(J*=256);)K+=this[m+Q]*J;return J*=128,K>=J&&(K-=Math.pow(2,8*E)),K},a.prototype.readIntBE=function(m,E,U){m=m>>>0,E=E>>>0,U||P(m,E,this.length);let K=E,J=1,Q=this[m+--K];for(;K>0&&(J*=256);)Q+=this[m+--K]*J;return J*=128,Q>=J&&(Q-=Math.pow(2,8*E)),Q},a.prototype.readInt8=function(m,E){return m=m>>>0,E||P(m,1,this.length),this[m]&128?(255-this[m]+1)*-1:this[m]},a.prototype.readInt16LE=function(m,E){m=m>>>0,E||P(m,2,this.length);const U=this[m]|this[m+1]<<8;return U&32768?U|4294901760:U},a.prototype.readInt16BE=function(m,E){m=m>>>0,E||P(m,2,this.length);const U=this[m+1]|this[m]<<8;return U&32768?U|4294901760:U},a.prototype.readInt32LE=function(m,E){return m=m>>>0,E||P(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},a.prototype.readInt32BE=function(m,E){return m=m>>>0,E||P(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},a.prototype.readBigInt64LE=pt(function(m){m=m>>>0,st(m,"offset");const E=this[m],U=this[m+7];(E===void 0||U===void 0)&&ut(m,this.length-8);const K=this[m+4]+this[m+5]*2**8+this[m+6]*2**16+(U<<24);return(BigInt(K)<<BigInt(32))+BigInt(E+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24)}),a.prototype.readBigInt64BE=pt(function(m){m=m>>>0,st(m,"offset");const E=this[m],U=this[m+7];(E===void 0||U===void 0)&&ut(m,this.length-8);const K=(E<<24)+this[++m]*2**16+this[++m]*2**8+this[++m];return(BigInt(K)<<BigInt(32))+BigInt(this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+U)}),a.prototype.readFloatLE=function(m,E){return m=m>>>0,E||P(m,4,this.length),r.read(this,m,!0,23,4)},a.prototype.readFloatBE=function(m,E){return m=m>>>0,E||P(m,4,this.length),r.read(this,m,!1,23,4)},a.prototype.readDoubleLE=function(m,E){return m=m>>>0,E||P(m,8,this.length),r.read(this,m,!0,52,8)},a.prototype.readDoubleBE=function(m,E){return m=m>>>0,E||P(m,8,this.length),r.read(this,m,!1,52,8)};function H(N,m,E,U,K,J){if(!a.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>K||m<J)throw new RangeError('"value" argument is out of bounds');if(E+U>N.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(m,E,U,K){if(m=+m,E=E>>>0,U=U>>>0,!K){const at=Math.pow(2,8*U)-1;H(this,m,E,U,at,0)}let J=1,Q=0;for(this[E]=m&255;++Q<U&&(J*=256);)this[E+Q]=m/J&255;return E+U},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(m,E,U,K){if(m=+m,E=E>>>0,U=U>>>0,!K){const at=Math.pow(2,8*U)-1;H(this,m,E,U,at,0)}let J=U-1,Q=1;for(this[E+J]=m&255;--J>=0&&(Q*=256);)this[E+J]=m/Q&255;return E+U},a.prototype.writeUint8=a.prototype.writeUInt8=function(m,E,U){return m=+m,E=E>>>0,U||H(this,m,E,1,255,0),this[E]=m&255,E+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(m,E,U){return m=+m,E=E>>>0,U||H(this,m,E,2,65535,0),this[E]=m&255,this[E+1]=m>>>8,E+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(m,E,U){return m=+m,E=E>>>0,U||H(this,m,E,2,65535,0),this[E]=m>>>8,this[E+1]=m&255,E+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(m,E,U){return m=+m,E=E>>>0,U||H(this,m,E,4,4294967295,0),this[E+3]=m>>>24,this[E+2]=m>>>16,this[E+1]=m>>>8,this[E]=m&255,E+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(m,E,U){return m=+m,E=E>>>0,U||H(this,m,E,4,4294967295,0),this[E]=m>>>24,this[E+1]=m>>>16,this[E+2]=m>>>8,this[E+3]=m&255,E+4};function G(N,m,E,U,K){it(m,U,K,N,E,7);let J=Number(m&BigInt(4294967295));N[E++]=J,J=J>>8,N[E++]=J,J=J>>8,N[E++]=J,J=J>>8,N[E++]=J;let Q=Number(m>>BigInt(32)&BigInt(4294967295));return N[E++]=Q,Q=Q>>8,N[E++]=Q,Q=Q>>8,N[E++]=Q,Q=Q>>8,N[E++]=Q,E}function Y(N,m,E,U,K){it(m,U,K,N,E,7);let J=Number(m&BigInt(4294967295));N[E+7]=J,J=J>>8,N[E+6]=J,J=J>>8,N[E+5]=J,J=J>>8,N[E+4]=J;let Q=Number(m>>BigInt(32)&BigInt(4294967295));return N[E+3]=Q,Q=Q>>8,N[E+2]=Q,Q=Q>>8,N[E+1]=Q,Q=Q>>8,N[E]=Q,E+8}a.prototype.writeBigUInt64LE=pt(function(m,E=0){return G(this,m,E,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=pt(function(m,E=0){return Y(this,m,E,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(m,E,U,K){if(m=+m,E=E>>>0,!K){const Dt=Math.pow(2,8*U-1);H(this,m,E,U,Dt-1,-Dt)}let J=0,Q=1,at=0;for(this[E]=m&255;++J<U&&(Q*=256);)m<0&&at===0&&this[E+J-1]!==0&&(at=1),this[E+J]=(m/Q>>0)-at&255;return E+U},a.prototype.writeIntBE=function(m,E,U,K){if(m=+m,E=E>>>0,!K){const Dt=Math.pow(2,8*U-1);H(this,m,E,U,Dt-1,-Dt)}let J=U-1,Q=1,at=0;for(this[E+J]=m&255;--J>=0&&(Q*=256);)m<0&&at===0&&this[E+J+1]!==0&&(at=1),this[E+J]=(m/Q>>0)-at&255;return E+U},a.prototype.writeInt8=function(m,E,U){return m=+m,E=E>>>0,U||H(this,m,E,1,127,-128),m<0&&(m=255+m+1),this[E]=m&255,E+1},a.prototype.writeInt16LE=function(m,E,U){return m=+m,E=E>>>0,U||H(this,m,E,2,32767,-32768),this[E]=m&255,this[E+1]=m>>>8,E+2},a.prototype.writeInt16BE=function(m,E,U){return m=+m,E=E>>>0,U||H(this,m,E,2,32767,-32768),this[E]=m>>>8,this[E+1]=m&255,E+2},a.prototype.writeInt32LE=function(m,E,U){return m=+m,E=E>>>0,U||H(this,m,E,4,2147483647,-2147483648),this[E]=m&255,this[E+1]=m>>>8,this[E+2]=m>>>16,this[E+3]=m>>>24,E+4},a.prototype.writeInt32BE=function(m,E,U){return m=+m,E=E>>>0,U||H(this,m,E,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[E]=m>>>24,this[E+1]=m>>>16,this[E+2]=m>>>8,this[E+3]=m&255,E+4},a.prototype.writeBigInt64LE=pt(function(m,E=0){return G(this,m,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=pt(function(m,E=0){return Y(this,m,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function rt(N,m,E,U,K,J){if(E+U>N.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function nt(N,m,E,U,K){return m=+m,E=E>>>0,K||rt(N,m,E,4),r.write(N,m,E,U,23,4),E+4}a.prototype.writeFloatLE=function(m,E,U){return nt(this,m,E,!0,U)},a.prototype.writeFloatBE=function(m,E,U){return nt(this,m,E,!1,U)};function q(N,m,E,U,K){return m=+m,E=E>>>0,K||rt(N,m,E,8),r.write(N,m,E,U,52,8),E+8}a.prototype.writeDoubleLE=function(m,E,U){return q(this,m,E,!0,U)},a.prototype.writeDoubleBE=function(m,E,U){return q(this,m,E,!1,U)},a.prototype.copy=function(m,E,U,K){if(!a.isBuffer(m))throw new TypeError("argument should be a Buffer");if(U||(U=0),!K&&K!==0&&(K=this.length),E>=m.length&&(E=m.length),E||(E=0),K>0&&K<U&&(K=U),K===U||m.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),m.length-E<K-U&&(K=m.length-E+U);const J=K-U;return this===m&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(E,U,K):Uint8Array.prototype.set.call(m,this.subarray(U,K),E),J},a.prototype.fill=function(m,E,U,K){if(typeof m=="string"){if(typeof E=="string"?(K=E,E=0,U=this.length):typeof U=="string"&&(K=U,U=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!a.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(m.length===1){const Q=m.charCodeAt(0);(K==="utf8"&&Q<128||K==="latin1")&&(m=Q)}}else typeof m=="number"?m=m&255:typeof m=="boolean"&&(m=Number(m));if(E<0||this.length<E||this.length<U)throw new RangeError("Out of range index");if(U<=E)return this;E=E>>>0,U=U===void 0?this.length:U>>>0,m||(m=0);let J;if(typeof m=="number")for(J=E;J<U;++J)this[J]=m;else{const Q=a.isBuffer(m)?m:a.from(m,K),at=Q.length;if(at===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(J=0;J<U-E;++J)this[J+E]=Q[J%at]}return this};const Z={};function W(N,m,E){Z[N]=class extends E{constructor(){super(),Object.defineProperty(this,"message",{value:m.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${N}]`,this.stack,delete this.name}get code(){return N}set code(K){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:K,writable:!0})}toString(){return`${this.name} [${N}]: ${this.message}`}}}W("ERR_BUFFER_OUT_OF_BOUNDS",function(N){return N?`${N} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),W("ERR_INVALID_ARG_TYPE",function(N,m){return`The "${N}" argument must be of type number. Received type ${typeof m}`},TypeError),W("ERR_OUT_OF_RANGE",function(N,m,E){let U=`The value of "${N}" is out of range.`,K=E;return Number.isInteger(E)&&Math.abs(E)>2**32?K=_(String(E)):typeof E=="bigint"&&(K=String(E),(E>BigInt(2)**BigInt(32)||E<-(BigInt(2)**BigInt(32)))&&(K=_(K)),K+="n"),U+=` It must be ${m}. Received ${K}`,U},RangeError);function _(N){let m="",E=N.length;const U=N[0]==="-"?1:0;for(;E>=U+4;E-=3)m=`_${N.slice(E-3,E)}${m}`;return`${N.slice(0,E)}${m}`}function j(N,m,E){st(m,"offset"),(N[m]===void 0||N[m+E]===void 0)&&ut(m,N.length-(E+1))}function it(N,m,E,U,K,J){if(N>E||N<m){const Q=typeof m=="bigint"?"n":"";let at;throw J>3?m===0||m===BigInt(0)?at=`>= 0${Q} and < 2${Q} ** ${(J+1)*8}${Q}`:at=`>= -(2${Q} ** ${(J+1)*8-1}${Q}) and < 2 ** ${(J+1)*8-1}${Q}`:at=`>= ${m}${Q} and <= ${E}${Q}`,new Z.ERR_OUT_OF_RANGE("value",at,N)}j(U,K,J)}function st(N,m){if(typeof N!="number")throw new Z.ERR_INVALID_ARG_TYPE(m,"number",N)}function ut(N,m,E){throw Math.floor(N)!==N?(st(N,E),new Z.ERR_OUT_OF_RANGE(E||"offset","an integer",N)):m<0?new Z.ERR_BUFFER_OUT_OF_BOUNDS:new Z.ERR_OUT_OF_RANGE(E||"offset",`>= ${E?1:0} and <= ${m}`,N)}const ot=/[^+/0-9A-Za-z-_]/g;function ht(N){if(N=N.split("=")[0],N=N.trim().replace(ot,""),N.length<2)return"";for(;N.length%4!==0;)N=N+"=";return N}function Vt(N,m){m=m||1/0;let E;const U=N.length;let K=null;const J=[];for(let Q=0;Q<U;++Q){if(E=N.charCodeAt(Q),E>55295&&E<57344){if(!K){if(E>56319){(m-=3)>-1&&J.push(239,191,189);continue}else if(Q+1===U){(m-=3)>-1&&J.push(239,191,189);continue}K=E;continue}if(E<56320){(m-=3)>-1&&J.push(239,191,189),K=E;continue}E=(K-55296<<10|E-56320)+65536}else K&&(m-=3)>-1&&J.push(239,191,189);if(K=null,E<128){if((m-=1)<0)break;J.push(E)}else if(E<2048){if((m-=2)<0)break;J.push(E>>6|192,E&63|128)}else if(E<65536){if((m-=3)<0)break;J.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((m-=4)<0)break;J.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return J}function yt(N){const m=[];for(let E=0;E<N.length;++E)m.push(N.charCodeAt(E)&255);return m}function wt(N,m){let E,U,K;const J=[];for(let Q=0;Q<N.length&&!((m-=2)<0);++Q)E=N.charCodeAt(Q),U=E>>8,K=E%256,J.push(K),J.push(U);return J}function fe(N){return t.toByteArray(ht(N))}function dt(N,m,E,U){let K;for(K=0;K<U&&!(K+E>=m.length||K>=N.length);++K)m[K+E]=N[K];return K}function ft(N,m){return N instanceof m||N!=null&&N.constructor!=null&&N.constructor.name!=null&&N.constructor.name===m.name}function Wt(N){return N!==N}const xt=function(){const N="0123456789abcdef",m=new Array(256);for(let E=0;E<16;++E){const U=E*16;for(let K=0;K<16;++K)m[U+K]=N[E]+N[K]}return m}();function pt(N){return typeof BigInt>"u"?Xt:N}function Xt(){throw new Error("BigInt not supported")}})(En);var Zv={},Xf={},oa={},aa={};Object.defineProperty(aa,"__esModule",{value:!0}),aa.BrowserRandomSource=void 0;const Zf=65536;class Jv{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let n=0;n<r.length;n+=Zf)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Zf)));return r}}aa.BrowserRandomSource=Jv;var ca={},Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});function Qv(e){for(var t=0;t<e.length;t++)e[t]=0;return e}Pi.wipe=Qv;var tm={},em=Object.freeze({__proto__:null,default:tm}),sc=Lg(em);Object.defineProperty(ca,"__esModule",{value:!0}),ca.NodeRandomSource=void 0;const rm=Pi;class nm{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof wf<"u"){const t=sc;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(t);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,rm.wipe)(r),n}}ca.NodeRandomSource=nm,Object.defineProperty(oa,"__esModule",{value:!0}),oa.SystemRandomSource=void 0;const im=aa,sm=ca;class om{constructor(){if(this.isAvailable=!1,this.name="",this._source=new im.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new sm.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}oa.SystemRandomSource=om;var St={},Jf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(a,u){var h=a>>>16&65535,f=a&65535,y=u>>>16&65535,w=u&65535;return f*w+(h*w+f*y<<16>>>0)|0}e.mul=Math.imul||t;function r(a,u){return a+u|0}e.add=r;function n(a,u){return a-u|0}e.sub=n;function i(a,u){return a<<u|a>>>32-u}e.rotl=i;function s(a,u){return a<<32-u|a>>>u}e.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}e.isInteger=Number.isInteger||o,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(a){return e.isInteger(a)&&a>=-e.MAX_SAFE_INTEGER&&a<=e.MAX_SAFE_INTEGER}})(Jf),Object.defineProperty(St,"__esModule",{value:!0});var Qf=Jf;function am(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16}St.readInt16BE=am;function cm(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])>>>0}St.readUint16BE=cm;function um(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])<<16>>16}St.readInt16LE=um;function fm(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])>>>0}St.readUint16LE=fm;function th(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}St.writeUint16BE=th,St.writeInt16BE=th;function eh(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}St.writeUint16LE=eh,St.writeInt16LE=eh;function oc(e,t){return t===void 0&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}St.readInt32BE=oc;function ac(e,t){return t===void 0&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}St.readUint32BE=ac;function cc(e,t){return t===void 0&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}St.readInt32LE=cc;function uc(e,t){return t===void 0&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}St.readUint32LE=uc;function ua(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}St.writeUint32BE=ua,St.writeInt32BE=ua;function fa(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}St.writeUint32LE=fa,St.writeInt32LE=fa;function hm(e,t){t===void 0&&(t=0);var r=oc(e,t),n=oc(e,t+4);return r*4294967296+n-(n>>31)*4294967296}St.readInt64BE=hm;function lm(e,t){t===void 0&&(t=0);var r=ac(e,t),n=ac(e,t+4);return r*4294967296+n}St.readUint64BE=lm;function dm(e,t){t===void 0&&(t=0);var r=cc(e,t),n=cc(e,t+4);return n*4294967296+r-(r>>31)*4294967296}St.readInt64LE=dm;function pm(e,t){t===void 0&&(t=0);var r=uc(e,t),n=uc(e,t+4);return n*4294967296+r}St.readUint64LE=pm;function rh(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),ua(e/4294967296>>>0,t,r),ua(e>>>0,t,r+4),t}St.writeUint64BE=rh,St.writeInt64BE=rh;function nh(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),fa(e>>>0,t,r),fa(e/4294967296>>>0,t,r+4),t}St.writeUint64LE=nh,St.writeInt64LE=nh;function gm(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=e/8+r-1;s>=r;s--)n+=t[s]*i,i*=256;return n}St.readUintBE=gm;function vm(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+e/8;s++)n+=t[s]*i,i*=256;return n}St.readUintLE=vm;function mm(e,t,r,n){if(r===void 0&&(r=new Uint8Array(e/8)),n===void 0&&(n=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Qf.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var i=1,s=e/8+n-1;s>=n;s--)r[s]=t/i&255,i*=256;return r}St.writeUintBE=mm;function xm(e,t,r,n){if(r===void 0&&(r=new Uint8Array(e/8)),n===void 0&&(n=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Qf.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+e/8;s++)r[s]=t/i&255,i*=256;return r}St.writeUintLE=xm;function bm(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}St.readFloat32BE=bm;function ym(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,!0)}St.readFloat32LE=ym;function wm(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}St.readFloat64BE=wm;function Em(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,!0)}St.readFloat64LE=Em;function _m(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat32(r,e),t}St.writeFloat32BE=_m;function Sm(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat32(r,e,!0),t}St.writeFloat32LE=Sm;function Am(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat64(r,e),t}St.writeFloat64BE=Am;function Pm(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat64(r,e,!0),t}St.writeFloat64LE=Pm,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;const t=oa,r=St,n=Pi;e.defaultRandomSource=new t.SystemRandomSource;function i(h,f=e.defaultRandomSource){return f.randomBytes(h)}e.randomBytes=i;function s(h=e.defaultRandomSource){const f=i(4,h),y=(0,r.readUint32LE)(f);return(0,n.wipe)(f),y}e.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(h,f=o,y=e.defaultRandomSource){if(f.length<2)throw new Error("randomString charset is too short");if(f.length>256)throw new Error("randomString charset is too long");let w="";const L=f.length,I=256-256%L;for(;h>0;){const B=i(Math.ceil(h*256/I),y);for(let C=0;C<B.length&&h>0;C++){const k=B[C];k<I&&(w+=f.charAt(k%L),h--)}(0,n.wipe)(B)}return w}e.randomString=a;function u(h,f=o,y=e.defaultRandomSource){const w=Math.ceil(h/(Math.log(f.length)/Math.LN2));return a(w,f,y)}e.randomStringForEntropy=u}(Xf);var ih={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=St,r=Pi;e.DIGEST_LENGTH=64,e.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(u,h){if(h===void 0&&(h=u.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var f=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<e.BLOCK_SIZE&&h>0;)this._buffer[this._bufferLength++]=u[f++],h--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(f=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,u,f,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=u[f++],h--;return this},a.prototype.finish=function(u){if(!this._finished){var h=this._bytesHashed,f=this._bufferLength,y=h/536870912|0,w=h<<3,L=h%128<112?128:256;this._buffer[f]=128;for(var I=f+1;I<L-8;I++)this._buffer[I]=0;t.writeUint32BE(y,this._buffer,L-8),t.writeUint32BE(w,this._buffer,L-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,L),this._finished=!0}for(var I=0;I<this.digestLength/8;I++)t.writeUint32BE(this._stateHi[I],u,I*8),t.writeUint32BE(this._stateLo[I],u,I*8+4);return this},a.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(u){return this._stateHi.set(u.stateHi),this._stateLo.set(u.stateLo),this._bufferLength=u.bufferLength,u.buffer&&this._buffer.set(u.buffer),this._bytesHashed=u.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(u){r.wipe(u.stateHi),r.wipe(u.stateLo),u.buffer&&r.wipe(u.buffer),u.bufferLength=0,u.bytesHashed=0},a}();e.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,u,h,f,y,w,L){for(var I=h[0],B=h[1],C=h[2],k=h[3],T=h[4],D=h[5],F=h[6],V=h[7],z=f[0],$=f[1],O=f[2],M=f[3],x=f[4],b=f[5],c=f[6],l=f[7],g,v,d,A,R,S,p,P;L>=128;){for(var H=0;H<16;H++){var G=8*H+w;a[H]=t.readUint32BE(y,G),u[H]=t.readUint32BE(y,G+4)}for(var H=0;H<80;H++){var Y=I,rt=B,nt=C,q=k,Z=T,W=D,_=F,j=V,it=z,st=$,ut=O,ot=M,ht=x,Vt=b,yt=c,wt=l;if(g=V,v=l,R=v&65535,S=v>>>16,p=g&65535,P=g>>>16,g=(T>>>14|x<<32-14)^(T>>>18|x<<32-18)^(x>>>41-32|T<<32-(41-32)),v=(x>>>14|T<<32-14)^(x>>>18|T<<32-18)^(T>>>41-32|x<<32-(41-32)),R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,g=T&D^~T&F,v=x&b^~x&c,R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,g=i[H*2],v=i[H*2+1],R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,g=a[H%16],v=u[H%16],R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,S+=R>>>16,p+=S>>>16,P+=p>>>16,d=p&65535|P<<16,A=R&65535|S<<16,g=d,v=A,R=v&65535,S=v>>>16,p=g&65535,P=g>>>16,g=(I>>>28|z<<32-28)^(z>>>34-32|I<<32-(34-32))^(z>>>39-32|I<<32-(39-32)),v=(z>>>28|I<<32-28)^(I>>>34-32|z<<32-(34-32))^(I>>>39-32|z<<32-(39-32)),R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,g=I&B^I&C^B&C,v=z&$^z&O^$&O,R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,S+=R>>>16,p+=S>>>16,P+=p>>>16,j=p&65535|P<<16,wt=R&65535|S<<16,g=q,v=ot,R=v&65535,S=v>>>16,p=g&65535,P=g>>>16,g=d,v=A,R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,S+=R>>>16,p+=S>>>16,P+=p>>>16,q=p&65535|P<<16,ot=R&65535|S<<16,B=Y,C=rt,k=nt,T=q,D=Z,F=W,V=_,I=j,$=it,O=st,M=ut,x=ot,b=ht,c=Vt,l=yt,z=wt,H%16===15)for(var G=0;G<16;G++)g=a[G],v=u[G],R=v&65535,S=v>>>16,p=g&65535,P=g>>>16,g=a[(G+9)%16],v=u[(G+9)%16],R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,d=a[(G+1)%16],A=u[(G+1)%16],g=(d>>>1|A<<32-1)^(d>>>8|A<<32-8)^d>>>7,v=(A>>>1|d<<32-1)^(A>>>8|d<<32-8)^(A>>>7|d<<32-7),R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,d=a[(G+14)%16],A=u[(G+14)%16],g=(d>>>19|A<<32-19)^(A>>>61-32|d<<32-(61-32))^d>>>6,v=(A>>>19|d<<32-19)^(d>>>61-32|A<<32-(61-32))^(A>>>6|d<<32-6),R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,S+=R>>>16,p+=S>>>16,P+=p>>>16,a[G]=p&65535|P<<16,u[G]=R&65535|S<<16}g=I,v=z,R=v&65535,S=v>>>16,p=g&65535,P=g>>>16,g=h[0],v=f[0],R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,S+=R>>>16,p+=S>>>16,P+=p>>>16,h[0]=I=p&65535|P<<16,f[0]=z=R&65535|S<<16,g=B,v=$,R=v&65535,S=v>>>16,p=g&65535,P=g>>>16,g=h[1],v=f[1],R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,S+=R>>>16,p+=S>>>16,P+=p>>>16,h[1]=B=p&65535|P<<16,f[1]=$=R&65535|S<<16,g=C,v=O,R=v&65535,S=v>>>16,p=g&65535,P=g>>>16,g=h[2],v=f[2],R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,S+=R>>>16,p+=S>>>16,P+=p>>>16,h[2]=C=p&65535|P<<16,f[2]=O=R&65535|S<<16,g=k,v=M,R=v&65535,S=v>>>16,p=g&65535,P=g>>>16,g=h[3],v=f[3],R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,S+=R>>>16,p+=S>>>16,P+=p>>>16,h[3]=k=p&65535|P<<16,f[3]=M=R&65535|S<<16,g=T,v=x,R=v&65535,S=v>>>16,p=g&65535,P=g>>>16,g=h[4],v=f[4],R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,S+=R>>>16,p+=S>>>16,P+=p>>>16,h[4]=T=p&65535|P<<16,f[4]=x=R&65535|S<<16,g=D,v=b,R=v&65535,S=v>>>16,p=g&65535,P=g>>>16,g=h[5],v=f[5],R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,S+=R>>>16,p+=S>>>16,P+=p>>>16,h[5]=D=p&65535|P<<16,f[5]=b=R&65535|S<<16,g=F,v=c,R=v&65535,S=v>>>16,p=g&65535,P=g>>>16,g=h[6],v=f[6],R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,S+=R>>>16,p+=S>>>16,P+=p>>>16,h[6]=F=p&65535|P<<16,f[6]=c=R&65535|S<<16,g=V,v=l,R=v&65535,S=v>>>16,p=g&65535,P=g>>>16,g=h[7],v=f[7],R+=v&65535,S+=v>>>16,p+=g&65535,P+=g>>>16,S+=R>>>16,p+=S>>>16,P+=p>>>16,h[7]=V=p&65535|P<<16,f[7]=l=R&65535|S<<16,w+=128,L-=128}return w}function o(a){var u=new n;u.update(a);var h=u.digest();return u.clean(),h}e.hash=o})(ih),function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Xf,r=ih,n=Pi;e.SIGNATURE_LENGTH=64,e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=64,e.SEED_LENGTH=32;function i(q){var Z=new Float64Array(16);if(q)for(var W=0;W<q.length;W++)Z[W]=q[W];return Z}var s=new Uint8Array(32);s[0]=9;var o=i(),a=i([1]),u=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),y=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),w=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function L(q,Z){for(var W=0;W<16;W++)q[W]=Z[W]|0}function I(q){for(var Z=1,W=0;W<16;W++){var _=q[W]+Z+65535;Z=Math.floor(_/65536),q[W]=_-Z*65536}q[0]+=Z-1+37*(Z-1)}function B(q,Z,W){for(var _=~(W-1),j=0;j<16;j++){var it=_&(q[j]^Z[j]);q[j]^=it,Z[j]^=it}}function C(q,Z){for(var W=i(),_=i(),j=0;j<16;j++)_[j]=Z[j];I(_),I(_),I(_);for(var it=0;it<2;it++){W[0]=_[0]-65517;for(var j=1;j<15;j++)W[j]=_[j]-65535-(W[j-1]>>16&1),W[j-1]&=65535;W[15]=_[15]-32767-(W[14]>>16&1);var st=W[15]>>16&1;W[14]&=65535,B(_,W,1-st)}for(var j=0;j<16;j++)q[2*j]=_[j]&255,q[2*j+1]=_[j]>>8}function k(q,Z){for(var W=0,_=0;_<32;_++)W|=q[_]^Z[_];return(1&W-1>>>8)-1}function T(q,Z){var W=new Uint8Array(32),_=new Uint8Array(32);return C(W,q),C(_,Z),k(W,_)}function D(q){var Z=new Uint8Array(32);return C(Z,q),Z[0]&1}function F(q,Z){for(var W=0;W<16;W++)q[W]=Z[2*W]+(Z[2*W+1]<<8);q[15]&=32767}function V(q,Z,W){for(var _=0;_<16;_++)q[_]=Z[_]+W[_]}function z(q,Z,W){for(var _=0;_<16;_++)q[_]=Z[_]-W[_]}function $(q,Z,W){var _,j,it=0,st=0,ut=0,ot=0,ht=0,Vt=0,yt=0,wt=0,fe=0,dt=0,ft=0,Wt=0,xt=0,pt=0,Xt=0,N=0,m=0,E=0,U=0,K=0,J=0,Q=0,at=0,Dt=0,lt=0,gt=0,Tt=0,ae=0,ce=0,Ai=0,pe=0,Nt=W[0],Re=W[1],Mt=W[2],Rt=W[3],Le=W[4],Bt=W[5],Lt=W[6],Oe=W[7],Ot=W[8],mt=W[9],ue=W[10],It=W[11],Ct=W[12],Ue=W[13],Ft=W[14],Ht=W[15];_=Z[0],it+=_*Nt,st+=_*Re,ut+=_*Mt,ot+=_*Rt,ht+=_*Le,Vt+=_*Bt,yt+=_*Lt,wt+=_*Oe,fe+=_*Ot,dt+=_*mt,ft+=_*ue,Wt+=_*It,xt+=_*Ct,pt+=_*Ue,Xt+=_*Ft,N+=_*Ht,_=Z[1],st+=_*Nt,ut+=_*Re,ot+=_*Mt,ht+=_*Rt,Vt+=_*Le,yt+=_*Bt,wt+=_*Lt,fe+=_*Oe,dt+=_*Ot,ft+=_*mt,Wt+=_*ue,xt+=_*It,pt+=_*Ct,Xt+=_*Ue,N+=_*Ft,m+=_*Ht,_=Z[2],ut+=_*Nt,ot+=_*Re,ht+=_*Mt,Vt+=_*Rt,yt+=_*Le,wt+=_*Bt,fe+=_*Lt,dt+=_*Oe,ft+=_*Ot,Wt+=_*mt,xt+=_*ue,pt+=_*It,Xt+=_*Ct,N+=_*Ue,m+=_*Ft,E+=_*Ht,_=Z[3],ot+=_*Nt,ht+=_*Re,Vt+=_*Mt,yt+=_*Rt,wt+=_*Le,fe+=_*Bt,dt+=_*Lt,ft+=_*Oe,Wt+=_*Ot,xt+=_*mt,pt+=_*ue,Xt+=_*It,N+=_*Ct,m+=_*Ue,E+=_*Ft,U+=_*Ht,_=Z[4],ht+=_*Nt,Vt+=_*Re,yt+=_*Mt,wt+=_*Rt,fe+=_*Le,dt+=_*Bt,ft+=_*Lt,Wt+=_*Oe,xt+=_*Ot,pt+=_*mt,Xt+=_*ue,N+=_*It,m+=_*Ct,E+=_*Ue,U+=_*Ft,K+=_*Ht,_=Z[5],Vt+=_*Nt,yt+=_*Re,wt+=_*Mt,fe+=_*Rt,dt+=_*Le,ft+=_*Bt,Wt+=_*Lt,xt+=_*Oe,pt+=_*Ot,Xt+=_*mt,N+=_*ue,m+=_*It,E+=_*Ct,U+=_*Ue,K+=_*Ft,J+=_*Ht,_=Z[6],yt+=_*Nt,wt+=_*Re,fe+=_*Mt,dt+=_*Rt,ft+=_*Le,Wt+=_*Bt,xt+=_*Lt,pt+=_*Oe,Xt+=_*Ot,N+=_*mt,m+=_*ue,E+=_*It,U+=_*Ct,K+=_*Ue,J+=_*Ft,Q+=_*Ht,_=Z[7],wt+=_*Nt,fe+=_*Re,dt+=_*Mt,ft+=_*Rt,Wt+=_*Le,xt+=_*Bt,pt+=_*Lt,Xt+=_*Oe,N+=_*Ot,m+=_*mt,E+=_*ue,U+=_*It,K+=_*Ct,J+=_*Ue,Q+=_*Ft,at+=_*Ht,_=Z[8],fe+=_*Nt,dt+=_*Re,ft+=_*Mt,Wt+=_*Rt,xt+=_*Le,pt+=_*Bt,Xt+=_*Lt,N+=_*Oe,m+=_*Ot,E+=_*mt,U+=_*ue,K+=_*It,J+=_*Ct,Q+=_*Ue,at+=_*Ft,Dt+=_*Ht,_=Z[9],dt+=_*Nt,ft+=_*Re,Wt+=_*Mt,xt+=_*Rt,pt+=_*Le,Xt+=_*Bt,N+=_*Lt,m+=_*Oe,E+=_*Ot,U+=_*mt,K+=_*ue,J+=_*It,Q+=_*Ct,at+=_*Ue,Dt+=_*Ft,lt+=_*Ht,_=Z[10],ft+=_*Nt,Wt+=_*Re,xt+=_*Mt,pt+=_*Rt,Xt+=_*Le,N+=_*Bt,m+=_*Lt,E+=_*Oe,U+=_*Ot,K+=_*mt,J+=_*ue,Q+=_*It,at+=_*Ct,Dt+=_*Ue,lt+=_*Ft,gt+=_*Ht,_=Z[11],Wt+=_*Nt,xt+=_*Re,pt+=_*Mt,Xt+=_*Rt,N+=_*Le,m+=_*Bt,E+=_*Lt,U+=_*Oe,K+=_*Ot,J+=_*mt,Q+=_*ue,at+=_*It,Dt+=_*Ct,lt+=_*Ue,gt+=_*Ft,Tt+=_*Ht,_=Z[12],xt+=_*Nt,pt+=_*Re,Xt+=_*Mt,N+=_*Rt,m+=_*Le,E+=_*Bt,U+=_*Lt,K+=_*Oe,J+=_*Ot,Q+=_*mt,at+=_*ue,Dt+=_*It,lt+=_*Ct,gt+=_*Ue,Tt+=_*Ft,ae+=_*Ht,_=Z[13],pt+=_*Nt,Xt+=_*Re,N+=_*Mt,m+=_*Rt,E+=_*Le,U+=_*Bt,K+=_*Lt,J+=_*Oe,Q+=_*Ot,at+=_*mt,Dt+=_*ue,lt+=_*It,gt+=_*Ct,Tt+=_*Ue,ae+=_*Ft,ce+=_*Ht,_=Z[14],Xt+=_*Nt,N+=_*Re,m+=_*Mt,E+=_*Rt,U+=_*Le,K+=_*Bt,J+=_*Lt,Q+=_*Oe,at+=_*Ot,Dt+=_*mt,lt+=_*ue,gt+=_*It,Tt+=_*Ct,ae+=_*Ue,ce+=_*Ft,Ai+=_*Ht,_=Z[15],N+=_*Nt,m+=_*Re,E+=_*Mt,U+=_*Rt,K+=_*Le,J+=_*Bt,Q+=_*Lt,at+=_*Oe,Dt+=_*Ot,lt+=_*mt,gt+=_*ue,Tt+=_*It,ae+=_*Ct,ce+=_*Ue,Ai+=_*Ft,pe+=_*Ht,it+=38*m,st+=38*E,ut+=38*U,ot+=38*K,ht+=38*J,Vt+=38*Q,yt+=38*at,wt+=38*Dt,fe+=38*lt,dt+=38*gt,ft+=38*Tt,Wt+=38*ae,xt+=38*ce,pt+=38*Ai,Xt+=38*pe,j=1,_=it+j+65535,j=Math.floor(_/65536),it=_-j*65536,_=st+j+65535,j=Math.floor(_/65536),st=_-j*65536,_=ut+j+65535,j=Math.floor(_/65536),ut=_-j*65536,_=ot+j+65535,j=Math.floor(_/65536),ot=_-j*65536,_=ht+j+65535,j=Math.floor(_/65536),ht=_-j*65536,_=Vt+j+65535,j=Math.floor(_/65536),Vt=_-j*65536,_=yt+j+65535,j=Math.floor(_/65536),yt=_-j*65536,_=wt+j+65535,j=Math.floor(_/65536),wt=_-j*65536,_=fe+j+65535,j=Math.floor(_/65536),fe=_-j*65536,_=dt+j+65535,j=Math.floor(_/65536),dt=_-j*65536,_=ft+j+65535,j=Math.floor(_/65536),ft=_-j*65536,_=Wt+j+65535,j=Math.floor(_/65536),Wt=_-j*65536,_=xt+j+65535,j=Math.floor(_/65536),xt=_-j*65536,_=pt+j+65535,j=Math.floor(_/65536),pt=_-j*65536,_=Xt+j+65535,j=Math.floor(_/65536),Xt=_-j*65536,_=N+j+65535,j=Math.floor(_/65536),N=_-j*65536,it+=j-1+37*(j-1),j=1,_=it+j+65535,j=Math.floor(_/65536),it=_-j*65536,_=st+j+65535,j=Math.floor(_/65536),st=_-j*65536,_=ut+j+65535,j=Math.floor(_/65536),ut=_-j*65536,_=ot+j+65535,j=Math.floor(_/65536),ot=_-j*65536,_=ht+j+65535,j=Math.floor(_/65536),ht=_-j*65536,_=Vt+j+65535,j=Math.floor(_/65536),Vt=_-j*65536,_=yt+j+65535,j=Math.floor(_/65536),yt=_-j*65536,_=wt+j+65535,j=Math.floor(_/65536),wt=_-j*65536,_=fe+j+65535,j=Math.floor(_/65536),fe=_-j*65536,_=dt+j+65535,j=Math.floor(_/65536),dt=_-j*65536,_=ft+j+65535,j=Math.floor(_/65536),ft=_-j*65536,_=Wt+j+65535,j=Math.floor(_/65536),Wt=_-j*65536,_=xt+j+65535,j=Math.floor(_/65536),xt=_-j*65536,_=pt+j+65535,j=Math.floor(_/65536),pt=_-j*65536,_=Xt+j+65535,j=Math.floor(_/65536),Xt=_-j*65536,_=N+j+65535,j=Math.floor(_/65536),N=_-j*65536,it+=j-1+37*(j-1),q[0]=it,q[1]=st,q[2]=ut,q[3]=ot,q[4]=ht,q[5]=Vt,q[6]=yt,q[7]=wt,q[8]=fe,q[9]=dt,q[10]=ft,q[11]=Wt,q[12]=xt,q[13]=pt,q[14]=Xt,q[15]=N}function O(q,Z){$(q,Z,Z)}function M(q,Z){var W=i(),_;for(_=0;_<16;_++)W[_]=Z[_];for(_=253;_>=0;_--)O(W,W),_!==2&&_!==4&&$(W,W,Z);for(_=0;_<16;_++)q[_]=W[_]}function x(q,Z){var W=i(),_;for(_=0;_<16;_++)W[_]=Z[_];for(_=250;_>=0;_--)O(W,W),_!==1&&$(W,W,Z);for(_=0;_<16;_++)q[_]=W[_]}function b(q,Z){var W=i(),_=i(),j=i(),it=i(),st=i(),ut=i(),ot=i(),ht=i(),Vt=i();z(W,q[1],q[0]),z(Vt,Z[1],Z[0]),$(W,W,Vt),V(_,q[0],q[1]),V(Vt,Z[0],Z[1]),$(_,_,Vt),$(j,q[3],Z[3]),$(j,j,h),$(it,q[2],Z[2]),V(it,it,it),z(st,_,W),z(ut,it,j),V(ot,it,j),V(ht,_,W),$(q[0],st,ut),$(q[1],ht,ot),$(q[2],ot,ut),$(q[3],st,ht)}function c(q,Z,W){for(var _=0;_<4;_++)B(q[_],Z[_],W)}function l(q,Z){var W=i(),_=i(),j=i();M(j,Z[2]),$(W,Z[0],j),$(_,Z[1],j),C(q,_),q[31]^=D(W)<<7}function g(q,Z,W){L(q[0],o),L(q[1],a),L(q[2],a),L(q[3],o);for(var _=255;_>=0;--_){var j=W[_/8|0]>>(_&7)&1;c(q,Z,j),b(Z,q),b(q,q),c(q,Z,j)}}function v(q,Z){var W=[i(),i(),i(),i()];L(W[0],f),L(W[1],y),L(W[2],a),$(W[3],f,y),g(q,W,Z)}function d(q){if(q.length!==e.SEED_LENGTH)throw new Error("ed25519: seed must be "+e.SEED_LENGTH+" bytes");var Z=r.hash(q);Z[0]&=248,Z[31]&=127,Z[31]|=64;var W=new Uint8Array(32),_=[i(),i(),i(),i()];v(_,Z),l(W,_);var j=new Uint8Array(64);return j.set(q),j.set(W,32),{publicKey:W,secretKey:j}}e.generateKeyPairFromSeed=d;function A(q){var Z=t.randomBytes(32,q),W=d(Z);return n.wipe(Z),W}e.generateKeyPair=A;function R(q){if(q.length!==e.SECRET_KEY_LENGTH)throw new Error("ed25519: secret key must be "+e.SECRET_KEY_LENGTH+" bytes");return new Uint8Array(q.subarray(32))}e.extractPublicKeyFromSecretKey=R;var S=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function p(q,Z){var W,_,j,it;for(_=63;_>=32;--_){for(W=0,j=_-32,it=_-12;j<it;++j)Z[j]+=W-16*Z[_]*S[j-(_-32)],W=Math.floor((Z[j]+128)/256),Z[j]-=W*256;Z[j]+=W,Z[_]=0}for(W=0,j=0;j<32;j++)Z[j]+=W-(Z[31]>>4)*S[j],W=Z[j]>>8,Z[j]&=255;for(j=0;j<32;j++)Z[j]-=W*S[j];for(_=0;_<32;_++)Z[_+1]+=Z[_]>>8,q[_]=Z[_]&255}function P(q){for(var Z=new Float64Array(64),W=0;W<64;W++)Z[W]=q[W];for(var W=0;W<64;W++)q[W]=0;p(q,Z)}function H(q,Z){var W=new Float64Array(64),_=[i(),i(),i(),i()],j=r.hash(q.subarray(0,32));j[0]&=248,j[31]&=127,j[31]|=64;var it=new Uint8Array(64);it.set(j.subarray(32),32);var st=new r.SHA512;st.update(it.subarray(32)),st.update(Z);var ut=st.digest();st.clean(),P(ut),v(_,ut),l(it,_),st.reset(),st.update(it.subarray(0,32)),st.update(q.subarray(32)),st.update(Z);var ot=st.digest();P(ot);for(var ht=0;ht<32;ht++)W[ht]=ut[ht];for(var ht=0;ht<32;ht++)for(var Vt=0;Vt<32;Vt++)W[ht+Vt]+=ot[ht]*j[Vt];return p(it.subarray(32),W),it}e.sign=H;function G(q,Z){var W=i(),_=i(),j=i(),it=i(),st=i(),ut=i(),ot=i();return L(q[2],a),F(q[1],Z),O(j,q[1]),$(it,j,u),z(j,j,q[2]),V(it,q[2],it),O(st,it),O(ut,st),$(ot,ut,st),$(W,ot,j),$(W,W,it),x(W,W),$(W,W,j),$(W,W,it),$(W,W,it),$(q[0],W,it),O(_,q[0]),$(_,_,it),T(_,j)&&$(q[0],q[0],w),O(_,q[0]),$(_,_,it),T(_,j)?-1:(D(q[0])===Z[31]>>7&&z(q[0],o,q[0]),$(q[3],q[0],q[1]),0)}function Y(q,Z,W){var _=new Uint8Array(32),j=[i(),i(),i(),i()],it=[i(),i(),i(),i()];if(W.length!==e.SIGNATURE_LENGTH)throw new Error("ed25519: signature must be "+e.SIGNATURE_LENGTH+" bytes");if(G(it,q))return!1;var st=new r.SHA512;st.update(W.subarray(0,32)),st.update(q),st.update(Z);var ut=st.digest();return P(ut),g(j,it,ut),v(it,W.subarray(32)),b(j,it),l(_,j),!k(W,_)}e.verify=Y;function rt(q){var Z=[i(),i(),i(),i()];if(G(Z,q))throw new Error("Ed25519: invalid public key");var W=i(),_=i(),j=Z[1];V(W,a,j),z(_,a,j),M(_,_),$(W,W,_);var it=new Uint8Array(32);return C(it,W),it}e.convertPublicKeyToX25519=rt;function nt(q){var Z=r.hash(q.subarray(0,32));Z[0]&=248,Z[31]&=127,Z[31]|=64;var W=new Uint8Array(Z.subarray(0,32));return n.wipe(Z),W}e.convertSecretKeyToX25519=nt}(Zv);var Tm={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=St,r=Pi;e.BLOCK_SIZE=128,e.DIGEST_LENGTH=64,e.KEY_LENGTH=64,e.PERSONALIZATION_LENGTH=16,e.SALT_LENGTH=16,e.MAX_LEAF_SIZE=Math.pow(2,32)-1,e.MAX_FANOUT=255,e.MAX_MAX_DEPTH=255;var n=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),i=[[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6],[22,16,24,0,10,4,30,26,20,28,6,12,14,2,18,8],[14,18,6,2,26,24,22,28,4,12,10,20,8,0,30,16],[18,0,10,14,4,8,20,30,28,2,22,24,12,16,6,26],[4,24,12,20,0,22,16,6,8,26,14,10,30,28,2,18],[24,10,2,30,28,26,8,20,0,14,12,6,18,4,16,22],[26,22,14,28,24,2,6,18,10,0,30,8,16,12,4,20],[12,30,28,18,22,6,0,16,24,4,26,14,2,8,20,10],[20,4,16,8,14,12,2,10,30,22,18,28,6,24,26,0],[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6]],s=function(){function a(u,h){if(u===void 0&&(u=64),this.digestLength=u,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(n),this._buffer=new Uint8Array(e.BLOCK_SIZE),this._bufferLength=0,this._ctr=new Uint32Array(4),this._flag=new Uint32Array(4),this._lastNode=!1,this._finished=!1,this._vtmp=new Uint32Array(32),this._mtmp=new Uint32Array(32),u<1||u>e.DIGEST_LENGTH)throw new Error("blake2b: wrong digest length");h&&this.validateConfig(h);var f=0;h&&h.key&&(f=h.key.length);var y=1,w=1;h&&h.tree&&(y=h.tree.fanout,w=h.tree.maxDepth),this._state[0]^=u|f<<8|y<<16|w<<24,h&&h.tree&&(this._state[1]^=h.tree.leafSize,this._state[2]^=h.tree.nodeOffsetLowBits,this._state[3]^=h.tree.nodeOffsetHighBits,this._state[4]^=h.tree.nodeDepth|h.tree.innerDigestLength<<8,this._lastNode=h.tree.lastNode),h&&h.salt&&(this._state[8]^=t.readUint32LE(h.salt,0),this._state[9]^=t.readUint32LE(h.salt,4),this._state[10]^=t.readUint32LE(h.salt,8),this._state[11]^=t.readUint32LE(h.salt,12)),h&&h.personalization&&(this._state[12]^=t.readUint32LE(h.personalization,0),this._state[13]^=t.readUint32LE(h.personalization,4),this._state[14]^=t.readUint32LE(h.personalization,8),this._state[15]^=t.readUint32LE(h.personalization,12)),this._initialState=new Uint32Array(this._state),h&&h.key&&f>0&&(this._paddedKey=new Uint8Array(e.BLOCK_SIZE),this._paddedKey.set(h.key),this._buffer.set(this._paddedKey),this._bufferLength=e.BLOCK_SIZE)}return a.prototype.reset=function(){return this._state.set(this._initialState),this._paddedKey?(this._buffer.set(this._paddedKey),this._bufferLength=e.BLOCK_SIZE):this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._finished=!1,this},a.prototype.validateConfig=function(u){if(u.key&&u.key.length>e.KEY_LENGTH)throw new Error("blake2b: wrong key length");if(u.salt&&u.salt.length!==e.SALT_LENGTH)throw new Error("blake2b: wrong salt length");if(u.personalization&&u.personalization.length!==e.PERSONALIZATION_LENGTH)throw new Error("blake2b: wrong personalization length");if(u.tree){if(u.tree.fanout<0||u.tree.fanout>e.MAX_FANOUT)throw new Error("blake2b: wrong tree fanout");if(u.tree.maxDepth<0||u.tree.maxDepth>e.MAX_MAX_DEPTH)throw new Error("blake2b: wrong tree depth");if(u.tree.leafSize<0||u.tree.leafSize>e.MAX_LEAF_SIZE)throw new Error("blake2b: wrong leaf size");if(u.tree.innerDigestLength<0||u.tree.innerDigestLength>e.DIGEST_LENGTH)throw new Error("blake2b: wrong tree inner digest length")}},a.prototype.update=function(u,h){if(h===void 0&&(h=u.length),this._finished)throw new Error("blake2b: can't update because hash was finished.");var f=e.BLOCK_SIZE-this._bufferLength,y=0;if(h===0)return this;if(h>f){for(var w=0;w<f;w++)this._buffer[this._bufferLength+w]=u[y+w];this._processBlock(e.BLOCK_SIZE),y+=f,h-=f,this._bufferLength=0}for(;h>e.BLOCK_SIZE;){for(var w=0;w<e.BLOCK_SIZE;w++)this._buffer[w]=u[y+w];this._processBlock(e.BLOCK_SIZE),y+=e.BLOCK_SIZE,h-=e.BLOCK_SIZE,this._bufferLength=0}for(var w=0;w<h;w++)this._buffer[this._bufferLength+w]=u[y+w];return this._bufferLength+=h,this},a.prototype.finish=function(u){if(!this._finished){for(var h=this._bufferLength;h<e.BLOCK_SIZE;h++)this._buffer[h]=0;this._flag[0]=4294967295,this._flag[1]=4294967295,this._lastNode&&(this._flag[2]=4294967295,this._flag[3]=4294967295),this._processBlock(this._bufferLength),this._finished=!0}for(var f=this._buffer.subarray(0,64),h=0;h<16;h++)t.writeUint32LE(this._state[h],f,h*4);return u.set(f.subarray(0,u.length)),this},a.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},a.prototype.clean=function(){r.wipe(this._vtmp),r.wipe(this._mtmp),r.wipe(this._state),r.wipe(this._buffer),r.wipe(this._initialState),this._paddedKey&&r.wipe(this._paddedKey),this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._lastNode=!1,this._finished=!1},a.prototype.saveState=function(){if(this._finished)throw new Error("blake2b: cannot save finished state");return{state:new Uint32Array(this._state),buffer:new Uint8Array(this._buffer),bufferLength:this._bufferLength,ctr:new Uint32Array(this._ctr),flag:new Uint32Array(this._flag),lastNode:this._lastNode,paddedKey:this._paddedKey?new Uint8Array(this._paddedKey):void 0,initialState:new Uint32Array(this._initialState)}},a.prototype.restoreState=function(u){return this._state.set(u.state),this._buffer.set(u.buffer),this._bufferLength=u.bufferLength,this._ctr.set(u.ctr),this._flag.set(u.flag),this._lastNode=u.lastNode,this._paddedKey&&r.wipe(this._paddedKey),this._paddedKey=u.paddedKey?new Uint8Array(u.paddedKey):void 0,this._initialState.set(u.initialState),this},a.prototype.cleanSavedState=function(u){r.wipe(u.state),r.wipe(u.buffer),r.wipe(u.initialState),u.paddedKey&&r.wipe(u.paddedKey),u.bufferLength=0,r.wipe(u.ctr),r.wipe(u.flag),u.lastNode=!1},a.prototype._G=function(u,h,f,y,w,L,I,B,C,k,T,D,F){var V=u[h],z=u[L],$=u[f],O=u[I],M=u[y],x=u[B],b=u[w],c=u[C],l=V&65535,g=V>>>16,v=z&65535,d=z>>>16;l+=$&65535,g+=$>>>16,v+=O&65535,d+=O>>>16,g+=l>>>16,v+=g>>>16,d+=v>>>16,z=v&65535|d<<16,V=l&65535|g<<16,l=V&65535,g=V>>>16,v=z&65535,d=z>>>16,l+=k&65535,g+=k>>>16,v+=T&65535,d+=T>>>16,g+=l>>>16,v+=g>>>16,d+=v>>>16,z=v&65535|d<<16,V=l&65535|g<<16,b^=V,c^=z,l=c,c=b,b=l,l=M&65535,g=M>>>16,v=x&65535,d=x>>>16,l+=b&65535,g+=b>>>16,v+=c&65535,d+=c>>>16,g+=l>>>16,v+=g>>>16,d+=v>>>16,x=v&65535|d<<16,M=l&65535|g<<16,$^=M,O^=x,l=$<<8|O>>>24,$=O<<8|$>>>24,O=l,l=V&65535,g=V>>>16,v=z&65535,d=z>>>16,l+=$&65535,g+=$>>>16,v+=O&65535,d+=O>>>16,g+=l>>>16,v+=g>>>16,d+=v>>>16,z=v&65535|d<<16,V=l&65535|g<<16,l=V&65535,g=V>>>16,v=z&65535,d=z>>>16,l+=D&65535,g+=D>>>16,v+=F&65535,d+=F>>>16,g+=l>>>16,v+=g>>>16,d+=v>>>16,z=v&65535|d<<16,V=l&65535|g<<16,b^=V,c^=z,l=b<<16|c>>>16,b=c<<16|b>>>16,c=l,l=M&65535,g=M>>>16,v=x&65535,d=x>>>16,l+=b&65535,g+=b>>>16,v+=c&65535,d+=c>>>16,g+=l>>>16,v+=g>>>16,d+=v>>>16,x=v&65535|d<<16,M=l&65535|g<<16,$^=M,O^=x,l=O<<1|$>>>31,$=$<<1|O>>>31,O=l,u[h]=V,u[L]=z,u[f]=$,u[I]=O,u[y]=M,u[B]=x,u[w]=b,u[C]=c},a.prototype._incrementCounter=function(u){for(var h=0;h<3;h++){var f=this._ctr[h]+u;if(this._ctr[h]=f>>>0,this._ctr[h]===f)return;u=1}},a.prototype._processBlock=function(u){this._incrementCounter(u);var h=this._vtmp;h.set(this._state),h.set(n,16),h[12*2+0]^=this._ctr[0],h[12*2+1]^=this._ctr[1],h[13*2+0]^=this._ctr[2],h[13*2+1]^=this._ctr[3],h[14*2+0]^=this._flag[0],h[14*2+1]^=this._flag[1],h[15*2+0]^=this._flag[2],h[15*2+1]^=this._flag[3];for(var f=this._mtmp,y=0;y<32;y++)f[y]=t.readUint32LE(this._buffer,y*4);for(var w=0;w<12;w++)this._G(h,0,8,16,24,1,9,17,25,f[i[w][0]],f[i[w][0]+1],f[i[w][1]],f[i[w][1]+1]),this._G(h,2,10,18,26,3,11,19,27,f[i[w][2]],f[i[w][2]+1],f[i[w][3]],f[i[w][3]+1]),this._G(h,4,12,20,28,5,13,21,29,f[i[w][4]],f[i[w][4]+1],f[i[w][5]],f[i[w][5]+1]),this._G(h,6,14,22,30,7,15,23,31,f[i[w][6]],f[i[w][6]+1],f[i[w][7]],f[i[w][7]+1]),this._G(h,0,10,20,30,1,11,21,31,f[i[w][8]],f[i[w][8]+1],f[i[w][9]],f[i[w][9]+1]),this._G(h,2,12,22,24,3,13,23,25,f[i[w][10]],f[i[w][10]+1],f[i[w][11]],f[i[w][11]+1]),this._G(h,4,14,16,26,5,15,17,27,f[i[w][12]],f[i[w][12]+1],f[i[w][13]],f[i[w][13]+1]),this._G(h,6,8,18,28,7,9,19,29,f[i[w][14]],f[i[w][14]+1],f[i[w][15]],f[i[w][15]+1]);for(var y=0;y<16;y++)this._state[y]^=h[y]^h[y+16]},a}();e.BLAKE2b=s;function o(a,u,h){u===void 0&&(u=e.DIGEST_LENGTH);var f=new s(u,h);f.update(a);var y=f.digest();return f.clean(),y}e.hash=o})(Tm);const Rm="Input must be an string, Buffer or Uint8Array";function Lm(e){let t;if(e instanceof Uint8Array)t=e;else if(typeof e=="string")t=new TextEncoder().encode(e);else throw new Error(Rm);return t}function Om(e){return Array.prototype.map.call(e,function(t){return(t<16?"0":"")+t.toString(16)}).join("")}function ha(e){return(4294967296+e).toString(16).substring(1)}function Im(e,t,r){let n=`
`+e+" = ";for(let i=0;i<t.length;i+=2){if(r===32)n+=ha(t[i]).toUpperCase(),n+=" ",n+=ha(t[i+1]).toUpperCase();else if(r===64)n+=ha(t[i+1]).toUpperCase(),n+=ha(t[i]).toUpperCase();else throw new Error("Invalid size "+r);i%6===4?n+=`
`+new Array(e.length+4).join(" "):i<t.length-2&&(n+=" ")}console.log(n)}function Nm(e,t,r){let n=new Date().getTime();const i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=o%256;const s=new Date().getTime();console.log("Generated random input in "+(s-n)+"ms"),n=s;for(let o=0;o<r;o++){const a=e(i),u=new Date().getTime(),h=u-n;n=u,console.log("Hashed in "+h+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(h/1e3)*100)/100+" MB PER SECOND")}}var sh={normalizeInput:Lm,toHex:Om,debugPrint:Im,testSpeed:Nm};const la=sh;function da(e,t,r){const n=e[t]+e[r];let i=e[t+1]+e[r+1];n>=4294967296&&i++,e[t]=n,e[t+1]=i}function oh(e,t,r,n){let i=e[t]+r;r<0&&(i+=4294967296);let s=e[t+1]+n;i>=4294967296&&s++,e[t]=i,e[t+1]=s}function ah(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function Gn(e,t,r,n,i,s){const o=zs[i],a=zs[i+1],u=zs[s],h=zs[s+1];da(_t,e,t),oh(_t,e,o,a);let f=_t[n]^_t[e],y=_t[n+1]^_t[e+1];_t[n]=y,_t[n+1]=f,da(_t,r,n),f=_t[t]^_t[r],y=_t[t+1]^_t[r+1],_t[t]=f>>>24^y<<8,_t[t+1]=y>>>24^f<<8,da(_t,e,t),oh(_t,e,u,h),f=_t[n]^_t[e],y=_t[n+1]^_t[e+1],_t[n]=f>>>16^y<<16,_t[n+1]=y>>>16^f<<16,da(_t,r,n),f=_t[t]^_t[r],y=_t[t+1]^_t[r+1],_t[t]=y>>>31^f<<1,_t[t+1]=f>>>31^y<<1}const ch=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Mm=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],We=new Uint8Array(Mm.map(function(e){return e*2})),_t=new Uint32Array(32),zs=new Uint32Array(32);function uh(e,t){let r=0;for(r=0;r<16;r++)_t[r]=e.h[r],_t[r+16]=ch[r];for(_t[24]=_t[24]^e.t,_t[25]=_t[25]^e.t/4294967296,t&&(_t[28]=~_t[28],_t[29]=~_t[29]),r=0;r<32;r++)zs[r]=ah(e.b,4*r);for(r=0;r<12;r++)Gn(0,8,16,24,We[r*16+0],We[r*16+1]),Gn(2,10,18,26,We[r*16+2],We[r*16+3]),Gn(4,12,20,28,We[r*16+4],We[r*16+5]),Gn(6,14,22,30,We[r*16+6],We[r*16+7]),Gn(0,10,20,30,We[r*16+8],We[r*16+9]),Gn(2,12,22,24,We[r*16+10],We[r*16+11]),Gn(4,14,16,26,We[r*16+12],We[r*16+13]),Gn(6,8,18,28,We[r*16+14],We[r*16+15]);for(r=0;r<16;r++)e.h[r]=e.h[r]^_t[r]^_t[r+16]}const qn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function fh(e,t,r,n){if(e===0||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(r&&r.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(n&&n.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};qn.fill(0),qn[0]=e,t&&(qn[1]=t.length),qn[2]=1,qn[3]=1,r&&qn.set(r,32),n&&qn.set(n,48);for(let s=0;s<16;s++)i.h[s]=ch[s]^ah(qn,s*4);return t&&(fc(i,t),i.c=128),i}function fc(e,t){for(let r=0;r<t.length;r++)e.c===128&&(e.t+=e.c,uh(e,!1),e.c=0),e.b[e.c++]=t[r]}function hh(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;uh(e,!0);const t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(r&3);return t}function lh(e,t,r,n,i){r=r||64,e=la.normalizeInput(e),n&&(n=la.normalizeInput(n)),i&&(i=la.normalizeInput(i));const s=fh(r,t,n,i);return fc(s,e),hh(s)}function Bm(e,t,r,n,i){const s=lh(e,t,r,n,i);return la.toHex(s)}var Cm={blake2b:lh,blake2bHex:Bm,blake2bInit:fh,blake2bUpdate:fc,blake2bFinal:hh};const dh=sh;function Um(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function Wn(e,t,r,n,i,s){Zt[e]=Zt[e]+Zt[t]+i,Zt[n]=pa(Zt[n]^Zt[e],16),Zt[r]=Zt[r]+Zt[n],Zt[t]=pa(Zt[t]^Zt[r],12),Zt[e]=Zt[e]+Zt[t]+s,Zt[n]=pa(Zt[n]^Zt[e],8),Zt[r]=Zt[r]+Zt[n],Zt[t]=pa(Zt[t]^Zt[r],7)}function pa(e,t){return e>>>t^e<<32-t}const ph=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ye=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Zt=new Uint32Array(16),je=new Uint32Array(16);function gh(e,t){let r=0;for(r=0;r<8;r++)Zt[r]=e.h[r],Zt[r+8]=ph[r];for(Zt[12]^=e.t,Zt[13]^=e.t/4294967296,t&&(Zt[14]=~Zt[14]),r=0;r<16;r++)je[r]=Um(e.b,4*r);for(r=0;r<10;r++)Wn(0,4,8,12,je[Ye[r*16+0]],je[Ye[r*16+1]]),Wn(1,5,9,13,je[Ye[r*16+2]],je[Ye[r*16+3]]),Wn(2,6,10,14,je[Ye[r*16+4]],je[Ye[r*16+5]]),Wn(3,7,11,15,je[Ye[r*16+6]],je[Ye[r*16+7]]),Wn(0,5,10,15,je[Ye[r*16+8]],je[Ye[r*16+9]]),Wn(1,6,11,12,je[Ye[r*16+10]],je[Ye[r*16+11]]),Wn(2,7,8,13,je[Ye[r*16+12]],je[Ye[r*16+13]]),Wn(3,4,9,14,je[Ye[r*16+14]],je[Ye[r*16+15]]);for(r=0;r<8;r++)e.h[r]^=Zt[r]^Zt[r+8]}function vh(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");const r=t?t.length:0;if(t&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");const n={h:new Uint32Array(ph),b:new Uint8Array(64),c:0,t:0,outlen:e};return n.h[0]^=16842752^r<<8^e,r>0&&(hc(n,t),n.c=64),n}function hc(e,t){for(let r=0;r<t.length;r++)e.c===64&&(e.t+=e.c,gh(e,!1),e.c=0),e.b[e.c++]=t[r]}function mh(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;gh(e,!0);const t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(r&3)&255;return t}function xh(e,t,r){r=r||32,e=dh.normalizeInput(e);const n=vh(r,t);return hc(n,e),mh(n)}function km(e,t,r){const n=xh(e,t,r);return dh.toHex(n)}var Dm={blake2s:xh,blake2sHex:km,blake2sInit:vh,blake2sUpdate:hc,blake2sFinal:mh};const Vs=Cm,js=Dm;var Fm={blake2b:Vs.blake2b,blake2bHex:Vs.blake2bHex,blake2bInit:Vs.blake2bInit,blake2bUpdate:Vs.blake2bUpdate,blake2bFinal:Vs.blake2bFinal,blake2s:js.blake2s,blake2sHex:js.blake2sHex,blake2sInit:js.blake2sInit,blake2sUpdate:js.blake2sUpdate,blake2sFinal:js.blake2sFinal},we={exports:{}};typeof Object.create=="function"?we.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:we.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}};var or={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,t){var r=En,n=r.Buffer;function i(o,a){for(var u in o)a[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=s);function s(o,a,u){return n(o,a,u)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,u)},s.alloc=function(o,a,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var h=n(o);return a!==void 0?typeof u=="string"?h.fill(a,u):h.fill(a):h.fill(0),h},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(or,or.exports);var ga={exports:{}},as={},va={exports:{}},cs=typeof Reflect=="object"?Reflect:null,bh=cs&&typeof cs.apply=="function"?cs.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},ma;cs&&typeof cs.ownKeys=="function"?ma=cs.ownKeys:Object.getOwnPropertySymbols?ma=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:ma=function(t){return Object.getOwnPropertyNames(t)};function Hm(e){console&&console.warn&&console.warn(e)}var yh=Number.isNaN||function(t){return t!==t};function ie(){ie.init.call(this)}va.exports=ie,va.exports.once=Vm,ie.EventEmitter=ie,ie.prototype._events=void 0,ie.prototype._eventsCount=0,ie.prototype._maxListeners=void 0;var wh=10;function xa(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(ie,"defaultMaxListeners",{enumerable:!0,get:function(){return wh},set:function(e){if(typeof e!="number"||e<0||yh(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");wh=e}}),ie.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ie.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||yh(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Eh(e){return e._maxListeners===void 0?ie.defaultMaxListeners:e._maxListeners}ie.prototype.getMaxListeners=function(){return Eh(this)},ie.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=t==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=s[t];if(u===void 0)return!1;if(typeof u=="function")bh(u,this,r);else for(var h=u.length,f=Th(u,h),n=0;n<h;++n)bh(f[n],this,r);return!0};function _h(e,t,r,n){var i,s,o;if(xa(r),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),o===void 0)o=s[t]=r,++e._eventsCount;else if(typeof o=="function"?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Eh(e),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,Hm(a)}return e}ie.prototype.addListener=function(t,r){return _h(this,t,r,!1)},ie.prototype.on=ie.prototype.addListener,ie.prototype.prependListener=function(t,r){return _h(this,t,r,!0)};function Km(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Sh(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=Km.bind(n);return i.listener=r,n.wrapFn=i,i}ie.prototype.once=function(t,r){return xa(r),this.on(t,Sh(this,t,r)),this},ie.prototype.prependOnceListener=function(t,r){return xa(r),this.prependListener(t,Sh(this,t,r)),this},ie.prototype.removeListener=function(t,r){var n,i,s,o,a;if(xa(r),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():$m(n,s),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,a||r)}return this},ie.prototype.off=ie.prototype.removeListener,ie.prototype.removeAllListeners=function(t){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(t,r[i]);return this};function Ah(e,t,r){var n=e._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?zm(i):Th(i,i.length)}ie.prototype.listeners=function(t){return Ah(this,t,!0)},ie.prototype.rawListeners=function(t){return Ah(this,t,!1)},ie.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Ph.call(e,t)},ie.prototype.listenerCount=Ph;function Ph(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ie.prototype.eventNames=function(){return this._eventsCount>0?ma(this._events):[]};function Th(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function $m(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function zm(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function Vm(e,t){return new Promise(function(r,n){function i(o){e.removeListener(t,s),n(o)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",i),r([].slice.call(arguments))}Rh(e,t,s,{once:!0}),t!=="error"&&jm(e,i,{once:!0})})}function jm(e,t,r){typeof e.on=="function"&&Rh(e,"error",t,r)}function Rh(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(s){n.once&&e.removeEventListener(t,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Lh=va.exports.EventEmitter;function Oh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Gm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oh(Object(r),!0).forEach(function(n){qm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ih(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ym(e,t,r){return t&&Ih(e.prototype,t),r&&Ih(e,r),e}var Xm=En,ba=Xm.Buffer,Zm=sc,lc=Zm.inspect,Jm=lc&&lc.custom||"inspect";function Qm(e,t,r){ba.prototype.copy.call(e,t,r)}var tx=function(){function e(){Wm(this,e),this.head=null,this.tail=null,this.length=0}return Ym(e,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return ba.alloc(0);for(var n=ba.allocUnsafe(r>>>0),i=this.head,s=0;i;)Qm(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=ba.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:Jm,value:function(r,n){return lc(this,Gm({},n,{depth:0,customInspect:!1}))}}]),e}();function ex(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(dc,this,e)):process.nextTick(dc,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(s){!t&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(ya,r):(r._writableState.errorEmitted=!0,process.nextTick(Nh,r,s)):process.nextTick(Nh,r,s):t?(process.nextTick(ya,r),t(s)):process.nextTick(ya,r)}),this)}function Nh(e,t){dc(e,t),ya(e)}function ya(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function rx(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function dc(e,t){e.emit("error",t)}function nx(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var Mh={destroy:ex,undestroy:rx,errorOrDestroy:nx},Ti={};function ix(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Bh={};function Ar(e,t,r){r||(r=Error);function n(s,o,a){return typeof t=="string"?t:t(s,o,a)}var i=function(s){ix(o,s);function o(a,u,h){return s.call(this,n(a,u,h))||this}return o}(r);i.prototype.name=r.name,i.prototype.code=e,Bh[e]=i}function Ch(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function sx(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function ox(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function ax(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}Ar("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),Ar("ERR_INVALID_ARG_TYPE",function(e,t,r){var n;typeof t=="string"&&sx(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var i;if(ox(e," argument"))i="The ".concat(e," ").concat(n," ").concat(Ch(t,"type"));else{var s=ax(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(s," ").concat(n," ").concat(Ch(t,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError),Ar("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Ar("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),Ar("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Ar("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),Ar("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Ar("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Ar("ERR_STREAM_WRITE_AFTER_END","write after end"),Ar("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Ar("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),Ar("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ti.codes=Bh;var cx=Ti.codes.ERR_INVALID_OPT_VALUE;function ux(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function fx(e,t,r,n){var i=ux(t,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new cx(s,i)}return Math.floor(i)}return e.objectMode?16:16*1024}var Uh={getHighWaterMark:fx},wa={},pc=or.exports.Buffer,kh=pc.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function hx(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function lx(e){var t=hx(e);if(typeof t!="string"&&(pc.isEncoding===kh||!kh(e)))throw new Error("Unknown encoding: "+e);return t||e}wa.StringDecoder=Gs;function Gs(e){this.encoding=lx(e);var t;switch(this.encoding){case"utf16le":this.text=xx,this.end=bx,t=4;break;case"utf8":this.fillLast=gx,t=4;break;case"base64":this.text=yx,this.end=wx,t=3;break;default:this.write=Ex,this.end=_x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=pc.allocUnsafe(t)}Gs.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},Gs.prototype.end=mx,Gs.prototype.text=vx,Gs.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function gc(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function dx(e,t,r){var n=t.length-1;if(n<r)return 0;var i=gc(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=gc(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=gc(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function px(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function gx(e){var t=this.lastTotal-this.lastNeed,r=px(this,e);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function vx(e,t){var r=dx(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function mx(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function xx(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function bx(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function yx(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function wx(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Ex(e){return e.toString(this.encoding)}function _x(e){return e&&e.length?this.write(e):""}var Dh=Ti.codes.ERR_STREAM_PREMATURE_CLOSE;function Sx(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function Ax(){}function Px(e){return e.setHeader&&typeof e.abort=="function"}function Fh(e,t,r){if(typeof t=="function")return Fh(e,null,t);t||(t={}),r=Sx(r||Ax);var n=t.readable||t.readable!==!1&&e.readable,i=t.writable||t.writable!==!1&&e.writable,s=function(){e.writable||a()},o=e._writableState&&e._writableState.finished,a=function(){i=!1,o=!0,n||r.call(e)},u=e._readableState&&e._readableState.endEmitted,h=function(){n=!1,u=!0,i||r.call(e)},f=function(I){r.call(e,I)},y=function(){var I;if(n&&!u)return(!e._readableState||!e._readableState.ended)&&(I=new Dh),r.call(e,I);if(i&&!o)return(!e._writableState||!e._writableState.ended)&&(I=new Dh),r.call(e,I)},w=function(){e.req.on("finish",a)};return Px(e)?(e.on("complete",a),e.on("abort",y),e.req?w():e.on("request",w)):i&&!e._writableState&&(e.on("end",s),e.on("close",s)),e.on("end",h),e.on("finish",a),t.error!==!1&&e.on("error",f),e.on("close",y),function(){e.removeListener("complete",a),e.removeListener("abort",y),e.removeListener("request",w),e.req&&e.req.removeListener("finish",a),e.removeListener("end",s),e.removeListener("close",s),e.removeListener("finish",a),e.removeListener("end",h),e.removeListener("error",f),e.removeListener("close",y)}}var vc=Fh,Ea;function Yn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tx=vc,Xn=Symbol("lastResolve"),Ri=Symbol("lastReject"),qs=Symbol("error"),_a=Symbol("ended"),Li=Symbol("lastPromise"),mc=Symbol("handlePromise"),Oi=Symbol("stream");function Zn(e,t){return{value:e,done:t}}function Rx(e){var t=e[Xn];if(t!==null){var r=e[Oi].read();r!==null&&(e[Li]=null,e[Xn]=null,e[Ri]=null,t(Zn(r,!1)))}}function Lx(e){process.nextTick(Rx,e)}function Ox(e,t){return function(r,n){e.then(function(){if(t[_a]){r(Zn(void 0,!0));return}t[mc](r,n)},n)}}var Ix=Object.getPrototypeOf(function(){}),Nx=Object.setPrototypeOf((Ea={get stream(){return this[Oi]},next:function(){var t=this,r=this[qs];if(r!==null)return Promise.reject(r);if(this[_a])return Promise.resolve(Zn(void 0,!0));if(this[Oi].destroyed)return new Promise(function(o,a){process.nextTick(function(){t[qs]?a(t[qs]):o(Zn(void 0,!0))})});var n=this[Li],i;if(n)i=new Promise(Ox(n,this));else{var s=this[Oi].read();if(s!==null)return Promise.resolve(Zn(s,!1));i=new Promise(this[mc])}return this[Li]=i,i}},Yn(Ea,Symbol.asyncIterator,function(){return this}),Yn(Ea,"return",function(){var t=this;return new Promise(function(r,n){t[Oi].destroy(null,function(i){if(i){n(i);return}r(Zn(void 0,!0))})})}),Ea),Ix),Mx=function(t){var r,n=Object.create(Nx,(r={},Yn(r,Oi,{value:t,writable:!0}),Yn(r,Xn,{value:null,writable:!0}),Yn(r,Ri,{value:null,writable:!0}),Yn(r,qs,{value:null,writable:!0}),Yn(r,_a,{value:t._readableState.endEmitted,writable:!0}),Yn(r,mc,{value:function(s,o){var a=n[Oi].read();a?(n[Li]=null,n[Xn]=null,n[Ri]=null,s(Zn(a,!1))):(n[Xn]=s,n[Ri]=o)},writable:!0}),r));return n[Li]=null,Tx(t,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[Ri];s!==null&&(n[Li]=null,n[Xn]=null,n[Ri]=null,s(i)),n[qs]=i;return}var o=n[Xn];o!==null&&(n[Li]=null,n[Xn]=null,n[Ri]=null,o(Zn(void 0,!0))),n[_a]=!0}),t.on("readable",Lx.bind(null,n)),n},Bx=Mx,Cx=function(){throw new Error("Readable.from is not available in the browser")};const xc=as;xc.Readable=Yt,Yt.ReadableState=Kh,va.exports.EventEmitter;var Hh=function(t,r){return t.listeners(r).length},Ws=Lh,Sa=En.Buffer,Ux={}.Uint8Array||function(){};function kx(e){return Sa.from(e)}function Dx(e){return Sa.isBuffer(e)||e instanceof Ux}var bc=sc,Ut;bc&&bc.debuglog?Ut=bc.debuglog("stream"):Ut=function(){};var Fx=tx,yc=Mh,Hx=Uh,Kx=Hx.getHighWaterMark,Aa=Ti.codes,$x=Aa.ERR_INVALID_ARG_TYPE,zx=Aa.ERR_STREAM_PUSH_AFTER_EOF,Vx=Aa.ERR_METHOD_NOT_IMPLEMENTED,jx=Aa.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,us,wc,Ec;we.exports(Yt,Ws);var Ys=yc.errorOrDestroy,_c=["error","close","destroy","pause","resume"];function Gx(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function Kh(e,t,r){e=e||{},typeof r!="boolean"&&(r=t instanceof xc.Duplex),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=Kx(this,e,"readableHighWaterMark",r),this.buffer=new Fx,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(us||(us=wa.StringDecoder),this.decoder=new us(e.encoding),this.encoding=e.encoding)}function Yt(e){if(!(this instanceof Yt))return new Yt(e);var t=this instanceof xc.Duplex;this._readableState=new Kh(e,this,t),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Ws.call(this)}Object.defineProperty(Yt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){!this._readableState||(this._readableState.destroyed=t)}}),Yt.prototype.destroy=yc.destroy,Yt.prototype._undestroy=yc.undestroy,Yt.prototype._destroy=function(e,t){t(e)},Yt.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=Sa.from(e,t),t=""),n=!0),$h(this,e,t,!1,n)},Yt.prototype.unshift=function(e){return $h(this,e,null,!0,!1)};function $h(e,t,r,n,i){Ut("readableAddChunk",t);var s=e._readableState;if(t===null)s.reading=!1,Yx(e,s);else{var o;if(i||(o=qx(s,t)),o)Ys(e,o);else if(s.objectMode||t&&t.length>0)if(typeof t!="string"&&!s.objectMode&&Object.getPrototypeOf(t)!==Sa.prototype&&(t=kx(t)),n)s.endEmitted?Ys(e,new jx):Sc(e,s,t,!0);else if(s.ended)Ys(e,new zx);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||t.length!==0?Sc(e,s,t,!1):Ac(e,s)):Sc(e,s,t,!1)}else n||(s.reading=!1,Ac(e,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function Sc(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&Pa(e)),Ac(e,t)}function qx(e,t){var r;return!Dx(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new $x("chunk",["string","Buffer","Uint8Array"],t)),r}Yt.prototype.isPaused=function(){return this._readableState.flowing===!1},Yt.prototype.setEncoding=function(e){us||(us=wa.StringDecoder);var t=new us(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var zh=1073741824;function Wx(e){return e>=zh?e=zh:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Vh(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Wx(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}Yt.prototype.read=function(e){Ut("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended))return Ut("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Tc(this):Pa(this),null;if(e=Vh(e,t),e===0&&t.ended)return t.length===0&&Tc(this),null;var n=t.needReadable;Ut("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,Ut("length less than watermark",n)),t.ended||t.reading?(n=!1,Ut("reading or ended",n)):n&&(Ut("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Vh(r,t)));var i;return e>0?i=qh(e,t):i=null,i===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Tc(this)),i!==null&&this.emit("data",i),i};function Yx(e,t){if(Ut("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?Pa(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,jh(e)))}}function Pa(e){var t=e._readableState;Ut("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(Ut("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(jh,e))}function jh(e){var t=e._readableState;Ut("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,Pc(e)}function Ac(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(Xx,e,t))}function Xx(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){var r=t.length;if(Ut("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}Yt.prototype._read=function(e){Ys(this,new Vx("_read()"))},Yt.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,Ut("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,s=i?a:B;n.endEmitted?process.nextTick(s):r.once("end",s),e.on("unpipe",o);function o(C,k){Ut("onunpipe"),C===r&&k&&k.hasUnpiped===!1&&(k.hasUnpiped=!0,f())}function a(){Ut("onend"),e.end()}var u=Zx(r);e.on("drain",u);var h=!1;function f(){Ut("cleanup"),e.removeListener("close",L),e.removeListener("finish",I),e.removeListener("drain",u),e.removeListener("error",w),e.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",B),r.removeListener("data",y),h=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&u()}r.on("data",y);function y(C){Ut("ondata");var k=e.write(C);Ut("dest.write",k),k===!1&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&Wh(n.pipes,e)!==-1)&&!h&&(Ut("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function w(C){Ut("onerror",C),B(),e.removeListener("error",w),Hh(e,"error")===0&&Ys(e,C)}Gx(e,"error",w);function L(){e.removeListener("finish",I),B()}e.once("close",L);function I(){Ut("onfinish"),e.removeListener("close",L),B()}e.once("finish",I);function B(){Ut("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(Ut("pipe resume"),r.resume()),e};function Zx(e){return function(){var r=e._readableState;Ut("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&Hh(e,"data")&&(r.flowing=!0,Pc(e))}}Yt.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Wh(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},Yt.prototype.on=function(e,t){var r=Ws.prototype.on.call(this,e,t),n=this._readableState;return e==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):e==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Ut("on readable",n.length,n.reading),n.length?Pa(this):n.reading||process.nextTick(Jx,this)),r},Yt.prototype.addListener=Yt.prototype.on,Yt.prototype.removeListener=function(e,t){var r=Ws.prototype.removeListener.call(this,e,t);return e==="readable"&&process.nextTick(Gh,this),r},Yt.prototype.removeAllListeners=function(e){var t=Ws.prototype.removeAllListeners.apply(this,arguments);return(e==="readable"||e===void 0)&&process.nextTick(Gh,this),t};function Gh(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function Jx(e){Ut("readable nexttick read 0"),e.read(0)}Yt.prototype.resume=function(){var e=this._readableState;return e.flowing||(Ut("resume"),e.flowing=!e.readableListening,Qx(this,e)),e.paused=!1,this};function Qx(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(tb,e,t))}function tb(e,t){Ut("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),Pc(e),t.flowing&&!t.reading&&e.read(0)}Yt.prototype.pause=function(){return Ut("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ut("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Pc(e){var t=e._readableState;for(Ut("flow",t.flowing);t.flowing&&e.read()!==null;);}Yt.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(Ut("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&t.push(o)}t.push(null)}),e.on("data",function(o){if(Ut("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=t.push(o);a||(n=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(a){return function(){return e[a].apply(e,arguments)}}(i));for(var s=0;s<_c.length;s++)e.on(_c[s],this.emit.bind(this,_c[s]));return this._read=function(o){Ut("wrapped _read",o),n&&(n=!1,e.resume())},this},typeof Symbol=="function"&&(Yt.prototype[Symbol.asyncIterator]=function(){return wc===void 0&&(wc=Bx),wc(this)}),Object.defineProperty(Yt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Yt.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Yt.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),Yt._fromList=qh,Object.defineProperty(Yt.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function qh(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.first():r=t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function Tc(e){var t=e._readableState;Ut("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(eb,t,e))}function eb(e,t){if(Ut("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}typeof Symbol=="function"&&(Yt.from=function(e,t){return Ec===void 0&&(Ec=Cx),Ec(Yt,e,t)});function Wh(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}var rb=nb;function nb(e,t){if(Rc("noDeprecation"))return e;var r=!1;function n(){if(!r){if(Rc("throwDeprecation"))throw new Error(t);Rc("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}return n}function Rc(e){try{if(!{}.localStorage)return!1}catch{return!1}var t={}.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}const Lc=as;Lc.Writable=Ee;function Yh(e){var t=this;this.next=null,this.entry=null,this.finish=function(){Ob(t,e)}}Ee.WritableState=Xs;var ib={deprecate:rb},Xh=Lh,Ta=En.Buffer,sb={}.Uint8Array||function(){};function ob(e){return Ta.from(e)}function ab(e){return Ta.isBuffer(e)||e instanceof sb}var Oc=Mh,cb=Uh,ub=cb.getHighWaterMark,Jn=Ti.codes,fb=Jn.ERR_INVALID_ARG_TYPE,hb=Jn.ERR_METHOD_NOT_IMPLEMENTED,lb=Jn.ERR_MULTIPLE_CALLBACK,db=Jn.ERR_STREAM_CANNOT_PIPE,pb=Jn.ERR_STREAM_DESTROYED,gb=Jn.ERR_STREAM_NULL_VALUES,vb=Jn.ERR_STREAM_WRITE_AFTER_END,mb=Jn.ERR_UNKNOWN_ENCODING,fs=Oc.errorOrDestroy;we.exports(Ee,Xh);function xb(){}function Xs(e,t,r){e=e||{},typeof r!="boolean"&&(r=t instanceof Lc.Duplex),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=ub(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=e.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Ab(t,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Yh(this)}Xs.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r},function(){try{Object.defineProperty(Xs.prototype,"buffer",{get:ib.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Ra;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Ra=Function.prototype[Symbol.hasInstance],Object.defineProperty(Ee,Symbol.hasInstance,{value:function(t){return Ra.call(this,t)?!0:this!==Ee?!1:t&&t._writableState instanceof Xs}})):Ra=function(t){return t instanceof this};function Ee(e){var t=this instanceof Lc.Duplex;if(!t&&!Ra.call(Ee,this))return new Ee(e);this._writableState=new Xs(e,this,t),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Xh.call(this)}Ee.prototype.pipe=function(){fs(this,new db)};function bb(e,t){var r=new vb;fs(e,r),process.nextTick(t,r)}function yb(e,t,r,n){var i;return r===null?i=new gb:typeof r!="string"&&!t.objectMode&&(i=new fb("chunk",["string","Buffer"],r)),i?(fs(e,i),process.nextTick(n,i),!1):!0}Ee.prototype.write=function(e,t,r){var n=this._writableState,i=!1,s=!n.objectMode&&ab(e);return s&&!Ta.isBuffer(e)&&(e=ob(e)),typeof t=="function"&&(r=t,t=null),s?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=xb),n.ending?bb(this,r):(s||yb(this,n,e,r))&&(n.pendingcb++,i=Eb(this,n,s,e,t,r)),i},Ee.prototype.cork=function(){this._writableState.corked++},Ee.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&Jh(this,e))},Ee.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new mb(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(Ee.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function wb(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=Ta.from(t,r)),t}Object.defineProperty(Ee.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Eb(e,t,r,n,i,s){if(!r){var o=wb(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var h=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},h?h.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Ic(e,t,!1,a,n,i,s);return u}function Ic(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new pb("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function _b(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(Zs,e,t),e._writableState.errorEmitted=!0,fs(e,n)):(i(n),e._writableState.errorEmitted=!0,fs(e,n),Zs(e,t))}function Sb(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function Ab(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new lb;if(Sb(r),t)_b(e,r,n,t,i);else{var s=Qh(r)||e.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Jh(e,r),n?process.nextTick(Zh,e,r,s,i):Zh(e,r,s,i)}}function Zh(e,t,r,n){r||Pb(e,t),t.pendingcb--,n(),Zs(e,t)}function Pb(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Jh(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,Ic(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new Yh(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,h=r.encoding,f=r.callback,y=t.objectMode?1:u.length;if(Ic(e,t,!1,y,u,h,f),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}Ee.prototype._write=function(e,t,r){r(new hb("_write()"))},Ee.prototype._writev=null,Ee.prototype.end=function(e,t,r){var n=this._writableState;return typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||Lb(this,n,r),this},Object.defineProperty(Ee.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Qh(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Tb(e,t){e._final(function(r){t.pendingcb--,r&&fs(e,r),t.prefinished=!0,e.emit("prefinish"),Zs(e,t)})}function Rb(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"&&!t.destroyed?(t.pendingcb++,t.finalCalled=!0,process.nextTick(Tb,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function Zs(e,t){var r=Qh(t);if(r&&(Rb(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}function Lb(e,t,r){t.ending=!0,Zs(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function Ob(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}Object.defineProperty(Ee.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){!this._writableState||(this._writableState.destroyed=t)}}),Ee.prototype.destroy=Oc.destroy,Ee.prototype._undestroy=Oc.undestroy,Ee.prototype._destroy=function(e,t){t(e)};var Ib=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};const hs=as;hs.Duplex=Gr,we.exports(Gr,hs.Readable);for(var tl=Ib(hs.Writable.prototype),Nc=0;Nc<tl.length;Nc++){var Mc=tl[Nc];Gr.prototype[Mc]||(Gr.prototype[Mc]=hs.Writable.prototype[Mc])}function Gr(e){if(!(this instanceof Gr))return new Gr(e);hs.Readable.call(this,e),hs.Writable.call(this,e),this.allowHalfOpen=!0,e&&(e.readable===!1&&(this.readable=!1),e.writable===!1&&(this.writable=!1),e.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",Nb)))}Object.defineProperty(Gr.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Gr.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Gr.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Nb(){this._writableState.ended||process.nextTick(Mb,this)}function Mb(e){e.end()}Object.defineProperty(Gr.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});const Js=as;Js.Transform=_n;var La=Ti.codes,Bb=La.ERR_METHOD_NOT_IMPLEMENTED,Cb=La.ERR_MULTIPLE_CALLBACK,Ub=La.ERR_TRANSFORM_ALREADY_TRANSFORMING,kb=La.ERR_TRANSFORM_WITH_LENGTH_0;we.exports(_n,Js.Duplex);function Db(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Cb);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function _n(e){if(!(this instanceof _n))return new _n(e);Js.Duplex.call(this,e),this._transformState={afterTransform:Db.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Fb)}function Fb(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){el(e,t,r)}):el(this,null,null)}_n.prototype.push=function(e,t){return this._transformState.needTransform=!1,Js.Duplex.prototype.push.call(this,e,t)},_n.prototype._transform=function(e,t,r){r(new Bb("_transform()"))},_n.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},_n.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},_n.prototype._destroy=function(e,t){Js.Duplex.prototype._destroy.call(this,e,function(r){t(r)})};function el(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new kb;if(e._transformState.transforming)throw new Ub;return e.push(null)}const rl=as;rl.PassThrough=Qs,we.exports(Qs,rl.Transform);function Qs(e){if(!(this instanceof Qs))return new Qs(e);Transform.call(this,e)}Qs.prototype._transform=function(e,t,r){r(null,e)};var Bc;function Hb(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var nl=Ti.codes,Kb=nl.ERR_MISSING_ARGS,$b=nl.ERR_STREAM_DESTROYED;function il(e){if(e)throw e}function zb(e){return e.setHeader&&typeof e.abort=="function"}function Vb(e,t,r,n){n=Hb(n);var i=!1;e.on("close",function(){i=!0}),Bc===void 0&&(Bc=vc),Bc(e,{readable:t,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,zb(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(o||new $b("pipe"))}}}function sl(e){e()}function jb(e,t){return e.pipe(t)}function Gb(e){return!e.length||typeof e[e.length-1]!="function"?il:e.pop()}function qb(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Gb(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Kb("streams");var i,s=t.map(function(o,a){var u=a<t.length-1,h=a>0;return Vb(o,u,h,function(f){i||(i=f),f&&s.forEach(sl),!u&&(s.forEach(sl),n(i))})});return t.reduce(jb)}var Wb=qb;(function(e,t){const r=as;t=e.exports=r.Readable,t.Stream=r.Readable,t.Readable=r.Readable,t.Writable=r.Writable,t.Duplex=r.Duplex,t.Transform=r.Transform,t.PassThrough=r.PassThrough,t.finished=vc,t.pipeline=Wb})(ga,ga.exports);var Oa=or.exports.Buffer,ol=ga.exports.Transform,Yb=we.exports;function Xb(e,t){if(!Oa.isBuffer(e)&&typeof e!="string")throw new TypeError(t+" must be a string or a buffer")}function Qn(e){ol.call(this),this._block=Oa.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}Yb(Qn,ol),Qn.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(i){n=i}r(n)},Qn.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(r){t=r}e(t)},Qn.prototype.update=function(e,t){if(Xb(e,"Data"),this._finalized)throw new Error("Digest already called");Oa.isBuffer(e)||(e=Oa.from(e,t));for(var r=this._block,n=0;this._blockOffset+e.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=e[n++];this._update(),this._blockOffset=0}for(;n<e.length;)r[this._blockOffset++]=e[n++];for(var s=0,o=e.length*8;o>0;++s)this._length[s]+=o,o=this._length[s]/4294967296|0,o>0&&(this._length[s]-=4294967296*o);return this},Qn.prototype._update=function(){throw new Error("_update is not implemented")},Qn.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();e!==void 0&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},Qn.prototype._digest=function(){throw new Error("_digest is not implemented")};var al=Qn,Zb=we.exports,cl=al,Jb=or.exports.Buffer,Qb=new Array(16);function Ia(){cl.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}Zb(Ia,cl),Ia.prototype._update=function(){for(var e=Qb,t=0;t<16;++t)e[t]=this._block.readInt32LE(t*4);var r=this._a,n=this._b,i=this._c,s=this._d;r=Xe(r,n,i,s,e[0],3614090360,7),s=Xe(s,r,n,i,e[1],3905402710,12),i=Xe(i,s,r,n,e[2],606105819,17),n=Xe(n,i,s,r,e[3],3250441966,22),r=Xe(r,n,i,s,e[4],4118548399,7),s=Xe(s,r,n,i,e[5],1200080426,12),i=Xe(i,s,r,n,e[6],2821735955,17),n=Xe(n,i,s,r,e[7],4249261313,22),r=Xe(r,n,i,s,e[8],1770035416,7),s=Xe(s,r,n,i,e[9],2336552879,12),i=Xe(i,s,r,n,e[10],4294925233,17),n=Xe(n,i,s,r,e[11],2304563134,22),r=Xe(r,n,i,s,e[12],1804603682,7),s=Xe(s,r,n,i,e[13],4254626195,12),i=Xe(i,s,r,n,e[14],2792965006,17),n=Xe(n,i,s,r,e[15],1236535329,22),r=Ze(r,n,i,s,e[1],4129170786,5),s=Ze(s,r,n,i,e[6],3225465664,9),i=Ze(i,s,r,n,e[11],643717713,14),n=Ze(n,i,s,r,e[0],3921069994,20),r=Ze(r,n,i,s,e[5],3593408605,5),s=Ze(s,r,n,i,e[10],38016083,9),i=Ze(i,s,r,n,e[15],3634488961,14),n=Ze(n,i,s,r,e[4],3889429448,20),r=Ze(r,n,i,s,e[9],568446438,5),s=Ze(s,r,n,i,e[14],3275163606,9),i=Ze(i,s,r,n,e[3],4107603335,14),n=Ze(n,i,s,r,e[8],1163531501,20),r=Ze(r,n,i,s,e[13],2850285829,5),s=Ze(s,r,n,i,e[2],4243563512,9),i=Ze(i,s,r,n,e[7],1735328473,14),n=Ze(n,i,s,r,e[12],2368359562,20),r=Je(r,n,i,s,e[5],4294588738,4),s=Je(s,r,n,i,e[8],2272392833,11),i=Je(i,s,r,n,e[11],1839030562,16),n=Je(n,i,s,r,e[14],4259657740,23),r=Je(r,n,i,s,e[1],2763975236,4),s=Je(s,r,n,i,e[4],1272893353,11),i=Je(i,s,r,n,e[7],4139469664,16),n=Je(n,i,s,r,e[10],3200236656,23),r=Je(r,n,i,s,e[13],681279174,4),s=Je(s,r,n,i,e[0],3936430074,11),i=Je(i,s,r,n,e[3],3572445317,16),n=Je(n,i,s,r,e[6],76029189,23),r=Je(r,n,i,s,e[9],3654602809,4),s=Je(s,r,n,i,e[12],3873151461,11),i=Je(i,s,r,n,e[15],530742520,16),n=Je(n,i,s,r,e[2],3299628645,23),r=Qe(r,n,i,s,e[0],4096336452,6),s=Qe(s,r,n,i,e[7],1126891415,10),i=Qe(i,s,r,n,e[14],2878612391,15),n=Qe(n,i,s,r,e[5],4237533241,21),r=Qe(r,n,i,s,e[12],1700485571,6),s=Qe(s,r,n,i,e[3],2399980690,10),i=Qe(i,s,r,n,e[10],4293915773,15),n=Qe(n,i,s,r,e[1],2240044497,21),r=Qe(r,n,i,s,e[8],1873313359,6),s=Qe(s,r,n,i,e[15],4264355552,10),i=Qe(i,s,r,n,e[6],2734768916,15),n=Qe(n,i,s,r,e[13],1309151649,21),r=Qe(r,n,i,s,e[4],4149444226,6),s=Qe(s,r,n,i,e[11],3174756917,10),i=Qe(i,s,r,n,e[2],718787259,15),n=Qe(n,i,s,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+s|0},Ia.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=Jb.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e};function Na(e,t){return e<<t|e>>>32-t}function Xe(e,t,r,n,i,s,o){return Na(e+(t&r|~t&n)+i+s|0,o)+t|0}function Ze(e,t,r,n,i,s,o){return Na(e+(t&n|r&~n)+i+s|0,o)+t|0}function Je(e,t,r,n,i,s,o){return Na(e+(t^r^n)+i+s|0,o)+t|0}function Qe(e,t,r,n,i,s,o){return Na(e+(r^(t|~n))+i+s|0,o)+t|0}var ty=Ia,Cc=En.Buffer,ey=we.exports,ul=al,ry=new Array(16),to=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],eo=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],ro=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],no=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],io=[0,1518500249,1859775393,2400959708,2840853838],so=[1352829926,1548603684,1836072691,2053994217,0];function Ma(){ul.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}ey(Ma,ul),Ma.prototype._update=function(){for(var e=ry,t=0;t<16;++t)e[t]=this._block.readInt32LE(t*4);for(var r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=this._a|0,u=this._b|0,h=this._c|0,f=this._d|0,y=this._e|0,w=0;w<80;w+=1){var L,I;w<16?(L=fl(r,n,i,s,o,e[to[w]],io[0],ro[w]),I=pl(a,u,h,f,y,e[eo[w]],so[0],no[w])):w<32?(L=hl(r,n,i,s,o,e[to[w]],io[1],ro[w]),I=dl(a,u,h,f,y,e[eo[w]],so[1],no[w])):w<48?(L=ll(r,n,i,s,o,e[to[w]],io[2],ro[w]),I=ll(a,u,h,f,y,e[eo[w]],so[2],no[w])):w<64?(L=dl(r,n,i,s,o,e[to[w]],io[3],ro[w]),I=hl(a,u,h,f,y,e[eo[w]],so[3],no[w])):(L=pl(r,n,i,s,o,e[to[w]],io[4],ro[w]),I=fl(a,u,h,f,y,e[eo[w]],so[4],no[w])),r=o,o=s,s=Ii(i,10),i=n,n=L,a=y,y=f,f=Ii(h,10),h=u,u=I}var B=this._b+i+f|0;this._b=this._c+s+y|0,this._c=this._d+o+a|0,this._d=this._e+r+u|0,this._e=this._a+n+h|0,this._a=B},Ma.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=Cc.alloc?Cc.alloc(20):new Cc(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e};function Ii(e,t){return e<<t|e>>>32-t}function fl(e,t,r,n,i,s,o,a){return Ii(e+(t^r^n)+s+o|0,a)+i|0}function hl(e,t,r,n,i,s,o,a){return Ii(e+(t&r|~t&n)+s+o|0,a)+i|0}function ll(e,t,r,n,i,s,o,a){return Ii(e+((t|~r)^n)+s+o|0,a)+i|0}function dl(e,t,r,n,i,s,o,a){return Ii(e+(t&n|r&~n)+s+o|0,a)+i|0}function pl(e,t,r,n,i,s,o,a){return Ii(e+(t^(r|~n))+s+o|0,a)+i|0}var ny=Ma,gl={exports:{}},vl=or.exports.Buffer;function Ba(e,t){this._block=vl.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}Ba.prototype.update=function(e,t){typeof e=="string"&&(t=t||"utf8",e=vl.from(e,t));for(var r=this._block,n=this._blockSize,i=e.length,s=this._len,o=0;o<i;){for(var a=s%n,u=Math.min(i-o,n-a),h=0;h<u;h++)r[a+h]=e[o+h];s+=u,o+=u,s%n===0&&this._update(r)}return this._len+=i,this},Ba.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return e?s.toString(e):s},Ba.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var ls=Ba,iy=we.exports,ml=ls,sy=or.exports.Buffer,oy=[1518500249,1859775393,-1894007588,-899497514],ay=new Array(80);function oo(){this.init(),this._w=ay,ml.call(this,64,56)}iy(oo,ml),oo.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function cy(e){return e<<5|e>>>27}function uy(e){return e<<30|e>>>2}function fy(e,t,r,n){return e===0?t&r|~t&n:e===2?t&r|t&n|r&n:t^r^n}oo.prototype._update=function(e){for(var t=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)t[a]=e.readInt32BE(a*4);for(;a<80;++a)t[a]=t[a-3]^t[a-8]^t[a-14]^t[a-16];for(var u=0;u<80;++u){var h=~~(u/20),f=cy(r)+fy(h,n,i,s)+o+t[u]+oy[h]|0;o=s,s=i,i=uy(n),n=r,r=f}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0},oo.prototype._hash=function(){var e=sy.allocUnsafe(20);return e.writeInt32BE(this._a|0,0),e.writeInt32BE(this._b|0,4),e.writeInt32BE(this._c|0,8),e.writeInt32BE(this._d|0,12),e.writeInt32BE(this._e|0,16),e};var hy=oo,ly=we.exports,xl=ls,dy=or.exports.Buffer,py=[1518500249,1859775393,-1894007588,-899497514],gy=new Array(80);function ao(){this.init(),this._w=gy,xl.call(this,64,56)}ly(ao,xl),ao.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function vy(e){return e<<1|e>>>31}function my(e){return e<<5|e>>>27}function xy(e){return e<<30|e>>>2}function by(e,t,r,n){return e===0?t&r|~t&n:e===2?t&r|t&n|r&n:t^r^n}ao.prototype._update=function(e){for(var t=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)t[a]=e.readInt32BE(a*4);for(;a<80;++a)t[a]=vy(t[a-3]^t[a-8]^t[a-14]^t[a-16]);for(var u=0;u<80;++u){var h=~~(u/20),f=my(r)+by(h,n,i,s)+o+t[u]+py[h]|0;o=s,s=i,i=xy(n),n=r,r=f}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0},ao.prototype._hash=function(){var e=dy.allocUnsafe(20);return e.writeInt32BE(this._a|0,0),e.writeInt32BE(this._b|0,4),e.writeInt32BE(this._c|0,8),e.writeInt32BE(this._d|0,12),e.writeInt32BE(this._e|0,16),e};var yy=ao,wy=we.exports,bl=ls,Ey=or.exports.Buffer,_y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Sy=new Array(64);function co(){this.init(),this._w=Sy,bl.call(this,64,56)}wy(co,bl),co.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function Ay(e,t,r){return r^e&(t^r)}function Py(e,t,r){return e&t|r&(e|t)}function Ty(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function Ry(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function Ly(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function Oy(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}co.prototype._update=function(e){for(var t=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=this._f|0,u=this._g|0,h=this._h|0,f=0;f<16;++f)t[f]=e.readInt32BE(f*4);for(;f<64;++f)t[f]=Oy(t[f-2])+t[f-7]+Ly(t[f-15])+t[f-16]|0;for(var y=0;y<64;++y){var w=h+Ry(o)+Ay(o,a,u)+_y[y]+t[y]|0,L=Ty(r)+Py(r,n,i)|0;h=u,u=a,a=o,o=s+w|0,s=i,i=n,n=r,r=w+L|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0,this._f=a+this._f|0,this._g=u+this._g|0,this._h=h+this._h|0},co.prototype._hash=function(){var e=Ey.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e};var yl=co,Iy=we.exports,Ny=yl,My=ls,By=or.exports.Buffer,Cy=new Array(64);function Ca(){this.init(),this._w=Cy,My.call(this,64,56)}Iy(Ca,Ny),Ca.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},Ca.prototype._hash=function(){var e=By.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e};var Uy=Ca,ky=we.exports,wl=ls,Dy=or.exports.Buffer,El=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Fy=new Array(160);function uo(){this.init(),this._w=Fy,wl.call(this,128,112)}ky(uo,wl),uo.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function _l(e,t,r){return r^e&(t^r)}function Sl(e,t,r){return e&t|r&(e|t)}function Al(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function Pl(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function Hy(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function Ky(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function $y(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function zy(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function De(e,t){return e>>>0<t>>>0?1:0}uo.prototype._update=function(e){for(var t=this._w,r=this._ah|0,n=this._bh|0,i=this._ch|0,s=this._dh|0,o=this._eh|0,a=this._fh|0,u=this._gh|0,h=this._hh|0,f=this._al|0,y=this._bl|0,w=this._cl|0,L=this._dl|0,I=this._el|0,B=this._fl|0,C=this._gl|0,k=this._hl|0,T=0;T<32;T+=2)t[T]=e.readInt32BE(T*4),t[T+1]=e.readInt32BE(T*4+4);for(;T<160;T+=2){var D=t[T-30],F=t[T-15*2+1],V=Hy(D,F),z=Ky(F,D);D=t[T-2*2],F=t[T-2*2+1];var $=$y(D,F),O=zy(F,D),M=t[T-7*2],x=t[T-7*2+1],b=t[T-16*2],c=t[T-16*2+1],l=z+x|0,g=V+M+De(l,z)|0;l=l+O|0,g=g+$+De(l,O)|0,l=l+c|0,g=g+b+De(l,c)|0,t[T]=g,t[T+1]=l}for(var v=0;v<160;v+=2){g=t[v],l=t[v+1];var d=Sl(r,n,i),A=Sl(f,y,w),R=Al(r,f),S=Al(f,r),p=Pl(o,I),P=Pl(I,o),H=El[v],G=El[v+1],Y=_l(o,a,u),rt=_l(I,B,C),nt=k+P|0,q=h+p+De(nt,k)|0;nt=nt+rt|0,q=q+Y+De(nt,rt)|0,nt=nt+G|0,q=q+H+De(nt,G)|0,nt=nt+l|0,q=q+g+De(nt,l)|0;var Z=S+A|0,W=R+d+De(Z,S)|0;h=u,k=C,u=a,C=B,a=o,B=I,I=L+nt|0,o=s+q+De(I,L)|0,s=i,L=w,i=n,w=y,n=r,y=f,f=nt+Z|0,r=q+W+De(f,nt)|0}this._al=this._al+f|0,this._bl=this._bl+y|0,this._cl=this._cl+w|0,this._dl=this._dl+L|0,this._el=this._el+I|0,this._fl=this._fl+B|0,this._gl=this._gl+C|0,this._hl=this._hl+k|0,this._ah=this._ah+r+De(this._al,f)|0,this._bh=this._bh+n+De(this._bl,y)|0,this._ch=this._ch+i+De(this._cl,w)|0,this._dh=this._dh+s+De(this._dl,L)|0,this._eh=this._eh+o+De(this._el,I)|0,this._fh=this._fh+a+De(this._fl,B)|0,this._gh=this._gh+u+De(this._gl,C)|0,this._hh=this._hh+h+De(this._hl,k)|0},uo.prototype._hash=function(){var e=Dy.allocUnsafe(64);function t(r,n,i){e.writeInt32BE(r,i),e.writeInt32BE(n,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e};var Tl=uo,Vy=we.exports,jy=Tl,Gy=ls,qy=or.exports.Buffer,Wy=new Array(160);function Ua(){this.init(),this._w=Wy,Gy.call(this,128,112)}Vy(Ua,jy),Ua.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},Ua.prototype._hash=function(){var e=qy.allocUnsafe(48);function t(r,n,i){e.writeInt32BE(r,i),e.writeInt32BE(n,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e};var Yy=Ua,Ni=gl.exports=function(t){t=t.toLowerCase();var r=Ni[t];if(!r)throw new Error(t+" is not supported (we accept pull requests)");return new r};Ni.sha=hy,Ni.sha1=yy,Ni.sha224=Uy,Ni.sha256=yl,Ni.sha384=Yy,Ni.sha512=Tl;var Rl=or.exports.Buffer,Ll=ga.exports.Transform,Xy=wa.StringDecoder,Zy=we.exports;function Cr(e){Ll.call(this),this.hashMode=typeof e=="string",this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}Zy(Cr,Ll),Cr.prototype.update=function(e,t,r){typeof e=="string"&&(e=Rl.from(e,t));var n=this._update(e);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)},Cr.prototype.setAutoPadding=function(){},Cr.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},Cr.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},Cr.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},Cr.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(i){n=i}finally{r(n)}},Cr.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(r){t=r}e(t)},Cr.prototype._finalOrDigest=function(e){var t=this.__final()||Rl.alloc(0);return e&&(t=this._toString(t,e,!0)),t},Cr.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new Xy(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n};var Jy=Cr,Qy=we.exports,t2=ty,e2=ny,r2=gl.exports,Ol=Jy;function ka(e){Ol.call(this,"digest"),this._hash=e}Qy(ka,Ol),ka.prototype._update=function(e){this._hash.update(e)},ka.prototype._final=function(){return this._hash.digest()};var n2=function(t){return t=t.toLowerCase(),t==="md5"?new t2:t==="rmd160"||t==="ripemd160"?new e2:new ka(r2(t))},Da=or.exports.Buffer;function i2(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=n}var o=e.length,a=e.charAt(0),u=Math.log(o)/Math.log(256),h=Math.log(256)/Math.log(o);function f(L){if((Array.isArray(L)||L instanceof Uint8Array)&&(L=Da.from(L)),!Da.isBuffer(L))throw new TypeError("Expected Buffer");if(L.length===0)return"";for(var I=0,B=0,C=0,k=L.length;C!==k&&L[C]===0;)C++,I++;for(var T=(k-C)*h+1>>>0,D=new Uint8Array(T);C!==k;){for(var F=L[C],V=0,z=T-1;(F!==0||V<B)&&z!==-1;z--,V++)F+=256*D[z]>>>0,D[z]=F%o>>>0,F=F/o>>>0;if(F!==0)throw new Error("Non-zero carry");B=V,C++}for(var $=T-B;$!==T&&D[$]===0;)$++;for(var O=a.repeat(I);$<T;++$)O+=e.charAt(D[$]);return O}function y(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return Da.alloc(0);for(var I=0,B=0,C=0;L[I]===a;)B++,I++;for(var k=(L.length-I)*u+1>>>0,T=new Uint8Array(k);L[I];){var D=t[L.charCodeAt(I)];if(D===255)return;for(var F=0,V=k-1;(D!==0||F<C)&&V!==-1;V--,F++)D+=o*T[V]>>>0,T[V]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");C=F,I++}for(var z=k-C;z!==k&&T[z]===0;)z++;var $=Da.allocUnsafe(B+(k-z));$.fill(0,0,B);for(var O=B;z!==k;)$[O++]=T[z++];return $}function w(L){var I=y(L);if(I)return I;throw new Error("Non-base"+o+" character")}return{encode:f,decodeUnsafe:y,decode:w}}var s2=i2,o2=s2,a2="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",c2=o2(a2),Uc=c2,u2=or.exports.Buffer,f2=function(e){function t(s){var o=e(s);return Uc.encode(u2.concat([s,o],s.length+4))}function r(s){var o=s.slice(0,-4),a=s.slice(-4),u=e(o);if(!(a[0]^u[0]|a[1]^u[1]|a[2]^u[2]|a[3]^u[3]))return o}function n(s){var o=Uc.decodeUnsafe(s);if(!!o)return r(o)}function i(s){var o=Uc.decode(s),a=r(o);if(!a)throw new Error("Invalid checksum");return a}return{encode:t,decode:i,decodeUnsafe:n}},Il=n2,h2=f2;function l2(e){var t=Il("sha256").update(e).digest();return Il("sha256").update(t).digest()}var fo=h2(l2),d2={},p2={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}},vr={},qr={exports:{}};(function(e){(function(t,r){function n(b,c){if(!b)throw new Error(c||"Assertion failed")}function i(b,c){b.super_=c;var l=function(){};l.prototype=c.prototype,b.prototype=new l,b.prototype.constructor=b}function s(b,c,l){if(s.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((c==="le"||c==="be")&&(l=c,c=10),this._init(b||0,c||10,l||"be"))}typeof t=="object"?t.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=require("buffer").Buffer}catch{}s.isBN=function(c){return c instanceof s?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===s.wordSize&&Array.isArray(c.words)},s.max=function(c,l){return c.cmp(l)>0?c:l},s.min=function(c,l){return c.cmp(l)<0?c:l},s.prototype._init=function(c,l,g){if(typeof c=="number")return this._initNumber(c,l,g);if(typeof c=="object")return this._initArray(c,l,g);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),c=c.toString().replace(/\s+/g,"");var v=0;c[0]==="-"&&(v++,this.negative=1),v<c.length&&(l===16?this._parseHex(c,v,g):(this._parseBase(c,l,v),g==="le"&&this._initArray(this.toArray(),l,g)))},s.prototype._initNumber=function(c,l,g){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),l,g)},s.prototype._initArray=function(c,l,g){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var d,A,R=0;if(g==="be")for(v=c.length-1,d=0;v>=0;v-=3)A=c[v]|c[v-1]<<8|c[v-2]<<16,this.words[d]|=A<<R&67108863,this.words[d+1]=A>>>26-R&67108863,R+=24,R>=26&&(R-=26,d++);else if(g==="le")for(v=0,d=0;v<c.length;v+=3)A=c[v]|c[v+1]<<8|c[v+2]<<16,this.words[d]|=A<<R&67108863,this.words[d+1]=A>>>26-R&67108863,R+=24,R>=26&&(R-=26,d++);return this.strip()};function a(b,c){var l=b.charCodeAt(c);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function u(b,c,l){var g=a(b,l);return l-1>=c&&(g|=a(b,l-1)<<4),g}s.prototype._parseHex=function(c,l,g){this.length=Math.ceil((c.length-l)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var d=0,A=0,R;if(g==="be")for(v=c.length-1;v>=l;v-=2)R=u(c,l,v)<<d,this.words[A]|=R&67108863,d>=18?(d-=18,A+=1,this.words[A]|=R>>>26):d+=8;else{var S=c.length-l;for(v=S%2===0?l+1:l;v<c.length;v+=2)R=u(c,l,v)<<d,this.words[A]|=R&67108863,d>=18?(d-=18,A+=1,this.words[A]|=R>>>26):d+=8}this.strip()};function h(b,c,l,g){for(var v=0,d=Math.min(b.length,l),A=c;A<d;A++){var R=b.charCodeAt(A)-48;v*=g,R>=49?v+=R-49+10:R>=17?v+=R-17+10:v+=R}return v}s.prototype._parseBase=function(c,l,g){this.words=[0],this.length=1;for(var v=0,d=1;d<=67108863;d*=l)v++;v--,d=d/l|0;for(var A=c.length-g,R=A%v,S=Math.min(A,A-R)+g,p=0,P=g;P<S;P+=v)p=h(c,P,P+v,l),this.imuln(d),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p);if(R!==0){var H=1;for(p=h(c,P,c.length,l),P=0;P<R;P++)H*=l;this.imuln(H),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p)}this.strip()},s.prototype.copy=function(c){c.words=new Array(this.length);for(var l=0;l<this.length;l++)c.words[l]=this.words[l];c.length=this.length,c.negative=this.negative,c.red=this.red},s.prototype.clone=function(){var c=new s(null);return this.copy(c),c},s.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(c,l){c=c||10,l=l|0||1;var g;if(c===16||c==="hex"){g="";for(var v=0,d=0,A=0;A<this.length;A++){var R=this.words[A],S=((R<<v|d)&16777215).toString(16);d=R>>>24-v&16777215,d!==0||A!==this.length-1?g=f[6-S.length]+S+g:g=S+g,v+=2,v>=26&&(v-=26,A--)}for(d!==0&&(g=d.toString(16)+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(c===(c|0)&&c>=2&&c<=36){var p=y[c],P=w[c];g="";var H=this.clone();for(H.negative=0;!H.isZero();){var G=H.modn(P).toString(c);H=H.idivn(P),H.isZero()?g=G+g:g=f[p-G.length]+G+g}for(this.isZero()&&(g="0"+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(c,l){return n(typeof o<"u"),this.toArrayLike(o,c,l)},s.prototype.toArray=function(c,l){return this.toArrayLike(Array,c,l)},s.prototype.toArrayLike=function(c,l,g){var v=this.byteLength(),d=g||Math.max(1,v);n(v<=d,"byte array longer than desired length"),n(d>0,"Requested array length <= 0"),this.strip();var A=l==="le",R=new c(d),S,p,P=this.clone();if(A){for(p=0;!P.isZero();p++)S=P.andln(255),P.iushrn(8),R[p]=S;for(;p<d;p++)R[p]=0}else{for(p=0;p<d-v;p++)R[p]=0;for(p=0;!P.isZero();p++)S=P.andln(255),P.iushrn(8),R[d-p-1]=S}return R},Math.clz32?s.prototype._countBits=function(c){return 32-Math.clz32(c)}:s.prototype._countBits=function(c){var l=c,g=0;return l>=4096&&(g+=13,l>>>=13),l>=64&&(g+=7,l>>>=7),l>=8&&(g+=4,l>>>=4),l>=2&&(g+=2,l>>>=2),g+l},s.prototype._zeroBits=function(c){if(c===0)return 26;var l=c,g=0;return(l&8191)===0&&(g+=13,l>>>=13),(l&127)===0&&(g+=7,l>>>=7),(l&15)===0&&(g+=4,l>>>=4),(l&3)===0&&(g+=2,l>>>=2),(l&1)===0&&g++,g},s.prototype.bitLength=function(){var c=this.words[this.length-1],l=this._countBits(c);return(this.length-1)*26+l};function L(b){for(var c=new Array(b.bitLength()),l=0;l<c.length;l++){var g=l/26|0,v=l%26;c[l]=(b.words[g]&1<<v)>>>v}return c}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,l=0;l<this.length;l++){var g=this._zeroBits(this.words[l]);if(c+=g,g!==26)break}return c},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},s.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var l=0;l<c.length;l++)this.words[l]=this.words[l]|c.words[l];return this.strip()},s.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},s.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},s.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},s.prototype.iuand=function(c){var l;this.length>c.length?l=c:l=this;for(var g=0;g<l.length;g++)this.words[g]=this.words[g]&c.words[g];return this.length=l.length,this.strip()},s.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},s.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},s.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},s.prototype.iuxor=function(c){var l,g;this.length>c.length?(l=this,g=c):(l=c,g=this);for(var v=0;v<g.length;v++)this.words[v]=l.words[v]^g.words[v];if(this!==l)for(;v<l.length;v++)this.words[v]=l.words[v];return this.length=l.length,this.strip()},s.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},s.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},s.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},s.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var l=Math.ceil(c/26)|0,g=c%26;this._expand(l),g>0&&l--;for(var v=0;v<l;v++)this.words[v]=~this.words[v]&67108863;return g>0&&(this.words[v]=~this.words[v]&67108863>>26-g),this.strip()},s.prototype.notn=function(c){return this.clone().inotn(c)},s.prototype.setn=function(c,l){n(typeof c=="number"&&c>=0);var g=c/26|0,v=c%26;return this._expand(g+1),l?this.words[g]=this.words[g]|1<<v:this.words[g]=this.words[g]&~(1<<v),this.strip()},s.prototype.iadd=function(c){var l;if(this.negative!==0&&c.negative===0)return this.negative=0,l=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,l=this.isub(c),c.negative=1,l._normSign();var g,v;this.length>c.length?(g=this,v=c):(g=c,v=this);for(var d=0,A=0;A<v.length;A++)l=(g.words[A]|0)+(v.words[A]|0)+d,this.words[A]=l&67108863,d=l>>>26;for(;d!==0&&A<g.length;A++)l=(g.words[A]|0)+d,this.words[A]=l&67108863,d=l>>>26;if(this.length=g.length,d!==0)this.words[this.length]=d,this.length++;else if(g!==this)for(;A<g.length;A++)this.words[A]=g.words[A];return this},s.prototype.add=function(c){var l;return c.negative!==0&&this.negative===0?(c.negative=0,l=this.sub(c),c.negative^=1,l):c.negative===0&&this.negative!==0?(this.negative=0,l=c.sub(this),this.negative=1,l):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},s.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var l=this.iadd(c);return c.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var g=this.cmp(c);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,d;g>0?(v=this,d=c):(v=c,d=this);for(var A=0,R=0;R<d.length;R++)l=(v.words[R]|0)-(d.words[R]|0)+A,A=l>>26,this.words[R]=l&67108863;for(;A!==0&&R<v.length;R++)l=(v.words[R]|0)+A,A=l>>26,this.words[R]=l&67108863;if(A===0&&R<v.length&&v!==this)for(;R<v.length;R++)this.words[R]=v.words[R];return this.length=Math.max(this.length,R),v!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(c){return this.clone().isub(c)};function I(b,c,l){l.negative=c.negative^b.negative;var g=b.length+c.length|0;l.length=g,g=g-1|0;var v=b.words[0]|0,d=c.words[0]|0,A=v*d,R=A&67108863,S=A/67108864|0;l.words[0]=R;for(var p=1;p<g;p++){for(var P=S>>>26,H=S&67108863,G=Math.min(p,c.length-1),Y=Math.max(0,p-b.length+1);Y<=G;Y++){var rt=p-Y|0;v=b.words[rt]|0,d=c.words[Y]|0,A=v*d+H,P+=A/67108864|0,H=A&67108863}l.words[p]=H|0,S=P|0}return S!==0?l.words[p]=S|0:l.length--,l.strip()}var B=function(c,l,g){var v=c.words,d=l.words,A=g.words,R=0,S,p,P,H=v[0]|0,G=H&8191,Y=H>>>13,rt=v[1]|0,nt=rt&8191,q=rt>>>13,Z=v[2]|0,W=Z&8191,_=Z>>>13,j=v[3]|0,it=j&8191,st=j>>>13,ut=v[4]|0,ot=ut&8191,ht=ut>>>13,Vt=v[5]|0,yt=Vt&8191,wt=Vt>>>13,fe=v[6]|0,dt=fe&8191,ft=fe>>>13,Wt=v[7]|0,xt=Wt&8191,pt=Wt>>>13,Xt=v[8]|0,N=Xt&8191,m=Xt>>>13,E=v[9]|0,U=E&8191,K=E>>>13,J=d[0]|0,Q=J&8191,at=J>>>13,Dt=d[1]|0,lt=Dt&8191,gt=Dt>>>13,Tt=d[2]|0,ae=Tt&8191,ce=Tt>>>13,Ai=d[3]|0,pe=Ai&8191,Nt=Ai>>>13,Re=d[4]|0,Mt=Re&8191,Rt=Re>>>13,Le=d[5]|0,Bt=Le&8191,Lt=Le>>>13,Oe=d[6]|0,Ot=Oe&8191,mt=Oe>>>13,ue=d[7]|0,It=ue&8191,Ct=ue>>>13,Ue=d[8]|0,Ft=Ue&8191,Ht=Ue>>>13,Rg=d[9]|0,Ne=Rg&8191,Me=Rg>>>13;g.negative=c.negative^l.negative,g.length=19,S=Math.imul(G,Q),p=Math.imul(G,at),p=p+Math.imul(Y,Q)|0,P=Math.imul(Y,at);var ef=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(ef>>>26)|0,ef&=67108863,S=Math.imul(nt,Q),p=Math.imul(nt,at),p=p+Math.imul(q,Q)|0,P=Math.imul(q,at),S=S+Math.imul(G,lt)|0,p=p+Math.imul(G,gt)|0,p=p+Math.imul(Y,lt)|0,P=P+Math.imul(Y,gt)|0;var rf=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(rf>>>26)|0,rf&=67108863,S=Math.imul(W,Q),p=Math.imul(W,at),p=p+Math.imul(_,Q)|0,P=Math.imul(_,at),S=S+Math.imul(nt,lt)|0,p=p+Math.imul(nt,gt)|0,p=p+Math.imul(q,lt)|0,P=P+Math.imul(q,gt)|0,S=S+Math.imul(G,ae)|0,p=p+Math.imul(G,ce)|0,p=p+Math.imul(Y,ae)|0,P=P+Math.imul(Y,ce)|0;var nf=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(nf>>>26)|0,nf&=67108863,S=Math.imul(it,Q),p=Math.imul(it,at),p=p+Math.imul(st,Q)|0,P=Math.imul(st,at),S=S+Math.imul(W,lt)|0,p=p+Math.imul(W,gt)|0,p=p+Math.imul(_,lt)|0,P=P+Math.imul(_,gt)|0,S=S+Math.imul(nt,ae)|0,p=p+Math.imul(nt,ce)|0,p=p+Math.imul(q,ae)|0,P=P+Math.imul(q,ce)|0,S=S+Math.imul(G,pe)|0,p=p+Math.imul(G,Nt)|0,p=p+Math.imul(Y,pe)|0,P=P+Math.imul(Y,Nt)|0;var sf=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(sf>>>26)|0,sf&=67108863,S=Math.imul(ot,Q),p=Math.imul(ot,at),p=p+Math.imul(ht,Q)|0,P=Math.imul(ht,at),S=S+Math.imul(it,lt)|0,p=p+Math.imul(it,gt)|0,p=p+Math.imul(st,lt)|0,P=P+Math.imul(st,gt)|0,S=S+Math.imul(W,ae)|0,p=p+Math.imul(W,ce)|0,p=p+Math.imul(_,ae)|0,P=P+Math.imul(_,ce)|0,S=S+Math.imul(nt,pe)|0,p=p+Math.imul(nt,Nt)|0,p=p+Math.imul(q,pe)|0,P=P+Math.imul(q,Nt)|0,S=S+Math.imul(G,Mt)|0,p=p+Math.imul(G,Rt)|0,p=p+Math.imul(Y,Mt)|0,P=P+Math.imul(Y,Rt)|0;var of=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(of>>>26)|0,of&=67108863,S=Math.imul(yt,Q),p=Math.imul(yt,at),p=p+Math.imul(wt,Q)|0,P=Math.imul(wt,at),S=S+Math.imul(ot,lt)|0,p=p+Math.imul(ot,gt)|0,p=p+Math.imul(ht,lt)|0,P=P+Math.imul(ht,gt)|0,S=S+Math.imul(it,ae)|0,p=p+Math.imul(it,ce)|0,p=p+Math.imul(st,ae)|0,P=P+Math.imul(st,ce)|0,S=S+Math.imul(W,pe)|0,p=p+Math.imul(W,Nt)|0,p=p+Math.imul(_,pe)|0,P=P+Math.imul(_,Nt)|0,S=S+Math.imul(nt,Mt)|0,p=p+Math.imul(nt,Rt)|0,p=p+Math.imul(q,Mt)|0,P=P+Math.imul(q,Rt)|0,S=S+Math.imul(G,Bt)|0,p=p+Math.imul(G,Lt)|0,p=p+Math.imul(Y,Bt)|0,P=P+Math.imul(Y,Lt)|0;var af=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(af>>>26)|0,af&=67108863,S=Math.imul(dt,Q),p=Math.imul(dt,at),p=p+Math.imul(ft,Q)|0,P=Math.imul(ft,at),S=S+Math.imul(yt,lt)|0,p=p+Math.imul(yt,gt)|0,p=p+Math.imul(wt,lt)|0,P=P+Math.imul(wt,gt)|0,S=S+Math.imul(ot,ae)|0,p=p+Math.imul(ot,ce)|0,p=p+Math.imul(ht,ae)|0,P=P+Math.imul(ht,ce)|0,S=S+Math.imul(it,pe)|0,p=p+Math.imul(it,Nt)|0,p=p+Math.imul(st,pe)|0,P=P+Math.imul(st,Nt)|0,S=S+Math.imul(W,Mt)|0,p=p+Math.imul(W,Rt)|0,p=p+Math.imul(_,Mt)|0,P=P+Math.imul(_,Rt)|0,S=S+Math.imul(nt,Bt)|0,p=p+Math.imul(nt,Lt)|0,p=p+Math.imul(q,Bt)|0,P=P+Math.imul(q,Lt)|0,S=S+Math.imul(G,Ot)|0,p=p+Math.imul(G,mt)|0,p=p+Math.imul(Y,Ot)|0,P=P+Math.imul(Y,mt)|0;var cf=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(cf>>>26)|0,cf&=67108863,S=Math.imul(xt,Q),p=Math.imul(xt,at),p=p+Math.imul(pt,Q)|0,P=Math.imul(pt,at),S=S+Math.imul(dt,lt)|0,p=p+Math.imul(dt,gt)|0,p=p+Math.imul(ft,lt)|0,P=P+Math.imul(ft,gt)|0,S=S+Math.imul(yt,ae)|0,p=p+Math.imul(yt,ce)|0,p=p+Math.imul(wt,ae)|0,P=P+Math.imul(wt,ce)|0,S=S+Math.imul(ot,pe)|0,p=p+Math.imul(ot,Nt)|0,p=p+Math.imul(ht,pe)|0,P=P+Math.imul(ht,Nt)|0,S=S+Math.imul(it,Mt)|0,p=p+Math.imul(it,Rt)|0,p=p+Math.imul(st,Mt)|0,P=P+Math.imul(st,Rt)|0,S=S+Math.imul(W,Bt)|0,p=p+Math.imul(W,Lt)|0,p=p+Math.imul(_,Bt)|0,P=P+Math.imul(_,Lt)|0,S=S+Math.imul(nt,Ot)|0,p=p+Math.imul(nt,mt)|0,p=p+Math.imul(q,Ot)|0,P=P+Math.imul(q,mt)|0,S=S+Math.imul(G,It)|0,p=p+Math.imul(G,Ct)|0,p=p+Math.imul(Y,It)|0,P=P+Math.imul(Y,Ct)|0;var uf=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(uf>>>26)|0,uf&=67108863,S=Math.imul(N,Q),p=Math.imul(N,at),p=p+Math.imul(m,Q)|0,P=Math.imul(m,at),S=S+Math.imul(xt,lt)|0,p=p+Math.imul(xt,gt)|0,p=p+Math.imul(pt,lt)|0,P=P+Math.imul(pt,gt)|0,S=S+Math.imul(dt,ae)|0,p=p+Math.imul(dt,ce)|0,p=p+Math.imul(ft,ae)|0,P=P+Math.imul(ft,ce)|0,S=S+Math.imul(yt,pe)|0,p=p+Math.imul(yt,Nt)|0,p=p+Math.imul(wt,pe)|0,P=P+Math.imul(wt,Nt)|0,S=S+Math.imul(ot,Mt)|0,p=p+Math.imul(ot,Rt)|0,p=p+Math.imul(ht,Mt)|0,P=P+Math.imul(ht,Rt)|0,S=S+Math.imul(it,Bt)|0,p=p+Math.imul(it,Lt)|0,p=p+Math.imul(st,Bt)|0,P=P+Math.imul(st,Lt)|0,S=S+Math.imul(W,Ot)|0,p=p+Math.imul(W,mt)|0,p=p+Math.imul(_,Ot)|0,P=P+Math.imul(_,mt)|0,S=S+Math.imul(nt,It)|0,p=p+Math.imul(nt,Ct)|0,p=p+Math.imul(q,It)|0,P=P+Math.imul(q,Ct)|0,S=S+Math.imul(G,Ft)|0,p=p+Math.imul(G,Ht)|0,p=p+Math.imul(Y,Ft)|0,P=P+Math.imul(Y,Ht)|0;var ff=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(ff>>>26)|0,ff&=67108863,S=Math.imul(U,Q),p=Math.imul(U,at),p=p+Math.imul(K,Q)|0,P=Math.imul(K,at),S=S+Math.imul(N,lt)|0,p=p+Math.imul(N,gt)|0,p=p+Math.imul(m,lt)|0,P=P+Math.imul(m,gt)|0,S=S+Math.imul(xt,ae)|0,p=p+Math.imul(xt,ce)|0,p=p+Math.imul(pt,ae)|0,P=P+Math.imul(pt,ce)|0,S=S+Math.imul(dt,pe)|0,p=p+Math.imul(dt,Nt)|0,p=p+Math.imul(ft,pe)|0,P=P+Math.imul(ft,Nt)|0,S=S+Math.imul(yt,Mt)|0,p=p+Math.imul(yt,Rt)|0,p=p+Math.imul(wt,Mt)|0,P=P+Math.imul(wt,Rt)|0,S=S+Math.imul(ot,Bt)|0,p=p+Math.imul(ot,Lt)|0,p=p+Math.imul(ht,Bt)|0,P=P+Math.imul(ht,Lt)|0,S=S+Math.imul(it,Ot)|0,p=p+Math.imul(it,mt)|0,p=p+Math.imul(st,Ot)|0,P=P+Math.imul(st,mt)|0,S=S+Math.imul(W,It)|0,p=p+Math.imul(W,Ct)|0,p=p+Math.imul(_,It)|0,P=P+Math.imul(_,Ct)|0,S=S+Math.imul(nt,Ft)|0,p=p+Math.imul(nt,Ht)|0,p=p+Math.imul(q,Ft)|0,P=P+Math.imul(q,Ht)|0,S=S+Math.imul(G,Ne)|0,p=p+Math.imul(G,Me)|0,p=p+Math.imul(Y,Ne)|0,P=P+Math.imul(Y,Me)|0;var hf=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(hf>>>26)|0,hf&=67108863,S=Math.imul(U,lt),p=Math.imul(U,gt),p=p+Math.imul(K,lt)|0,P=Math.imul(K,gt),S=S+Math.imul(N,ae)|0,p=p+Math.imul(N,ce)|0,p=p+Math.imul(m,ae)|0,P=P+Math.imul(m,ce)|0,S=S+Math.imul(xt,pe)|0,p=p+Math.imul(xt,Nt)|0,p=p+Math.imul(pt,pe)|0,P=P+Math.imul(pt,Nt)|0,S=S+Math.imul(dt,Mt)|0,p=p+Math.imul(dt,Rt)|0,p=p+Math.imul(ft,Mt)|0,P=P+Math.imul(ft,Rt)|0,S=S+Math.imul(yt,Bt)|0,p=p+Math.imul(yt,Lt)|0,p=p+Math.imul(wt,Bt)|0,P=P+Math.imul(wt,Lt)|0,S=S+Math.imul(ot,Ot)|0,p=p+Math.imul(ot,mt)|0,p=p+Math.imul(ht,Ot)|0,P=P+Math.imul(ht,mt)|0,S=S+Math.imul(it,It)|0,p=p+Math.imul(it,Ct)|0,p=p+Math.imul(st,It)|0,P=P+Math.imul(st,Ct)|0,S=S+Math.imul(W,Ft)|0,p=p+Math.imul(W,Ht)|0,p=p+Math.imul(_,Ft)|0,P=P+Math.imul(_,Ht)|0,S=S+Math.imul(nt,Ne)|0,p=p+Math.imul(nt,Me)|0,p=p+Math.imul(q,Ne)|0,P=P+Math.imul(q,Me)|0;var lf=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(lf>>>26)|0,lf&=67108863,S=Math.imul(U,ae),p=Math.imul(U,ce),p=p+Math.imul(K,ae)|0,P=Math.imul(K,ce),S=S+Math.imul(N,pe)|0,p=p+Math.imul(N,Nt)|0,p=p+Math.imul(m,pe)|0,P=P+Math.imul(m,Nt)|0,S=S+Math.imul(xt,Mt)|0,p=p+Math.imul(xt,Rt)|0,p=p+Math.imul(pt,Mt)|0,P=P+Math.imul(pt,Rt)|0,S=S+Math.imul(dt,Bt)|0,p=p+Math.imul(dt,Lt)|0,p=p+Math.imul(ft,Bt)|0,P=P+Math.imul(ft,Lt)|0,S=S+Math.imul(yt,Ot)|0,p=p+Math.imul(yt,mt)|0,p=p+Math.imul(wt,Ot)|0,P=P+Math.imul(wt,mt)|0,S=S+Math.imul(ot,It)|0,p=p+Math.imul(ot,Ct)|0,p=p+Math.imul(ht,It)|0,P=P+Math.imul(ht,Ct)|0,S=S+Math.imul(it,Ft)|0,p=p+Math.imul(it,Ht)|0,p=p+Math.imul(st,Ft)|0,P=P+Math.imul(st,Ht)|0,S=S+Math.imul(W,Ne)|0,p=p+Math.imul(W,Me)|0,p=p+Math.imul(_,Ne)|0,P=P+Math.imul(_,Me)|0;var df=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(df>>>26)|0,df&=67108863,S=Math.imul(U,pe),p=Math.imul(U,Nt),p=p+Math.imul(K,pe)|0,P=Math.imul(K,Nt),S=S+Math.imul(N,Mt)|0,p=p+Math.imul(N,Rt)|0,p=p+Math.imul(m,Mt)|0,P=P+Math.imul(m,Rt)|0,S=S+Math.imul(xt,Bt)|0,p=p+Math.imul(xt,Lt)|0,p=p+Math.imul(pt,Bt)|0,P=P+Math.imul(pt,Lt)|0,S=S+Math.imul(dt,Ot)|0,p=p+Math.imul(dt,mt)|0,p=p+Math.imul(ft,Ot)|0,P=P+Math.imul(ft,mt)|0,S=S+Math.imul(yt,It)|0,p=p+Math.imul(yt,Ct)|0,p=p+Math.imul(wt,It)|0,P=P+Math.imul(wt,Ct)|0,S=S+Math.imul(ot,Ft)|0,p=p+Math.imul(ot,Ht)|0,p=p+Math.imul(ht,Ft)|0,P=P+Math.imul(ht,Ht)|0,S=S+Math.imul(it,Ne)|0,p=p+Math.imul(it,Me)|0,p=p+Math.imul(st,Ne)|0,P=P+Math.imul(st,Me)|0;var pf=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(pf>>>26)|0,pf&=67108863,S=Math.imul(U,Mt),p=Math.imul(U,Rt),p=p+Math.imul(K,Mt)|0,P=Math.imul(K,Rt),S=S+Math.imul(N,Bt)|0,p=p+Math.imul(N,Lt)|0,p=p+Math.imul(m,Bt)|0,P=P+Math.imul(m,Lt)|0,S=S+Math.imul(xt,Ot)|0,p=p+Math.imul(xt,mt)|0,p=p+Math.imul(pt,Ot)|0,P=P+Math.imul(pt,mt)|0,S=S+Math.imul(dt,It)|0,p=p+Math.imul(dt,Ct)|0,p=p+Math.imul(ft,It)|0,P=P+Math.imul(ft,Ct)|0,S=S+Math.imul(yt,Ft)|0,p=p+Math.imul(yt,Ht)|0,p=p+Math.imul(wt,Ft)|0,P=P+Math.imul(wt,Ht)|0,S=S+Math.imul(ot,Ne)|0,p=p+Math.imul(ot,Me)|0,p=p+Math.imul(ht,Ne)|0,P=P+Math.imul(ht,Me)|0;var gf=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(gf>>>26)|0,gf&=67108863,S=Math.imul(U,Bt),p=Math.imul(U,Lt),p=p+Math.imul(K,Bt)|0,P=Math.imul(K,Lt),S=S+Math.imul(N,Ot)|0,p=p+Math.imul(N,mt)|0,p=p+Math.imul(m,Ot)|0,P=P+Math.imul(m,mt)|0,S=S+Math.imul(xt,It)|0,p=p+Math.imul(xt,Ct)|0,p=p+Math.imul(pt,It)|0,P=P+Math.imul(pt,Ct)|0,S=S+Math.imul(dt,Ft)|0,p=p+Math.imul(dt,Ht)|0,p=p+Math.imul(ft,Ft)|0,P=P+Math.imul(ft,Ht)|0,S=S+Math.imul(yt,Ne)|0,p=p+Math.imul(yt,Me)|0,p=p+Math.imul(wt,Ne)|0,P=P+Math.imul(wt,Me)|0;var vf=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(vf>>>26)|0,vf&=67108863,S=Math.imul(U,Ot),p=Math.imul(U,mt),p=p+Math.imul(K,Ot)|0,P=Math.imul(K,mt),S=S+Math.imul(N,It)|0,p=p+Math.imul(N,Ct)|0,p=p+Math.imul(m,It)|0,P=P+Math.imul(m,Ct)|0,S=S+Math.imul(xt,Ft)|0,p=p+Math.imul(xt,Ht)|0,p=p+Math.imul(pt,Ft)|0,P=P+Math.imul(pt,Ht)|0,S=S+Math.imul(dt,Ne)|0,p=p+Math.imul(dt,Me)|0,p=p+Math.imul(ft,Ne)|0,P=P+Math.imul(ft,Me)|0;var mf=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(mf>>>26)|0,mf&=67108863,S=Math.imul(U,It),p=Math.imul(U,Ct),p=p+Math.imul(K,It)|0,P=Math.imul(K,Ct),S=S+Math.imul(N,Ft)|0,p=p+Math.imul(N,Ht)|0,p=p+Math.imul(m,Ft)|0,P=P+Math.imul(m,Ht)|0,S=S+Math.imul(xt,Ne)|0,p=p+Math.imul(xt,Me)|0,p=p+Math.imul(pt,Ne)|0,P=P+Math.imul(pt,Me)|0;var xf=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(xf>>>26)|0,xf&=67108863,S=Math.imul(U,Ft),p=Math.imul(U,Ht),p=p+Math.imul(K,Ft)|0,P=Math.imul(K,Ht),S=S+Math.imul(N,Ne)|0,p=p+Math.imul(N,Me)|0,p=p+Math.imul(m,Ne)|0,P=P+Math.imul(m,Me)|0;var bf=(R+S|0)+((p&8191)<<13)|0;R=(P+(p>>>13)|0)+(bf>>>26)|0,bf&=67108863,S=Math.imul(U,Ne),p=Math.imul(U,Me),p=p+Math.imul(K,Ne)|0,P=Math.imul(K,Me);var yf=(R+S|0)+((p&8191)<<13)|0;return R=(P+(p>>>13)|0)+(yf>>>26)|0,yf&=67108863,A[0]=ef,A[1]=rf,A[2]=nf,A[3]=sf,A[4]=of,A[5]=af,A[6]=cf,A[7]=uf,A[8]=ff,A[9]=hf,A[10]=lf,A[11]=df,A[12]=pf,A[13]=gf,A[14]=vf,A[15]=mf,A[16]=xf,A[17]=bf,A[18]=yf,R!==0&&(A[19]=R,g.length++),g};Math.imul||(B=I);function C(b,c,l){l.negative=c.negative^b.negative,l.length=b.length+c.length;for(var g=0,v=0,d=0;d<l.length-1;d++){var A=v;v=0;for(var R=g&67108863,S=Math.min(d,c.length-1),p=Math.max(0,d-b.length+1);p<=S;p++){var P=d-p,H=b.words[P]|0,G=c.words[p]|0,Y=H*G,rt=Y&67108863;A=A+(Y/67108864|0)|0,rt=rt+R|0,R=rt&67108863,A=A+(rt>>>26)|0,v+=A>>>26,A&=67108863}l.words[d]=R,g=A,A=v}return g!==0?l.words[d]=g:l.length--,l.strip()}function k(b,c,l){var g=new T;return g.mulp(b,c,l)}s.prototype.mulTo=function(c,l){var g,v=this.length+c.length;return this.length===10&&c.length===10?g=B(this,c,l):v<63?g=I(this,c,l):v<1024?g=C(this,c,l):g=k(this,c,l),g};function T(b,c){this.x=b,this.y=c}T.prototype.makeRBT=function(c){for(var l=new Array(c),g=s.prototype._countBits(c)-1,v=0;v<c;v++)l[v]=this.revBin(v,g,c);return l},T.prototype.revBin=function(c,l,g){if(c===0||c===g-1)return c;for(var v=0,d=0;d<l;d++)v|=(c&1)<<l-d-1,c>>=1;return v},T.prototype.permute=function(c,l,g,v,d,A){for(var R=0;R<A;R++)v[R]=l[c[R]],d[R]=g[c[R]]},T.prototype.transform=function(c,l,g,v,d,A){this.permute(A,c,l,g,v,d);for(var R=1;R<d;R<<=1)for(var S=R<<1,p=Math.cos(2*Math.PI/S),P=Math.sin(2*Math.PI/S),H=0;H<d;H+=S)for(var G=p,Y=P,rt=0;rt<R;rt++){var nt=g[H+rt],q=v[H+rt],Z=g[H+rt+R],W=v[H+rt+R],_=G*Z-Y*W;W=G*W+Y*Z,Z=_,g[H+rt]=nt+Z,v[H+rt]=q+W,g[H+rt+R]=nt-Z,v[H+rt+R]=q-W,rt!==S&&(_=p*G-P*Y,Y=p*Y+P*G,G=_)}},T.prototype.guessLen13b=function(c,l){var g=Math.max(l,c)|1,v=g&1,d=0;for(g=g/2|0;g;g=g>>>1)d++;return 1<<d+1+v},T.prototype.conjugate=function(c,l,g){if(!(g<=1))for(var v=0;v<g/2;v++){var d=c[v];c[v]=c[g-v-1],c[g-v-1]=d,d=l[v],l[v]=-l[g-v-1],l[g-v-1]=-d}},T.prototype.normalize13b=function(c,l){for(var g=0,v=0;v<l/2;v++){var d=Math.round(c[2*v+1]/l)*8192+Math.round(c[2*v]/l)+g;c[v]=d&67108863,d<67108864?g=0:g=d/67108864|0}return c},T.prototype.convert13b=function(c,l,g,v){for(var d=0,A=0;A<l;A++)d=d+(c[A]|0),g[2*A]=d&8191,d=d>>>13,g[2*A+1]=d&8191,d=d>>>13;for(A=2*l;A<v;++A)g[A]=0;n(d===0),n((d&-8192)===0)},T.prototype.stub=function(c){for(var l=new Array(c),g=0;g<c;g++)l[g]=0;return l},T.prototype.mulp=function(c,l,g){var v=2*this.guessLen13b(c.length,l.length),d=this.makeRBT(v),A=this.stub(v),R=new Array(v),S=new Array(v),p=new Array(v),P=new Array(v),H=new Array(v),G=new Array(v),Y=g.words;Y.length=v,this.convert13b(c.words,c.length,R,v),this.convert13b(l.words,l.length,P,v),this.transform(R,A,S,p,v,d),this.transform(P,A,H,G,v,d);for(var rt=0;rt<v;rt++){var nt=S[rt]*H[rt]-p[rt]*G[rt];p[rt]=S[rt]*G[rt]+p[rt]*H[rt],S[rt]=nt}return this.conjugate(S,p,v),this.transform(S,p,Y,A,v,d),this.conjugate(Y,A,v),this.normalize13b(Y,v),g.negative=c.negative^l.negative,g.length=c.length+l.length,g.strip()},s.prototype.mul=function(c){var l=new s(null);return l.words=new Array(this.length+c.length),this.mulTo(c,l)},s.prototype.mulf=function(c){var l=new s(null);return l.words=new Array(this.length+c.length),k(this,c,l)},s.prototype.imul=function(c){return this.clone().mulTo(c,this)},s.prototype.imuln=function(c){n(typeof c=="number"),n(c<67108864);for(var l=0,g=0;g<this.length;g++){var v=(this.words[g]|0)*c,d=(v&67108863)+(l&67108863);l>>=26,l+=v/67108864|0,l+=d>>>26,this.words[g]=d&67108863}return l!==0&&(this.words[g]=l,this.length++),this},s.prototype.muln=function(c){return this.clone().imuln(c)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(c){var l=L(c);if(l.length===0)return new s(1);for(var g=this,v=0;v<l.length&&l[v]===0;v++,g=g.sqr());if(++v<l.length)for(var d=g.sqr();v<l.length;v++,d=d.sqr())l[v]!==0&&(g=g.mul(d));return g},s.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var l=c%26,g=(c-l)/26,v=67108863>>>26-l<<26-l,d;if(l!==0){var A=0;for(d=0;d<this.length;d++){var R=this.words[d]&v,S=(this.words[d]|0)-R<<l;this.words[d]=S|A,A=R>>>26-l}A&&(this.words[d]=A,this.length++)}if(g!==0){for(d=this.length-1;d>=0;d--)this.words[d+g]=this.words[d];for(d=0;d<g;d++)this.words[d]=0;this.length+=g}return this.strip()},s.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},s.prototype.iushrn=function(c,l,g){n(typeof c=="number"&&c>=0);var v;l?v=(l-l%26)/26:v=0;var d=c%26,A=Math.min((c-d)/26,this.length),R=67108863^67108863>>>d<<d,S=g;if(v-=A,v=Math.max(0,v),S){for(var p=0;p<A;p++)S.words[p]=this.words[p];S.length=A}if(A!==0)if(this.length>A)for(this.length-=A,p=0;p<this.length;p++)this.words[p]=this.words[p+A];else this.words[0]=0,this.length=1;var P=0;for(p=this.length-1;p>=0&&(P!==0||p>=v);p--){var H=this.words[p]|0;this.words[p]=P<<26-d|H>>>d,P=H&R}return S&&P!==0&&(S.words[S.length++]=P),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(c,l,g){return n(this.negative===0),this.iushrn(c,l,g)},s.prototype.shln=function(c){return this.clone().ishln(c)},s.prototype.ushln=function(c){return this.clone().iushln(c)},s.prototype.shrn=function(c){return this.clone().ishrn(c)},s.prototype.ushrn=function(c){return this.clone().iushrn(c)},s.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var l=c%26,g=(c-l)/26,v=1<<l;if(this.length<=g)return!1;var d=this.words[g];return!!(d&v)},s.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var l=c%26,g=(c-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(l!==0&&g++,this.length=Math.min(g,this.length),l!==0){var v=67108863^67108863>>>l<<l;this.words[this.length-1]&=v}return this.strip()},s.prototype.maskn=function(c){return this.clone().imaskn(c)},s.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},s.prototype._iaddn=function(c){this.words[0]+=c;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},s.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},s.prototype.addn=function(c){return this.clone().iaddn(c)},s.prototype.subn=function(c){return this.clone().isubn(c)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(c,l,g){var v=c.length+g,d;this._expand(v);var A,R=0;for(d=0;d<c.length;d++){A=(this.words[d+g]|0)+R;var S=(c.words[d]|0)*l;A-=S&67108863,R=(A>>26)-(S/67108864|0),this.words[d+g]=A&67108863}for(;d<this.length-g;d++)A=(this.words[d+g]|0)+R,R=A>>26,this.words[d+g]=A&67108863;if(R===0)return this.strip();for(n(R===-1),R=0,d=0;d<this.length;d++)A=-(this.words[d]|0)+R,R=A>>26,this.words[d]=A&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(c,l){var g=this.length-c.length,v=this.clone(),d=c,A=d.words[d.length-1]|0,R=this._countBits(A);g=26-R,g!==0&&(d=d.ushln(g),v.iushln(g),A=d.words[d.length-1]|0);var S=v.length-d.length,p;if(l!=="mod"){p=new s(null),p.length=S+1,p.words=new Array(p.length);for(var P=0;P<p.length;P++)p.words[P]=0}var H=v.clone()._ishlnsubmul(d,1,S);H.negative===0&&(v=H,p&&(p.words[S]=1));for(var G=S-1;G>=0;G--){var Y=(v.words[d.length+G]|0)*67108864+(v.words[d.length+G-1]|0);for(Y=Math.min(Y/A|0,67108863),v._ishlnsubmul(d,Y,G);v.negative!==0;)Y--,v.negative=0,v._ishlnsubmul(d,1,G),v.isZero()||(v.negative^=1);p&&(p.words[G]=Y)}return p&&p.strip(),v.strip(),l!=="div"&&g!==0&&v.iushrn(g),{div:p||null,mod:v}},s.prototype.divmod=function(c,l,g){if(n(!c.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var v,d,A;return this.negative!==0&&c.negative===0?(A=this.neg().divmod(c,l),l!=="mod"&&(v=A.div.neg()),l!=="div"&&(d=A.mod.neg(),g&&d.negative!==0&&d.iadd(c)),{div:v,mod:d}):this.negative===0&&c.negative!==0?(A=this.divmod(c.neg(),l),l!=="mod"&&(v=A.div.neg()),{div:v,mod:A.mod}):(this.negative&c.negative)!==0?(A=this.neg().divmod(c.neg(),l),l!=="div"&&(d=A.mod.neg(),g&&d.negative!==0&&d.isub(c)),{div:A.div,mod:d}):c.length>this.length||this.cmp(c)<0?{div:new s(0),mod:this}:c.length===1?l==="div"?{div:this.divn(c.words[0]),mod:null}:l==="mod"?{div:null,mod:new s(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new s(this.modn(c.words[0]))}:this._wordDiv(c,l)},s.prototype.div=function(c){return this.divmod(c,"div",!1).div},s.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},s.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},s.prototype.divRound=function(c){var l=this.divmod(c);if(l.mod.isZero())return l.div;var g=l.div.negative!==0?l.mod.isub(c):l.mod,v=c.ushrn(1),d=c.andln(1),A=g.cmp(v);return A<0||d===1&&A===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},s.prototype.modn=function(c){n(c<=67108863);for(var l=(1<<26)%c,g=0,v=this.length-1;v>=0;v--)g=(l*g+(this.words[v]|0))%c;return g},s.prototype.idivn=function(c){n(c<=67108863);for(var l=0,g=this.length-1;g>=0;g--){var v=(this.words[g]|0)+l*67108864;this.words[g]=v/c|0,l=v%c}return this.strip()},s.prototype.divn=function(c){return this.clone().idivn(c)},s.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var l=this,g=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var v=new s(1),d=new s(0),A=new s(0),R=new s(1),S=0;l.isEven()&&g.isEven();)l.iushrn(1),g.iushrn(1),++S;for(var p=g.clone(),P=l.clone();!l.isZero();){for(var H=0,G=1;(l.words[0]&G)===0&&H<26;++H,G<<=1);if(H>0)for(l.iushrn(H);H-- >0;)(v.isOdd()||d.isOdd())&&(v.iadd(p),d.isub(P)),v.iushrn(1),d.iushrn(1);for(var Y=0,rt=1;(g.words[0]&rt)===0&&Y<26;++Y,rt<<=1);if(Y>0)for(g.iushrn(Y);Y-- >0;)(A.isOdd()||R.isOdd())&&(A.iadd(p),R.isub(P)),A.iushrn(1),R.iushrn(1);l.cmp(g)>=0?(l.isub(g),v.isub(A),d.isub(R)):(g.isub(l),A.isub(v),R.isub(d))}return{a:A,b:R,gcd:g.iushln(S)}},s.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var l=this,g=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var v=new s(1),d=new s(0),A=g.clone();l.cmpn(1)>0&&g.cmpn(1)>0;){for(var R=0,S=1;(l.words[0]&S)===0&&R<26;++R,S<<=1);if(R>0)for(l.iushrn(R);R-- >0;)v.isOdd()&&v.iadd(A),v.iushrn(1);for(var p=0,P=1;(g.words[0]&P)===0&&p<26;++p,P<<=1);if(p>0)for(g.iushrn(p);p-- >0;)d.isOdd()&&d.iadd(A),d.iushrn(1);l.cmp(g)>=0?(l.isub(g),v.isub(d)):(g.isub(l),d.isub(v))}var H;return l.cmpn(1)===0?H=v:H=d,H.cmpn(0)<0&&H.iadd(c),H},s.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var l=this.clone(),g=c.clone();l.negative=0,g.negative=0;for(var v=0;l.isEven()&&g.isEven();v++)l.iushrn(1),g.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;g.isEven();)g.iushrn(1);var d=l.cmp(g);if(d<0){var A=l;l=g,g=A}else if(d===0||g.cmpn(1)===0)break;l.isub(g)}while(!0);return g.iushln(v)},s.prototype.invm=function(c){return this.egcd(c).a.umod(c)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(c){return this.words[0]&c},s.prototype.bincn=function(c){n(typeof c=="number");var l=c%26,g=(c-l)/26,v=1<<l;if(this.length<=g)return this._expand(g+1),this.words[g]|=v,this;for(var d=v,A=g;d!==0&&A<this.length;A++){var R=this.words[A]|0;R+=d,d=R>>>26,R&=67108863,this.words[A]=R}return d!==0&&(this.words[A]=d,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(c){var l=c<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var g;if(this.length>1)g=1;else{l&&(c=-c),n(c<=67108863,"Number is too big");var v=this.words[0]|0;g=v===c?0:v<c?-1:1}return this.negative!==0?-g|0:g},s.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var l=this.ucmp(c);return this.negative!==0?-l|0:l},s.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var l=0,g=this.length-1;g>=0;g--){var v=this.words[g]|0,d=c.words[g]|0;if(v!==d){v<d?l=-1:v>d&&(l=1);break}}return l},s.prototype.gtn=function(c){return this.cmpn(c)===1},s.prototype.gt=function(c){return this.cmp(c)===1},s.prototype.gten=function(c){return this.cmpn(c)>=0},s.prototype.gte=function(c){return this.cmp(c)>=0},s.prototype.ltn=function(c){return this.cmpn(c)===-1},s.prototype.lt=function(c){return this.cmp(c)===-1},s.prototype.lten=function(c){return this.cmpn(c)<=0},s.prototype.lte=function(c){return this.cmp(c)<=0},s.prototype.eqn=function(c){return this.cmpn(c)===0},s.prototype.eq=function(c){return this.cmp(c)===0},s.red=function(c){return new M(c)},s.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(c){return this.red=c,this},s.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},s.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},s.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},s.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},s.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},s.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},s.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},s.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var D={k256:null,p224:null,p192:null,p25519:null};function F(b,c){this.name=b,this.p=new s(c,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}F.prototype._tmp=function(){var c=new s(null);return c.words=new Array(Math.ceil(this.n/13)),c},F.prototype.ireduce=function(c){var l=c,g;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),g=l.bitLength();while(g>this.n);var v=g<this.n?-1:l.ucmp(this.p);return v===0?(l.words[0]=0,l.length=1):v>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},F.prototype.split=function(c,l){c.iushrn(this.n,0,l)},F.prototype.imulK=function(c){return c.imul(this.k)};function V(){F.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(V,F),V.prototype.split=function(c,l){for(var g=4194303,v=Math.min(c.length,9),d=0;d<v;d++)l.words[d]=c.words[d];if(l.length=v,c.length<=9){c.words[0]=0,c.length=1;return}var A=c.words[9];for(l.words[l.length++]=A&g,d=10;d<c.length;d++){var R=c.words[d]|0;c.words[d-10]=(R&g)<<4|A>>>22,A=R}A>>>=22,c.words[d-10]=A,A===0&&c.length>10?c.length-=10:c.length-=9},V.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var l=0,g=0;g<c.length;g++){var v=c.words[g]|0;l+=v*977,c.words[g]=l&67108863,l=v*64+(l/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function z(){F.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(z,F);function $(){F.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i($,F);function O(){F.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(O,F),O.prototype.imulK=function(c){for(var l=0,g=0;g<c.length;g++){var v=(c.words[g]|0)*19+l,d=v&67108863;v>>>=26,c.words[g]=d,l=v}return l!==0&&(c.words[c.length++]=l),c},s._prime=function(c){if(D[c])return D[c];var l;if(c==="k256")l=new V;else if(c==="p224")l=new z;else if(c==="p192")l=new $;else if(c==="p25519")l=new O;else throw new Error("Unknown prime "+c);return D[c]=l,l};function M(b){if(typeof b=="string"){var c=s._prime(b);this.m=c.p,this.prime=c}else n(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}M.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},M.prototype._verify2=function(c,l){n((c.negative|l.negative)===0,"red works only with positives"),n(c.red&&c.red===l.red,"red works only with red numbers")},M.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):c.umod(this.m)._forceRed(this)},M.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},M.prototype.add=function(c,l){this._verify2(c,l);var g=c.add(l);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},M.prototype.iadd=function(c,l){this._verify2(c,l);var g=c.iadd(l);return g.cmp(this.m)>=0&&g.isub(this.m),g},M.prototype.sub=function(c,l){this._verify2(c,l);var g=c.sub(l);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},M.prototype.isub=function(c,l){this._verify2(c,l);var g=c.isub(l);return g.cmpn(0)<0&&g.iadd(this.m),g},M.prototype.shl=function(c,l){return this._verify1(c),this.imod(c.ushln(l))},M.prototype.imul=function(c,l){return this._verify2(c,l),this.imod(c.imul(l))},M.prototype.mul=function(c,l){return this._verify2(c,l),this.imod(c.mul(l))},M.prototype.isqr=function(c){return this.imul(c,c.clone())},M.prototype.sqr=function(c){return this.mul(c,c)},M.prototype.sqrt=function(c){if(c.isZero())return c.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var g=this.m.add(new s(1)).iushrn(2);return this.pow(c,g)}for(var v=this.m.subn(1),d=0;!v.isZero()&&v.andln(1)===0;)d++,v.iushrn(1);n(!v.isZero());var A=new s(1).toRed(this),R=A.redNeg(),S=this.m.subn(1).iushrn(1),p=this.m.bitLength();for(p=new s(2*p*p).toRed(this);this.pow(p,S).cmp(R)!==0;)p.redIAdd(R);for(var P=this.pow(p,v),H=this.pow(c,v.addn(1).iushrn(1)),G=this.pow(c,v),Y=d;G.cmp(A)!==0;){for(var rt=G,nt=0;rt.cmp(A)!==0;nt++)rt=rt.redSqr();n(nt<Y);var q=this.pow(P,new s(1).iushln(Y-nt-1));H=H.redMul(q),P=q.redSqr(),G=G.redMul(P),Y=nt}return H},M.prototype.invm=function(c){var l=c._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},M.prototype.pow=function(c,l){if(l.isZero())return new s(1).toRed(this);if(l.cmpn(1)===0)return c.clone();var g=4,v=new Array(1<<g);v[0]=new s(1).toRed(this),v[1]=c;for(var d=2;d<v.length;d++)v[d]=this.mul(v[d-1],c);var A=v[0],R=0,S=0,p=l.bitLength()%26;for(p===0&&(p=26),d=l.length-1;d>=0;d--){for(var P=l.words[d],H=p-1;H>=0;H--){var G=P>>H&1;if(A!==v[0]&&(A=this.sqr(A)),G===0&&R===0){S=0;continue}R<<=1,R|=G,S++,!(S!==g&&(d!==0||H!==0))&&(A=this.mul(A,v[R]),S=0,R=0)}p=26}return A},M.prototype.convertTo=function(c){var l=c.umod(this.m);return l===c?l.clone():l},M.prototype.convertFrom=function(c){var l=c.clone();return l.red=null,l},s.mont=function(c){return new x(c)};function x(b){M.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(x,M),x.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},x.prototype.convertFrom=function(c){var l=this.imod(c.mul(this.rinv));return l.red=null,l},x.prototype.imul=function(c,l){if(c.isZero()||l.isZero())return c.words[0]=0,c.length=1,c;var g=c.imul(l),v=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=g.isub(v).iushrn(this.shift),A=d;return d.cmp(this.m)>=0?A=d.isub(this.m):d.cmpn(0)<0&&(A=d.iadd(this.m)),A._forceRed(this)},x.prototype.mul=function(c,l){if(c.isZero()||l.isZero())return new s(0)._forceRed(this);var g=c.mul(l),v=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=g.isub(v).iushrn(this.shift),A=d;return d.cmp(this.m)>=0?A=d.isub(this.m):d.cmpn(0)<0&&(A=d.iadd(this.m)),A._forceRed(this)},x.prototype.invm=function(c){var l=this.imod(c._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(e,Kt)})(qr);var Mi=Nl;function Nl(e,t){if(!e)throw new Error(t||"Assertion failed")}Nl.equal=function(t,r,n){if(t!=r)throw new Error(n||"Assertion failed: "+t+" != "+r)};var kc={};(function(e){var t=e;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var u=0;u<s.length;u++)a[u]=s[u]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var u=0;u<s.length;u+=2)a.push(parseInt(s[u]+s[u+1],16))}else for(var u=0;u<s.length;u++){var h=s.charCodeAt(u),f=h>>8,y=h&255;f?a.push(f,y):a.push(y)}return a}t.toArray=r;function n(s){return s.length===1?"0"+s:s}t.zero2=n;function i(s){for(var o="",a=0;a<s.length;a++)o+=n(s[a].toString(16));return o}t.toHex=i,t.encode=function(o,a){return a==="hex"?i(o):o}})(kc),function(e){var t=e,r=qr.exports,n=Mi,i=kc;t.assert=n,t.toArray=i.toArray,t.zero2=i.zero2,t.toHex=i.toHex,t.encode=i.encode;function s(f,y,w){var L=new Array(Math.max(f.bitLength(),w)+1);L.fill(0);for(var I=1<<y+1,B=f.clone(),C=0;C<L.length;C++){var k,T=B.andln(I-1);B.isOdd()?(T>(I>>1)-1?k=(I>>1)-T:k=T,B.isubn(k)):k=0,L[C]=k,B.iushrn(1)}return L}t.getNAF=s;function o(f,y){var w=[[],[]];f=f.clone(),y=y.clone();for(var L=0,I=0,B;f.cmpn(-L)>0||y.cmpn(-I)>0;){var C=f.andln(3)+L&3,k=y.andln(3)+I&3;C===3&&(C=-1),k===3&&(k=-1);var T;(C&1)===0?T=0:(B=f.andln(7)+L&7,(B===3||B===5)&&k===2?T=-C:T=C),w[0].push(T);var D;(k&1)===0?D=0:(B=y.andln(7)+I&7,(B===3||B===5)&&C===2?D=-k:D=k),w[1].push(D),2*L===T+1&&(L=1-L),2*I===D+1&&(I=1-I),f.iushrn(1),y.iushrn(1)}return w}t.getJSF=o;function a(f,y,w){var L="_"+y;f.prototype[y]=function(){return this[L]!==void 0?this[L]:this[L]=w.call(this)}}t.cachedProperty=a;function u(f){return typeof f=="string"?t.toArray(f,"hex"):f}t.parseBytes=u;function h(f){return new r(f,"hex","le")}t.intFromLE=h}(vr);var Fa={exports:{}},Dc;Fa.exports=function(t){return Dc||(Dc=new ti(null)),Dc.generate(t)};function ti(e){this.rand=e}if(Fa.exports.Rand=ti,ti.prototype.generate=function(t){return this._rand(t)},ti.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var r=new Uint8Array(t),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r},typeof self=="object")self.crypto&&self.crypto.getRandomValues?ti.prototype._rand=function(t){var r=new Uint8Array(t);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?ti.prototype._rand=function(t){var r=new Uint8Array(t);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(ti.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var Ml=require("crypto");if(typeof Ml.randomBytes!="function")throw new Error("Not supported");ti.prototype._rand=function(t){return Ml.randomBytes(t)}}catch{}var Fc={},Bi=qr.exports,ho=vr,Ha=ho.getNAF,g2=ho.getJSF,Ka=ho.assert;function ei(e,t){this.type=e,this.p=new Bi(t.p,16),this.red=t.prime?Bi.red(t.prime):Bi.mont(this.p),this.zero=new Bi(0).toRed(this.red),this.one=new Bi(1).toRed(this.red),this.two=new Bi(2).toRed(this.red),this.n=t.n&&new Bi(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var $a=ei;ei.prototype.point=function(){throw new Error("Not implemented")},ei.prototype.validate=function(){throw new Error("Not implemented")},ei.prototype._fixedNafMul=function(t,r){Ka(t.precomputed);var n=t._getDoubles(),i=Ha(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,u;for(a=0;a<i.length;a+=n.step){u=0;for(var h=a+n.step-1;h>=a;h--)u=(u<<1)+i[h];o.push(u)}for(var f=this.jpoint(null,null,null),y=this.jpoint(null,null,null),w=s;w>0;w--){for(a=0;a<o.length;a++)u=o[a],u===w?y=y.mixedAdd(n.points[a]):u===-w&&(y=y.mixedAdd(n.points[a].neg()));f=f.add(y)}return f.toP()},ei.prototype._wnafMul=function(t,r){var n=4,i=t._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Ha(r,n,this._bitLength),a=this.jpoint(null,null,null),u=o.length-1;u>=0;u--){for(var h=0;u>=0&&o[u]===0;u--)h++;if(u>=0&&h++,a=a.dblp(h),u<0)break;var f=o[u];Ka(f!==0),t.type==="affine"?f>0?a=a.mixedAdd(s[f-1>>1]):a=a.mixedAdd(s[-f-1>>1].neg()):f>0?a=a.add(s[f-1>>1]):a=a.add(s[-f-1>>1].neg())}return t.type==="affine"?a.toP():a},ei.prototype._wnafMulAdd=function(t,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,u=this._wnafT3,h=0,f,y,w;for(f=0;f<i;f++){w=r[f];var L=w._getNAFPoints(t);o[f]=L.wnd,a[f]=L.points}for(f=i-1;f>=1;f-=2){var I=f-1,B=f;if(o[I]!==1||o[B]!==1){u[I]=Ha(n[I],o[I],this._bitLength),u[B]=Ha(n[B],o[B],this._bitLength),h=Math.max(u[I].length,h),h=Math.max(u[B].length,h);continue}var C=[r[I],null,null,r[B]];r[I].y.cmp(r[B].y)===0?(C[1]=r[I].add(r[B]),C[2]=r[I].toJ().mixedAdd(r[B].neg())):r[I].y.cmp(r[B].y.redNeg())===0?(C[1]=r[I].toJ().mixedAdd(r[B]),C[2]=r[I].add(r[B].neg())):(C[1]=r[I].toJ().mixedAdd(r[B]),C[2]=r[I].toJ().mixedAdd(r[B].neg()));var k=[-3,-1,-5,-7,0,7,5,1,3],T=g2(n[I],n[B]);for(h=Math.max(T[0].length,h),u[I]=new Array(h),u[B]=new Array(h),y=0;y<h;y++){var D=T[0][y]|0,F=T[1][y]|0;u[I][y]=k[(D+1)*3+(F+1)],u[B][y]=0,a[I]=C}}var V=this.jpoint(null,null,null),z=this._wnafT4;for(f=h;f>=0;f--){for(var $=0;f>=0;){var O=!0;for(y=0;y<i;y++)z[y]=u[y][f]|0,z[y]!==0&&(O=!1);if(!O)break;$++,f--}if(f>=0&&$++,V=V.dblp($),f<0)break;for(y=0;y<i;y++){var M=z[y];M!==0&&(M>0?w=a[y][M-1>>1]:M<0&&(w=a[y][-M-1>>1].neg()),w.type==="affine"?V=V.mixedAdd(w):V=V.add(w))}}for(f=0;f<i;f++)a[f]=null;return s?V:V.toP()};function Pr(e,t){this.curve=e,this.type=t,this.precomputed=null}ei.BasePoint=Pr,Pr.prototype.eq=function(){throw new Error("Not implemented")},Pr.prototype.validate=function(){return this.curve.validate(this)},ei.prototype.decodePoint=function(t,r){t=ho.toArray(t,r);var n=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*n){t[0]===6?Ka(t[t.length-1]%2===0):t[0]===7&&Ka(t[t.length-1]%2===1);var i=this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));return i}else if((t[0]===2||t[0]===3)&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),t[0]===3);throw new Error("Unknown point format")},Pr.prototype.encodeCompressed=function(t){return this.encode(t,!0)},Pr.prototype._encode=function(t){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))},Pr.prototype.encode=function(t,r){return ho.encode(this._encode(r),t)},Pr.prototype.precompute=function(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this},Pr.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((t.bitLength()+1)/r.step):!1},Pr.prototype._getDoubles=function(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=t){for(var o=0;o<t;o++)i=i.dbl();n.push(i)}return{step:t,points:n}},Pr.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<t)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:t,points:r}},Pr.prototype._getBeta=function(){return null},Pr.prototype.dblp=function(t){for(var r=this,n=0;n<t;n++)r=r.dbl();return r};var v2=vr,_e=qr.exports,Hc=we.exports,ds=$a,m2=v2.assert;function Tr(e){ds.call(this,"short",e),this.a=new _e(e.a,16).toRed(this.red),this.b=new _e(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Hc(Tr,ds);var x2=Tr;Tr.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(t.beta)r=new _e(t.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(t.lambda)n=new _e(t.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],m2(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return t.basis?o=t.basis.map(function(a){return{a:new _e(a.a,16),b:new _e(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}},Tr.prototype._getEndoRoots=function(t){var r=t===this.p?this.red:_e.mont(t),n=new _e(2).toRed(r).redInvm(),i=n.redNeg(),s=new _e(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]},Tr.prototype._getEndoBasis=function(t){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=t,i=this.n.clone(),s=new _e(1),o=new _e(0),a=new _e(0),u=new _e(1),h,f,y,w,L,I,B,C=0,k,T;n.cmpn(0)!==0;){var D=i.div(n);k=i.sub(D.mul(n)),T=a.sub(D.mul(s));var F=u.sub(D.mul(o));if(!y&&k.cmp(r)<0)h=B.neg(),f=s,y=k.neg(),w=T;else if(y&&++C===2)break;B=k,i=n,n=k,a=s,s=T,u=o,o=F}L=k.neg(),I=T;var V=y.sqr().add(w.sqr()),z=L.sqr().add(I.sqr());return z.cmp(V)>=0&&(L=h,I=f),y.negative&&(y=y.neg(),w=w.neg()),L.negative&&(L=L.neg(),I=I.neg()),[{a:y,b:w},{a:L,b:I}]},Tr.prototype._endoSplit=function(t){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(t).divRound(this.n),o=n.b.neg().mul(t).divRound(this.n),a=s.mul(n.a),u=o.mul(i.a),h=s.mul(n.b),f=o.mul(i.b),y=t.sub(a).sub(u),w=h.add(f).neg();return{k1:y,k2:w}},Tr.prototype.pointFromX=function(t,r){t=new _e(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(t,i)},Tr.prototype.validate=function(t){if(t.inf)return!0;var r=t.x,n=t.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0},Tr.prototype._endoWnafMulAdd=function(t,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(r[o]),u=t[o],h=u._getBeta();a.k1.negative&&(a.k1.ineg(),u=u.neg(!0)),a.k2.negative&&(a.k2.ineg(),h=h.neg(!0)),i[o*2]=u,i[o*2+1]=h,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var f=this._wnafMulAdd(1,i,s,o*2,n),y=0;y<o*2;y++)i[y]=null,s[y]=null;return f};function Fe(e,t,r,n){ds.BasePoint.call(this,e,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new _e(t,16),this.y=new _e(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Hc(Fe,ds.BasePoint),Tr.prototype.point=function(t,r,n){return new Fe(this,t,r,n)},Tr.prototype.pointFromJSON=function(t,r){return Fe.fromJSON(this,t,r)},Fe.prototype._getBeta=function(){if(!!this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return r}},Fe.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Fe.fromJSON=function(t,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=t.point(r[0],r[1],n);if(!r[2])return i;function s(a){return t.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i},Fe.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Fe.prototype.isInfinity=function(){return this.inf},Fe.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(t.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)},Fe.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=t.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},Fe.prototype.getX=function(){return this.x.fromRed()},Fe.prototype.getY=function(){return this.y.fromRed()},Fe.prototype.mul=function(t){return t=new _e(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},Fe.prototype.mulAdd=function(t,r,n){var i=[this,r],s=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)},Fe.prototype.jmulAdd=function(t,r,n){var i=[this,r],s=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)},Fe.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)},Fe.prototype.neg=function(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r},Fe.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function Ge(e,t,r,n){ds.BasePoint.call(this,e,"jacobian"),t===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new _e(0)):(this.x=new _e(t,16),this.y=new _e(r,16),this.z=new _e(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Hc(Ge,ds.BasePoint),Tr.prototype.jpoint=function(t,r,n){return new Ge(this,t,r,n)},Ge.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(t);return this.curve.point(n,i)},Ge.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Ge.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=t.x.redMul(n),o=this.y.redMul(r.redMul(t.z)),a=t.y.redMul(n.redMul(this.z)),u=i.redSub(s),h=o.redSub(a);if(u.cmpn(0)===0)return h.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=u.redSqr(),y=f.redMul(u),w=i.redMul(f),L=h.redSqr().redIAdd(y).redISub(w).redISub(w),I=h.redMul(w.redISub(L)).redISub(o.redMul(y)),B=this.z.redMul(t.z).redMul(u);return this.curve.jpoint(L,I,B)},Ge.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=t.x.redMul(r),s=this.y,o=t.y.redMul(r).redMul(this.z),a=n.redSub(i),u=s.redSub(o);if(a.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=a.redSqr(),f=h.redMul(a),y=n.redMul(h),w=u.redSqr().redIAdd(f).redISub(y).redISub(y),L=u.redMul(y.redISub(w)).redISub(s.redMul(f)),I=this.z.redMul(a);return this.curve.jpoint(w,L,I)},Ge.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<t;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,u=this.z,h=u.redSqr().redSqr(),f=a.redAdd(a);for(r=0;r<t;r++){var y=o.redSqr(),w=f.redSqr(),L=w.redSqr(),I=y.redAdd(y).redIAdd(y).redIAdd(i.redMul(h)),B=o.redMul(w),C=I.redSqr().redISub(B.redAdd(B)),k=B.redISub(C),T=I.redMul(k);T=T.redIAdd(T).redISub(L);var D=f.redMul(u);r+1<t&&(h=h.redMul(L)),o=C,u=D,f=T}return this.curve.jpoint(o,f.redMul(s),u)},Ge.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Ge.prototype._zeroDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i),h=u.redSqr().redISub(a).redISub(a),f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),t=h,r=u.redMul(a.redISub(h)).redISub(f),n=this.y.redAdd(this.y)}else{var y=this.x.redSqr(),w=this.y.redSqr(),L=w.redSqr(),I=this.x.redAdd(w).redSqr().redISub(y).redISub(L);I=I.redIAdd(I);var B=y.redAdd(y).redIAdd(y),C=B.redSqr(),k=L.redIAdd(L);k=k.redIAdd(k),k=k.redIAdd(k),t=C.redISub(I).redISub(I),r=B.redMul(I.redISub(t)).redISub(k),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(t,r,n)},Ge.prototype._threeDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),h=u.redSqr().redISub(a).redISub(a);t=h;var f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),r=u.redMul(a.redISub(h)).redISub(f),n=this.y.redAdd(this.y)}else{var y=this.z.redSqr(),w=this.y.redSqr(),L=this.x.redMul(w),I=this.x.redSub(y).redMul(this.x.redAdd(y));I=I.redAdd(I).redIAdd(I);var B=L.redIAdd(L);B=B.redIAdd(B);var C=B.redAdd(B);t=I.redSqr().redISub(C),n=this.y.redAdd(this.z).redSqr().redISub(w).redISub(y);var k=w.redSqr();k=k.redIAdd(k),k=k.redIAdd(k),k=k.redIAdd(k),r=I.redMul(B.redISub(t)).redISub(k)}return this.curve.jpoint(t,r,n)},Ge.prototype._dbl=function(){var t=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),u=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(s)),h=r.redAdd(r);h=h.redIAdd(h);var f=h.redMul(a),y=u.redSqr().redISub(f.redAdd(f)),w=f.redISub(y),L=a.redSqr();L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L);var I=u.redMul(w).redISub(L),B=n.redAdd(n).redMul(i);return this.curve.jpoint(y,I,B)},Ge.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=t.redAdd(t).redIAdd(t),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(t).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var u=a.redSqr(),h=i.redIAdd(i);h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var f=s.redIAdd(a).redSqr().redISub(o).redISub(u).redISub(h),y=r.redMul(f);y=y.redIAdd(y),y=y.redIAdd(y);var w=this.x.redMul(u).redISub(y);w=w.redIAdd(w),w=w.redIAdd(w);var L=this.y.redMul(f.redMul(h.redISub(f)).redISub(a.redMul(u)));L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L);var I=this.z.redAdd(a).redSqr().redISub(n).redISub(u);return this.curve.jpoint(w,L,I)},Ge.prototype.mul=function(t,r){return t=new _e(t,r),this.curve._wnafMul(this,t)},Ge.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),n=t.z.redSqr();if(this.x.redMul(n).redISub(t.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(t.z);return this.y.redMul(s).redISub(t.y.redMul(i)).cmpn(0)===0},Ge.prototype.eqXToP=function(t){var r=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=t.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}},Ge.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Ge.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var ps=qr.exports,Bl=we.exports,za=$a,b2=vr;function gs(e){za.call(this,"mont",e),this.a=new ps(e.a,16).toRed(this.red),this.b=new ps(e.b,16).toRed(this.red),this.i4=new ps(4).toRed(this.red).redInvm(),this.two=new ps(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Bl(gs,za);var y2=gs;gs.prototype.validate=function(t){var r=t.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=i.redSqrt();return s.redSqr().cmp(i)===0};function He(e,t,r){za.BasePoint.call(this,e,"projective"),t===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new ps(t,16),this.z=new ps(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Bl(He,za.BasePoint),gs.prototype.decodePoint=function(t,r){return this.point(b2.toArray(t,r),1)},gs.prototype.point=function(t,r){return new He(this,t,r)},gs.prototype.pointFromJSON=function(t){return He.fromJSON(this,t)},He.prototype.precompute=function(){},He.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},He.fromJSON=function(t,r){return new He(t,r[0],r[1]||t.one)},He.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},He.prototype.isInfinity=function(){return this.z.cmpn(0)===0},He.prototype.dbl=function(){var t=this.x.redAdd(this.z),r=t.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=r.redSub(i),o=r.redMul(i),a=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)},He.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},He.prototype.diffAdd=function(t,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=t.x.redAdd(t.z),o=t.x.redSub(t.z),a=o.redMul(n),u=s.redMul(i),h=r.z.redMul(a.redAdd(u).redSqr()),f=r.x.redMul(a.redISub(u).redSqr());return this.curve.point(h,f)},He.prototype.mul=function(t){for(var r=t.clone(),n=this,i=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i},He.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},He.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},He.prototype.eq=function(t){return this.getX().cmp(t.getX())===0},He.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},He.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var w2=vr,Sn=qr.exports,Cl=we.exports,Va=$a,E2=w2.assert;function Wr(e){this.twisted=(e.a|0)!==1,this.mOneA=this.twisted&&(e.a|0)===-1,this.extended=this.mOneA,Va.call(this,"edwards",e),this.a=new Sn(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Sn(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Sn(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),E2(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(e.c|0)===1}Cl(Wr,Va);var _2=Wr;Wr.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},Wr.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},Wr.prototype.jpoint=function(t,r,n,i){return this.point(t,r,n,i)},Wr.prototype.pointFromX=function(t,r){t=new Sn(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var u=a.fromRed().isOdd();return(r&&!u||!r&&u)&&(a=a.redNeg()),this.point(t,a)},Wr.prototype.pointFromY=function(t,r){t=new Sn(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,t)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,t)},Wr.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var r=t.x.redSqr(),n=t.y.redSqr(),i=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function he(e,t,r,n,i){Va.BasePoint.call(this,e,"projective"),t===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Sn(t,16),this.y=new Sn(r,16),this.z=n?new Sn(n,16):this.curve.one,this.t=i&&new Sn(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Cl(he,Va.BasePoint),Wr.prototype.pointFromJSON=function(t){return he.fromJSON(this,t)},Wr.prototype.point=function(t,r,n,i){return new he(this,t,r,n,i)},he.fromJSON=function(t,r){return new he(t,r[0],r[1],r[2])},he.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},he.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},he.prototype._extDbl=function(){var t=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(t),s=this.x.redAdd(this.y).redSqr().redISub(t).redISub(r),o=i.redAdd(r),a=o.redSub(n),u=i.redSub(r),h=s.redMul(a),f=o.redMul(u),y=s.redMul(u),w=a.redMul(o);return this.curve.point(h,f,w,y)},he.prototype._projDbl=function(){var t=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,s,o,a,u,h;if(this.curve.twisted){a=this.curve._mulA(r);var f=a.redAdd(n);this.zOne?(i=t.redSub(r).redSub(n).redMul(f.redSub(this.curve.two)),s=f.redMul(a.redSub(n)),o=f.redSqr().redSub(f).redSub(f)):(u=this.z.redSqr(),h=f.redSub(u).redISub(u),i=t.redSub(r).redISub(n).redMul(h),s=f.redMul(a.redSub(n)),o=f.redMul(h))}else a=r.redAdd(n),u=this.curve._mulC(this.z).redSqr(),h=a.redSub(u).redSub(u),i=this.curve._mulC(t.redISub(a)).redMul(h),s=this.curve._mulC(a).redMul(r.redISub(n)),o=a.redMul(h);return this.curve.point(i,s,o)},he.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},he.prototype._extAdd=function(t){var r=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),n=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),i=this.t.redMul(this.curve.dd).redMul(t.t),s=this.z.redMul(t.z.redAdd(t.z)),o=n.redSub(r),a=s.redSub(i),u=s.redAdd(i),h=n.redAdd(r),f=o.redMul(a),y=u.redMul(h),w=o.redMul(h),L=a.redMul(u);return this.curve.point(f,y,L,w)},he.prototype._projAdd=function(t){var r=this.z.redMul(t.z),n=r.redSqr(),i=this.x.redMul(t.x),s=this.y.redMul(t.y),o=this.curve.d.redMul(i).redMul(s),a=n.redSub(o),u=n.redAdd(o),h=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(i).redISub(s),f=r.redMul(a).redMul(h),y,w;return this.curve.twisted?(y=r.redMul(u).redMul(s.redSub(this.curve._mulA(i))),w=a.redMul(u)):(y=r.redMul(u).redMul(s.redSub(i)),w=this.curve._mulC(a).redMul(u)),this.curve.point(f,y,w)},he.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},he.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},he.prototype.mulAdd=function(t,r,n){return this.curve._wnafMulAdd(1,[this,r],[t,n],2,!1)},he.prototype.jmulAdd=function(t,r,n){return this.curve._wnafMulAdd(1,[this,r],[t,n],2,!0)},he.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},he.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},he.prototype.getX=function(){return this.normalize(),this.x.fromRed()},he.prototype.getY=function(){return this.normalize(),this.y.fromRed()},he.prototype.eq=function(t){return this===t||this.getX().cmp(t.getX())===0&&this.getY().cmp(t.getY())===0},he.prototype.eqXToP=function(t){var r=t.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=t.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}},he.prototype.toP=he.prototype.normalize,he.prototype.mixedAdd=he.prototype.add,function(e){var t=e;t.base=$a,t.short=x2,t.mont=y2,t.edwards=_2}(Fc);var ja={},Ga={},$t={},S2=Mi,A2=we.exports;$t.inherits=A2;function P2(e,t){return(e.charCodeAt(t)&64512)!==55296||t<0||t+1>=e.length?!1:(e.charCodeAt(t+1)&64512)===56320}function T2(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e=="string")if(t){if(t==="hex")for(e=e.replace(/[^a-z0-9]+/ig,""),e.length%2!==0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):P2(e,i)?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<e.length;i++)r[i]=e[i]|0;return r}$t.toArray=T2;function R2(e){for(var t="",r=0;r<e.length;r++)t+=kl(e[r].toString(16));return t}$t.toHex=R2;function Ul(e){var t=e>>>24|e>>>8&65280|e<<8&16711680|(e&255)<<24;return t>>>0}$t.htonl=Ul;function L2(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];t==="little"&&(i=Ul(i)),r+=Dl(i.toString(16))}return r}$t.toHex32=L2;function kl(e){return e.length===1?"0"+e:e}$t.zero2=kl;function Dl(e){return e.length===7?"0"+e:e.length===6?"00"+e:e.length===5?"000"+e:e.length===4?"0000"+e:e.length===3?"00000"+e:e.length===2?"000000"+e:e.length===1?"0000000"+e:e}$t.zero8=Dl;function O2(e,t,r,n){var i=r-t;S2(i%4===0);for(var s=new Array(i/4),o=0,a=t;o<s.length;o++,a+=4){var u;n==="big"?u=e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:u=e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],s[o]=u>>>0}return s}$t.join32=O2;function I2(e,t){for(var r=new Array(e.length*4),n=0,i=0;n<e.length;n++,i+=4){var s=e[n];t==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}$t.split32=I2;function N2(e,t){return e>>>t|e<<32-t}$t.rotr32=N2;function M2(e,t){return e<<t|e>>>32-t}$t.rotl32=M2;function B2(e,t){return e+t>>>0}$t.sum32=B2;function C2(e,t,r){return e+t+r>>>0}$t.sum32_3=C2;function U2(e,t,r,n){return e+t+r+n>>>0}$t.sum32_4=U2;function k2(e,t,r,n,i){return e+t+r+n+i>>>0}$t.sum32_5=k2;function D2(e,t,r,n){var i=e[t],s=e[t+1],o=n+s>>>0,a=(o<n?1:0)+r+i;e[t]=a>>>0,e[t+1]=o}$t.sum64=D2;function F2(e,t,r,n){var i=t+n>>>0,s=(i<t?1:0)+e+r;return s>>>0}$t.sum64_hi=F2;function H2(e,t,r,n){var i=t+n;return i>>>0}$t.sum64_lo=H2;function K2(e,t,r,n,i,s,o,a){var u=0,h=t;h=h+n>>>0,u+=h<t?1:0,h=h+s>>>0,u+=h<s?1:0,h=h+a>>>0,u+=h<a?1:0;var f=e+r+i+o+u;return f>>>0}$t.sum64_4_hi=K2;function $2(e,t,r,n,i,s,o,a){var u=t+n+s+a;return u>>>0}$t.sum64_4_lo=$2;function z2(e,t,r,n,i,s,o,a,u,h){var f=0,y=t;y=y+n>>>0,f+=y<t?1:0,y=y+s>>>0,f+=y<s?1:0,y=y+a>>>0,f+=y<a?1:0,y=y+h>>>0,f+=y<h?1:0;var w=e+r+i+o+u+f;return w>>>0}$t.sum64_5_hi=z2;function V2(e,t,r,n,i,s,o,a,u,h){var f=t+n+s+a+h;return f>>>0}$t.sum64_5_lo=V2;function j2(e,t,r){var n=t<<32-r|e>>>r;return n>>>0}$t.rotr64_hi=j2;function G2(e,t,r){var n=e<<32-r|t>>>r;return n>>>0}$t.rotr64_lo=G2;function q2(e,t,r){return e>>>r}$t.shr64_hi=q2;function W2(e,t,r){var n=e<<32-r|t>>>r;return n>>>0}$t.shr64_lo=W2;var vs={},Fl=$t,Y2=Mi;function qa(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}vs.BlockHash=qa,qa.prototype.update=function(t,r){if(t=Fl.toArray(t,r),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var n=t.length%this._delta8;this.pending=t.slice(t.length-n,t.length),this.pending.length===0&&(this.pending=null),t=Fl.join32(t,0,t.length-n,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},qa.prototype.digest=function(t){return this.update(this._pad()),Y2(this.pending===null),this._digest(t)},qa.prototype._pad=function(){var t=this.pendingTotal,r=this._delta8,n=r-(t+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(t<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=t>>>24&255,i[s++]=t>>>16&255,i[s++]=t>>>8&255,i[s++]=t&255}else for(i[s++]=t&255,i[s++]=t>>>8&255,i[s++]=t>>>16&255,i[s++]=t>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var ms={},Yr={},X2=$t,Xr=X2.rotr32;function Z2(e,t,r,n){if(e===0)return Hl(t,r,n);if(e===1||e===3)return $l(t,r,n);if(e===2)return Kl(t,r,n)}Yr.ft_1=Z2;function Hl(e,t,r){return e&t^~e&r}Yr.ch32=Hl;function Kl(e,t,r){return e&t^e&r^t&r}Yr.maj32=Kl;function $l(e,t,r){return e^t^r}Yr.p32=$l;function J2(e){return Xr(e,2)^Xr(e,13)^Xr(e,22)}Yr.s0_256=J2;function Q2(e){return Xr(e,6)^Xr(e,11)^Xr(e,25)}Yr.s1_256=Q2;function tw(e){return Xr(e,7)^Xr(e,18)^e>>>3}Yr.g0_256=tw;function ew(e){return Xr(e,17)^Xr(e,19)^e>>>10}Yr.g1_256=ew;var xs=$t,rw=vs,nw=Yr,Kc=xs.rotl32,lo=xs.sum32,iw=xs.sum32_5,sw=nw.ft_1,zl=rw.BlockHash,ow=[1518500249,1859775393,2400959708,3395469782];function Zr(){if(!(this instanceof Zr))return new Zr;zl.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}xs.inherits(Zr,zl);var aw=Zr;Zr.blockSize=512,Zr.outSize=160,Zr.hmacStrength=80,Zr.padLength=64,Zr.prototype._update=function(t,r){for(var n=this.W,i=0;i<16;i++)n[i]=t[r+i];for(;i<n.length;i++)n[i]=Kc(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],u=this.h[3],h=this.h[4];for(i=0;i<n.length;i++){var f=~~(i/20),y=iw(Kc(s,5),sw(f,o,a,u),h,n[i],ow[f]);h=u,u=a,a=Kc(o,30),o=s,s=y}this.h[0]=lo(this.h[0],s),this.h[1]=lo(this.h[1],o),this.h[2]=lo(this.h[2],a),this.h[3]=lo(this.h[3],u),this.h[4]=lo(this.h[4],h)},Zr.prototype._digest=function(t){return t==="hex"?xs.toHex32(this.h,"big"):xs.split32(this.h,"big")};var bs=$t,cw=vs,ys=Yr,uw=Mi,Ur=bs.sum32,fw=bs.sum32_4,hw=bs.sum32_5,lw=ys.ch32,dw=ys.maj32,pw=ys.s0_256,gw=ys.s1_256,vw=ys.g0_256,mw=ys.g1_256,Vl=cw.BlockHash,xw=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Jr(){if(!(this instanceof Jr))return new Jr;Vl.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=xw,this.W=new Array(64)}bs.inherits(Jr,Vl);var jl=Jr;Jr.blockSize=512,Jr.outSize=256,Jr.hmacStrength=192,Jr.padLength=64,Jr.prototype._update=function(t,r){for(var n=this.W,i=0;i<16;i++)n[i]=t[r+i];for(;i<n.length;i++)n[i]=fw(mw(n[i-2]),n[i-7],vw(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],u=this.h[3],h=this.h[4],f=this.h[5],y=this.h[6],w=this.h[7];for(uw(this.k.length===n.length),i=0;i<n.length;i++){var L=hw(w,gw(h),lw(h,f,y),this.k[i],n[i]),I=Ur(pw(s),dw(s,o,a));w=y,y=f,f=h,h=Ur(u,L),u=a,a=o,o=s,s=Ur(L,I)}this.h[0]=Ur(this.h[0],s),this.h[1]=Ur(this.h[1],o),this.h[2]=Ur(this.h[2],a),this.h[3]=Ur(this.h[3],u),this.h[4]=Ur(this.h[4],h),this.h[5]=Ur(this.h[5],f),this.h[6]=Ur(this.h[6],y),this.h[7]=Ur(this.h[7],w)},Jr.prototype._digest=function(t){return t==="hex"?bs.toHex32(this.h,"big"):bs.split32(this.h,"big")};var $c=$t,Gl=jl;function An(){if(!(this instanceof An))return new An;Gl.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}$c.inherits(An,Gl);var bw=An;An.blockSize=512,An.outSize=224,An.hmacStrength=192,An.padLength=64,An.prototype._digest=function(t){return t==="hex"?$c.toHex32(this.h.slice(0,7),"big"):$c.split32(this.h.slice(0,7),"big")};var lr=$t,yw=vs,ww=Mi,Qr=lr.rotr64_hi,tn=lr.rotr64_lo,ql=lr.shr64_hi,Wl=lr.shr64_lo,ri=lr.sum64,zc=lr.sum64_hi,Vc=lr.sum64_lo,Ew=lr.sum64_4_hi,_w=lr.sum64_4_lo,Sw=lr.sum64_5_hi,Aw=lr.sum64_5_lo,Yl=yw.BlockHash,Pw=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function kr(){if(!(this instanceof kr))return new kr;Yl.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Pw,this.W=new Array(160)}lr.inherits(kr,Yl);var Xl=kr;kr.blockSize=1024,kr.outSize=512,kr.hmacStrength=192,kr.padLength=128,kr.prototype._prepareBlock=function(t,r){for(var n=this.W,i=0;i<32;i++)n[i]=t[r+i];for(;i<n.length;i+=2){var s=kw(n[i-4],n[i-3]),o=Dw(n[i-4],n[i-3]),a=n[i-14],u=n[i-13],h=Cw(n[i-30],n[i-29]),f=Uw(n[i-30],n[i-29]),y=n[i-32],w=n[i-31];n[i]=Ew(s,o,a,u,h,f,y,w),n[i+1]=_w(s,o,a,u,h,f,y,w)}},kr.prototype._update=function(t,r){this._prepareBlock(t,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],u=this.h[4],h=this.h[5],f=this.h[6],y=this.h[7],w=this.h[8],L=this.h[9],I=this.h[10],B=this.h[11],C=this.h[12],k=this.h[13],T=this.h[14],D=this.h[15];ww(this.k.length===n.length);for(var F=0;F<n.length;F+=2){var V=T,z=D,$=Mw(w,L),O=Bw(w,L),M=Tw(w,L,I,B,C),x=Rw(w,L,I,B,C,k),b=this.k[F],c=this.k[F+1],l=n[F],g=n[F+1],v=Sw(V,z,$,O,M,x,b,c,l,g),d=Aw(V,z,$,O,M,x,b,c,l,g);V=Iw(i,s),z=Nw(i,s),$=Lw(i,s,o,a,u),O=Ow(i,s,o,a,u,h);var A=zc(V,z,$,O),R=Vc(V,z,$,O);T=C,D=k,C=I,k=B,I=w,B=L,w=zc(f,y,v,d),L=Vc(y,y,v,d),f=u,y=h,u=o,h=a,o=i,a=s,i=zc(v,d,A,R),s=Vc(v,d,A,R)}ri(this.h,0,i,s),ri(this.h,2,o,a),ri(this.h,4,u,h),ri(this.h,6,f,y),ri(this.h,8,w,L),ri(this.h,10,I,B),ri(this.h,12,C,k),ri(this.h,14,T,D)},kr.prototype._digest=function(t){return t==="hex"?lr.toHex32(this.h,"big"):lr.split32(this.h,"big")};function Tw(e,t,r,n,i){var s=e&r^~e&i;return s<0&&(s+=4294967296),s}function Rw(e,t,r,n,i,s){var o=t&n^~t&s;return o<0&&(o+=4294967296),o}function Lw(e,t,r,n,i){var s=e&r^e&i^r&i;return s<0&&(s+=4294967296),s}function Ow(e,t,r,n,i,s){var o=t&n^t&s^n&s;return o<0&&(o+=4294967296),o}function Iw(e,t){var r=Qr(e,t,28),n=Qr(t,e,2),i=Qr(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Nw(e,t){var r=tn(e,t,28),n=tn(t,e,2),i=tn(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Mw(e,t){var r=Qr(e,t,14),n=Qr(e,t,18),i=Qr(t,e,9),s=r^n^i;return s<0&&(s+=4294967296),s}function Bw(e,t){var r=tn(e,t,14),n=tn(e,t,18),i=tn(t,e,9),s=r^n^i;return s<0&&(s+=4294967296),s}function Cw(e,t){var r=Qr(e,t,1),n=Qr(e,t,8),i=ql(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Uw(e,t){var r=tn(e,t,1),n=tn(e,t,8),i=Wl(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function kw(e,t){var r=Qr(e,t,19),n=Qr(t,e,29),i=ql(e,t,6),s=r^n^i;return s<0&&(s+=4294967296),s}function Dw(e,t){var r=tn(e,t,19),n=tn(t,e,29),i=Wl(e,t,6),s=r^n^i;return s<0&&(s+=4294967296),s}var jc=$t,Zl=Xl;function Pn(){if(!(this instanceof Pn))return new Pn;Zl.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}jc.inherits(Pn,Zl);var Fw=Pn;Pn.blockSize=1024,Pn.outSize=384,Pn.hmacStrength=192,Pn.padLength=128,Pn.prototype._digest=function(t){return t==="hex"?jc.toHex32(this.h.slice(0,12),"big"):jc.split32(this.h.slice(0,12),"big")},ms.sha1=aw,ms.sha224=bw,ms.sha256=jl,ms.sha384=Fw,ms.sha512=Xl;var Jl={},Ci=$t,Hw=vs,Wa=Ci.rotl32,Ql=Ci.sum32,po=Ci.sum32_3,td=Ci.sum32_4,ed=Hw.BlockHash;function en(){if(!(this instanceof en))return new en;ed.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Ci.inherits(en,ed),Jl.ripemd160=en,en.blockSize=512,en.outSize=160,en.hmacStrength=192,en.padLength=64,en.prototype._update=function(t,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],u=n,h=i,f=s,y=o,w=a,L=0;L<80;L++){var I=Ql(Wa(td(n,rd(L,i,s,o),t[zw[L]+r],Kw(L)),jw[L]),a);n=a,a=o,o=Wa(s,10),s=i,i=I,I=Ql(Wa(td(u,rd(79-L,h,f,y),t[Vw[L]+r],$w(L)),Gw[L]),w),u=w,w=y,y=Wa(f,10),f=h,h=I}I=po(this.h[1],s,y),this.h[1]=po(this.h[2],o,w),this.h[2]=po(this.h[3],a,u),this.h[3]=po(this.h[4],n,h),this.h[4]=po(this.h[0],i,f),this.h[0]=I},en.prototype._digest=function(t){return t==="hex"?Ci.toHex32(this.h,"little"):Ci.split32(this.h,"little")};function rd(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function Kw(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function $w(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}var zw=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Vw=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],jw=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Gw=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],qw=$t,Ww=Mi;function ws(e,t,r){if(!(this instanceof ws))return new ws(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(qw.toArray(t,r))}var Yw=ws;ws.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),Ww(t.length<=this.blockSize);for(var r=t.length;r<this.blockSize;r++)t.push(0);for(r=0;r<t.length;r++)t[r]^=54;for(this.inner=new this.Hash().update(t),r=0;r<t.length;r++)t[r]^=106;this.outer=new this.Hash().update(t)},ws.prototype.update=function(t,r){return this.inner.update(t,r),this},ws.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},function(e){var t=e;t.utils=$t,t.common=vs,t.sha=ms,t.ripemd=Jl,t.hmac=Yw,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(Ga),function(e){var t=e,r=Ga,n=Fc,i=vr,s=i.assert;function o(h){h.type==="short"?this.curve=new n.short(h):h.type==="edwards"?this.curve=new n.edwards(h):this.curve=new n.mont(h),this.g=this.curve.g,this.n=this.curve.n,this.hash=h.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=o;function a(h,f){Object.defineProperty(t,h,{configurable:!0,enumerable:!0,get:function(){var y=new o(f);return Object.defineProperty(t,h,{configurable:!0,enumerable:!0,value:y}),y}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var u;try{u=require("./precomputed/secp256k1")}catch{u=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})}(ja);var Xw=Ga,Ui=kc,nd=Mi;function ni(e){if(!(this instanceof ni))return new ni(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Ui.toArray(e.entropy,e.entropyEnc||"hex"),r=Ui.toArray(e.nonce,e.nonceEnc||"hex"),n=Ui.toArray(e.pers,e.persEnc||"hex");nd(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var Zw=ni;ni.prototype._init=function(t,r,n){var i=t.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},ni.prototype._hmac=function(){return new Xw.hmac(this.hash,this.K)},ni.prototype._update=function(t){var r=this._hmac().update(this.V).update([0]);t&&(r=r.update(t)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},ni.prototype.reseed=function(t,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),t=Ui.toArray(t,r),n=Ui.toArray(n,i),nd(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1},ni.prototype.generate=function(t,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Ui.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<t;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,t);return this._update(n),this._reseed++,Ui.encode(o,r)};var Jw=qr.exports,Qw=vr,Gc=Qw.assert;function tr(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var tE=tr;tr.fromPublic=function(t,r,n){return r instanceof tr?r:new tr(t,{pub:r,pubEnc:n})},tr.fromPrivate=function(t,r,n){return r instanceof tr?r:new tr(t,{priv:r,privEnc:n})},tr.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},tr.prototype.getPublic=function(t,r){return typeof t=="string"&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub},tr.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv},tr.prototype._importPrivate=function(t,r){this.priv=new Jw(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)},tr.prototype._importPublic=function(t,r){if(t.x||t.y){this.ec.curve.type==="mont"?Gc(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Gc(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)},tr.prototype.derive=function(t){return t.validate()||Gc(t.validate(),"public point not validated"),t.mul(this.priv).getX()},tr.prototype.sign=function(t,r,n){return this.ec.sign(t,this,r,n)},tr.prototype.verify=function(t,r){return this.ec.verify(t,r,this)},tr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Ya=qr.exports,qc=vr,eE=qc.assert;function Xa(e,t){if(e instanceof Xa)return e;this._importDER(e,t)||(eE(e.r&&e.s,"Signature without r or s"),this.r=new Ya(e.r,16),this.s=new Ya(e.s,16),e.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var rE=Xa;function nE(){this.place=0}function Wc(e,t){var r=e[t.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=t.place;s<n;s++,o++)i<<=8,i|=e[o],i>>>=0;return i<=127?!1:(t.place=o,i)}function id(e){for(var t=0,r=e.length-1;!e[t]&&!(e[t+1]&128)&&t<r;)t++;return t===0?e:e.slice(t)}Xa.prototype._importDER=function(t,r){t=qc.toArray(t,r);var n=new nE;if(t[n.place++]!==48)return!1;var i=Wc(t,n);if(i===!1||i+n.place!==t.length||t[n.place++]!==2)return!1;var s=Wc(t,n);if(s===!1)return!1;var o=t.slice(n.place,s+n.place);if(n.place+=s,t[n.place++]!==2)return!1;var a=Wc(t,n);if(a===!1||t.length!==a+n.place)return!1;var u=t.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new Ya(o),this.s=new Ya(u),this.recoveryParam=null,!0};function Yc(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(r|128);--r;)e.push(t>>>(r<<3)&255);e.push(t)}Xa.prototype.toDER=function(t){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=id(r),n=id(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Yc(i,r.length),i=i.concat(r),i.push(2),Yc(i,n.length);var s=i.concat(n),o=[48];return Yc(o,s.length),o=o.concat(s),qc.encode(o,t)};var ki=qr.exports,sd=Zw,iE=vr,Xc=ja,sE=Fa.exports,od=iE.assert,Zc=tE,Za=rE;function Rr(e){if(!(this instanceof Rr))return new Rr(e);typeof e=="string"&&(od(Object.prototype.hasOwnProperty.call(Xc,e),"Unknown curve "+e),e=Xc[e]),e instanceof Xc.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var oE=Rr;Rr.prototype.keyPair=function(t){return new Zc(this,t)},Rr.prototype.keyFromPrivate=function(t,r){return Zc.fromPrivate(this,t,r)},Rr.prototype.keyFromPublic=function(t,r){return Zc.fromPublic(this,t,r)},Rr.prototype.genKeyPair=function(t){t||(t={});for(var r=new sd({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||sE(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new ki(2));;){var s=new ki(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},Rr.prototype._truncateToN=function(t,r){var n=t.byteLength()*8-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t},Rr.prototype.sign=function(t,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),t=this._truncateToN(new ki(t,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=t.toArray("be",s),u=new sd({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),h=this.n.sub(new ki(1)),f=0;;f++){var y=i.k?i.k(f):new ki(u.generate(this.n.byteLength()));if(y=this._truncateToN(y,!0),!(y.cmpn(1)<=0||y.cmp(h)>=0)){var w=this.g.mul(y);if(!w.isInfinity()){var L=w.getX(),I=L.umod(this.n);if(I.cmpn(0)!==0){var B=y.invm(this.n).mul(I.mul(r.getPrivate()).iadd(t));if(B=B.umod(this.n),B.cmpn(0)!==0){var C=(w.getY().isOdd()?1:0)|(L.cmp(I)!==0?2:0);return i.canonical&&B.cmp(this.nh)>0&&(B=this.n.sub(B),C^=1),new Za({r:I,s:B,recoveryParam:C})}}}}}},Rr.prototype.verify=function(t,r,n,i){t=this._truncateToN(new ki(t,16)),n=this.keyFromPublic(n,i),r=new Za(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),u=a.mul(t).umod(this.n),h=a.mul(s).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(u,n.getPublic(),h),f.isInfinity()?!1:f.eqXToP(s)):(f=this.g.mulAdd(u,n.getPublic(),h),f.isInfinity()?!1:f.getX().umod(this.n).cmp(s)===0)},Rr.prototype.recoverPubKey=function(e,t,r,n){od((3&r)===r,"The recovery param is more than two bits"),t=new Za(t,n);var i=this.n,s=new ki(e),o=t.r,a=t.s,u=r&1,h=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");h?o=this.curve.pointFromX(o.add(this.curve.n),u):o=this.curve.pointFromX(o,u);var f=t.r.invm(i),y=i.sub(s).mul(f).umod(i),w=a.mul(f).umod(i);return this.g.mulAdd(y,o,w)},Rr.prototype.getKeyRecoveryParam=function(e,t,r,n){if(t=new Za(t,n),t.recoveryParam!==null)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var go=vr,ad=go.assert,cd=go.parseBytes,Es=go.cachedProperty;function Ke(e,t){this.eddsa=e,this._secret=cd(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=cd(t.pub)}Ke.fromPublic=function(t,r){return r instanceof Ke?r:new Ke(t,{pub:r})},Ke.fromSecret=function(t,r){return r instanceof Ke?r:new Ke(t,{secret:r})},Ke.prototype.secret=function(){return this._secret},Es(Ke,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),Es(Ke,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),Es(Ke,"privBytes",function(){var t=this.eddsa,r=this.hash(),n=t.encodingLength-1,i=r.slice(0,t.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i}),Es(Ke,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),Es(Ke,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),Es(Ke,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),Ke.prototype.sign=function(t){return ad(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},Ke.prototype.verify=function(t,r){return this.eddsa.verify(t,r,this)},Ke.prototype.getSecret=function(t){return ad(this._secret,"KeyPair is public only"),go.encode(this.secret(),t)},Ke.prototype.getPublic=function(t){return go.encode(this.pubBytes(),t)};var aE=Ke,cE=qr.exports,Ja=vr,uE=Ja.assert,Qa=Ja.cachedProperty,fE=Ja.parseBytes;function Di(e,t){this.eddsa=e,typeof t!="object"&&(t=fE(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),uE(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof cE&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}Qa(Di,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),Qa(Di,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),Qa(Di,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),Qa(Di,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),Di.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Di.prototype.toHex=function(){return Ja.encode(this.toBytes(),"hex").toUpperCase()};var hE=Di,lE=Ga,dE=ja,_s=vr,pE=_s.assert,ud=_s.parseBytes,fd=aE,hd=hE;function dr(e){if(pE(e==="ed25519","only tested with ed25519 so far"),!(this instanceof dr))return new dr(e);e=dE[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=lE.sha512}var gE=dr;dr.prototype.sign=function(t,r){t=ud(t);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),t),s=this.g.mul(i),o=this.encodePoint(s),a=this.hashInt(o,n.pubBytes(),t).mul(n.priv()),u=i.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:u,Rencoded:o})},dr.prototype.verify=function(t,r,n){t=ud(t),r=this.makeSignature(r);var i=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),i.pubBytes(),t),o=this.g.mul(r.S()),a=r.R().add(i.pub().mul(s));return a.eq(o)},dr.prototype.hashInt=function(){for(var t=this.hash(),r=0;r<arguments.length;r++)t.update(arguments[r]);return _s.intFromLE(t.digest()).umod(this.curve.n)},dr.prototype.keyFromPublic=function(t){return fd.fromPublic(this,t)},dr.prototype.keyFromSecret=function(t){return fd.fromSecret(this,t)},dr.prototype.makeSignature=function(t){return t instanceof hd?t:new hd(this,t)},dr.prototype.encodePoint=function(t){var r=t.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=t.getX().isOdd()?128:0,r},dr.prototype.decodePoint=function(t){t=_s.parseBytes(t);var r=t.length-1,n=t.slice(0,r).concat(t[r]&-129),i=(t[r]&128)!==0,s=_s.intFromLE(n);return this.curve.pointFromY(s,i)},dr.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},dr.prototype.decodeInt=function(t){return _s.intFromLE(t)},dr.prototype.isPoint=function(t){return t instanceof this.pointClass},function(e){var t=e;t.version=p2.version,t.utils=vr,t.rand=Fa.exports,t.curve=Fc,t.curves=ja,t.ec=oE,t.eddsa=gE}(d2);var et;(function(e){e.TZ1="tz1",e.TZ2="tz2",e.TZ3="tz3",e.TZ4="tz4",e.KT="KT",e.KT1="KT1",e.EDSK2="edsk2",e.SPSK="spsk",e.P2SK="p2sk",e.EDPK="edpk",e.SPPK="sppk",e.P2PK="p2pk",e.BLPK="BLpk",e.EDESK="edesk",e.SPESK="spesk",e.P2ESK="p2esk",e.EDSK="edsk",e.EDSIG="edsig",e.SPSIG="spsig",e.P2SIG="p2sig",e.SIG="sig",e.NET="Net",e.NCE="nce",e.B="B",e.O="o",e.LO="Lo",e.LLO="LLo",e.P="P",e.CO="Co",e.ID="id",e.EXPR="expr",e.TZ="TZ",e.VH="vh",e.TXR1="txr1",e.TXI="txi",e.TXM="txm",e.TXC="txc",e.TXMR="txmr",e.TXRL="txM",e.TXW="txw"})(et||(et={}));const er={[et.TZ1]:new Uint8Array([6,161,159]),[et.TZ2]:new Uint8Array([6,161,161]),[et.TZ3]:new Uint8Array([6,161,164]),[et.TZ4]:new Uint8Array([6,161,166]),[et.KT]:new Uint8Array([2,90,121]),[et.KT1]:new Uint8Array([2,90,121]),[et.EDSK]:new Uint8Array([43,246,78,7]),[et.EDSK2]:new Uint8Array([13,15,58,7]),[et.SPSK]:new Uint8Array([17,162,224,201]),[et.P2SK]:new Uint8Array([16,81,238,189]),[et.EDPK]:new Uint8Array([13,15,37,217]),[et.SPPK]:new Uint8Array([3,254,226,86]),[et.P2PK]:new Uint8Array([3,178,139,127]),[et.BLPK]:new Uint8Array([6,149,135,204]),[et.EDESK]:new Uint8Array([7,90,60,179,41]),[et.SPESK]:new Uint8Array([9,237,241,174,150]),[et.P2ESK]:new Uint8Array([9,48,57,115,171]),[et.EDSIG]:new Uint8Array([9,245,205,134,18]),[et.SPSIG]:new Uint8Array([13,115,101,19,63]),[et.P2SIG]:new Uint8Array([54,240,44,52]),[et.SIG]:new Uint8Array([4,130,43]),[et.NET]:new Uint8Array([87,82,0]),[et.NCE]:new Uint8Array([69,220,169]),[et.B]:new Uint8Array([1,52]),[et.O]:new Uint8Array([5,116]),[et.LO]:new Uint8Array([133,233]),[et.LLO]:new Uint8Array([29,159,109]),[et.P]:new Uint8Array([2,170]),[et.CO]:new Uint8Array([79,179]),[et.ID]:new Uint8Array([153,103]),[et.EXPR]:new Uint8Array([13,44,64,27]),[et.TZ]:new Uint8Array([2,90,121]),[et.VH]:new Uint8Array([1,106,242]),[et.TXR1]:new Uint8Array([1,128,120,31]),[et.TXI]:new Uint8Array([79,148,196]),[et.TXM]:new Uint8Array([79,149,30]),[et.TXC]:new Uint8Array([79,148,17]),[et.TXMR]:new Uint8Array([18,7,206,87]),[et.TXRL]:new Uint8Array([79,146,82]),[et.TXW]:new Uint8Array([79,150,72])},ld={[et.TZ1]:20,[et.TZ2]:20,[et.TZ3]:20,[et.TZ4]:20,[et.KT]:20,[et.KT1]:20,[et.EDPK]:32,[et.SPPK]:33,[et.P2PK]:33,[et.BLPK]:48,[et.EDSIG]:64,[et.SPSIG]:64,[et.P2SIG]:64,[et.SIG]:64,[et.NET]:4,[et.B]:32,[et.P]:32,[et.O]:32,[et.VH]:32,[et.TXR1]:20,[et.TXI]:32,[et.TXM]:32,[et.TXC]:32,[et.TXMR]:32,[et.TXRL]:32,[et.TXW]:32};class dd extends Error{constructor(t,r){super(`The public key '${t}' is invalid. ${r}`),this.publicKey=t,this.name="InvalidPublicKeyError"}}class t0 extends Error{constructor(t){super(`The contract address '${t}' is invalid`),this.contractAddress=t,this.name="InvalidContractAddressError"}}class Pe extends Error{constructor(t){super(`The address '${t}' is invalid`),this.address=t,this.name="InvalidAddressError"}}class vE extends Error{constructor(t){super(`The chain id '${t}' is invalid`),this.chainId=t,this.name="InvalidChainIdError"}}class Jc extends Error{constructor(t){super(`The public key hash '${t}' is invalid`),this.keyHash=t,this.name="InvalidKeyHashError"}}class pd extends Error{constructor(t){super(`The operation hash '${t}' is invalid`),this.operationHash=t,this.name="InvalidOperationHashError"}}class ii extends Error{constructor(t){super(`The operation kind '${t}' is unsupported`),this.operationKind=t,this.name="InvalidOperationKindError"}}class gd extends Error{constructor(t){super(t),this.message=t,this.name="DeprecationError"}}class mE extends Error{constructor(t,r){super(`Unable to convert ${t} to a ${r}`),this.value=t,this.desiredType=r,this.name="ValueConversionError"}}var bt;(function(e){e[e.NO_PREFIX_MATCHED=0]="NO_PREFIX_MATCHED",e[e.INVALID_CHECKSUM=1]="INVALID_CHECKSUM",e[e.INVALID_LENGTH=2]="INVALID_LENGTH",e[e.VALID=3]="VALID"})(bt||(bt={}));function xE(e){return typeof e!="string"?!1:e in er}function si(e,t){const r=new RegExp(`^(${t.join("|")})`).exec(e);if(!r||r.length===0)return bt.NO_PREFIX_MATCHED;const n=r[0];if(!xE(n))return bt.NO_PREFIX_MATCHED;const i=/^(KT1\w{33})(%(.*))?/.exec(e);i&&(e=i[1]);let s=fo.decodeUnsafe(e);return s?(s=s.slice(er[n].length),s.length!==ld[n]?bt.INVALID_LENGTH:bt.VALID):bt.INVALID_CHECKSUM}const vd=[et.TZ1,et.TZ2,et.TZ3,et.TZ4],md=[et.KT1,et.TXR1],bE=[et.EDSIG,et.P2SIG,et.SPSIG,et.SIG],yE=[et.EDPK,et.SPPK,et.P2PK,et.BLPK],wE=[et.O];et.P;const EE=[et.B];function ye(e){return si(e,[...vd,...md])}function xd(e){return si(e,[et.NET])}function Ss(e){return si(e,md)}function Qc(e){return si(e,vd)}function _E(e){return si(e,bE)}function SE(e){return si(e,yE)}function bd(e){return si(e,wE)}function AE(e){return si(e,EE)}function PE(e){const t=Fm.blake2b(_d(e),void 0,32);return oi(t,er.expr)}function oi(e,t){const r=typeof e=="string"?Uint8Array.from(En.Buffer.from(e,"hex")):e,n=new Uint8Array(t.length+r.length);return n.set(t),n.set(r,t.length),fo.encode(En.Buffer.from(n.buffer))}const yd=(e,t)=>fo.decode(e).slice(t.length);function TE(e){const t=fo.decode(e),r={[er.tz1.toString()]:"0000",[er.tz2.toString()]:"0001",[er.tz3.toString()]:"0002"},n={[er.txr1.toString()]:"02"},i=r[new Uint8Array(t.slice(0,3)).toString()],s=n[new Uint8Array(t.slice(0,4)).toString()];if(i){const o=vo(t.slice(3));return i+o}else if(s){const o=vo(t.slice(4));return s+o+"00"}else return"01"+vo(t.slice(3,42))+"00"}function RE(e){const t=fo.decode(e);return vo(t.slice(3,42))}function tu(e){if(e.substring(0,2)==="00"){const t={"0000":er.tz1,"0001":er.tz2,"0002":er.tz3};return oi(e.substring(4),t[e.substring(0,4)])}else if(e.substring(0,2)==="02")return oi(e.substring(2,e.length-2),er.txr1);return oi(e.substring(2,42),er.KT)}function wd(e){return oi(e,er.tz4)}function LE(e){if(e[0]==="0"){const t={"00":new Uint8Array([13,15,37,217]),"01":new Uint8Array([3,254,226,86]),"02":new Uint8Array([3,178,139,127])};return oi(e.substring(2),t[e.substring(0,2)])}}function Ed(e){if(e[0]==="0"){const t={"00":new Uint8Array([6,161,159]),"01":new Uint8Array([6,161,161]),"02":new Uint8Array([6,161,164])};return oi(e.substring(2),t[e.substring(0,2)])}}const _d=e=>{const t=e.match(/[\da-f]{2}/gi);if(t)return new Uint8Array(t.map(r=>parseInt(r,16)));throw new mE(e,"Uint8Array")},vo=e=>{const t=new Uint8Array(e),r=[];return t.forEach(n=>{const s=`00${n.toString(16)}`.slice(-2);r.push(s)}),r.join("")};function OE(e){return En.Buffer.from(_d(e)).toString("utf8")}function eu(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function At(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{h(n.next(f))}catch(y){o(y)}}function u(f){try{h(n.throw(f))}catch(y){o(y)}}function h(f){f.done?s(f.value):i(f.value).then(a,u)}h((n=n.apply(e,t||[])).next())})}const IE="main",kt={block:"head"};var Sd;(function(e){e.GET_BAKING_RIGHTS="getBakingRights",e.GET_BALLOTS="getBallots",e.GET_BALLOT_LIST="getBallotList",e.GET_BIG_MAP_KEY="getBigMapKey",e.GET_BIG_MAP_EXPR="getBigMapExpr",e.GET_BLOCK_HASH="getBlockHash",e.GET_BLOCK="getBlock",e.GET_BLOCK_HEADER="getBlockHeader",e.GET_BLOCK_METADATA="getBlockMetadata",e.GET_BALANCE="getBalance",e.GET_CHAIN_ID="getChainId",e.GET_CONSTANTS="getConstants",e.GET_CONTRACT="getContract",e.GET_CURRENT_PERIOD="getCurrentPeriod",e.GET_CURRENT_PROPOSAL="getCurrentProposal",e.GET_CURRENT_QUORUM="getCurrentQuorum",e.GET_DELEGATE="getDelegate",e.GET_DELEGATES="getDelegates",e.GET_ENDORSING_RIGHTS="getEndorsingRights",e.GET_ENTRYPOINTS="getEntrypoints",e.GET_LIVE_BLOCKS="getLiveBlocks",e.GET_MANAGER_KEY="getManagerKey",e.GET_NORMALIZED_SCRIPT="getNormalizedScript",e.GET_PROPOSALS="getProposals",e.GET_PROTOCOLS="getProtocols",e.GET_SAPLING_DIFF_BY_CONTRACT="getSaplingDiffByContract",e.GET_SAPLING_DIFF_BY_ID="getSaplingDiffById",e.GET_SCRIPT="getScript",e.GET_STORAGE="getStorage",e.GET_SUCCESSOR_PERIOD="getSuccessorPeriod",e.GET_TX_ROLLUP_INBOX="getTxRollupInbox",e.GET_TX_ROLLUP_STATE="getTxRollupState",e.GET_VOTES_LISTINGS="getVotesListings",e.PACK_DATA="packData"})(Sd||(Sd={}));function mo(e,t){const r=Array.isArray(e);typeof t>"u"&&(t=Object.keys(e));const n=r?[]:{};return t.forEach(i=>{const s=e[i];let o;if(!(typeof s>"u")){if(Array.isArray(s)){o=mo(s),n[i]=o;return}o=new vt(s),n[i]=o}}),n}var Ad;(function(e){e.TOO_LARGE="too large"})(Ad||(Ad={}));var Pd;(function(e){e.BAKING_REWARDS="baking rewards",e.REWARDS="rewards",e.FEES="fees",e.DEPOSITS="deposits",e.LEGACY_REWARDS="legacy_rewards",e.LEGACY_FEES="legacy_fees",e.LEGACY_DEPOSITS="legacy_deposits",e.BLOCK_FEES="block fees",e.NONCE_REVELATION_REWARDS="nonce revelation rewards",e.DOUBLE_SIGNING_EVIDENCE_REWARDS="double signing evidence rewards",e.ENDORSING_REWARDS="endorsing rewards",e.BAKING_BONUSES="baking bonuses",e.STORAGE_FEES="storage fees",e.PUNISHMENTS="punishments",e.LOST_ENDORSING_REWARDS="lost endorsing rewards",e.SUBSIDY="subsidy",e.BURNED="burned",e.COMMITMENT="commitment",e.BOOTSTRAP="bootstrap",e.INVOICE="invoice",e.MINTED="minted",e.TX_ROLLUP_REJECTION_REWARDS="tx_rollup_rejection_rewards",e.TX_ROLLUP_REJECTION_PUNISHMENTS="tx_rollup_rejection_punishments",e.BONDS="bonds"})(Pd||(Pd={}));var ct;(function(e){e.ORIGINATION="origination",e.DELEGATION="delegation",e.REVEAL="reveal",e.TRANSACTION="transaction",e.ACTIVATION="activate_account",e.ENDORSEMENT="endorsement",e.PREENDORSEMENT="preendorsement",e.SET_DEPOSITS_LIMIT="set_deposits_limit",e.DOUBLE_PREENDORSEMENT_EVIDENCE="double_preendorsement_evidence",e.ENDORSEMENT_WITH_SLOT="endorsement_with_slot",e.SEED_NONCE_REVELATION="seed_nonce_revelation",e.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",e.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",e.PROPOSALS="proposals",e.BALLOT="ballot",e.FAILING_NOOP="failing_noop",e.REGISTER_GLOBAL_CONSTANT="register_global_constant",e.TX_ROLLUP_ORIGINATION="tx_rollup_origination",e.TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",e.TX_ROLLUP_COMMIT="tx_rollup_commit",e.TX_ROLLUP_RETURN_BOND="tx_rollup_return_bond",e.TX_ROLLUP_FINALIZE_COMMITMENT="tx_rollup_finalize_commitment",e.TX_ROLLUP_REMOVE_COMMITMENT="tx_rollup_remove_commitment",e.TX_ROLLUP_REJECTION="tx_rollup_rejection",e.TX_ROLLUP_DISPATCH_TICKETS="tx_rollup_dispatch_tickets",e.TRANSFER_TICKET="transfer_ticket"})(ct||(ct={}));class e0{constructor(t,r=IE,n=new Q0){this.url=t,this.chain=r,this.httpBackend=n}createURL(t){return`${this.url.replace(/\/+$/g,"")}${t}`}validateAddress(t){if(ye(t)!==bt.VALID)throw new Pe(t)}validateContract(t){if(Ss(t)!==bt.VALID)throw new Pe(t)}getBlockHash({block:t}=kt){return At(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/hash`),method:"GET"})})}getLiveBlocks({block:t}=kt){return At(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/live_blocks`),method:"GET"})})}getBalance(t,{block:r}=kt){return At(this,void 0,void 0,function*(){this.validateAddress(t);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${t}/balance`),method:"GET"});return new vt(n)})}getStorage(t,{block:r}=kt){return At(this,void 0,void 0,function*(){return this.validateContract(t),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${t}/storage`),method:"GET"})})}getScript(t,{block:r}=kt){return At(this,void 0,void 0,function*(){return this.validateContract(t),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${t}/script`),method:"GET"})})}getNormalizedScript(t,r={unparsing_mode:"Readable"},{block:n}=kt){return At(this,void 0,void 0,function*(){return this.validateContract(t),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${t}/script/normalized`),method:"POST"},r)})}getContract(t,{block:r}=kt){return At(this,void 0,void 0,function*(){this.validateAddress(t);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${t}`),method:"GET"});return Object.assign(Object.assign({},n),{balance:new vt(n.balance)})})}getManagerKey(t,{block:r}=kt){return At(this,void 0,void 0,function*(){return this.validateAddress(t),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${t}/manager_key`),method:"GET"})})}getDelegate(t,{block:r}=kt){return At(this,void 0,void 0,function*(){this.validateAddress(t);let n;try{n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${t}/delegate`),method:"GET"})}catch(i){if(i instanceof ra&&i.status===$s.NOT_FOUND)n=null;else throw i}return n})}getBigMapKey(t,r,{block:n}=kt){return At(this,void 0,void 0,function*(){return this.validateAddress(t),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${t}/big_map_get`),method:"POST"},r)})}getBigMapExpr(t,r,{block:n}=kt){return At(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/big_maps/${t}/${r}`),method:"GET"})})}getDelegates(t,{block:r}=kt){return At(this,void 0,void 0,function*(){this.validateAddress(t);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/delegates/${t}`),method:"GET"}),i=mo(n,["balance","full_balance","current_frozen_deposits","frozen_deposits","frozen_balance","frozen_deposits_limit","staking_balance","delegated_balance","voting_power"]);return Object.assign(Object.assign(Object.assign({},n),i),{frozen_balance_by_cycle:n.frozen_balance_by_cycle?n.frozen_balance_by_cycle.map(s=>{var{deposit:o,deposits:a,fees:u,rewards:h}=s,f=eu(s,["deposit","deposits","fees","rewards"]);const y=mo({deposit:o,deposits:a,fees:u,rewards:h},["deposit","deposits","fees","rewards"]);return Object.assign(Object.assign({},f),{deposit:y.deposit,deposits:y.deposits,fees:y.fees,rewards:y.rewards})}):void 0})})}getConstants({block:t}=kt){return At(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/context/constants`),method:"GET"}),n=mo(r,["time_between_blocks","hard_gas_limit_per_operation","hard_gas_limit_per_block","proof_of_work_threshold","tokens_per_roll","seed_nonce_revelation_tip","block_security_deposit","endorsement_security_deposit","block_reward","endorsement_reward","cost_per_byte","hard_storage_limit_per_operation","test_chain_duration","baking_reward_per_endorsement","delay_per_missing_endorsement","minimal_block_delay","liquidity_baking_subsidy","cache_layout","baking_reward_fixed_portion","baking_reward_bonus_per_slot","endorsing_reward_per_slot","double_baking_punishment","delay_increment_per_round","tx_rollup_commitment_bond"]);return Object.assign(Object.assign({},r),n)})}getBlock({block:t}=kt){return At(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}`),method:"GET"})})}getBlockHeader({block:t}=kt){return At(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/header`),method:"GET"})})}getBlockMetadata({block:t}=kt){return At(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/metadata`),method:"GET"})})}getBakingRights(t={},{block:r}=kt){return At(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/baking_rights`),method:"GET",query:t})})}getEndorsingRights(t={},{block:r}=kt){return At(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/endorsing_rights`),method:"GET",query:t})})}getBallotList({block:t}=kt){return At(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/votes/ballot_list`),method:"GET"})})}getBallots({block:t}=kt){return At(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/votes/ballots`),method:"GET"});return mo(r,["yay","nay","pass"])})}getCurrentProposal({block:t}=kt){return At(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/votes/current_proposal`),method:"GET"})})}getCurrentQuorum({block:t}=kt){return At(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/votes/current_quorum`),method:"GET"})})}getVotesListings({block:t}=kt){return At(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/votes/listings`),method:"GET"});return r.map(n=>(n.voting_power&&(n.voting_power=new vt(n.voting_power)),n)),r})}getProposals({block:t}=kt){return At(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/votes/proposals`),method:"GET"});return r.map(n=>n[1]=new vt(n[1])),r})}forgeOperations(t,{block:r}=kt){return At(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/forge/operations`),method:"POST"},t)})}injectOperation(t){return At(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/injection/operation"),method:"POST"},t)})}preapplyOperations(t,{block:r}=kt){return At(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/preapply/operations`),method:"POST"},t)})}getEntrypoints(t,{block:r}=kt){return At(this,void 0,void 0,function*(){return this.validateContract(t),yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${t}/entrypoints`),method:"GET"})})}runOperation(t,{block:r}=kt){return At(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_operation`),method:"POST"},t)})}runCode(t,{block:r}=kt){return At(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_code`),method:"POST"},t)})}runView(t,{block:r}=kt){var{unparsing_mode:n="Readable"}=t,i=eu(t,["unparsing_mode"]);return At(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_view`),method:"POST"},Object.assign({unparsing_mode:n},i))})}getChainId(){return At(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/chain_id`),method:"GET"})})}packData(t,{block:r}=kt){return At(this,void 0,void 0,function*(){const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/pack_data`),method:"POST"},t),{gas:i}=n,s=eu(n,["gas"]);let o=i;const a=new vt(i||"");return a.isNaN()||(o=a),Object.assign({gas:o},s)})}getRpcUrl(){return this.url}getCurrentPeriod({block:t}=kt){return At(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/votes/current_period`),method:"GET"})})}getSuccessorPeriod({block:t}=kt){return At(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/votes/successor_period`),method:"GET"})})}getSaplingDiffById(t,{block:r}=kt){return At(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/sapling/${t}/get_diff`),method:"GET"})})}getSaplingDiffByContract(t,{block:r}=kt){return At(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${t}/single_sapling_get_diff`),method:"GET"})})}getProtocols({block:t}=kt){return At(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${t}/protocols`),method:"GET"})})}getTxRollupState(t,{block:r}=kt){return At(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/tx_rollup/${t}/state`),method:"GET"})})}getTxRollupInbox(t,r,{block:n}=kt){return At(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/tx_rollup/${t}/inbox/${r}`),method:"GET"})})}}/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var ru=function(e,t){return ru=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},ru(e,t)};function zt(e,t){ru(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function r0(e){return typeof e=="function"}var Td=!1,Dr={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;""+t.stack}Td=e},get useDeprecatedSynchronousErrorHandling(){return Td}};function As(e){setTimeout(function(){throw e},0)}var n0={closed:!0,next:function(e){},error:function(e){if(Dr.useDeprecatedSynchronousErrorHandling)throw e;As(e)},complete:function(){}},nu=function(){return Array.isArray||function(e){return e&&typeof e.length=="number"}}();function Rd(e){return e!==null&&typeof e=="object"}var NE=function(){function e(t){return Error.call(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t,this}return e.prototype=Object.create(Error.prototype),e}(),i0=NE,mr=function(){function e(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var r=this,n=r._parentOrParents,i=r._ctorUnsubscribe,s=r._unsubscribe,o=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(n!==null)for(var a=0;a<n.length;++a){var u=n[a];u.remove(this)}if(r0(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(y){t=y instanceof i0?Ld(y.errors):[y]}}if(nu(o))for(var a=-1,h=o.length;++a<h;){var f=o[a];if(Rd(f))try{f.unsubscribe()}catch(w){t=t||[],w instanceof i0?t=t.concat(Ld(w.errors)):t.push(w)}}if(t)throw new i0(t)}},e.prototype.add=function(t){var r=t;if(!t)return e.EMPTY;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||typeof r.unsubscribe!="function")return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;r=new e,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=r._parentOrParents;if(i===null)r._parentOrParents=this;else if(i instanceof e){if(i===this)return r;r._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return r;var s=this._subscriptions;return s===null?this._subscriptions=[r]:s.push(r),r},e.prototype.remove=function(t){var r=this._subscriptions;if(r){var n=r.indexOf(t);n!==-1&&r.splice(n,1)}},e.EMPTY=function(t){return t.closed=!0,t}(new e),e}();function Ld(e){return e.reduce(function(t,r){return t.concat(r instanceof i0?r.errors:r)},[])}var s0=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Te=function(e){zt(t,e);function t(r,n,i){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=n0;break;case 1:if(!r){s.destination=n0;break}if(typeof r=="object"){r instanceof t?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new Od(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new Od(s,r,n,i);break}return s}return t.prototype[s0]=function(){return this},t.create=function(r,n,i){var s=new t(r,n,i);return s.syncErrorThrowable=!1,s},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this},t}(mr),Od=function(e){zt(t,e);function t(r,n,i,s){var o=e.call(this)||this;o._parentSubscriber=r;var a,u=o;return r0(n)?a=n:n&&(a=n.next,i=n.error,s=n.complete,n!==n0&&(u=Object.create(n),r0(u.unsubscribe)&&o.add(u.unsubscribe.bind(u)),u.unsubscribe=o.unsubscribe.bind(o))),o._context=u,o._next=a,o._error=i,o._complete=s,o}return t.prototype.next=function(r){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Dr.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,r):this.__tryOrSetError(n,this._next,r)&&this.unsubscribe()}},t.prototype.error=function(r){if(!this.isStopped){var n=this._parentSubscriber,i=Dr.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,r),this.unsubscribe()):(this.__tryOrSetError(n,this._error,r),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=r,n.syncErrorThrown=!0):As(r),this.unsubscribe();else{if(this.unsubscribe(),i)throw r;As(r)}}},t.prototype.complete=function(){var r=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return r._complete.call(r._context)};!Dr.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(r,n){try{r.call(this._context,n)}catch(i){if(this.unsubscribe(),Dr.useDeprecatedSynchronousErrorHandling)throw i;As(i)}},t.prototype.__tryOrSetError=function(r,n,i){if(!Dr.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(s){return Dr.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=s,r.syncErrorThrown=!0,!0):(As(s),!0)}return!1},t.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},t}(Te);function ME(e){for(;e;){var t=e,r=t.closed,n=t.destination,i=t.isStopped;if(r||i)return!1;n&&n instanceof Te?e=n:e=null}return!0}function BE(e,t,r){if(e){if(e instanceof Te)return e;if(e[s0])return e[s0]()}return!e&&!t&&!r?new Te(n0):new Te(e,t,r)}var xo=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function iu(e){return e}function CE(e){return e.length===0?iu:e.length===1?e[0]:function(r){return e.reduce(function(n,i){return i(n)},r)}}var Se=function(){function e(t){this._isScalar=!1,t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var i=this.operator,s=BE(t,r,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||Dr.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),Dr.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){Dr.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),ME(t)?t.error(r):console.warn(r)}},e.prototype.forEach=function(t,r){var n=this;return r=Id(r),new r(function(i,s){var o;o=n.subscribe(function(a){try{t(a)}catch(u){s(u),o&&o.unsubscribe()}},s,i)})},e.prototype._subscribe=function(t){var r=this.source;return r&&r.subscribe(t)},e.prototype[xo]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.length===0?this:CE(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=Id(t),new t(function(n,i){var s;r.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},e.create=function(t){return new e(t)},e}();function Id(e){if(e||(e=Dr.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var UE=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),Fi=UE,Nd=function(e){zt(t,e);function t(r,n){var i=e.call(this)||this;return i.subject=r,i.subscriber=n,i.closed=!1,i}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var r=this.subject,n=r.observers;if(this.subject=null,!(!n||n.length===0||r.isStopped||r.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},t}(mr),Md=function(e){zt(t,e);function t(r){var n=e.call(this,r)||this;return n.destination=r,n}return t}(Te),Ps=function(e){zt(t,e);function t(){var r=e.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype[s0]=function(){return new Md(this)},t.prototype.lift=function(r){var n=new Bd(this,this);return n.operator=r,n},t.prototype.next=function(r){if(this.closed)throw new Fi;if(!this.isStopped)for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].next(r)},t.prototype.error=function(r){if(this.closed)throw new Fi;this.hasError=!0,this.thrownError=r,this.isStopped=!0;for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].error(r);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Fi;this.isStopped=!0;for(var r=this.observers,n=r.length,i=r.slice(),s=0;s<n;s++)i[s].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(r){if(this.closed)throw new Fi;return e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){if(this.closed)throw new Fi;return this.hasError?(r.error(this.thrownError),mr.EMPTY):this.isStopped?(r.complete(),mr.EMPTY):(this.observers.push(r),new Nd(this,r))},t.prototype.asObservable=function(){var r=new Se;return r.source=this,r},t.create=function(r,n){return new Bd(r,n)},t}(Se),Bd=function(e){zt(t,e);function t(r,n){var i=e.call(this)||this;return i.destination=r,i.source=n,i}return t.prototype.next=function(r){var n=this.destination;n&&n.next&&n.next(r)},t.prototype.error=function(r){var n=this.destination;n&&n.error&&this.destination.error(r)},t.prototype.complete=function(){var r=this.destination;r&&r.complete&&this.destination.complete()},t.prototype._subscribe=function(r){var n=this.source;return n?this.source.subscribe(r):mr.EMPTY},t}(Ps);function Cd(){return function(t){return t.lift(new kE(t))}}var kE=function(){function e(t){this.connectable=t}return e.prototype.call=function(t,r){var n=this.connectable;n._refCount++;var i=new DE(t,n),s=r.subscribe(i);return i.closed||(i.connection=n.connect()),s},e}(),DE=function(e){zt(t,e);function t(r,n){var i=e.call(this,r)||this;return i.connectable=n,i}return t.prototype._unsubscribe=function(){var r=this.connectable;if(!r){this.connection=null;return}this.connectable=null;var n=r._refCount;if(n<=0){this.connection=null;return}if(r._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,s=r._connection;this.connection=null,s&&(!i||s===i)&&s.unsubscribe()},t}(Te),FE=function(e){zt(t,e);function t(r,n){var i=e.call(this)||this;return i.source=r,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return t.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},t.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var r=this._connection;return r||(this._isComplete=!1,r=this._connection=new mr,r.add(this.source.subscribe(new KE(this.getSubject(),this))),r.closed&&(this._connection=null,r=mr.EMPTY)),r},t.prototype.refCount=function(){return Cd()(this)},t}(Se),HE=function(){var e=FE.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),KE=function(e){zt(t,e);function t(r,n){var i=e.call(this,r)||this;return i.connectable=n,i}return t.prototype._error=function(r){this._unsubscribe(),e.prototype._error.call(this,r)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var r=this.connectable;if(r){this.connectable=null;var n=r._connection;r._refCount=0,r._subject=null,r._connection=null,n&&n.unsubscribe()}},t}(Md),Ud=function(e){zt(t,e);function t(r){var n=e.call(this)||this;return n._value=r,n}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(r){var n=e.prototype._subscribe.call(this,r);return n&&!n.closed&&r.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Fi;return this._value},t.prototype.next=function(r){e.prototype.next.call(this,this._value=r)},t}(Ps),$E=function(e){zt(t,e);function t(r,n){return e.call(this)||this}return t.prototype.schedule=function(r,n){return this},t}(mr),kd=function(e){zt(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return t.prototype.schedule=function(r,n){if(n===void 0&&(n=0),this.closed)return this;this.state=r;var i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(s,this.id,n),this},t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),setInterval(r.flush.bind(r,this),i)},t.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return n;clearInterval(n)},t.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(r,n){var i=!1,s=void 0;try{this.work(r)}catch(o){i=!0,s=!!o&&o||new Error(o)}if(i)return this.unsubscribe(),s},t.prototype._unsubscribe=function(){var r=this.id,n=this.scheduler,i=n.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,s!==-1&&i.splice(s,1),r!=null&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null},t}($E),zE=function(e){zt(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return t.prototype.schedule=function(r,n){return n===void 0&&(n=0),n>0?e.prototype.schedule.call(this,r,n):(this.delay=n,this.state=r,this.scheduler.flush(this),this)},t.prototype.execute=function(r,n){return n>0||this.closed?e.prototype.execute.call(this,r,n):this._execute(r,n)},t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?e.prototype.requestAsyncId.call(this,r,n,i):r.flush(this)},t}(kd),Dd=function(){function e(t,r){r===void 0&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(t,r,n){return r===void 0&&(r=0),new this.SchedulerAction(this,t).schedule(n,r)},e.now=function(){return Date.now()},e}(),Fd=function(e){zt(t,e);function t(r,n){n===void 0&&(n=Dd.now);var i=e.call(this,r,function(){return t.delegate&&t.delegate!==i?t.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return t.prototype.schedule=function(r,n,i){return n===void 0&&(n=0),t.delegate&&t.delegate!==this?t.delegate.schedule(r,n,i):e.prototype.schedule.call(this,r,n,i)},t.prototype.flush=function(r){var n=this.actions;if(this.active){n.push(r);return}var i;this.active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this.active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},t}(Dd),VE=function(e){zt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Fd),jE=new VE(zE),GE=jE,Hd=new Se(function(e){return e.complete()});function su(e){return e?qE(e):Hd}function qE(e){return new Se(function(t){return e.schedule(function(){return t.complete()})})}function bo(e){return e&&typeof e.schedule=="function"}var Kd=function(e){return function(t){for(var r=0,n=e.length;r<n&&!t.closed;r++)t.next(e[r]);t.complete()}};function ou(e,t){return new Se(function(r){var n=new mr,i=0;return n.add(t.schedule(function(){if(i===e.length){r.complete();return}r.next(e[i++]),r.closed||n.add(this.schedule())})),n})}function $d(e,t){return t?ou(e,t):new Se(Kd(e))}function yo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return bo(r)?(e.pop(),ou(e,r)):$d(e)}function au(e,t){return t?new Se(function(r){return t.schedule(WE,0,{error:e,subscriber:r})}):new Se(function(r){return r.error(e)})}function WE(e){var t=e.error,r=e.subscriber;r.error(t)}var cu=function(){function e(t,r,n){this.kind=t,this.value=r,this.error=n,this.hasValue=t==="N"}return e.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},e.prototype.do=function(t,r,n){var i=this.kind;switch(i){case"N":return t&&t(this.value);case"E":return r&&r(this.error);case"C":return n&&n()}},e.prototype.accept=function(t,r,n){return t&&typeof t.next=="function"?this.observe(t):this.do(t,r,n)},e.prototype.toObservable=function(){var t=this.kind;switch(t){case"N":return yo(this.value);case"E":return au(this.error);case"C":return su()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return typeof t<"u"?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),YE=function(e){zt(t,e);function t(r,n,i){i===void 0&&(i=0);var s=e.call(this,r)||this;return s.scheduler=n,s.delay=i,s}return t.dispatch=function(r){var n=r.notification,i=r.destination;n.observe(i),this.unsubscribe()},t.prototype.scheduleMessage=function(r){var n=this.destination;n.add(this.scheduler.schedule(t.dispatch,this.delay,new XE(r,this.destination)))},t.prototype._next=function(r){this.scheduleMessage(cu.createNext(r))},t.prototype._error=function(r){this.scheduleMessage(cu.createError(r)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(cu.createComplete()),this.unsubscribe()},t}(Te),XE=function(){function e(t,r){this.notification=t,this.destination=r}return e}(),o0=function(e){zt(t,e);function t(r,n,i){r===void 0&&(r=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var s=e.call(this)||this;return s.scheduler=i,s._events=[],s._infiniteTimeWindow=!1,s._bufferSize=r<1?1:r,s._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(s._infiniteTimeWindow=!0,s.next=s.nextInfiniteTimeWindow):s.next=s.nextTimeWindow,s}return t.prototype.nextInfiniteTimeWindow=function(r){if(!this.isStopped){var n=this._events;n.push(r),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,r)},t.prototype.nextTimeWindow=function(r){this.isStopped||(this._events.push(new ZE(this._getNow(),r)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,r)},t.prototype._subscribe=function(r){var n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,o=i.length,a;if(this.closed)throw new Fi;if(this.isStopped||this.hasError?a=mr.EMPTY:(this.observers.push(r),a=new Nd(this,r)),s&&r.add(r=new YE(r,s)),n)for(var u=0;u<o&&!r.closed;u++)r.next(i[u]);else for(var u=0;u<o&&!r.closed;u++)r.next(i[u].value);return this.hasError?r.error(this.thrownError):this.isStopped&&r.complete(),a},t.prototype._getNow=function(){return(this.scheduler||GE).now()},t.prototype._trimBufferThenGetEvents=function(){for(var r=this._getNow(),n=this._bufferSize,i=this._windowTime,s=this._events,o=s.length,a=0;a<o&&!(r-s[a].time<i);)a++;return o>n&&(a=Math.max(a,o-n)),a>0&&s.splice(0,a),s},t}(Ps),ZE=function(){function e(t,r){this.time=t,this.value=r}return e}(),JE=new Fd(kd),zd=JE;function Tn(){}var QE=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),t_=QE,e_=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Vd=e_;function Hi(e,t){return function(n){if(typeof e!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new r_(e,t))}}var r_=function(){function e(t,r){this.project=t,this.thisArg=r}return e.prototype.call=function(t,r){return r.subscribe(new n_(t,this.project,this.thisArg))},e}(),n_=function(e){zt(t,e);function t(r,n,i){var s=e.call(this,r)||this;return s.project=n,s.count=0,s.thisArg=i||s,s}return t.prototype._next=function(r){var n;try{n=this.project.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(Te),i_=function(e){zt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.notifyNext=function(r,n,i,s,o){this.destination.next(n)},t.prototype.notifyError=function(r,n){this.destination.error(r)},t.prototype.notifyComplete=function(r){this.destination.complete()},t}(Te),s_=function(e){zt(t,e);function t(r,n,i){var s=e.call(this)||this;return s.parent=r,s.outerValue=n,s.outerIndex=i,s.index=0,s}return t.prototype._next=function(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this.index++,this)},t.prototype._error=function(r){this.parent.notifyError(r,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(Te),o_=function(e){return function(t){return e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,As),t}};function a_(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var a0=a_(),c_=function(e){return function(t){var r=e[a0]();do{var n=void 0;try{n=r.next()}catch(i){return t.error(i),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}while(!0);return typeof r.return=="function"&&t.add(function(){r.return&&r.return()}),t}},u_=function(e){return function(t){var r=e[xo]();if(typeof r.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(t)}},jd=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Gd(e){return!!e&&typeof e.subscribe!="function"&&typeof e.then=="function"}var uu=function(e){if(!!e&&typeof e[xo]=="function")return u_(e);if(jd(e))return Kd(e);if(Gd(e))return o_(e);if(!!e&&typeof e[a0]=="function")return c_(e);var t=Rd(e)?"an invalid object":"'"+e+"'",r="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(r)};function f_(e,t,r,n,i){if(i===void 0&&(i=new s_(e,r,n)),!i.closed)return t instanceof Se?t.subscribe(i):uu(t)(i)}var qd={};function Wd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=void 0,n=void 0;return bo(e[e.length-1])&&(n=e.pop()),typeof e[e.length-1]=="function"&&(r=e.pop()),e.length===1&&nu(e[0])&&(e=e[0]),$d(e,n).lift(new h_(r))}var h_=function(){function e(t){this.resultSelector=t}return e.prototype.call=function(t,r){return r.subscribe(new l_(t,this.resultSelector))},e}(),l_=function(e){zt(t,e);function t(r,n){var i=e.call(this,r)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return t.prototype._next=function(r){this.values.push(qd),this.observables.push(r)},t.prototype._complete=function(){var r=this.observables,n=r.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var i=0;i<n;i++){var s=r[i];this.add(f_(this,s,void 0,i))}}},t.prototype.notifyComplete=function(r){(this.active-=1)===0&&this.destination.complete()},t.prototype.notifyNext=function(r,n,i){var s=this.values,o=s[i],a=this.toRespond?o===qd?--this.toRespond:this.toRespond:0;s[i]=n,a===0&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))},t.prototype._tryResultSelector=function(r){var n;try{n=this.resultSelector.apply(this,r)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(i_);function d_(e,t){return new Se(function(r){var n=new mr;return n.add(t.schedule(function(){var i=e[xo]();n.add(i.subscribe({next:function(s){n.add(t.schedule(function(){return r.next(s)}))},error:function(s){n.add(t.schedule(function(){return r.error(s)}))},complete:function(){n.add(t.schedule(function(){return r.complete()}))}}))})),n})}function p_(e,t){return new Se(function(r){var n=new mr;return n.add(t.schedule(function(){return e.then(function(i){n.add(t.schedule(function(){r.next(i),n.add(t.schedule(function(){return r.complete()}))}))},function(i){n.add(t.schedule(function(){return r.error(i)}))})})),n})}function g_(e,t){if(!e)throw new Error("Iterable cannot be null");return new Se(function(r){var n=new mr,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(t.schedule(function(){i=e[a0](),n.add(t.schedule(function(){if(!r.closed){var s,o;try{var a=i.next();s=a.value,o=a.done}catch(u){r.error(u);return}o?r.complete():(r.next(s),this.schedule())}}))})),n})}function v_(e){return e&&typeof e[xo]=="function"}function m_(e){return e&&typeof e[a0]=="function"}function x_(e,t){if(e!=null){if(v_(e))return d_(e,t);if(Gd(e))return p_(e,t);if(jd(e))return ou(e,t);if(m_(e)||typeof e=="string")return g_(e,t)}throw new TypeError((e!==null&&typeof e||e)+" is not observable")}function Ki(e,t){return t?x_(e,t):e instanceof Se?e:new Se(uu(e))}var wo=function(e){zt(t,e);function t(r){var n=e.call(this)||this;return n.parent=r,n}return t.prototype._next=function(r){this.parent.notifyNext(r)},t.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(Te),Eo=function(e){zt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.notifyNext=function(r){this.destination.next(r)},t.prototype.notifyError=function(r){this.destination.error(r)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(Te);function _o(e,t){if(!t.closed){if(e instanceof Se)return e.subscribe(t);var r;try{r=uu(e)(t)}catch(n){t.error(n)}return r}}function fu(e,t,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),typeof t=="function"?function(n){return n.pipe(fu(function(i,s){return Ki(e(i,s)).pipe(Hi(function(o,a){return t(i,o,s,a)}))},r))}:(typeof t=="number"&&(r=t),function(n){return n.lift(new b_(e,r))})}var b_=function(){function e(t,r){r===void 0&&(r=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=r}return e.prototype.call=function(t,r){return r.subscribe(new y_(t,this.project,this.concurrent))},e}(),y_=function(e){zt(t,e);function t(r,n,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var s=e.call(this,r)||this;return s.project=n,s.concurrent=i,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return t.prototype._next=function(r){this.active<this.concurrent?this._tryNext(r):this.buffer.push(r)},t.prototype._tryNext=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this.active++,this._innerSub(n)},t.prototype._innerSub=function(r){var n=new wo(this),i=this.destination;i.add(n);var s=_o(r,n);s!==n&&i.add(s)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(r){this.destination.next(r)},t.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r.length>0?this._next(r.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},t}(Eo);function w_(e){return e===void 0&&(e=Number.POSITIVE_INFINITY),fu(iu,e)}function E_(){return w_(1)}function hu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return E_()(yo.apply(void 0,e))}function Yd(e){return new Se(function(t){var r;try{r=e()}catch(i){t.error(i);return}var n=r?Ki(r):su();return n.subscribe(t)})}function Xd(e){return!nu(e)&&e-parseFloat(e)+1>=0}var __=new Se(Tn);function c0(e,t){return function(n){return n.lift(new S_(e,t))}}var S_=function(){function e(t,r){this.predicate=t,this.thisArg=r}return e.prototype.call=function(t,r){return r.subscribe(new A_(t,this.predicate,this.thisArg))},e}(),A_=function(e){zt(t,e);function t(r,n,i){var s=e.call(this,r)||this;return s.predicate=n,s.thisArg=i,s.count=0,s}return t.prototype._next=function(r){var n;try{n=this.predicate.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(r)},t}(Te);function P_(e,t,r){return e===void 0&&(e=0),new Se(function(n){t===void 0&&(t=e,e=0);var i=0,s=e;if(r)return r.schedule(T_,0,{index:i,count:t,start:e,subscriber:n});do{if(i++>=t){n.complete();break}if(n.next(s++),n.closed)break}while(!0)})}function T_(e){var t=e.start,r=e.index,n=e.count,i=e.subscriber;if(r>=n){i.complete();return}i.next(t),!i.closed&&(e.index=r+1,e.start=t+1,this.schedule(e))}function Zd(e,t,r){e===void 0&&(e=0);var n=-1;return Xd(t)?n=Number(t)<1&&1||Number(t):bo(t)&&(r=t),bo(r)||(r=zd),new Se(function(i){var s=Xd(e)?e:+e-r.now();return r.schedule(R_,s,{index:0,period:n,subscriber:i})})}function R_(e){var t=e.index,r=e.period,n=e.subscriber;if(n.next(t),!n.closed){if(r===-1)return n.complete();e.index=t+1,this.schedule(e,r)}}function lu(e){return function(r){var n=new L_(e),i=r.lift(n);return n.caught=i}}var L_=function(){function e(t){this.selector=t}return e.prototype.call=function(t,r){return r.subscribe(new O_(t,this.selector,this.caught))},e}(),O_=function(e){zt(t,e);function t(r,n,i){var s=e.call(this,r)||this;return s.selector=n,s.caught=i,s}return t.prototype.error=function(r){if(!this.isStopped){var n=void 0;try{n=this.selector(r,this.caught)}catch(o){e.prototype.error.call(this,o);return}this._unsubscribeAndRecycle();var i=new wo(this);this.add(i);var s=_o(n,i);s!==i&&this.add(s)}},t}(Eo);function Jd(e,t){return fu(e,t,1)}function I_(e){return e===void 0&&(e=null),function(t){return t.lift(new N_(e))}}var N_=function(){function e(t){this.defaultValue=t}return e.prototype.call=function(t,r){return r.subscribe(new M_(t,this.defaultValue))},e}(),M_=function(e){zt(t,e);function t(r,n){var i=e.call(this,r)||this;return i.defaultValue=n,i.isEmpty=!0,i}return t.prototype._next=function(r){this.isEmpty=!1,this.destination.next(r)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(Te);function B_(e){return e instanceof Date&&!isNaN(+e)}function Qd(e,t){return function(r){return r.lift(new C_(e,t))}}var C_=function(){function e(t,r){this.compare=t,this.keySelector=r}return e.prototype.call=function(t,r){return r.subscribe(new U_(t,this.compare,this.keySelector))},e}(),U_=function(e){zt(t,e);function t(r,n,i){var s=e.call(this,r)||this;return s.keySelector=i,s.hasKey=!1,typeof n=="function"&&(s.compare=n),s}return t.prototype.compare=function(r,n){return r===n},t.prototype._next=function(r){var n;try{var i=this.keySelector;n=i?i(r):r}catch(a){return this.destination.error(a)}var s=!1;if(this.hasKey)try{var o=this.compare;s=o(this.key,n)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=n,this.destination.next(r))},t}(Te);function k_(e,t){return Qd(function(r,n){return t?t(r[e],n[e]):r[e]===n[e]})}function D_(e){return e===void 0&&(e=K_),function(t){return t.lift(new F_(e))}}var F_=function(){function e(t){this.errorFactory=t}return e.prototype.call=function(t,r){return r.subscribe(new H_(t,this.errorFactory))},e}(),H_=function(e){zt(t,e);function t(r,n){var i=e.call(this,r)||this;return i.errorFactory=n,i.hasValue=!1,i}return t.prototype._next=function(r){this.hasValue=!0,this.destination.next(r)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var r=void 0;try{r=this.errorFactory()}catch(n){r=n}this.destination.error(r)},t}(Te);function K_(){return new Vd}function $_(e){return function(t){return e===0?su():t.lift(new z_(e))}}var z_=function(){function e(t){if(this.total=t,this.total<0)throw new t_}return e.prototype.call=function(t,r){return r.subscribe(new V_(t,this.total))},e}(),V_=function(e){zt(t,e);function t(r,n){var i=e.call(this,r)||this;return i.total=n,i.count=0,i}return t.prototype._next=function(r){var n=this.total,i=++this.count;i<=n&&(this.destination.next(r),i===n&&(this.destination.complete(),this.unsubscribe()))},t}(Te);function Rn(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?c0(function(i,s){return e(i,s,n)}):iu,$_(1),r?I_(t):D_(function(){return new Vd}))}}function tp(e,t){return function(n){var i;if(typeof e=="function"?i=e:i=function(){return e},typeof t=="function")return n.lift(new j_(i,t));var s=Object.create(n,HE);return s.source=n,s.subjectFactory=i,s}}var j_=function(){function e(t,r){this.subjectFactory=t,this.selector=r}return e.prototype.call=function(t,r){var n=this.selector,i=this.subjectFactory(),s=n(i).subscribe(t);return s.add(r.subscribe(i)),s},e}();function ep(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length;if(r===0)throw new Error("list of properties cannot be empty.");return function(n){return Hi(G_(e,r))(n)}}function G_(e,t){var r=function(n){for(var i=n,s=0;s<t;s++){var o=i?.[e[s]];if(o!==void 0)i=o;else return}return i};return r}function q_(e){return e?tp(function(){return new Ps},e):tp(new Ps)}function rp(e){return e===void 0&&(e=-1),function(t){return t.lift(new W_(e,t))}}var W_=function(){function e(t,r){this.count=t,this.source=r}return e.prototype.call=function(t,r){return r.subscribe(new Y_(t,this.count,this.source))},e}(),Y_=function(e){zt(t,e);function t(r,n,i){var s=e.call(this,r)||this;return s.count=n,s.source=i,s}return t.prototype.error=function(r){if(!this.isStopped){var n=this,i=n.source,s=n.count;if(s===0)return e.prototype.error.call(this,r);s>-1&&(this.count=s-1),i.subscribe(this._unsubscribeAndRecycle())}},t}(Te);function So(e,t,r){var n;return e&&typeof e=="object"?n=e:n={bufferSize:e,windowTime:t,refCount:!1,scheduler:r},function(i){return i.lift(X_(n))}}function X_(e){var t=e.bufferSize,r=t===void 0?Number.POSITIVE_INFINITY:t,n=e.windowTime,i=n===void 0?Number.POSITIVE_INFINITY:n,s=e.refCount,o=e.scheduler,a,u=0,h,f=!1,y=!1;return function(L){u++;var I;!a||f?(f=!1,a=new o0(r,i,o),I=a.subscribe(this),h=L.subscribe({next:function(B){a.next(B)},error:function(B){f=!0,a.error(B)},complete:function(){y=!0,h=void 0,a.complete()}}),y&&(h=void 0)):I=a.subscribe(this),this.add(function(){u--,I.unsubscribe(),I=void 0,h&&!y&&s&&u===0&&(h.unsubscribe(),h=void 0,a=void 0)})}}function Z_(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return bo(r)?(e.pop(),function(n){return hu(e,n,r)}):function(n){return hu(e,n)}}function $i(e,t){return typeof t=="function"?function(r){return r.pipe($i(function(n,i){return Ki(e(n,i)).pipe(Hi(function(s,o){return t(n,s,i,o)}))}))}:function(r){return r.lift(new J_(e))}}var J_=function(){function e(t){this.project=t}return e.prototype.call=function(t,r){return r.subscribe(new Q_(t,this.project))},e}(),Q_=function(e){zt(t,e);function t(r,n){var i=e.call(this,r)||this;return i.project=n,i.index=0,i}return t.prototype._next=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this._innerSub(n)},t.prototype._innerSub=function(r){var n=this.innerSubscription;n&&n.unsubscribe();var i=new wo(this),s=this.destination;s.add(i),this.innerSubscription=_o(r,i),this.innerSubscription!==i&&s.add(this.innerSubscription)},t.prototype._complete=function(){var r=this.innerSubscription;(!r||r.closed)&&e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(r){this.destination.next(r)},t}(Eo);function t6(e){return function(t){return t.lift(new e6(e))}}var e6=function(){function e(t){this.notifier=t}return e.prototype.call=function(t,r){var n=new r6(t),i=_o(this.notifier,new wo(n));return i&&!n.seenValue?(n.add(i),r.subscribe(n)):n},e}(),r6=function(e){zt(t,e);function t(r){var n=e.call(this,r)||this;return n.seenValue=!1,n}return t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(Eo);function n6(e,t){return t===void 0&&(t=!1),function(r){return r.lift(new i6(e,t))}}var i6=function(){function e(t,r){this.predicate=t,this.inclusive=r}return e.prototype.call=function(t,r){return r.subscribe(new s6(t,this.predicate,this.inclusive))},e}(),s6=function(e){zt(t,e);function t(r,n,i){var s=e.call(this,r)||this;return s.predicate=n,s.inclusive=i,s.index=0,s}return t.prototype._next=function(r){var n=this.destination,i;try{i=this.predicate(r,this.index++)}catch(s){n.error(s);return}this.nextOrComplete(r,i)},t.prototype.nextOrComplete=function(r,n){var i=this.destination;Boolean(n)?i.next(r):(this.inclusive&&i.next(r),i.complete())},t}(Te);function du(e,t,r){return function(i){return i.lift(new o6(e,t,r))}}var o6=function(){function e(t,r,n){this.nextOrObserver=t,this.error=r,this.complete=n}return e.prototype.call=function(t,r){return r.subscribe(new a6(t,this.nextOrObserver,this.error,this.complete))},e}(),a6=function(e){zt(t,e);function t(r,n,i,s){var o=e.call(this,r)||this;return o._tapNext=Tn,o._tapError=Tn,o._tapComplete=Tn,o._tapError=i||Tn,o._tapComplete=s||Tn,r0(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||Tn,o._tapError=n.error||Tn,o._tapComplete=n.complete||Tn),o}return t.prototype._next=function(r){try{this._tapNext.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.next(r)},t.prototype._error=function(r){try{this._tapError.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.error(r)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(r){this.destination.error(r);return}return this.destination.complete()},t}(Te);function np(e,t,r){return r===void 0&&(r=zd),function(n){var i=B_(e),s=i?+e-r.now():Math.abs(e);return n.lift(new c6(s,i,t,r))}}var c6=function(){function e(t,r,n,i){this.waitFor=t,this.absoluteTimeout=r,this.withObservable=n,this.scheduler=i}return e.prototype.call=function(t,r){return r.subscribe(new u6(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),u6=function(e){zt(t,e);function t(r,n,i,s,o){var a=e.call(this,r)||this;return a.absoluteTimeout=n,a.waitFor=i,a.withObservable=s,a.scheduler=o,a.scheduleTimeout(),a}return t.dispatchTimeout=function(r){var n=r.withObservable;r._unsubscribeAndRecycle(),r.add(_o(n,new wo(r)))},t.prototype.scheduleTimeout=function(){var r=this.action;r?this.action=r.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(r){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,r)},t.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},t}(Eo),f6=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var r=typeof t.cycles=="boolean"?t.cycles:!1,n=t.cmp&&function(s){return function(o){return function(a,u){var h={key:a,value:o[a]},f={key:u,value:o[u]};return s(h,f)}}}(t.cmp),i=[];return function s(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var a,u;if(Array.isArray(o)){for(u="[",a=0;a<o.length;a++)a&&(u+=","),u+=s(o[a])||"null";return u+"]"}if(o===null)return"null";if(i.indexOf(o)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var h=i.push(o)-1,f=Object.keys(o).sort(n&&n(o));for(u="",a=0;a<f.length;a++){var y=f[a],w=s(o[y]);!w||(u&&(u+=","),u+=JSON.stringify(y)+":"+w)}return i.splice(h,1),"{"+u+"}"}}(e)},ip;class h6 extends Error{constructor(t){super(`The map type '${t}' is invalid`),this.mapType=t,this.name="InvalidMapTypeError"}}const sp=Symbol.for("taquito-michelson-map-type-symbol"),l6=e=>"args"in e&&Array.isArray(e.args)&&e.args.length===2;class op extends Error{constructor(t,r,n){super(`${n} not compliant with underlying michelson type`),this.value=t,this.type=r,this.name="MapTypecheckError"}}class xr{constructor(t){this.valueMap=new Map,this.keyMap=new Map,this[ip]=!0,t&&this.setType(t)}static isMichelsonMap(t){return t&&t[sp]===!0}setType(t){if(!l6(t))throw new h6(t.toString());this.keySchema=new ar(t.args[0]),this.valueSchema=new ar(t.args[1])}removeType(){this.keySchema=void 0,this.valueSchema=void 0}static fromLiteral(t,r){const n=new xr(r);return Object.keys(t).forEach(i=>{n.set(i,t[i])}),n}typecheckKey(t){return this.keySchema?this.keySchema.Typecheck(t):!0}typecheckValue(t){return this.valueSchema?this.valueSchema.Typecheck(t):!0}assertTypecheckValue(t){if(!this.typecheckValue(t))throw new op(t,this.valueSchema,"value")}assertTypecheckKey(t){if(!this.typecheckKey(t))throw new op(t,this.keySchema,"key")}serializeDeterministically(t){return f6(t)}*keys(){for(const[t]of this.entries())yield t}*values(){for(const[,t]of this.entries())yield t}*entries(){for(const t of this.valueMap.keys())yield[this.keyMap.get(t),this.valueMap.get(t)]}get(t){this.assertTypecheckKey(t);const r=this.serializeDeterministically(t);return this.valueMap.get(r)}set(t,r){this.assertTypecheckKey(t),this.assertTypecheckValue(r);const n=this.serializeDeterministically(t);this.keyMap.set(n,t),this.valueMap.set(n,r)}delete(t){this.assertTypecheckKey(t),this.keyMap.delete(this.serializeDeterministically(t)),this.valueMap.delete(this.serializeDeterministically(t))}has(t){this.assertTypecheckKey(t);const r=this.serializeDeterministically(t);return this.keyMap.has(r)&&this.valueMap.has(r)}clear(){this.keyMap.clear(),this.valueMap.clear()}get size(){return this.keyMap.size}forEach(t){for(const[r,n]of this.entries())t(n,r,this)}}ip=sp;class se extends Error{constructor(t,r,n){super(),this.value=t,this.token=r,this.name="ValidationError";const i=this.token.annot(),s=i?`[${i}] `:"";this.message=`${s}${n}`}}class $e{constructor(t,r,n){this.val=t,this.idx=r,this.fac=n,this.createToken=this.fac}typeWithoutAnnotations(){const t=n=>{if(typeof n=="object"){if(Array.isArray(n))return n.map(o=>t(o));const i=n;return i.args?{prim:i.prim,args:i.args.map(s=>t(s))}:{prim:i.prim}}return n};return(n=>n.args?{prim:n.prim,args:n.args.map(i=>t(i))}:{prim:n.prim})(this.val)}annot(){return(Array.isArray(this.val.annots)&&this.val.annots.length>0?this.val.annots[0]:String(this.idx)).replace(/(%|:)(_Liq_entry_)?/,"")}hasAnnotations(){return Array.isArray(this.val.annots)&&this.val.annots.length}get tokenVal(){return this.val}ExtractSignature(){return[[this.ExtractSchema()]]}}class Ae extends $e{compare(t,r){return t===r?0:t<r?-1:1}}class ap extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="BigMapValidationError"}}class Lr extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}ExtractSchema(){return{big_map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:Lr.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}isValid(t){return xr.isMichelsonMap(t)?null:new ap(t,this,"Value must be a MichelsonMap")}objLitToMichelsonMap(t){return t instanceof xr?t:typeof t=="object"?Object.keys(t).length===0?new xr:xr.fromLiteral(t):t}Encode(t){const r=this.objLitToMichelsonMap(t.pop()),n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((i,s)=>this.KeySchema.compare(i,s)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(r.get(i))]}))}EncodeObject(t,r){const n=this.objLitToMichelsonMap(t),i=this.isValid(n);if(i)throw i;return r&&r[Lr.prim]?r[Lr.prim](n,this.val):Array.from(n.keys()).sort((s,o)=>this.KeySchema.compare(s,o)).map(s=>({prim:"Elt",args:[this.KeySchema.EncodeObject(s),this.ValueSchema.EncodeObject(n.get(s))]}))}Execute(t,r){if(r&&r[Lr.prim])return r[Lr.prim](t,this.val);if(Array.isArray(t)){const n=new xr(this.val);return t.forEach(i=>{n.set(this.KeySchema.ToKey(i.args[0]),this.ValueSchema.Execute(i.args[1]))}),n}else{if("int"in t)return t.int;throw new ap(t,this,`Big map is expecting either an array (Athens) or an object with an int property (Babylon). Got ${JSON.stringify(t)}`)}}findAndReturnTokens(t,r){return Lr.prim===t&&r.push(this),this.KeySchema.findAndReturnTokens(t,r),this.ValueSchema.findAndReturnTokens(t,r),r}}Lr.prim="big_map";class d6 extends Error{constructor(t){super(t),this.message=t,this.name="OrTokenDecodingError"}}class Gt extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}Encode(t){const r=t[t.length-1],n=this.createToken(this.val.args[0],this.idx);let i=1;n instanceof Gt&&(i=Object.keys(n.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+i);if(String(n.annot())===String(r)&&!(n instanceof Gt))return t.pop(),{prim:"Left",args:[n.Encode(t)]};if(String(s.annot())===String(r)&&!(s instanceof Gt))return t.pop(),{prim:"Right",args:[s.Encode(t)]};if(n instanceof Gt){const o=n.Encode(t);if(o)return{prim:"Left",args:[o]}}if(s instanceof Gt){const o=s.Encode(t);if(o)return{prim:"Right",args:[o]}}return null}ExtractSignature(){const t=this.createToken(this.val.args[0],this.idx);let r=1;t instanceof Gt&&(r=Object.keys(t.ExtractSchema()).length);const n=this.createToken(this.val.args[1],this.idx+r),i=[];if(t instanceof Gt)i.push(...t.ExtractSignature());else for(const s of t.ExtractSignature())i.push([t.annot(),...s]);if(n instanceof Gt)i.push(...n.ExtractSignature());else for(const s of n.ExtractSignature())i.push([n.annot(),...s]);return i}EncodeObject(t,r){const n=Object.keys(t)[0],i=this.createToken(this.val.args[0],this.idx);let s=1;i instanceof Gt&&(s=Object.keys(i.ExtractSchema()).length);const o=this.createToken(this.val.args[1],this.idx+s);if(String(i.annot())===String(n)&&!(i instanceof Gt))return{prim:"Left",args:[i.EncodeObject(t[n],r)]};if(String(o.annot())===String(n)&&!(o instanceof Gt))return{prim:"Right",args:[o.EncodeObject(t[n],r)]};if(i instanceof Gt){const a=i.EncodeObject(t,r);if(a)return{prim:"Left",args:[a]}}if(o instanceof Gt){const a=o.EncodeObject(t,r);if(a)return{prim:"Right",args:[a]}}return null}Execute(t,r){const n=this.createToken(this.val.args[0],this.idx);let i=1;n instanceof Gt&&(i=Object.keys(n.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+i);if(t.prim==="Right")return s instanceof Gt?s.Execute(t.args[0],r):{[s.annot()]:s.Execute(t.args[0],r)};if(t.prim==="Left")return n instanceof Gt?n.Execute(t.args[0],r):{[n.annot()]:n.Execute(t.args[0],r)};throw new d6(`Was expecting Left or Right prim but got: ${t.prim}`)}traversal(t,r,n){const i=this.createToken(this.val.args[0],this.idx);let s=1,o;i instanceof Gt&&!i.hasAnnotations()?(o=t(i),s=Object.keys(i.ExtractSchema()).length):o={[i.annot()]:t(i)};const a=this.createToken(this.val.args[1],this.idx+s);let u;return a instanceof Gt&&!a.hasAnnotations()?u=r(a):u={[a.annot()]:r(a)},n(o,u)}ExtractSchema(){return this.traversal(t=>t.ExtractSchema(),t=>t.ExtractSchema(),(t,r)=>Object.assign(Object.assign({},t),r))}generateSchema(){return{__michelsonType:Gt.prim,schema:this.traversal(t=>t instanceof Gt&&!t.hasAnnotations()?t.generateSchema().schema:t.generateSchema(),t=>t instanceof Gt&&!t.hasAnnotations()?t.generateSchema().schema:t.generateSchema(),(t,r)=>Object.assign(Object.assign({},t),r))}}findToken(t){const r=this.createToken(this.val.args[0],this.idx);let n=1;r instanceof Gt&&(n=Object.keys(r.ExtractSchema()).length);const i=this.createToken(this.val.args[1],this.idx+n);if(String(r.annot())===String(t)&&!(r instanceof Gt)&&r instanceof Ae)return r;if(String(i.annot())===String(t)&&!(i instanceof Gt)&&i instanceof Ae)return i;if(r instanceof Gt){const s=r.findToken(t);if(s)return s}if(i instanceof Gt){const s=i.findToken(t);if(s)return s}return null}compare(t,r){const n=Object.keys(t)[0],i=Object.keys(r)[0];if(n===i){const s=this.findToken(n);if(s instanceof Ae)return s.compare(t[n],r[n])}else{const s=JSON.stringify(this.EncodeObject(t)),o=JSON.stringify(this.EncodeObject(r));return s<o?-1:1}}ToKey(t){return this.Execute(t)}ToBigMapKey(t){return{key:this.EncodeObject(t),type:this.typeWithoutAnnotations()}}findAndReturnTokens(t,r){return Gt.prim===t&&r.push(this),this.traversal(n=>n.findAndReturnTokens(t,r),n=>n.findAndReturnTokens(t,r),(n,i)=>Object.assign(Object.assign({},n),i)),r}}Gt.prim="or";class p6 extends Error{constructor(t){super(t),this.message=t,this.name="TokenArgumentValidationError"}}class g6 extends Error{constructor(t,r){super(`Tokens ${t} and ${r} are not comparable`),this.val1=t,this.val2=r,this.name="TokenComparisonError"}}function pu(e,t=Ie.prim){if(Array.isArray(e))return pu({prim:t,args:e},t);if(e.args===void 0)throw new p6("Encountered an invalid PairToken with no arguments, a pair must have two or more arguments");return e.args.length>2?[e.args[0],{prim:t,args:e.args.slice(1)}]:[e.args[0],e.args[1]]}class Ie extends Ae{constructor(t,r,n){super(Array.isArray(t)?{prim:Ie.prim,args:t}:t.prim?t:{prim:Ie.prim,args:t},r,n)}args(){return pu(this.val)}tokens(){let t=0;return this.args().map(r=>{const n=this.createToken(r,this.idx+t);return n instanceof Ie?t+=Object.keys(n.ExtractSchema()).length:t++,n})}Encode(t){return{prim:"Pair",args:this.tokens().map(r=>r.Encode(t))}}ExtractSignature(){const t=this.args(),r=this.createToken(t[0],this.idx);let n=1;r instanceof Gt&&(n=Object.keys(r.ExtractSchema()).length);const i=this.createToken(t[1],this.idx+n),s=[];for(const o of r.ExtractSignature())for(const a of i.ExtractSignature())s.push([...o,...a]);return s}ToBigMapKey(t){return{key:this.EncodeObject(t),type:this.typeWithoutAnnotations()}}ToKey(t){return this.Execute(t)}EncodeObject(t,r){const[n,i]=this.tokens();let s;n instanceof Ie&&!n.hasAnnotations()?s=t:s=t[n.annot()];let o;return i instanceof Ie&&!i.hasAnnotations()?o=t:o=t[i.annot()],{prim:"Pair",args:[n.EncodeObject(s,r),i.EncodeObject(o,r)]}}traversal(t,r){const n=this.args(),i=this.createToken(n[0],this.idx);let s=1,o;i instanceof Ie&&(s=Object.keys(i.ExtractSchema()).length),i instanceof Ie&&!i.hasAnnotations()?o=t(i):o={[i.annot()]:t(i)};const a=this.createToken(n[1],this.idx+s);let u;return a instanceof Ie&&!a.hasAnnotations()?u=r(a):u={[a.annot()]:r(a)},Object.assign(Object.assign({},o),u)}Execute(t,r){const n=pu(t,"Pair");return this.traversal(i=>i.Execute(n[0],r),i=>i.Execute(n[1],r))}ExtractSchema(){return this.traversal(t=>t.ExtractSchema(),t=>t.ExtractSchema())}generateSchema(){return{__michelsonType:Ie.prim,schema:this.traversal(t=>t instanceof Ie&&!t.hasAnnotations()?t.generateSchema().schema:t.generateSchema(),t=>t instanceof Ie&&!t.hasAnnotations()?t.generateSchema().schema:t.generateSchema())}}compare(t,r){const[n,i]=this.tokens(),s=(o,a)=>o instanceof Ie&&!o.hasAnnotations()?a:a[o.annot()];if(n instanceof Ae&&i instanceof Ae){const o=n.compare(s(n,t),s(n,r));return o===0?i.compare(s(i,t),s(i,r)):o}throw new g6(t,r)}findAndReturnTokens(t,r){return Ie.prim===t&&r.push(this),this.tokens().map(n=>n.findAndReturnTokens(t,r)),r}}Ie.prim="pair";class cp extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="NatValidationError"}}class rn extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}Execute(t){return new vt(t[Object.keys(t)[0]])}Encode(t){const r=t.pop(),n=this.isValid(r);if(n)throw n;return{int:new vt(r).toFixed()}}isValid(t){const r=new vt(t);return r.isNaN()?new cp(t,this,`Value is not a number: ${t}`):r.isNegative()?new cp(t,this,`Value cannot be negative: ${t}`):null}EncodeObject(t,r){const n=this.isValid(t);if(n)throw n;return r&&r[rn.prim]?r[rn.prim](t):{int:new vt(t).toFixed()}}ExtractSchema(){return rn.prim}generateSchema(){return{__michelsonType:rn.prim,schema:rn.prim}}ToBigMapKey(t){return{key:{int:String(t)},type:{prim:rn.prim}}}ToKey({int:t}){return new vt(t)}compare(t,r){const n=Number(t),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(t,r){return rn.prim===t&&r.push(this),r}}rn.prim="nat";class nn extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}Execute(t){return t[Object.keys(t)[0]]}ExtractSchema(){return nn.prim}generateSchema(){return{__michelsonType:nn.prim,schema:nn.prim}}Encode(t){return{string:t.pop()}}EncodeObject(t,r){return r&&r[nn.prim]?r[nn.prim](t):{string:t}}ToKey({string:t}){return t}ToBigMapKey(t){return{key:{string:t},type:{prim:nn.prim}}}findAndReturnTokens(t,r){return nn.prim===t&&r.push(this),r}}nn.prim="string";class gu extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="AddressValidationError"}}class Ln extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}ToBigMapKey(t){return{key:{bytes:TE(t)},type:{prim:"bytes"}}}isValid(t){return ye(t)!==bt.VALID?new gu(t,this,`Address is not valid: ${t}`):null}Encode(t){const r=t.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(t,r){const n=this.isValid(t);if(n)throw n;return r&&r[Ln.prim]?r[Ln.prim](t):{string:t}}Execute(t){if(t.string)return t.string;if(!t.bytes)throw new gu(t,this,`cannot be missing both string and bytes: ${t}`);return tu(t.bytes)}ExtractSchema(){return Ln.prim}generateSchema(){return{__michelsonType:Ln.prim,schema:Ln.prim}}ToKey({bytes:t,string:r}){if(r)return r;if(!t)throw new gu({bytes:t,string:r},this,`cannot be missing both string and bytes ${{string:r,bytes:t}}`);return tu(t)}compare(t,r){const n=o=>o.startsWith("tz"),i=n(t),s=n(r);return i&&!s?-1:s&&!i?1:super.compare(t,r)}findAndReturnTokens(t,r){return Ln.prim===t&&r.push(this),r}}Ln.prim="address";class v6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="MapValidationError"}}class zi extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(t){return xr.isMichelsonMap(t)?null:new v6(t,this,"Value must be a MichelsonMap")}Execute(t,r){const n=new xr(this.val);return t.forEach(i=>{n.set(this.KeySchema.ToKey(i.args[0]),this.ValueSchema.Execute(i.args[1],r))}),n}objLitToMichelsonMap(t){return t instanceof xr?t:typeof t=="object"?Object.keys(t).length===0?new xr:xr.fromLiteral(t):t}Encode(t){const r=this.objLitToMichelsonMap(t.pop()),n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((i,s)=>this.KeySchema.compare(i,s)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(r.get(i))]}))}EncodeObject(t,r){const n=this.objLitToMichelsonMap(t),i=this.isValid(n);if(i)throw i;return r&&r[zi.prim]?r[zi.prim](n):Array.from(n.keys()).sort((s,o)=>this.KeySchema.compare(s,o)).map(s=>({prim:"Elt",args:[this.KeySchema.EncodeObject(s),this.ValueSchema.EncodeObject(n.get(s))]}))}ExtractSchema(){return{map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:zi.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}findAndReturnTokens(t,r){return zi.prim===t&&r.push(this),this.KeySchema.findAndReturnTokens(t,r),this.ValueSchema.findAndReturnTokens(t,r),r}}zi.prim="map";class sn extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}Execute(t){return String(t.prim).toLowerCase()==="true"}Encode(t){return{prim:t.pop()?"True":"False"}}EncodeObject(t,r){return r&&r[sn.prim]?r[sn.prim](t):{prim:t?"True":"False"}}ExtractSchema(){return sn.prim}generateSchema(){return{__michelsonType:sn.prim,schema:sn.prim}}ToBigMapKey(t){return{key:this.EncodeObject(t),type:{prim:sn.prim}}}ToKey(t){return this.EncodeObject(t)}compare(t,r){return t&&r||!t&&!r?0:t?1:-1}findAndReturnTokens(t,r){return sn.prim===t&&r.push(this),r}}sn.prim="bool";class u0 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="TxRollupL2AddressValidationError"}}class On extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}ToBigMapKey(t){return{key:{bytes:RE(t)},type:{prim:"bytes"}}}isValid(t){if(ye(t)!==bt.VALID)throw new u0(t,this,`tx_rollup_l2_address is not valid: ${t}`);return null}Encode(t){const r=t.pop();if(!r)throw new u0(r,this,`arg missing to encode: this -> "${r}"`);return this.isValid(r),{string:r}}EncodeObject(t,r){return this.isValid(t),r&&r[On.prim]?r[On.prim](t):{string:t}}Execute(t){if(t.string)return t.string;if(!t.bytes)throw new u0(t,this,`value cannot be missing string and byte value. must have one ${JSON.stringify(t)}`);return wd(t.bytes)}ExtractSchema(){return On.prim}generateSchema(){return{__michelsonType:On.prim,schema:On.prim}}ToKey({bytes:t,string:r}){if(r)return r;if(!t)throw new u0(t,this,`value cannot be missing string and byte value. must have one: bytes = ${t}`);return wd(t)}findAndReturnTokens(t,r){return On.prim===t&&r.push(this),r}}On.prim="tx_rollup_l2_address";class up extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="ContractValidationError"}}class Fr extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}isValid(t){return ye(t)!==bt.VALID?new up(t,this,"Contract address is not valid"):null}Execute(t){if(t.string)return t.string;if(!t.bytes)throw new up(t,this,"must contain bytes or string");return tu(t.bytes)}Encode(t){const r=t.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(t,r){const n=this.isValid(t);if(n)throw n;return r&&r[Fr.prim]?r[Fr.prim](t):{string:t}}ExtractSchema(){return Fr.prim}generateSchema(){const t=this.createToken(this.val.args[0],0);return{__michelsonType:Fr.prim,schema:{parameter:this.val.args[0]?t.generateSchema():{}}}}findAndReturnTokens(t,r){return Fr.prim===t&&r.push(this),r}}Fr.prim="contract";class m6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="ListValidationError"}}class ai extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}get valueSchema(){return this.createToken(this.val.args[0],this.idx)}isValid(t){return Array.isArray(t)?null:new m6(t,this,"Value must be an array")}Encode(t){const r=t.pop(),n=this.isValid(r);if(n)throw n;const i=this.createToken(this.val.args[0],0);return r.reduce((s,o)=>[...s,i.EncodeObject(o)],[])}Execute(t,r){const n=this.createToken(this.val.args[0],0),i=this.isValid(t);if(i)throw i;return t.reduce((s,o)=>[...s,n.Execute(o,r)],[])}EncodeObject(t,r){const n=this.createToken(this.val.args[0],0),i=this.isValid(t);if(i)throw i;return r&&r[ai.prim]?r[ai.prim](t):t.reduce((s,o)=>[...s,n.EncodeObject(o)],[])}ExtractSchema(){return{[ai.prim]:this.valueSchema.ExtractSchema()}}generateSchema(){return{__michelsonType:ai.prim,schema:this.valueSchema.generateSchema()}}findAndReturnTokens(t,r){return ai.prim===t&&r.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(t,r),r}}ai.prim="list";class x6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="MutezValidationError"}}class on extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}Execute(t){return new vt(t[Object.keys(t)[0]])}ExtractSchema(){return on.prim}generateSchema(){return{__michelsonType:on.prim,schema:on.prim}}isValid(t){return new vt(t).isNaN()?new x6(t,this,`Value is not a number: ${t}`):null}Encode(t){const r=t.pop(),n=this.isValid(r);if(n)throw n;return{int:String(r).toString()}}EncodeObject(t,r){const n=this.isValid(t);if(n)throw n;return r&&r[on.prim]?r[on.prim](t):{int:String(t).toString()}}ToBigMapKey(t){return{key:{int:String(t)},type:{prim:on.prim}}}ToKey({int:t}){return t}compare(t,r){const n=Number(t),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(t,r){return on.prim===t&&r.push(this),r}}on.prim="mutez";class b6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="BytesValidationError"}}class an extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}ToBigMapKey(t){return{key:{bytes:t},type:{prim:an.prim}}}isValid(t){return typeof t=="string"&&/^[0-9a-fA-F]*$/.test(t)&&t.length%2===0?null:new b6(t,this,`Invalid bytes: ${t}`)}convertUint8ArrayToHexString(t){return t.constructor===Uint8Array?Buffer.from(t).toString("hex"):t}Encode(t){let r=t.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:String(r).toString()}}EncodeObject(t,r){t=this.convertUint8ArrayToHexString(t);const n=this.isValid(t);if(n)throw n;return r&&r[an.prim]?r[an.prim](t):{bytes:String(t).toString()}}Execute(t){return t.bytes}ExtractSchema(){return an.prim}generateSchema(){return{__michelsonType:an.prim,schema:an.prim}}ToKey({bytes:t,string:r}){return r||t}findAndReturnTokens(t,r){return an.prim===t&&r.push(this),r}}an.prim="bytes";class Ts extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}subToken(){return this.createToken(this.val.args[0],this.idx)}schema(){return this.createToken(this.val.args[0],0)}annot(){return Array.isArray(this.val.annots)?super.annot():this.createToken(this.val.args[0],this.idx).annot()}Encode(t){const r=t;return r==null?{prim:"None"}:Array.isArray(r)&&(r[r.length-1]===void 0||r[r.length-1]===null)?(r.pop(),{prim:"None"}):{prim:"Some",args:[this.schema().Encode(t)]}}EncodeObject(t,r){const n=t;return n==null?{prim:"None"}:{prim:"Some",args:[this.schema().EncodeObject(n,r)]}}Execute(t,r){return t.prim==="None"?null:this.schema().Execute(t.args[0],r)}ExtractSchema(){return this.schema().ExtractSchema()}generateSchema(){return{__michelsonType:Ts.prim,schema:this.schema().generateSchema()}}ExtractSignature(){return[...this.schema().ExtractSignature(),[]]}get KeySchema(){return this.schema()}compare(t,r){if(t){if(!r)return 1}else return-1;return this.KeySchema.compare(t,r)}ToKey(t){return this.Execute(t)}ToBigMapKey(t){return{key:this.EncodeObject(t),type:this.typeWithoutAnnotations()}}findAndReturnTokens(t,r){return Ts.prim===t&&r.push(this),this.subToken().findAndReturnTokens(t,r),r}}Ts.prim="option";class cn extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}Execute(t){if(t.string&&/^\d+$/.test(t.string))return new Date(Number(t.string)*1e3).toISOString();if(t.string)return new Date(t.string).toISOString();if(t.int)return new Date(Number(t.int)*1e3).toISOString()}Encode(t){return{string:t.pop()}}EncodeObject(t,r){return r&&r[cn.prim]?r[cn.prim](t):{string:t}}ExtractSchema(){return cn.prim}generateSchema(){return{__michelsonType:cn.prim,schema:cn.prim}}ToKey({string:t}){return t}ToBigMapKey(t){return{key:{string:t},type:{prim:cn.prim}}}findAndReturnTokens(t,r){return cn.prim===t&&r.push(this),r}}cn.prim="timestamp";class y6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="IntValidationError"}}class br extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}Execute(t){return new vt(t[Object.keys(t)[0]])}ExtractSchema(){return br.prim}generateSchema(){return{__michelsonType:br.prim,schema:br.prim}}isValid(t){return new vt(t).isNaN()?new y6(t,this,`Value is not a number: ${t}`):null}Encode(t){const r=t.pop(),n=this.isValid(r);if(n)throw n;return{int:new vt(r).toFixed()}}EncodeObject(t,r){const n=this.isValid(t);if(n)throw n;return r&&r[br.prim]?r[br.prim](t):{int:new vt(t).toFixed()}}ToBigMapKey(t){return{key:{int:String(t)},type:{prim:br.prim}}}ToKey({int:t}){return t}compare(t,r){const n=Number(t),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(t,r){return br.prim===t&&r.push(this),r}}br.prim="int";class un extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}Encode(t){return t.pop(),{prim:"Unit"}}EncodeObject(t,r){return r&&r[un.prim]?r[un.prim](t):{prim:"Unit"}}Execute(t){return bp}ExtractSchema(){return un.prim}generateSchema(){return{__michelsonType:un.prim,schema:un.prim}}compare(t,r){return 0}ToKey(t){return bp}ToBigMapKey(t){return{key:{prim:"Unit"},type:{prim:un.prim}}}findAndReturnTokens(t,r){return un.prim===t&&r.push(this),r}}un.prim="unit";const w6=4;class E6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="KeyValidationError"}}class fn extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}Execute(t){return t.string?t.string:LE(t.bytes)}isValid(t){return SE(t)!==bt.VALID?new E6(t,this,"Key is not valid"):null}Encode(t){const r=t.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(t,r){const n=this.isValid(t);if(n)throw n;return r&&r[fn.prim]?r[fn.prim](t):{string:t}}ExtractSchema(){return fn.prim}generateSchema(){return{__michelsonType:fn.prim,schema:fn.prim}}ToKey(t){return this.Execute(t)}ToBigMapKey(t){return{key:{string:t},type:{prim:fn.prim}}}compare(t,r){const n=this.getPrefix(t),i=this.getPrefix(r);if(n===et.EDPK&&i!==et.EDPK)return-1;if(n===et.SPPK&&i!==et.SPPK)return i===et.EDPK?1:-1;if(n===et.P2PK){if(i!==et.P2PK)return 1;const s=this.getP256PublicKeyComparableBytes(t),o=this.getP256PublicKeyComparableBytes(r);return Buffer.compare(s,o)}return super.compare(t,r)}getPrefix(t){return t.substring(0,w6)}getP256PublicKeyComparableBytes(t){return yd(t,er[et.P2PK]).slice(1)}findAndReturnTokens(t,r){return fn.prim===t&&r.push(this),r}}fn.prim="key";class _6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="KeyHashValidationError"}}class hn extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}Execute(t){return t.string?t.string:Ed(t.bytes)}isValid(t){return Qc(t)!==bt.VALID?new _6(t,this,`KeyHash is not valid: ${t}`):null}Encode(t){const r=t.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(t,r){const n=this.isValid(t);if(n)throw n;return r&&r[hn.prim]?r[hn.prim](t):{string:t}}ExtractSchema(){return hn.prim}generateSchema(){return{__michelsonType:hn.prim,schema:hn.prim}}ToKey({string:t,bytes:r}){return t||Ed(r)}ToBigMapKey(t){return{key:{string:t},type:{prim:hn.prim}}}findAndReturnTokens(t,r){return hn.prim===t&&r.push(this),r}}hn.prim="key_hash";class S6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="SignatureValidationError"}}class ln extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}Execute(t){return t.string?t.string:t.bytes}isValid(t){return _E(t)!==bt.VALID?new S6(t,this,"Signature is not valid"):null}Encode(t){const r=t.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(t,r){const n=this.isValid(t);if(n)throw n;return r&&r[ln.prim]?r[ln.prim](t):{string:t}}ExtractSchema(){return ln.prim}generateSchema(){return{__michelsonType:ln.prim,schema:ln.prim}}ToKey(t){return this.Execute(t)}ToBigMapKey(t){return{key:{string:t},type:{prim:ln.prim}}}findAndReturnTokens(t,r){return ln.prim===t&&r.push(this),r}}ln.prim="signature";class ci extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}get paramSchema(){return this.createToken(this.val.args[0],this.idx)}get returnSchema(){return this.createToken(this.val.args[1],this.idx+1)}Execute(t){return t.string?t.string:t}Encode(t){return t.pop()}EncodeObject(t,r){return r&&r[ci.prim]?r[ci.prim](t):t}ExtractSchema(){return{[ci.prim]:{parameters:this.paramSchema.ExtractSchema(),returns:this.returnSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:ci.prim,schema:{parameters:this.paramSchema.generateSchema(),returns:this.returnSchema.generateSchema()}}}findAndReturnTokens(t,r){return ci.prim===t&&r.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(t,r),this.createToken(this.val.args[1],this.idx).findAndReturnTokens(t,r),r}}ci.prim="lambda";class In extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}Execute(t){return t.string}Encode(...t){return{string:t.pop()}}EncodeObject(t,r){return r&&r[In.prim]?r[In.prim](t):{string:t}}ExtractSchema(){return In.prim}generateSchema(){return{__michelsonType:In.prim,schema:In.prim}}findAndReturnTokens(t,r){return In.prim===t&&r.push(this),r}}In.prim="operation";class A6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="SetValidationError"}}class ui extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(t){return Array.isArray(t)?null:new A6(t,this,"Value must be an array")}Encode(t){const r=t.pop(),n=this.isValid(r);if(n)throw n;return r.sort((i,s)=>this.KeySchema.compare(i,s)).reduce((i,s)=>[...i,this.KeySchema.EncodeObject(s)],[])}Execute(t,r){return t.reduce((n,i)=>[...n,this.KeySchema.Execute(i,r)],[])}EncodeObject(t,r){const n=this.isValid(t);if(n)throw n;return r&&r[ui.prim]?r[ui.prim](t):t.sort((i,s)=>this.KeySchema.compare(i,s)).reduce((i,s)=>[...i,this.KeySchema.EncodeObject(s)],[])}ExtractSchema(){return ui.prim}generateSchema(){return{__michelsonType:ui.prim,schema:this.KeySchema.generateSchema()}}findAndReturnTokens(t,r){return ui.prim===t&&r.push(this),this.KeySchema.findAndReturnTokens(t,r),r}}ui.prim="set";class P6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="ChainIDValidationError"}}class dn extends Ae{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}isValid(t){return xd(t)!==bt.VALID?new P6(t,this,"ChainID is not valid"):null}Execute(t){return t[Object.keys(t)[0]]}ExtractSchema(){return dn.prim}generateSchema(){return{__michelsonType:dn.prim,schema:dn.prim}}Encode(t){const r=t.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(t,r){const n=this.isValid(t);if(n)throw n;return r&&r[dn.prim]?r[dn.prim](t):{string:t}}ToKey({string:t}){return t}ToBigMapKey(t){return{key:{string:t},type:{prim:dn.prim}}}findAndReturnTokens(t,r){return dn.prim===t&&r.push(this),r}}dn.prim="chain_id";class fp extends Error{constructor(){super("Tickets cannot be sent to the blockchain; they are created on-chain"),this.name="TicketEncodeError"}}const T6={prim:"contract"},R6={prim:"int"};class Nn extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(t){throw new fp}EncodeObject(t,r){if(r&&r[Nn.prim])return r[Nn.prim](t,this.val);throw new fp}Execute(t,r){if(r&&r[Nn.prim])return r[Nn.prim](t,this.val);const n=this.createToken(T6,this.idx),i=this.valueToken,s=this.createToken(R6,this.idx);return t.args[2]===void 0&&t.args[1].args!==void 0?{ticketer:n.Execute(t.args[0],r),value:i.Execute(t.args[1].args[0],r),amount:s.Execute(t.args[1].args[1],r)}:{ticketer:n.Execute(t.args[0],r),value:i.Execute(t.args[1],r),amount:s.Execute(t.args[2],r)}}ExtractSchema(){return{ticketer:Fr.prim,value:this.valueToken.ExtractSchema(),amount:br.prim}}generateSchema(){return{__michelsonType:Nn.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:Fr.prim,schema:Fr.prim},amount:{__michelsonType:br.prim,schema:br.prim}}}}findAndReturnTokens(t,r){return Nn.prim===t&&r.push(this),this.valueToken.findAndReturnTokens(t,r),r}}Nn.prim="ticket";class vu extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="NeverTokenError"}}class Mn extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}Encode(t){const r=t.pop();throw new vu(r,this,"Assigning a value to the type never is forbidden.")}EncodeObject(t,r){if(r&&r[Mn.prim])return r[Mn.prim](t);throw new vu(t,this,"Assigning a value to the type never is forbidden.")}Execute(t){throw new vu(t,this,"There is no literal value for the type never.")}ExtractSchema(){return Mn.prim}generateSchema(){return{__michelsonType:Mn.prim,schema:Mn.prim}}findAndReturnTokens(t,r){return Mn.prim===t&&r.push(this),r}}Mn.prim="never";class mu extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="SaplingStateValidationError"}}class pn extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}isValid(t){return typeof t=="object"&&Object.keys(t).length===0}Execute(t,r){if(r&&r[pn.prim])return r[pn.prim](t,this.val);if("int"in t)return t.int;throw new mu(t,this,`Sapling state is expecting an object with an int property. Got ${JSON.stringify(t)}`)}Encode(t){const r=t.pop();if(this.isValid(r))return[];throw new mu(r,this,`Invalid sapling_state. Received: ${r} while expecting: {}`)}EncodeObject(t,r){if(r&&r[pn.prim])return r[pn.prim](t);if(this.isValid(t))return[];throw new mu(t,this,`Invalid sapling_state. Received: ${t} while expecting: {}`)}ExtractSchema(){return{[pn.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:pn.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(t,r){return pn.prim===t&&r.push(this),r}}pn.prim="sapling_state";class hp extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="SaplingTransactionValidationError"}}class fi extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}Execute(t){throw new hp(t,this,"There is no literal value for the sapling_transaction type.")}validateBytes(t){const r=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(t);if(r&&r[2].length%2===0)return r[2];throw new hp(t,this,`Invalid bytes: ${t}`)}convertUint8ArrayToHexString(t){return t.constructor===Uint8Array?Buffer.from(t).toString("hex"):t}Encode(t){let r=t.pop();return r=this.validateBytes(this.convertUint8ArrayToHexString(r)),{bytes:String(r).toString()}}EncodeObject(t,r){return t=this.validateBytes(this.convertUint8ArrayToHexString(t)),r&&r[fi.prim]?r[fi.prim](t):{bytes:String(t).toString()}}ExtractSchema(){return{[fi.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:fi.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(t,r){return fi.prim===t&&r.push(this),r}}fi.prim="sapling_transaction";class L6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="Bls12381frValidationError"}}class Bn extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}isValid(t){return/^[0-9a-fA-F]*$/.test(t)&&t.length%2===0?null:new L6(t,this,`Invalid bytes: ${t}`)}convertUint8ArrayToHexString(t){return t.constructor===Uint8Array?Buffer.from(t).toString("hex"):t}Encode(t){let r=t.pop();if(typeof r=="number")return{int:r.toString()};{r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}}EncodeObject(t,r){if(r&&r[Bn.prim])return r[Bn.prim](t);if(typeof t=="number")return{int:t.toString()};{t=this.convertUint8ArrayToHexString(t);const n=this.isValid(t);if(n)throw n;return{bytes:t}}}Execute(t){return t.bytes}ExtractSchema(){return Bn.prim}generateSchema(){return{__michelsonType:Bn.prim,schema:Bn.prim}}findAndReturnTokens(t,r){return Bn.prim===t&&r.push(this),r}}Bn.prim="bls12_381_fr";class O6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="Bls12381g1ValidationError"}}class Cn extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}isValid(t){return/^[0-9a-fA-F]*$/.test(t)&&t.length%2===0?null:new O6(t,this,`Invalid bytes: ${t}`)}convertUint8ArrayToHexString(t){return t.constructor===Uint8Array?Buffer.from(t).toString("hex"):t}Encode(t){let r=t.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(t,r){t=this.convertUint8ArrayToHexString(t);const n=this.isValid(t);if(n)throw n;return r&&r[Cn.prim]?r[Cn.prim](t):{bytes:t}}Execute(t){return t.bytes}ExtractSchema(){return Cn.prim}generateSchema(){return{__michelsonType:Cn.prim,schema:Cn.prim}}findAndReturnTokens(t,r){return Cn.prim===t&&r.push(this),r}}Cn.prim="bls12_381_g1";class I6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="Bls12381g2ValidationError"}}class Un extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}isValid(t){return/^[0-9a-fA-F]*$/.test(t)&&t.length%2===0?null:new I6(t,this,`Invalid bytes: ${t}`)}convertUint8ArrayToHexString(t){return t.constructor===Uint8Array?Buffer.from(t).toString("hex"):t}Encode(t){let r=t.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(t,r){t=this.convertUint8ArrayToHexString(t);const n=this.isValid(t);if(n)throw n;return r&&r[Un.prim]?r[Un.prim](t):{bytes:t}}Execute(t){return t.bytes}ExtractSchema(){return Un.prim}generateSchema(){return{__michelsonType:Un.prim,schema:Un.prim}}findAndReturnTokens(t,r){return Un.prim===t&&r.push(this),r}}Un.prim="bls12_381_g2";class N6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="ChestValidationError"}}class kn extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}isValid(t){return/^[0-9a-fA-F]*$/.test(t)&&t.length%2===0?null:new N6(t,this,`Invalid bytes: ${t}`)}convertUint8ArrayToHexString(t){return t.constructor===Uint8Array?Buffer.from(t).toString("hex"):t}Encode(t){let r=t.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(t,r){t=this.convertUint8ArrayToHexString(t);const n=this.isValid(t);if(n)throw n;return r&&r[kn.prim]?r[kn.prim](t):{bytes:t}}Execute(t){return t.bytes}ExtractSchema(){return kn.prim}generateSchema(){return{__michelsonType:kn.prim,schema:kn.prim}}findAndReturnTokens(t,r){return kn.prim===t&&r.push(this),r}}kn.prim="chest";class M6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="ChestKeyValidationError"}}class Dn extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}isValid(t){return/^[0-9a-fA-F]*$/.test(t)&&t.length%2===0?null:new M6(t,this,`Invalid bytes: ${t}`)}convertUint8ArrayToHexString(t){return t.constructor===Uint8Array?Buffer.from(t).toString("hex"):t}Encode(t){let r=t.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(t,r){t=this.convertUint8ArrayToHexString(t);const n=this.isValid(t);if(n)throw n;return r&&r[Dn.prim]?r[Dn.prim](t):{bytes:t}}Execute(t){return t.bytes}ExtractSchema(){return Dn.prim}generateSchema(){return{__michelsonType:Dn.prim,schema:Dn.prim}}findAndReturnTokens(t,r){return Dn.prim===t&&r.push(this),r}}Dn.prim="chest_key";class lp extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="GlobalConstantEncodingError"}}class B6 extends se{constructor(t,r,n){super(t,r,n),this.value=t,this.token=r,this.name="GlobalConstantDecodingError"}}class gn extends $e{constructor(t,r,n){super(t,r,n),this.val=t,this.idx=r,this.fac=n}Execute(t,r){if(r&&r[gn.prim])return r[gn.prim](t,this.val);throw new B6(t,this,`Unable to decode a value represented by a {} constants. Please provide an expanded script to the Michelson-Encoder or semantics for the decoding. The following {} constant hash was encountered: ${this.val.args[0].string}.`)}Encode(t){throw new lp(t,this,`Unable to encode a script containing {} constants. Please provide an expanded script to the Michelson-Encoder. The following {} constant hash was encountered: ${this.val.args[0].string}.`)}EncodeObject(t,r){if(r&&r[gn.prim])return r[gn.prim](t);throw new lp(t,this,`Unable to encode a script containing {} constants. Please provide an expanded script to the Michelson-Encoder. The following {} constant hash was encountered: ${this.val.args[0].string}.`)}ExtractSchema(){return gn.prim}generateSchema(){return{__michelsonType:gn.prim,schema:{hash:this.val.args[0].string}}}findAndReturnTokens(t,r){return gn.prim===t&&r.push(this),r}}gn.prim="constant";const C6=[Ie,rn,nn,Lr,Ln,On,zi,sn,Gt,Fr,ai,on,an,Ts,cn,br,un,fn,hn,ln,ci,In,ui,dn,Nn,Mn,pn,fi,Bn,Cn,Un,kn,Dn,gn];class U6 extends Error{constructor(t,r){super(t),this.message=t,this.data=r,this.name="Invalid token error"}}function Vi(e,t){if(Array.isArray(e))return new Ie(e,t,Vi);const r=C6.find(n=>n.prim===e.prim);if(!r)throw new U6("Malformed data expected a value with a valid prim property",e);return new r(e,t,Vi)}class k6 extends Error{constructor(t,r){super(`Unable to encode the parameter of the view: ${t}.`),this.smartContractViewName=t,this.originalError=r,this.name="ViewEncodingError"}}class dp extends Error{constructor(t){super(t),this.message=t,this.name="InvalidScriptError"}}class pp extends Error{constructor(t){super("Invalid RPC response passed as argument(s)"),this.script=t,this.name="InvalidRpcResponseError"}}class gp extends Error{constructor(t,r,n){super(`
      ${t}. Error encountered when trying to encode arguments: 

      [${r}]
    `),this.message=t,this.args=r,this.originalError=n,this.name="ParameterEncodingError"}}class f0 extends Error{constructor(t){super(t),this.message=t,this.name="InvalidBigMapSchema"}}class D6 extends Error{constructor(t){super(t),this.message=t,this.name="InvalidBigMapDiff"}}class F6 extends Error{constructor(t,r){super(`Unable to encode ${t}. ${r}`),this.obj=t,this.details=r,this.name="BigMapEncodingError"}}class H6 extends Error{constructor(t,r){super(`Unable to encode ${t}. ${r}`),this.obj=t,this.details=r,this.name="StorageEncodingError"}}class K6 extends Error{constructor(t){super(t),this.message=t,this.name="MissingArgumentError"}}var vp;const mp=Symbol.for("taquito-schema-type-symbol");function Ao(e,t=Ie.prim){var r,n;if(Array.isArray(e))return Ao({prim:t,args:e},t);const i=e;return i.prim===t&&i.args&&i.args.length>2?Object.assign(Object.assign({},i),{args:[(r=i.args)===null||r===void 0?void 0:r[0],{prim:t,args:(n=i.args)===null||n===void 0?void 0:n.slice(1)}]}):i}function xp(e,t){const r=Ao(e),n=Ao(t);return r.prim===n.prim&&(r.args===void 0&&n.args===void 0||r.args!==void 0&&n.args!==void 0&&r.args.length===n.args.length&&r.args.every((i,s)=>{var o,a;return xp(i,(a=(o=n.args)===null||o===void 0?void 0:o[s])!==null&&a!==void 0?a:{})}))&&(r.annots===void 0&&n.annots===void 0||r.annots!==void 0&&n.annots!==void 0&&r.annots.length===n.annots.length&&r.annots.every((i,s)=>{var o;return i===((o=n.annots)===null||o===void 0?void 0:o[s])}))}class ar{constructor(t){if(this.val=t,this[vp]=!0,this.root=Vi(t,0),this.root instanceof Lr)this.bigMap=this.root;else if(this.isExpressionExtended(t)&&t.prim==="pair"){const r=t.args[0];this.isExpressionExtended(r)&&r.prim==="big_map"&&(this.bigMap=new Lr(r,0,Vi))}}static isSchema(t){return t&&t[mp]===!0}static fromRPCResponse(t){const r=t&&t.script&&Array.isArray(t.script.code)&&t.script.code.find(n=>{if(Array.isArray(n))this.fromRPCResponse({script:{code:n,storage:t.script.storage}});else{const i=n;return i.prim?i.prim==="storage":!1}});if(!r||!Array.isArray(r.args))throw new pp(t.script);return new ar(r.args[0])}isExpressionExtended(t){return"prim"in t&&Array.isArray(t.args)}removeTopLevelAnnotation(t){return(this.root instanceof Ie||this.root instanceof Gt)&&this.root.hasAnnotations()&&typeof t=="object"&&Object.keys(t).length===1?t[Object.keys(t)[0]]:t}Execute(t,r){const n=this.root.Execute(t,r);return this.removeTopLevelAnnotation(n)}Typecheck(t){if(this.root instanceof Lr&&Number.isInteger(Number(t)))return!0;try{return this.root.EncodeObject(t),!0}catch{return!1}}ExecuteOnBigMapDiff(t,r){if(!this.bigMap)throw new f0("Big map schema is undefined");if(!Array.isArray(t))throw new D6("Big map diff must be an array");const n=t.map(({key:i,value:s})=>({args:[i,s]}));return this.bigMap.Execute(n,r)}ExecuteOnBigMapValue(t,r){if(!this.bigMap)throw new f0("No big map schema");return this.bigMap.ValueSchema.Execute(t,r)}EncodeBigMapKey(t){if(!this.bigMap)throw new f0("Big map schema is undefined");try{return this.bigMap.KeySchema.ToBigMapKey(t)}catch(r){throw new F6("big map key",r)}}Encode(t,r){try{return this.root.EncodeObject(t,r)}catch(n){throw n instanceof se?n:new H6("storage object",n)}}ExtractSchema(){return this.removeTopLevelAnnotation(this.root.ExtractSchema())}generateSchema(){return this.removeTopLevelAnnotation(this.root.generateSchema())}ComputeState(t,r){if(!this.bigMap)throw new f0("Big map schema is undefined");const n=t.reduce((i,s)=>Object.assign(Object.assign({},i),this.ExecuteOnBigMapDiff(s.contents[0].metadata.operation_result.big_map_diff)),{});return Object.assign(Object.assign({},this.Execute(r)),{[this.bigMap.annot()]:n})}FindFirstInTopLevelPair(t,r){return this.findValue(this.root.val,t,r)}findValue(t,r,n){if(xp(n,t))return r;if(Array.isArray(t)||t.prim==="pair"){const i=Ao(t),s=Ao(r,"Pair");if(i.args===void 0||s.args===void 0)throw new K6("Tokens have no arguments");if(i.args[0])return this.findValue(i.args[0],s.args[0],n)||this.findValue(i.args[1],s.args[1],n)}}findToken(t){const r=[];return this.root.findAndReturnTokens(t,r)}}vp=mp;class Rs{constructor(t){this.root=Vi(t,0)}static fromRPCResponse(t){const r=t&&t.script&&Array.isArray(t.script.code)&&t.script.code.find(n=>n.prim==="parameter");if(!r||!Array.isArray(r.args))throw new pp(t.script);return new Rs(r.args[0])}get isMultipleEntryPoint(){return this.root instanceof Gt||this.root instanceof Ts&&this.root.subToken()instanceof Gt}get hasAnnotation(){return this.isMultipleEntryPoint?Object.keys(this.ExtractSchema())[0]!=="0":!0}Execute(t,r){return this.root.Execute(t,r)}Encode(...t){try{return this.root.Encode(t.reverse())}catch(r){throw r instanceof se?r:new gp("Unable to encode parameter",t.toString(),r)}}EncodeObject(t,r){try{return this.root.EncodeObject(t,r)}catch(n){throw n instanceof se?n:new gp("Unable to encode parameter object",t,n)}}ExtractSchema(){return this.root.ExtractSchema()}generateSchema(){return this.root.generateSchema()}ExtractSignatures(){return this.root.ExtractSignature()}}class xu{constructor(t){if(t.length!==4||!("string"in t[0]))throw new dp(`Invalid on-chain view: ${JSON.stringify(t)}`);this.viewName=t[0].string,this.viewArgsType=t[1],this.viewReturnType=t[2],this.instructions=t[3],this.rootArgsType=Vi(this.viewArgsType,0),this.rootReturnType=Vi(this.viewReturnType,0)}static fromRPCResponse(t){const r=[],n=t&&t.script&&Array.isArray(t.script.code)&&t.script.code.filter(i=>i.prim==="view");return n&&n.forEach(i=>{if(!i.args||i.args.length!==4)throw new dp(`Invalid on-chain view found in the script: ${JSON.stringify(i)}`);r.push(new xu(i.args))}),r}encodeViewArgs(t){try{return this.rootArgsType.EncodeObject(t)}catch(r){throw new k6(this.viewName,r)}}decodeViewResult(t,r){return this.rootReturnType.Execute(t,r)}extractArgsSchema(){return this.rootArgsType.ExtractSchema()}extractResultSchema(){return this.rootReturnType.ExtractSchema()}}const bp=Symbol(),cr=Symbol("source_reference");class ji extends Error{constructor(t,r,n){super(n),this.src=t,this.idx=r,Object.setPrototypeOf(this,ji.prototype)}}var ur;(function(e){e[e.Comment=0]="Comment",e[e.Number=1]="Number",e[e.String=2]="String",e[e.Bytes=3]="Bytes",e[e.Ident=4]="Ident"})(ur||(ur={}));const $6=new RegExp("\\s"),z6=new RegExp("[:@%_A-Za-z]"),V6=new RegExp("[@%_\\.A-Za-z0-9]"),yp=new RegExp("[0-9]"),j6=new RegExp("[0-9a-fA-F]");function*bu(e,t=!1){let r=0;for(;r<e.length;){for(;r<e.length&&$6.test(e[r]);)r++;if(r===e.length)return;const n=e[r],i=r;if(z6.test(n)){for(r++;r<e.length&&V6.test(e[r]);)r++;yield{t:ur.Ident,v:e.slice(i,r),first:i,last:r}}else if(e.length-r>1&&e.substr(r,2)==="0x"){for(r+=2;r<e.length&&j6.test(e[r]);)r++;if((r-i&1)!==0)throw new ji(e,r,"Bytes literal length is expected to be power of two");yield{t:ur.Bytes,v:e.slice(i,r),first:i,last:r}}else if(yp.test(n)||n==="-"){n==="-"&&r++;const s=r;for(;r<e.length&&yp.test(e[r]);)r++;if(s===r)throw new ji(e,r,"Number literal is too short");yield{t:ur.Number,v:e.slice(i,r),first:i,last:r}}else if(n==='"'){r++;let s=!1;for(;r<e.length&&(s||e[r]!=='"');r++)!s&&e[r]==="\\"?s=!0:s=!1;if(r===e.length)throw new ji(e,r,"Unterminated string literal");r++,yield{t:ur.String,v:e.slice(i,r),first:i,last:r}}else if(n==="#"){for(r++;r<e.length&&e[r]!==`
`;)r++;t&&(yield{t:ur.Comment,v:e.slice(i,r),first:i,last:r})}else if(e.length-r>1&&e.substr(r,2)==="/*"){for(r+=2;r<e.length&&!(e.length-r>1&&e.substr(r,2)==="*/");)r++;if(r===e.length)throw new ji(e,r,"Unterminated C style comment");r+=2,t&&(yield{t:ur.Comment,v:e.slice(i,r),first:i,last:r})}else if(n==="("||n===")"||n==="{"||n==="}"||n===";")r++,yield{t:n,v:n,first:i,last:r};else throw new ji(e,r,`Invalid character at offset ${r}: \`${n}'`)}}const h0=Symbol("ref_contract");var hi;(function(e){e.Ps9mPmXa="Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P",e.PtCJ7pwo="PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY",e.PsYLVpVv="PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt",e.PsddFKi3="PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP",e.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",e.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",e.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",e.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",e.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",e.PtEdoTez="PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq",e.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",e.PsFLoren="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",e.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",e.PtGRANAD="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",e.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",e.PtHangzH="PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r",e.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",e.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",e.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",e.PtJakarta="PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw",e.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",e.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(hi||(hi={}));const wp=hi.Psithaca2,Ep={Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P:0,PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY:1,PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt:2,PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP:3,Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd:4,PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU:5,PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS:5,PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb:6,PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo:7,PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq:8,PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA:8,PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i:9,PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV:10,PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r:11,PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx:11,PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP:12,Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A:12,PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw:13,PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY:13,ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK:14};function Po(e,t){return Ep[e]<Ep[t]}class yr extends Error{constructor(t,r){super(r),this.prim=t,Object.setPrototypeOf(this,yr.prototype)}}function me(e,t){var r,n;if(t===0&&e.args===void 0||((r=e.args)===null||r===void 0?void 0:r.length)===t)return!0;throw new yr(e,`macro ${e.prim} expects ${t} arguments, was given ${(n=e.args)===null||n===void 0?void 0:n.length}`)}function To(e){if(e.annots===void 0)return!0;throw new yr(e,`unexpected annotation on macro ${e.prim}: ${e.annots}`)}function _p(e,t){if("int"in t)return!0;throw new yr(e,`macro ${e.prim} expects int argument`)}function Ro(e,t,r,n){let i=0,s=0;const o=[null,null];let a;if(i===t.length)throw new yr(e,`unexpected end: ${e.prim}`);let u=t[i++];switch(u){case"P":{const{r:f,n:y,an:w}=Ro(e,t.slice(i),r.slice(s),n);a=f,i+=y,s+=w;break}case"A":s!==r.length&&(o[0]=r[s++]);break;default:throw new yr(e,`${e.prim}: unexpected character: ${u}`)}let h;if(i===t.length)throw new yr(e,`unexpected end: ${e.prim}`);switch(u=t[i++],u){case"P":{const{r:f,n:y,an:w}=Ro(e,t.slice(i),r.slice(s),n);h=f.map(([L,I])=>[L+1,I]),i+=y,s+=w;break}case"I":s!==r.length&&(o[1]=r[s++]);break;default:throw new yr(e,`${e.prim}: unexpected character: ${u}`)}return{r:n(a,h,[0,o]),n:i,an:s}}function l0(e,t,r,n){const i=t[0];switch(i){case"A":return t.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CAR",annots:["@%%"]},l0(e,t.slice(1),[],n)]]},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%@","%@",...r]}]:n.a;case"D":return t.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CDR",annots:["@%%"]},l0(e,t.slice(1),[],n)]]},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%@",...r]}]:n.d;default:throw new yr(e,`${e.prim}: unexpected character: ${i}`)}}function G6(e,t){let r=e.length;for(;r>0&&e[r-1]===t;)r--;return e.slice(0,r)}function yu(e){const t=[],r=[];if(e!==void 0)for(const n of e)(n.length!==0&&n[0]==="%"?t:r).push(n);return{fields:t,rest:r}}function Be({prim:e,annots:t,args:r}){return Object.assign(Object.assign({prim:e},t&&{annots:t}),r&&{args:r})}const q6=/^P[PAI]{3,}R$/,W6=/^UNP[PAI]{2,}R$/,Y6=/^C[AD]{2,}R$/,X6=/^SET_C[AD]+R$/,Z6=/^MAP_C[AD]+R$/,J6=/^DI{2,}P$/,Q6=/^DU+P$/;function tS(e,t){const r=t?.protocol||wp;function n(i){return i!==void 0?[{prim:"RENAME",annots:i}]:[]}switch(e.prim){case"CMPEQ":case"CMPNEQ":case"CMPLT":case"CMPGT":case"CMPLE":case"CMPGE":if(me(e,0))return[{prim:"COMPARE"},Be({prim:e.prim.slice(3),annots:e.annots})];break;case"IFEQ":case"IFNEQ":case"IFLT":case"IFGT":case"IFLE":case"IFGE":if(me(e,2))return[{prim:e.prim.slice(2)},Be({prim:"IF",annots:e.annots,args:e.args})];break;case"IFCMPEQ":case"IFCMPNEQ":case"IFCMPLT":case"IFCMPGT":case"IFCMPLE":case"IFCMPGE":if(me(e,2))return[{prim:"COMPARE"},{prim:e.prim.slice(5)},Be({prim:"IF",annots:e.annots,args:e.args})];break;case"FAIL":if(me(e,0)&&To(e))return[{prim:"UNIT"},{prim:"FAILWITH"}];break;case"ASSERT":if(me(e,0)&&To(e))return[{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_EQ":case"ASSERT_NEQ":case"ASSERT_LT":case"ASSERT_GT":case"ASSERT_LE":case"ASSERT_GE":if(me(e,0)&&To(e))return[{prim:e.prim.slice(7)},{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_CMPEQ":case"ASSERT_CMPNEQ":case"ASSERT_CMPLT":case"ASSERT_CMPGT":case"ASSERT_CMPLE":case"ASSERT_CMPGE":if(me(e,0)&&To(e))return[[{prim:"COMPARE"},{prim:e.prim.slice(10)}],{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_NONE":if(me(e,0)&&To(e))return[{prim:"IF_NONE",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_SOME":if(me(e,0))return[{prim:"IF_NONE",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],n(e.annots)]}];break;case"ASSERT_LEFT":if(me(e,0))return[{prim:"IF_LEFT",args:[n(e.annots),[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_RIGHT":if(me(e,0))return[{prim:"IF_LEFT",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],n(e.annots)]}];break;case"IF_SOME":if(me(e,2))return[Be({prim:"IF_NONE",annots:e.annots,args:[e.args[1],e.args[0]]})];break;case"IF_RIGHT":if(me(e,2))return[Be({prim:"IF_LEFT",annots:e.annots,args:[e.args[1],e.args[0]]})];break;case"CAR":case"CDR":if(e.args!==void 0){if(me(e,1)&&_p(e,e.args[0])){const i=parseInt(e.args[0].int,10);return Be({prim:"GET",args:[{int:e.prim==="CAR"?String(i*2+1):String(i*2)}],annots:e.annots})}}else return e}if(q6.test(e.prim)&&me(e,0)){const{fields:i,rest:s}=yu(e.annots),{r:o}=Ro(e,e.prim.slice(1),i,(a,u,h)=>[...a||[],...u||[],h]);return o.map(([a,u],h)=>{const f=[...G6(u,null).map(w=>w===null?"%":w),...a===0&&h===o.length-1?s:[]],y=Be({prim:"PAIR",annots:f.length!==0?f:void 0});return a===0?y:{prim:"DIP",args:a===1?[[y]]:[{int:String(a)},[y]]}})}if(W6.test(e.prim))if(Po(r,hi.PtEdo2Zk)&&me(e,0)){const{r:i}=Ro(e,e.prim.slice(3),e.annots||[],(s,o,a)=>[a,...o||[],...s||[]]);return i.map(([s,o])=>{const a=[{prim:"DUP"},Be({prim:"CAR",annots:o[0]!==null?[o[0]]:void 0}),{prim:"DIP",args:[[Be({prim:"CDR",annots:o[1]!==null?[o[1]]:void 0})]]}];return s===0?a:{prim:"DIP",args:s===1?[[a]]:[{int:String(s)},[a]]}})}else{if(e.prim==="UNPAIR")return e;if(me(e,0)){const{r:i}=Ro(e,e.prim.slice(3),[],(s,o,a)=>[a,...o||[],...s||[]]);return i.map(([s])=>{const o=Be({prim:"UNPAIR"});return s===0?o:{prim:"DIP",args:s===1?[[o]]:[{int:String(s)},[o]]}})}}if(Y6.test(e.prim)&&me(e,0)){const i=[...e.prim.slice(1,e.prim.length-1)];return i.map((s,o)=>{const a=o===i.length-1?e.annots:void 0;switch(s){case"A":return Be({prim:"CAR",annots:a});case"D":return Be({prim:"CDR",annots:a});default:throw new yr(e,`unexpected character: ${s}`)}})}if(X6.test(e.prim)&&me(e,0)){const{fields:i,rest:s}=yu(e.annots);if(i.length>1)throw new yr(e,`unexpected annotation on macro ${e.prim}: ${i}`);const o=i.length!==0?{a:[{prim:"DUP"},{prim:"CAR",annots:i},{prim:"DROP"},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:[i[0],"%@"]}],d:[{prim:"DUP"},{prim:"CDR",annots:i},{prim:"DROP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",i[0]]}]}:{a:[{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%","%@"]}],d:[{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%"]}]};return l0(e,e.prim.slice(5,e.prim.length-1),s,o)}if(Z6.test(e.prim)&&me(e,1)){const{fields:i}=yu(e.annots);if(i.length>1)throw new yr(e,`unexpected annotation on macro ${e.prim}: ${i}`);const s={a:[{prim:"DUP"},{prim:"CDR",annots:["@%%"]},{prim:"DIP",args:[[Be({prim:"CAR",annots:i.length!==0?["@"+i[0].slice(1)]:void 0}),e.args[0]]]},{prim:"SWAP"},{prim:"PAIR",annots:[i.length!==0?i[0]:"%","%@"]}],d:[{prim:"DUP"},Be({prim:"CDR",annots:i.length!==0?["@"+i[0].slice(1)]:void 0}),e.args[0],{prim:"SWAP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",i.length!==0?i[0]:"%"]}]};return l0(e,e.prim.slice(5,e.prim.length-1),[],s)}if(J6.test(e.prim)&&me(e,1)){let i=0;for(;e.prim[1+i]==="I";)i++;return Be({prim:"DIP",args:[{int:String(i)},e.args[0]]})}if(Q6.test(e.prim)){let i=0;for(;e.prim[1+i]==="U";)i++;if(Po(r,hi.PtEdo2Zk)){if(i===1){if(e.args===void 0)return e;me(e,1)&&_p(e,e.args[0])&&(i=parseInt(e.args[0].int,10))}else me(e,0);return i===1?[Be({prim:"DUP",annots:e.annots})]:i===2?[{prim:"DIP",args:[[Be({prim:"DUP",annots:e.annots})]]},{prim:"SWAP"}]:[{prim:"DIP",args:[{int:String(i-1)},[Be({prim:"DUP",annots:e.annots})]]},{prim:"DIG",args:[{int:String(i)}]}]}else{if(i===1)return e;if(me(e,0))return Be({prim:"DUP",args:[{int:String(i)}],annots:e.annots})}}return e}function eS(e,t){return e.args!==void 0&&e.args.length===1&&"string"in e.args[0]&&e.args[0].string in t?t[e.args[0].string]:e}class Ls extends Error{constructor(t,r){super(r),this.token=t,Object.setPrototypeOf(this,Ls.prototype)}}class vn extends Error{constructor(t,r){super(r),this.node=t,Object.setPrototypeOf(this,vn.prototype)}}const wu=new Ls(null,"Unexpected EOF");function Sp(e){return e.t===ur.Ident&&(e.v[0]==="@"||e.v[0]==="%"||e.v[0]===":")}const rS=new RegExp("^-?[0-9]+$"),nS=new RegExp("^([0-9a-fA-F]{2})*$");class li{constructor(t){this.opt=t}expand(t){var r,n,i;if(((r=this.opt)===null||r===void 0?void 0:r.expandGlobalConstant)!==void 0&&t.prim==="constant"){const s=eS(t,this.opt.expandGlobalConstant);return s!==t&&(s[cr]=Object.assign(Object.assign({},t[cr]||{first:0,last:0}),{globalConstant:t})),s}if(((n=this.opt)===null||n===void 0?void 0:n.expandMacros)===void 0||((i=this.opt)===null||i===void 0?void 0:i.expandMacros)){const s=tS(t,this.opt);return s!==t&&(s[cr]=Object.assign(Object.assign({},t[cr]||{first:0,last:0}),{macro:t})),s}else return t}parseListExpr(t,r){var n;const i={first:r.first,last:r.last},s=r.t==="(";let o;if(s){if(o=t.next(),o.done)throw wu;i.last=o.value.last}else o={value:r};if(o.value.t!==ur.Ident)throw new Ls(o.value,`not an identifier: ${o.value.v}`);const a={prim:o.value.v,[cr]:i};for(;;){const u=t.next();if(u.done){if(s)throw wu;break}else if(u.value.t===")"){if(!s)throw new Ls(u.value,"unexpected closing bracket");i.last=u.value.last;break}else if(Sp(u.value))a.annots=a.annots||[],a.annots.push(u.value.v),i.last=u.value.last;else{a.args=a.args||[];const h=this.parseExpr(t,u.value);i.last=((n=h[cr])===null||n===void 0?void 0:n.last)||i.last,a.args.push(h)}}return this.expand(a)}parseArgs(t,r){var n;const i={first:r.first,last:r.last},s={prim:r.v,[cr]:i};for(;;){const o=t.next();if(o.done||o.value.t==="}"||o.value.t===";")return[s,o];if(Sp(o.value))i.last=o.value.last,s.annots=s.annots||[],s.annots.push(o.value.v);else{const a=this.parseExpr(t,o.value);i.last=((n=a[cr])===null||n===void 0?void 0:n.last)||i.last,s.args=s.args||[],s.args.push(a)}}}parseSequenceExpr(t,r){var n,i;const s={first:r.first,last:r.last},o=[];o[cr]=s;const a=r.t==="{";let u=r.t==="{"?null:{value:r};for(;;){if(u===null&&(u=t.next(),u.done||(s.last=u.value.last)),u.done){if(a)throw wu;return o}if(u.value.t==="}"){if(a)return o;throw new Ls(u.value,"unexpected closing bracket")}else if(u.value.t===ur.Ident){const[h,f]=this.parseArgs(t,u.value);s.last=((n=h[cr])===null||n===void 0?void 0:n.last)||s.last,o.push(this.expand(h)),u=f}else{const h=this.parseExpr(t,u.value);s.last=((i=h[cr])===null||i===void 0?void 0:i.last)||s.last,o.push(h),u=null}u===null&&(u=t.next(),u.done||(s.last=u.value.last)),!u.done&&u.value.t===";"&&(u=null)}}parseExpr(t,r){switch(r.t){case ur.Ident:return this.expand({prim:r.v,[cr]:{first:r.first,last:r.last}});case ur.Number:return{int:r.v,[cr]:{first:r.first,last:r.last}};case ur.String:return{string:JSON.parse(r.v),[cr]:{first:r.first,last:r.last}};case ur.Bytes:return{bytes:r.v.slice(2),[cr]:{first:r.first,last:r.last}};case"{":return this.parseSequenceExpr(t,r);default:return this.parseListExpr(t,r)}}parseSequence(t){if(typeof t!="string")throw new TypeError(`string type was expected, got ${typeof t} instead`);const r=bu(t),n=r.next();return n.done?null:this.parseSequenceExpr(r,n.value)}parseList(t){if(typeof t!="string")throw new TypeError(`string type was expected, got ${typeof t} instead`);const r=bu(t),n=r.next();return n.done?null:this.parseListExpr(r,n.value)}parseMichelineExpression(t){if(typeof t!="string")throw new TypeError(`string type was expected, got ${typeof t} instead`);const r=bu(t),n=r.next();return n.done?null:this.parseExpr(r,n.value)}parseScript(t){return this.parseSequence(t)}parseData(t){return this.parseList(t)}parseJSON(t){if(typeof t!="object")throw new TypeError(`object type was expected, got ${typeof t} instead`);if(Array.isArray(t)){const r=[];for(const n of t){if(n===null||typeof n!="object")throw new vn(n,`unexpected sequence element: ${n}`);r.push(this.parseJSON(n))}return r}else if("prim"in t){const r=t;if(typeof r.prim=="string"&&(r.annots===void 0||Array.isArray(r.annots))&&(r.args===void 0||Array.isArray(r.args))){const n={prim:r.prim};if(r.annots!==void 0){for(const i of r.annots)if(typeof i!="string")throw new vn(i,`string expected: ${i}`);n.annots=r.annots}if(r.args!==void 0){n.args=[];for(const i of r.args){if(i===null||typeof i!="object")throw new vn(i,`unexpected argument: ${i}`);n.args.push(this.parseJSON(i))}}return this.expand(n)}throw new vn(t,`malformed prim expression: ${t}`)}else if("string"in t){if(typeof t.string=="string")return{string:t.string};throw new vn(t,`malformed string literal: ${t}`)}else if("int"in t){if(typeof t.int=="string"&&rS.test(t.int))return{int:t.int};throw new vn(t,`malformed int literal: ${t}`)}else if("bytes"in t){if(typeof t.bytes=="string"&&nS.test(t.bytes))return{bytes:t.bytes};throw new vn(t,`malformed bytes literal: ${t}`)}else throw new vn(t,`unexpected object: ${t}`)}}const iS=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],sS=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];class Eu extends Error{constructor(t){super(t),this.message=t,this.name="Base58DecodingError"}}class oS extends Error{constructor(t){super(t),this.message=t,this.name="InvalidMessageError"}}function Ap(e){const t=(e.length+9)%64,r=t===0?0:64-t;if(e.length>268435455)throw new oS(`SHA-256 -- message length is too big: ${e.length}`);const n=e.length<<3,i=[...e,128,...new Array(r).fill(0),0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255];function s(f,y){return f>>>y|f<<32-y}const o=[...iS],a=new Array(64),u=new Array(8);for(let f=0;f<i.length;f+=64){let y=f,w=0;for(;w<16;)a[w]=i[y]<<24|i[y+1]<<16|i[y+2]<<8|i[y+3],y+=4,w++;for(;w<64;){const L=s(a[w-15],7)^s(a[w-15],18)^a[w-15]>>>3,I=s(a[w-2],17)^s(a[w-2],19)^a[w-2]>>>10;a[w]=(I|0)+a[w-7]+L+a[w-16]|0,w++}for(let L=0;L<8;L++)u[L]=o[L];for(let L=0;L<64;L++){const I=s(u[0],2)^s(u[0],13)^s(u[0],22),B=s(u[4],6)^s(u[4],11)^s(u[4],25),C=u[7]+B+(u[4]&u[5]^~u[4]&u[6])+sS[L]+a[L]|0,k=I+(u[0]&u[1]^u[0]&u[2]^u[1]&u[2])|0;u[7]=u[6],u[6]=u[5],u[5]=u[4],u[4]=u[3]+C|0,u[3]=u[2],u[2]=u[1],u[1]=u[0],u[0]=C+k|0}for(let L=0;L<8;L++)o[L]=o[L]+u[L]|0}const h=[];for(const f of o)h.push(f>>24&255),h.push(f>>16&255),h.push(f>>8&255),h.push(f&255);return h}const _u=[0,1,2,3,4,5,6,7,8,-1,-1,-1,-1,-1,-1,-1,9,10,11,12,13,14,15,16,-1,17,18,19,20,21,-1,22,23,24,25,26,27,28,29,30,31,32,-1,-1,-1,-1,-1,-1,33,34,35,36,37,38,39,40,41,42,43,-1,44,45,46,47,48,49,50,51,52,53,54,55,56,57];function Pp(e,t){const r=e.charCodeAt(t)-49;if(r>=_u.length||_u[r]===-1)throw new Eu(`Unexpected character at position ${t}: ${e[t]}`);return _u[r]}function aS(e){const t=[];let r=0;for(;r<e.length&&Pp(e,r)===0;)r++;let n=r;for(;r<e.length;){let i=Pp(e,r++),s=0;for(;i!==0||s<t.length;){const o=(t[s]||0)*58+i;t[s++]=o%256,i=Math.floor(o/256)}}for(;n-- >0;)t.push(0);return t.reverse()}function Tp(e){const t=aS(e);if(t.length<4)throw new Eu(`Data is too short ${t.length}`);const r=t.slice(0,t.length-4),n=t.slice(t.length-4),i=Ap(Ap(r));if(n[0]!==i[0]||n[1]!==i[1]||n[2]!==i[2]||n[3]!==i[3])throw new Eu("Invalid checksum");return r}class cS extends Error{constructor(t){super(t),this.message=t,this.name="InvalidContractError"}}class uS extends Error{constructor(t){super(t),this.message=t,this.name="InvalidTypeExpressionError"}}class fS extends Error{constructor(t){super(t),this.message=t,this.name="InvalidDataExpressionError"}}class hS extends Error{constructor(t){super(`Contract has no entrypoint named: '${t}'`),this.entrypoint=t,this.name="InvalidEntrypointError"}}class lS extends Error{constructor(t){super(t),this.message=t,this.name="LongIntegerError"}}class wr extends Error{constructor(t,r){super(r),this.val=t,Object.setPrototypeOf(this,wr.prototype)}}class qt extends wr{constructor(t,r,n){super(t,n),r!==void 0&&(this.data=r),Object.setPrototypeOf(this,qt.prototype)}}class Rp{constructor(t){if(this.neg=!1,this.buf=[],t!==void 0)if(typeof t=="string")for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);if(r===0&&n===45)this.neg=!0;else{if(n<48||n>57)throw new lS(`unexpected character in integer constant: ${t[r]}`);this.append(n-48)}}else t<0?(this.neg=!0,this.append(-t)):this.append(t)}append(t){let r=0;for(;t!==0||r<this.buf.length;){const n=(this.buf[r]||0)*10+t;this.buf[r++]=n%256,t=Math.floor(n/256)}}cmp(t){if(this.neg!==t.neg)return(t.neg?1:0)-(this.neg?1:0);{let r=0;if(this.buf.length!==t.buf.length)r=this.buf.length<t.buf.length?-1:1;else if(this.buf.length!==0){let n=t.buf.length-1;for(;n>=0&&this.buf[n]===t.buf[n];)n--;r=n<0?0:this.buf[n]<t.buf[n]?-1:1}return this.neg?r===0?0:-r:r}}get sign(){return this.buf.length===0?0:this.neg?-1:1}}function Os(e){const t=[];for(let r=0;r<e.length;r+=2){const n=parseInt(e.slice(r,r+2),16);if(Number.isNaN(n))return null;t.push(n)}return t}function Su(e){try{return new Rp(e),!0}catch{return!1}}function Lp(e){try{return new Rp(e).sign>=0}catch{return!1}}const dS=/^(@%|@%%|%@|[@:%]([_0-9a-zA-Z][_0-9a-zA-Z.%@]*)?)$/;function Is(e,t){if(Array.isArray(e))return{};let r,n,i;if(e.annots!==void 0){for(const s of e.annots)if(s.length!==0){if(!dS.test(s)||!t?.specialVar&&(s==="@%"||s==="@%%")||!t?.specialFields&&s==="%@")throw new wr(e,`${e.prim}: unexpected annotation: ${s}`);switch(s[0]){case"%":(t?.emptyFields||s.length>1)&&(r=r||[],r.push(s));break;case":":s.length>1&&(n=n||[],n.push(s));break;case"@":(t?.emptyVar||s.length>1)&&(i=i||[],i.push(s));break}}}return{f:r,t:n,v:i}}const pS={BlockHash:[32,[1,52]],OperationHash:[32,[5,116]],OperationListHash:[32,[133,233]],OperationListListHash:[32,[29,159,109]],ProtocolHash:[32,[2,170]],ContextHash:[32,[79,199]],ED25519PublicKeyHash:[20,[6,161,159]],SECP256K1PublicKeyHash:[20,[6,161,161]],P256PublicKeyHash:[20,[6,161,164]],ContractHash:[20,[2,90,121]],CryptoboxPublicKeyHash:[16,[153,103]],ED25519Seed:[32,[13,15,58,7]],ED25519PublicKey:[32,[13,15,37,217]],SECP256K1SecretKey:[32,[17,162,224,201]],P256SecretKey:[32,[16,81,238,189]],ED25519EncryptedSeed:[56,[7,90,60,179,41]],SECP256K1EncryptedSecretKey:[56,[9,237,241,174,150]],P256EncryptedSecretKey:[56,[9,48,57,115,171]],SECP256K1PublicKey:[33,[3,254,226,86]],P256PublicKey:[33,[3,178,139,127]],SECP256K1Scalar:[33,[38,248,136]],SECP256K1Element:[33,[5,92,0]],ED25519SecretKey:[64,[43,246,78,7]],ED25519Signature:[64,[9,245,205,134,18]],SECP256K1Signature:[64,[13,115,101,19,63]],P256Signature:[64,[54,240,44,52]],GenericSignature:[64,[4,130,43]],ChainID:[4,[87,82,0]],RollupAddress:[20,[1,128,120,31]],TxRollupL2Address:[20,[6,161,166]]};function d0(e,...t){const r=Tp(e);for(const n of t){const[i,s]=pS[n];if(r.length===i+s.length){let o=0;for(;o<s.length&&r[o]===s[o];)o++;if(o===s.length)return[n,r.slice(s.length)]}}return null}function Hr(e,t){const r=t,n=Array.isArray(r)?r:r.args;return n.length===2?e==="pair"?{prim:"pair",args:n}:{prim:"Pair",args:n}:Object.assign(Object.assign({},Array.isArray(r)?{prim:e}:r),{args:[n[0],{prim:e,args:n.slice(1)}]})}function di(e){return Array.isArray(e)||e.prim==="pair"}function gS(e){return Array.isArray(e)||"prim"in e&&e.prim==="Pair"}const vS=/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])[T ]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|[+-]([01][0-9]|2[0-3]):([0-5][0-9]))$/;function mS(e){if("string"in e){if(Lp(e.string))return new Date(parseInt(e.string,10));if(vS.test(e.string)){const t=new Date(e.string);if(!Number.isNaN(t.valueOf))return t}}else if(Su(e.int))return new Date(parseInt(e.int,10));return null}const xS=31,Op={ABS:!0,ADD:!0,ADDRESS:!0,AMOUNT:!0,AND:!0,APPLY:!0,BALANCE:!0,BLAKE2B:!0,CAR:!0,CDR:!0,CHAIN_ID:!0,CHECK_SIGNATURE:!0,COMPARE:!0,CONCAT:!0,CONS:!0,EDIV:!0,EQ:!0,EXEC:!0,FAILWITH:!0,GE:!0,GET_AND_UPDATE:!0,GT:!0,HASH_KEY:!0,IMPLICIT_ACCOUNT:!0,INT:!0,ISNAT:!0,JOIN_TICKETS:!0,KECCAK:!0,LE:!0,LEVEL:!0,LSL:!0,LSR:!0,LT:!0,MEM:!0,MUL:!0,NEG:!0,NEQ:!0,NEVER:!0,NOT:!0,NOW:!0,OR:!0,PACK:!0,PAIRING_CHECK:!0,READ_TICKET:!0,SAPLING_VERIFY_UPDATE:!0,SELF:!0,SELF_ADDRESS:!0,SENDER:!0,SET_DELEGATE:!0,SHA256:!0,SHA3:!0,SHA512:!0,SIZE:!0,SLICE:!0,SOME:!0,SOURCE:!0,SPLIT_TICKET:!0,SUB:!0,SWAP:!0,TICKET:!0,TOTAL_VOTING_POWER:!0,TRANSFER_TOKENS:!0,UNIT:!0,VOTING_POWER:!0,XOR:!0,RENAME:!0,OPEN_CHEST:!0,SUB_MUTEZ:!0,MIN_BLOCK_TIME:!0},Ip=Object.assign({},Op,{CONTRACT:!0,CREATE_CONTRACT:!0,DIG:!0,DIP:!0,DROP:!0,DUG:!0,DUP:!0,EMPTY_BIG_MAP:!0,EMPTY_MAP:!0,EMPTY_SET:!0,GET:!0,IF:!0,IF_CONS:!0,IF_LEFT:!0,IF_NONE:!0,ITER:!0,LAMBDA:!0,LEFT:!0,LOOP:!0,LOOP_LEFT:!0,MAP:!0,NIL:!0,NONE:!0,PAIR:!0,PUSH:!0,RIGHT:!0,SAPLING_EMPTY_STATE:!0,UNPACK:!0,UNPAIR:!0,UPDATE:!0,CAST:!0,VIEW:!0}),Np={unit:!0,never:!0,bool:!0,int:!0,nat:!0,string:!0,chain_id:!0,bytes:!0,mutez:!0,key_hash:!0,key:!0,signature:!0,timestamp:!0,address:!0,tx_rollup_l2_address:!0},Ns=Object.assign({},Np,{or:!0,pair:!0,set:!0,big_map:!0,contract:!0,lambda:!0,list:!0,map:!0,operation:!0,option:!0,bls12_381_g1:!0,bls12_381_g2:!0,bls12_381_fr:!0,sapling_transaction:!0,sapling_state:!0,ticket:!0,chest_key:!0,chest:!0});class re extends wr{constructor(t,r){super(t,r),this.val=t,Object.setPrototypeOf(this,re.prototype)}}function mn(e){return"prim"in e}function bS(e){return Array.isArray(e)||"prim"in e}function Mp(e){if(mn(e))return!0;throw new re(e,"prim expression expected")}function pi(e){if(Array.isArray(e))return!0;throw new re(e,"sequence expression expected")}function rr(e){if(bS(e))return!0;throw new re(e,"prim or sequence expression expected")}function Au(e){if(e.int[0]==="-")throw new re(e,"natural number expected")}function p0(e){if("int"in e)return!0;throw new re(e,"int literal expected")}function Bp(e){if("string"in e)return!0;throw new re(e,"string literal expected")}function Jt(e,t){var r;if(t===0&&e.args===void 0||((r=e.args)===null||r===void 0?void 0:r.length)===t)return!0;throw new re(e,`${t} arguments expected`)}function xn(e){var t,r;if(Array.isArray(e)){for(const n of e){if(!Array.isArray(n)&&!mn(n))throw new re(e,"sequence or prim expected");xn(n)}return!0}if(Mp(e)){if(Object.prototype.hasOwnProperty.call(Op,e.prim))return Jt(e,0),!0;switch(e.prim){case"DROP":case"PAIR":case"UNPAIR":case"DUP":case"UPDATE":case"GET":e.args!==void 0&&Jt(e,1)&&p0(e.args[0])&&Au(e.args[0]);break;case"DIG":case"DUG":case"SAPLING_EMPTY_STATE":Jt(e,1)&&p0(e.args[0])&&Au(e.args[0]);break;case"NONE":case"LEFT":case"RIGHT":case"NIL":case"CAST":Jt(e,1)&&Hn(e.args[0]);break;case"UNPACK":Jt(e,1)&&Pu(e.args[0]);break;case"CONTRACT":Jt(e,1)&&g0(e.args[0]);break;case"IF_NONE":case"IF_LEFT":case"IF_CONS":case"IF":Jt(e,2)&&(pi(e.args[0])&&xn(e.args[0]),pi(e.args[1])&&xn(e.args[1]));break;case"MAP":case"ITER":case"LOOP":case"LOOP_LEFT":Jt(e,1)&&xn(e.args[0]);break;case"CREATE_CONTRACT":Jt(e,1)&&Up(e.args[0]);break;case"DIP":if(((t=e.args)===null||t===void 0?void 0:t.length)===2)p0(e.args[0])&&Au(e.args[0]),pi(e.args[1])&&xn(e.args[1]);else if(((r=e.args)===null||r===void 0?void 0:r.length)===1)pi(e.args[0])&&xn(e.args[0]);else throw new re(e,"1 or 2 arguments expected");break;case"PUSH":Jt(e,2)&&(Ms(e.args[0]),qi(e.args[1]));break;case"EMPTY_SET":Jt(e,1)&&Fn(e.args[0]);break;case"EMPTY_MAP":Jt(e,2)&&(Fn(e.args[0]),Hn(e.args[1]));break;case"EMPTY_BIG_MAP":Jt(e,2)&&(Fn(e.args[0]),v0(e.args[1]));break;case"LAMBDA":Jt(e,3)&&(Hn(e.args[0]),Hn(e.args[1]),pi(e.args[2])&&xn(e.args[2]));break;case"VIEW":Jt(e,2)&&(Bp(e.args[0])&&Cp(e.args[0]),Hn(e.args[1])&&Ms(e.args[1]));break;default:throw new re(e,"instruction expected")}}return!0}function Fn(e){if(rr(e)){if(Array.isArray(e)||e.prim==="pair"||e.prim==="or"||e.prim==="option")Gi(e,t=>Fn(t));else if(!Object.prototype.hasOwnProperty.call(Np,e.prim))throw new re(e,`${e.prim}: type is not comparable`)}return!0}function Pu(e){if(rr(e)&&mn(e)){if(!Object.prototype.hasOwnProperty.call(Ns,e.prim)||e.prim==="big_map"||e.prim==="operation"||e.prim==="sapling_state"||e.prim==="ticket")throw new re(e,`${e.prim}: type can't be used inside PACK/UNPACK instructions`);Gi(e,t=>Pu(t))}return!0}function Ms(e){if(rr(e)&&mn(e)){if(!Object.prototype.hasOwnProperty.call(Ns,e.prim)||e.prim==="big_map"||e.prim==="operation"||e.prim==="sapling_state"||e.prim==="ticket"||e.prim==="contract")throw new re(e,`${e.prim}: type can't be pushed`);Gi(e,t=>Ms(t))}return!0}function Tu(e){if(rr(e)&&mn(e)){if(!Object.prototype.hasOwnProperty.call(Ns,e.prim)||e.prim==="operation"||e.prim==="contract")throw new re(e,`${e.prim}: type can't be used as part of a storage`);Gi(e,t=>Tu(t))}return!0}function g0(e){if(rr(e)&&mn(e)){if(!Object.prototype.hasOwnProperty.call(Ns,e.prim)||e.prim==="operation")throw new re(e,`${e.prim}: type can't be used as part of a parameter`);Gi(e,t=>g0(t))}return!0}function v0(e){if(rr(e)&&mn(e)){if(!Object.prototype.hasOwnProperty.call(Ns,e.prim)||e.prim==="big_map"||e.prim==="operation"||e.prim==="sapling_state")throw new re(e,`${e.prim}: type can't be used inside a big_map`);Gi(e,t=>v0(t))}return!0}const yS=new RegExp("^[a-zA-Z0-9_.%@]*$");function Cp(e){if(e.string.length>xS)throw new re(e,`view name too long: ${e.string}`);if(!yS.test(e.string))throw new re(e,`invalid character(s) in view name: ${e.string}`)}function Hn(e){if(rr(e)&&mn(e)){if(!Object.prototype.hasOwnProperty.call(Ns,e.prim))throw new re(e,"type expected");Gi(e,t=>Hn(t))}return!0}function Gi(e,t){if(Array.isArray(e)||e.prim==="pair"){const r=Array.isArray(e)?e:e.args;if(r===void 0||r.length<2)throw new re(e,"at least 2 arguments expected");return r.forEach(n=>{rr(n)&&t(n)}),!0}switch(e.prim){case"option":case"list":Jt(e,1)&&rr(e.args[0])&&t(e.args[0]);break;case"contract":Jt(e,1)&&g0(e.args[0]);break;case"or":Jt(e,2)&&rr(e.args[0])&&rr(e.args[1])&&(t(e.args[0]),t(e.args[1]));break;case"lambda":Jt(e,2)&&(Hn(e.args[0]),Hn(e.args[1]));break;case"set":Jt(e,1)&&Fn(e.args[0]);break;case"map":Jt(e,2)&&rr(e.args[0])&&rr(e.args[1])&&(Fn(e.args[0]),t(e.args[1]));break;case"big_map":Jt(e,2)&&rr(e.args[0])&&rr(e.args[1])&&(Fn(e.args[0]),v0(e.args[1]),t(e.args[1]));break;case"ticket":Jt(e,1)&&rr(e.args[0])&&Fn(e.args[0]);break;case"sapling_state":case"sapling_transaction":Jt(e,1)&&p0(e.args[0]);break;default:Jt(e,0)}return!0}function qi(e){if("int"in e||"string"in e||"bytes"in e)return!0;if(Array.isArray(e)){let t=0;for(const r of e)mn(r)&&r.prim==="Elt"?(Jt(r,2)&&(qi(r.args[0]),qi(r.args[1])),t++):qi(r);if(t!==0&&t!==e.length)throw new re(e,"data entries and map elements can't be intermixed");return!0}if(mn(e))switch(e.prim){case"Unit":case"True":case"False":case"None":Jt(e,0);break;case"Pair":if(e.args===void 0||e.args.length<2)throw new re(e,"at least 2 arguments expected");for(const t of e.args)qi(t);break;case"Left":case"Right":case"Some":Jt(e,1)&&qi(e.args[0]);break;default:if(Object.prototype.hasOwnProperty.call(Ip,e.prim))xn(e);else throw new re(e,"data entry or instruction expected")}else throw new re(e,"data entry expected");return!0}function Up(e){if(pi(e)){const t={},r={};for(const n of e)if(Mp(n)){if(n.prim!=="view"){if(n.prim in t)throw new re(e,`duplicate contract section: ${n.prim}`);t[n.prim]=!0}switch(n.prim){case"code":Jt(n,1)&&pi(n.args[0])&&xn(n.args[0]);break;case"parameter":if(Jt(n,1)&&g0(n.args[0]),n.annots)throw new re(n,"Annotation must be part of the parameter type");break;case"storage":Jt(n,1)&&Tu(n.args[0]);break;case"view":if(Jt(n,4)){if(Bp(n.args[0])){const i=n.args[0];if(i.string in r)throw new re(e,`duplicate view name: ${i.string}`);r[i.string]=!0,Cp(i)}Ms(n.args[1]),Ms(n.args[2]),pi(n.args[3])&&xn(n.args[3])}break;default:throw new re(e,`unexpected contract section: ${n.prim}`)}}}return!0}function kp(e){return Object.prototype.hasOwnProperty.call(Ip,e.prim)}function Dp(e){if(!Array.isArray(e))return!1;for(const t of e)if("prim"in t){if(kp(t))throw new wr(e,`Instruction outside of a lambda: ${JSON.stringify(e)}`);if(t.prim==="Elt")throw new wr(e,`Elt item outside of a map literal: ${JSON.stringify(e)}`)}return!0}function wS(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}Object.assign({},...["parameter","storage","code","False","Elt","Left","None","Pair","Right","Some","True","Unit","PACK","UNPACK","BLAKE2B","SHA256","SHA512","ABS","ADD","AMOUNT","AND","BALANCE","CAR","CDR","CHECK_SIGNATURE","COMPARE","CONCAT","CONS","CREATE_ACCOUNT","CREATE_CONTRACT","IMPLICIT_ACCOUNT","DIP","DROP","DUP","EDIV","EMPTY_MAP","EMPTY_SET","EQ","EXEC","FAILWITH","GE","GET","GT","HASH_KEY","IF","IF_CONS","IF_LEFT","IF_NONE","INT","LAMBDA","LE","LEFT","LOOP","LSL","LSR","LT","MAP","MEM","MUL","NEG","NEQ","NIL","NONE","NOT","NOW","OR","PAIR","PUSH","RIGHT","SIZE","SOME","SOURCE","SENDER","SELF","STEPS_TO_QUOTA","SUB","SWAP","TRANSFER_TOKENS","SET_DELEGATE","UNIT","UPDATE","XOR","ITER","LOOP_LEFT","ADDRESS","CONTRACT","ISNAT","CAST","RENAME","bool","contract","int","key","key_hash","lambda","list","map","big_map","nat","option","or","pair","set","signature","string","bytes","mutez","timestamp","unit","operation","address","SLICE","DIG","DUG","EMPTY_BIG_MAP","APPLY","chain_id","CHAIN_ID","LEVEL","SELF_ADDRESS","never","NEVER","UNPAIR","VOTING_POWER","TOTAL_VOTING_POWER","KECCAK","SHA3","PAIRING_CHECK","bls12_381_g1","bls12_381_g2","bls12_381_fr","sapling_state","sapling_transaction","SAPLING_EMPTY_STATE","SAPLING_VERIFY_UPDATE","ticket","TICKET","READ_TICKET","SPLIT_TICKET","JOIN_TICKETS","GET_AND_UPDATE","chest","chest_key","OPEN_CHEST","VIEW","view","constant","SUB_MUTEZ"].map((e,t)=>({[e]:t})));var Fp;(function(e){e[e.Int=0]="Int",e[e.String=1]="String",e[e.Sequence=2]="Sequence",e[e.Prim0=3]="Prim0",e[e.Prim0Annot=4]="Prim0Annot",e[e.Prim1=5]="Prim1",e[e.Prim1Annot=6]="Prim1Annot",e[e.Prim2=7]="Prim2",e[e.Prim2Annot=8]="Prim2Annot",e[e.Prim=9]="Prim",e[e.Bytes=10]="Bytes"})(Fp||(Fp={}));const gi=new Error("bounds out of range");class Bs{constructor(t,r=0,n=t.length){this.buffer=t,this.idx=r,this.cap=n}get length(){return this.cap-this.idx}readBytes(t){if(this.cap-this.idx<t)throw gi;const r=this.buffer.slice(this.idx,this.idx+t);return this.idx+=t,r}reader(t){if(this.cap-this.idx<t)throw gi;const r=new Bs(this.buffer,this.idx,this.idx+t);return this.idx+=t,r}copy(){return new Bs(this.buffer,this.idx,this.cap)}readUint8(){if(this.cap-this.idx<1)throw gi;return this.buffer[this.idx++]>>>0}readUint16(){if(this.cap-this.idx<2)throw gi;const t=this.buffer[this.idx++],r=this.buffer[this.idx++];return(t<<8|r)>>>0}readUint32(){if(this.cap-this.idx<4)throw gi;const t=this.buffer[this.idx++],r=this.buffer[this.idx++],n=this.buffer[this.idx++],i=this.buffer[this.idx++];return(t<<24|r<<16|n<<8|i)>>>0}readInt8(){if(this.cap-this.idx<1)throw gi;return this.buffer[this.idx++]<<24>>24}readInt16(){if(this.cap-this.idx<2)throw gi;const t=this.buffer[this.idx++],r=this.buffer[this.idx++];return(t<<8|r)<<16>>16}readInt32(){if(this.cap-this.idx<4)throw gi;const t=this.buffer[this.idx++],r=this.buffer[this.idx++],n=this.buffer[this.idx++],i=this.buffer[this.idx++];return t<<24|r<<16|n<<8|i}}var m0;(function(e){e[e.Implicit=0]="Implicit",e[e.Originated=1]="Originated"})(m0||(m0={}));var Lo;(function(e){e[e.ED25519=0]="ED25519",e[e.SECP256K1=1]="SECP256K1",e[e.P256=2]="P256"})(Lo||(Lo={}));function Hp(e){let t;const r=e.readUint8();switch(r){case Lo.ED25519:t="ED25519PublicKeyHash";break;case Lo.SECP256K1:t="SECP256K1PublicKeyHash";break;case Lo.P256:t="P256PublicKeyHash";break;default:throw new Error(`unknown public key hash tag: ${r}`)}return{type:t,hash:e.readBytes(20)}}function ES(e){let t;const r=e.readUint8();switch(r){case m0.Implicit:t=Hp(e);break;case m0.Originated:t={type:"ContractHash",hash:e.readBytes(20)},e.readBytes(1);break;default:throw new Error(`unknown address tag: ${r}`)}if(e.length!==0){const n=new TextDecoder;t.entryPoint=n.decode(new Uint8Array(e.readBytes(e.length)))}return t}var Oo;(function(e){e[e.ED25519=0]="ED25519",e[e.SECP256K1=1]="SECP256K1",e[e.P256=2]="P256"})(Oo||(Oo={}));function _S(e){let t,r;const n=e.readUint8();switch(n){case Oo.ED25519:r="ED25519PublicKey",t=32;break;case Oo.SECP256K1:r="SECP256K1PublicKey",t=33;break;case Oo.P256:r="P256PublicKey",t=33;break;default:throw new Error(`unknown public key tag: ${n}`)}return{type:r,publicKey:e.readBytes(t)}}function SS(e){const t=Os(e.bytes);if(t===null)throw new Error(`can't parse bytes: "${e.bytes}"`);const r=new Bs(new Uint8Array(t));return ES(r)}function AS(e){const t=Os(e.bytes);if(t===null)throw new Error(`can't parse bytes: "${e.bytes}"`);const r=new Bs(new Uint8Array(t));return Hp(r)}function PS(e){const t=Os(e.bytes);if(t===null)throw new Error(`can't parse bytes: "${e.bytes}"`);const r=new Bs(new Uint8Array(t));return _S(r)}class Pt extends wr{constructor(t,r,n){super(t,n),this.stackState=r,Object.setPrototypeOf(this,Pt.prototype)}}function ne(e){return Array.isArray(e)?"pair":e.prim}function x0(e){return"prim"in e?e.args:e}function Kr(e,t,r=!1){if(ne(e)!==ne(t))throw new qt(e,void 0,`types mismatch: ${ne(e)} != ${ne(t)}`);const n=[Is(e),Is(t)];if(n[0].t&&n[1].t&&n[0].t[0]!==n[1].t[0])throw new qt(e,void 0,`${ne(e)}: type names mismatch: ${n[0].t[0]} != ${n[1].t[0]}`);if(r&&n[0].f&&n[1].f&&n[0].f[0]!==n[1].f[0])throw new qt(e,void 0,`${ne(e)}: field names mismatch: ${n[0].f[0]} != ${n[1].f}`);if(di(e)){const i=Hr("pair",e),s=Hr("pair",t);Kr(i.args[0],s.args[0],!0),Kr(i.args[1],s.args[1],!0);return}switch(e.prim){case"option":case"list":case"contract":case"set":case"ticket":Kr(e.args[0],t.args[0]);break;case"or":Kr(e.args[0],t.args[0],!0),Kr(e.args[1],t.args[1],!0);break;case"lambda":case"map":case"big_map":Kr(e.args[0],t.args[0]),Kr(e.args[1],t.args[1]);break;case"sapling_state":case"sapling_transaction":if(parseInt(e.args[0].int,10)!==parseInt(t.args[0].int,10))throw new qt(e,void 0,`${ne(e)}: type argument mismatch: ${e.args[0].int} != ${t.args[0].int}`)}}function Kp(e,t){if(e.length!==t.length)throw new qt(e,void 0,`stack length mismatch: ${e.length} != ${t.length}`);for(let r=0;r<e.length;r++)Kr(e[r],t[r])}function xe(e,t=!1){var r,n,i;if(!Array.isArray(e)){const s=Is(e);if((((r=s.t)===null||r===void 0?void 0:r.length)||0)>1)throw new qt(e,void 0,`${e.prim}: at most one type annotation allowed: ${e.annots}`);if(t){if((((n=s.f)===null||n===void 0?void 0:n.length)||0)>1)throw new qt(e,void 0,`${e.prim}: at most one field annotation allowed: ${e.annots}`)}else if((((i=s.f)===null||i===void 0?void 0:i.length)||0)>0)throw new qt(e,void 0,`${e.prim}: field annotations aren't allowed: ${e.annots}`)}if(di(e)){const s=x0(e);for(const o of s)xe(o,!0);return}switch(e.prim){case"option":case"list":case"contract":case"set":xe(e.args[0]);break;case"or":for(const s of e.args)xe(s,!0);break;case"lambda":case"map":case"big_map":xe(e.args[0]),xe(e.args[1])}}function $p(e){if(!Array.isArray(e))return!1;for(const t of e)if(!(Array.isArray(t)&&$p(t)||"prim"in t&&kp(t)))return!1;return!0}function $r(e,t,r){if(di(t)){if(gS(e)){Dp(e);const n=Hr("Pair",e),i=Hr("pair",t);$r(n.args[0],i.args[0],r),$r(n.args[1],i.args[1],r);return}throw new qt(t,e,`pair expected: ${JSON.stringify(e)}`)}switch(t.prim){case"int":if("int"in e&&Su(e.int))return;throw new qt(t,e,`integer value expected: ${JSON.stringify(e)}`);case"nat":case"mutez":if("int"in e&&Lp(e.int))return;throw new qt(t,e,`natural value expected: ${JSON.stringify(e)}`);case"string":if("string"in e)return;throw new qt(t,e,`string value expected: ${JSON.stringify(e)}`);case"bytes":case"bls12_381_g1":case"bls12_381_g2":if("bytes"in e&&Os(e.bytes)!==null)return;throw new qt(t,e,`bytes value expected: ${JSON.stringify(e)}`);case"bool":if("prim"in e&&(e.prim==="True"||e.prim==="False"))return;throw new qt(t,e,`boolean value expected: ${JSON.stringify(e)}`);case"key_hash":if("string"in e&&d0(e.string,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash")!==null)return;if("bytes"in e)try{AS(e);return}catch{}throw new qt(t,e,`key hash expected: ${JSON.stringify(e)}`);case"timestamp":if(("string"in e||"int"in e)&&mS(e)!==null)return;throw new qt(t,e,`timestamp expected: ${JSON.stringify(e)}`);case"address":if("string"in e){let n=e.string;const i=e.string.indexOf("%");if(i>=0&&(n=e.string.slice(0,i)),d0(n,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash","ContractHash","TxRollupL2Address","RollupAddress")!==null)return}else if("bytes"in e)try{SS(e);return}catch{}throw new qt(t,e,`address expected: ${JSON.stringify(e)}`);case"key":if("string"in e&&d0(e.string,"ED25519PublicKey","SECP256K1PublicKey","P256PublicKey")!==null)return;if("bytes"in e)try{PS(e);return}catch{}throw new qt(t,e,`public key expected: ${JSON.stringify(e)}`);case"unit":if("prim"in e&&e.prim==="Unit")return;throw new qt(t,e,`unit value expected: ${JSON.stringify(e)}`);case"signature":if("bytes"in e||"string"in e&&d0(e.string,"ED25519Signature","SECP256K1Signature","P256Signature","GenericSignature")!==null)return;throw new qt(t,e,`signature expected: ${JSON.stringify(e)}`);case"chain_id":if(("bytes"in e||"string"in e)&&("string"in e?Tp(e.string):Os(e.bytes))!==null)return;throw new qt(t,e,`chain id expected: ${JSON.stringify(e)}`);case"option":if("prim"in e){if(e.prim==="None")return;if(e.prim==="Some"){$r(e.args[0],t.args[0],r);return}}throw new qt(t,e,`option expected: ${JSON.stringify(e)}`);case"list":case"set":if(Dp(e)){for(const n of e)$r(n,t.args[0],r);return}throw new qt(t,e,`${t.prim} expected: ${JSON.stringify(e)}`);case"or":if("prim"in e){if(e.prim==="Left"){$r(e.args[0],t.args[0],r);return}else if(e.prim==="Right"){$r(e.args[0],t.args[1],r);return}}throw new qt(t,e,`union (or) expected: ${JSON.stringify(e)}`);case"lambda":if($p(e)){const n=Ce(e,[t.args[0]],r);if("failed"in n)throw new qt(t,e,`function is failed with error type: ${n.failed}`);if(n.length!==1)throw new qt(t,e,"function must return a value");Kr(t.args[1],n[0]);return}throw new qt(t,e,`function expected: ${JSON.stringify(e)}`);case"map":case"big_map":if(Array.isArray(e)){for(const n of e){if(!("prim"in n)||n.prim!=="Elt")throw new qt(t,e,`map elements expected: ${JSON.stringify(e)}`);$r(n.args[0],t.args[0],r),$r(n.args[1],t.args[1],r)}return}throw new qt(t,e,`${t.prim} expected: ${JSON.stringify(e)}`);case"bls12_381_fr":if("int"in e&&Su(e.int)||"bytes"in e&&Os(e.bytes)!==null)return;throw new qt(t,e,`BLS12-381 element expected: ${JSON.stringify(e)}`);case"sapling_state":if(Array.isArray(e))return;throw new qt(t,e,`sapling state expected: ${JSON.stringify(e)}`);case"ticket":$r(e,{prim:"pair",args:[{prim:"address"},t.args[0],{prim:"nat"}]},r);return;default:throw new qt(t,e,`type ${ne(t)} don't have Michelson literal representation`)}}function TS(e,t,r){let n=t,i=t,s=0;for(const o of e){const a=Ce(o,i,r);if(n=a,"failed"in a)break;i=a,s++}if("failed"in n&&n.level==0&&(!("prim"in n.failed)||n.failed.prim!=="never")&&s!==e.length-1)throw new Pt(e,n,"FAIL must appear in a tail position");if(r?.traceCallback!==void 0){const o={op:e,in:t,out:n};r.traceCallback(o)}return"failed"in n?{failed:n.failed,level:n.level+1}:n}function Ce(e,t,r){const n=r?.protocol||wp;if(Array.isArray(e))return TS(e,t,r);const i=e;function s(x,...b){if(t.length<b.length+x)throw new Pt(i,t,`${i.prim}: stack must have at least ${b.length} element(s)`);let c=x;for(const l of b){if(l!==null&&l.length!==0){let g=0;for(;g<l.length&&l[g]!==ne(t[c]);)g++;if(g===l.length)throw new Pt(i,t,`${i.prim}: stack type mismatch: [${c}] expected to be ${l}, got ${ne(t[c])} instead`)}c++}return t.slice(x,b.length+x)}function o(x){return(...b)=>{try{return x(...b)}catch(c){throw c instanceof wr?new Pt(i,t,c.message):c}}}function a(x){return b=>{try{return x(b)}catch(c){throw c instanceof wr?new Pt(i,t,c.message):c}}}const u=o(Is),h=o(Kp),f=o(Kr),y=a(Fn),w=a(Pu),L=a(Tu),I=a(Ms),B=a(v0);function C(x,b){const c=u(i,Object.assign(Object.assign({},b),{emptyFields:x.f!==void 0&&x.f>1,emptyVar:x.v!==void 0&&x.v>1})),l=(g,v,d)=>{if(g&&g.length>(v||0))throw new Pt(i,t,`${i.prim}: at most ${v||0} ${d} annotations allowed`)};return l(c.f,x.f,"field"),l(c.t,x.t,"type"),l(c.v,x.v,"variable"),c}function k(x,b){const c=x,l=Array.isArray(c)?{prim:"pair",args:c}:c,g=u(l),v=b.v!==void 0||b.t!==void 0||b.f!==void 0?[...(b.v===null?g.v:b.v)||[],...(b.t===null?g.t:b.t)||[],...(b.f===null?g.f:b.f)||[]]:void 0,d=wS(l,["annots"]);return Object.assign(Object.assign({},d),v&&v.length!==0&&{annots:v})}function T(x,b){const c=C({v:1});return k(x,{v:c.v!==void 0?c.v:b!==void 0?[b]:null,t:null})}function D(x,b,c,l,g){var v,d,A,R;const S=(v=u(b).f)===null||v===void 0?void 0:v[0],p=(d=c.f)===null||d===void 0?void 0:d[l];if(p!==void 0&&p!=="%"&&S!==void 0&&p!==S)throw new Pt(i,t,`${i.prim}: field names doesn't match: ${p} !== ${S}`);const P=(A=c.v)===null||A===void 0?void 0:A[l],H=(R=u(x).v)===null||R===void 0?void 0:R[0];return k(b,{t:null,v:P?P==="@%"?S?["@"+S.slice(1)]:void 0:P==="@%%"?H?["@"+H.slice(1)+"."+(S?S.slice(1):g)]:S?["@"+S.slice(1)]:void 0:[P]:null})}function F(x,b,c=b){const l=Hr("pair",x);if(c===1)return[l.args[0]];if(c===2)return l.args;const g=l.args[1];if(di(g))return[l.args[0],...F(g,b,c-1)];throw new Pt(i,t,`${i.prim}: at least ${b} fields are expected`)}function V(x,b,c=b){if(c===0)return x;const l=Hr("pair",x);if(c===1)return l.args[0];const g=l.args[1];if(di(g))return V(g,b,c-2);if(c===2)return g;throw new Pt(i,t,`${i.prim}: at least ${b+1} fields are expected`)}function z(x,b,c,l=c){if(l===0)return b;const g=Hr("pair",x);if(l===1)return Object.assign(Object.assign({},g),{args:[b,g.args[1]]});const v=g.args[1];if(di(v))return Object.assign(Object.assign({},g),{args:[g.args[0],z(v,b,c,l-2)]});if(l===2)return Object.assign(Object.assign({},g),{args:[g.args[0],b]});throw new Pt(i,t,`${i.prim}: at least ${c+1} fields are expected`)}const $=(x,b)=>["@"+(x.v?x.v[0].slice(1)+".":"")+b];function O(x,b){return"failed"in x||"failed"in b?"failed"in x?b:x:(h(x,b),x)}const M=(x=>{var b,c,l,g,v;switch(x.prim){case"DUP":{const d=x.args?parseInt(x.args[0].int,10):1;if(d===0)throw new Pt(x,t,"DUP 0 is forbidden");const A=s(d-1,null)[0];if(ne(A)==="ticket")throw new Pt(x,t,"ticket can't be DUPed");return[A,...t]}case"SWAP":{const d=s(0,null,null);return C({}),[d[1],d[0],...t.slice(2)]}case"SOME":return[k({prim:"option",args:[s(0,null)[0]]},C({t:1,v:1})),...t.slice(1)];case"UNIT":return[k({prim:"unit"},C({v:1,t:1})),...t];case"PAIR":{const d=x.args?parseInt(x.args[0].int,10):2;if(d<2)throw new Pt(x,t,`PAIR ${d} is forbidden`);const A=s(0,...new Array(d).fill(null)),R=C({f:d,t:1,v:1},{specialFields:!0}),S=P=>{const H=P.lastIndexOf(".");return P.slice(H>0?H+1:1)},p=A.map((P,H)=>{var G;const Y=u(P),rt=R.f&&R.f.length>H&&R.f[H]!=="%"?R.f[H]==="%@"?Y.v?["%"+S(((G=Y.v)===null||G===void 0?void 0:G[0])||"")]:void 0:[R.f[H]]:void 0;return k(P,{v:null,t:null,f:rt})});return[k({prim:"pair",args:p},{t:R.t,v:R.v}),...t.slice(d)]}case"UNPAIR":{const d=x.args?parseInt(x.args[0].int,10):2;if(d<2)throw new Pt(x,t,`UNPAIR ${d} is forbidden`);const A=s(0,["pair"])[0],R=C({f:2,v:2},{specialVar:!0});return[...F(A,d).map((p,P)=>D(A,p,R,P,P===0?"car":"cdr")),...t.slice(1)]}case"CAR":case"CDR":{const d=Hr("pair",s(0,["pair"])[0]),A=d.args[x.prim==="CAR"?0:1],R=C({f:1,v:1},{specialVar:!0});return[D(d,A,R,0,x.prim.toLocaleLowerCase()),...t.slice(1)]}case"CONS":{const d=s(0,null,["list"]);return f(d[0],d[1].args[0]),[T({prim:"list",args:[d[1].args[0]]}),...t.slice(2)]}case"SIZE":return s(0,["string","list","set","map","bytes"]),[T({prim:"nat"}),...t.slice(1)];case"MEM":{const d=s(0,null,["set","map","big_map"]);return y(d[0]),f(d[0],d[1].args[0]),[T({prim:"bool"}),...t.slice(2)]}case"GET":if(x.args){const d=parseInt(x.args[0].int,10),A=s(0,["pair"])[0];return[T(V(A,d)),...t.slice(1)]}else{const d=s(0,null,["map","big_map"]);return y(d[0]),f(d[0],d[1].args[0]),[T({prim:"option",args:[d[1].args[1]]}),...t.slice(2)]}case"UPDATE":if(x.args){const d=parseInt(x.args[0].int,10),A=s(0,null,["pair"]);return[T(z(A[1],A[0],d)),...t.slice(2)]}else{const d=s(0,null,["bool","option"]);if(y(d[0]),d[1].prim==="bool"){const R=s(2,["set"]);return f(d[0],R[0].args[0]),[T({prim:"set",args:[k(d[0],{t:null})]}),...t.slice(3)]}const A=s(2,["map","big_map"]);return f(d[0],A[0].args[0]),A[0].prim==="map"?[T({prim:"map",args:[k(d[0],{t:null}),k(d[1].args[0],{t:null})]}),...t.slice(3)]:(B(d[1].args[0]),[T({prim:"big_map",args:[k(d[0],{t:null}),k(d[1].args[0],{t:null})]}),...t.slice(3)])}case"GET_AND_UPDATE":{const d=C({v:2}),A=s(0,null,["option"],["map","big_map"]);y(A[0]),f(A[0],A[2].args[0]),f(A[1].args[0],A[2].args[1]);const R=(b=d.v)===null||b===void 0?void 0:b.map(S=>S!=="@"?[S]:void 0);return A[2].prim==="map"?[k({prim:"option",args:[A[2].args[1]]},{v:R?.[0]}),k({prim:"map",args:[k(A[0],{t:null}),k(A[1].args[0],{t:null})]},{v:R?.[1]}),...t.slice(3)]:(B(A[1].args[0]),[k({prim:"option",args:[A[2].args[1]]},{v:R?.[0]}),k({prim:"big_map",args:[k(A[0],{t:null}),k(A[1].args[0],{t:null})]},{v:R?.[1]}),...t.slice(3)])}case"EXEC":{const d=s(0,null,["lambda"]);return f(d[0],d[1].args[0]),[T(d[1].args[1]),...t.slice(2)]}case"APPLY":{const d=s(0,null,["lambda"]);if(L(d[0]),I(d[0]),!di(d[1].args[0]))throw new Pt(x,t,`${x.prim}: function's argument must be a pair: ${ne(d[1].args[0])}`);const A=d[1].args[0];return f(d[0],x0(A)[0]),[T({prim:"lambda",args:[x0(A)[1],d[1].args[1]]}),...t.slice(2)]}case"FAILWITH":{const d=s(0,null)[0];return Po(n,hi.PtEdo2Zk)||w(d),{failed:d,level:0}}case"NEVER":return s(0,["never"]),{failed:{prim:"never"},level:0};case"RENAME":return[T(s(0,null)[0]),...t.slice(1)];case"CONCAT":{const d=s(0,["string","list","bytes"]);if(d[0].prim==="list"){if(ne(d[0].args[0])!=="string"&&ne(d[0].args[0])!=="bytes")throw new Pt(x,t,`${x.prim}: can't concatenate list of ${ne(d[0].args[0])}'s`);return[T(d[0].args[0]),...t.slice(1)]}const A=s(1,["string","bytes"]);if(d[0].prim!==A[0].prim)throw new Pt(x,t,`${x.prim}: can't concatenate ${d[0].prim} with ${A[0].prim}`);return[T(A[0]),...t.slice(2)]}case"SLICE":return[T({prim:"option",args:[s(0,["nat"],["nat"],["string","bytes"])[2]]},"@slice"),...t.slice(3)];case"PACK":{const d=s(0,null)[0];return w(d),[T({prim:"bytes"},"@packed"),...t.slice(1)]}case"ADD":{const d=s(0,["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(d[0].prim==="nat"&&d[1].prim==="int"||d[0].prim==="int"&&d[1].prim==="nat")return[T({prim:"int"}),...t.slice(2)];if(d[0].prim==="int"&&d[1].prim==="timestamp"||d[0].prim==="timestamp"&&d[1].prim==="int")return[T({prim:"timestamp"}),...t.slice(2)];if((d[0].prim==="int"||d[0].prim==="nat"||d[0].prim==="mutez"||d[0].prim==="bls12_381_g1"||d[0].prim==="bls12_381_g2"||d[0].prim==="bls12_381_fr")&&d[0].prim===d[1].prim)return[T(d[0]),...t.slice(2)];throw new Pt(x,t,`${x.prim}: can't add ${d[0].prim} to ${d[1].prim}`)}case"SUB":{const d=Po(n,hi.PsiThaCa)?s(0,["nat","int","timestamp","mutez"],["nat","int","timestamp","mutez"]):s(0,["nat","int","timestamp"],["nat","int","timestamp"]);if((d[0].prim==="nat"||d[0].prim==="int")&&(d[1].prim==="nat"||d[1].prim==="int")||d[0].prim==="timestamp"&&d[1].prim==="timestamp")return[T({prim:"int"}),...t.slice(2)];if(d[0].prim==="timestamp"&&d[1].prim==="int")return[T({prim:"timestamp"}),...t.slice(2)];if(d[0].prim==="mutez"&&d[1].prim==="mutez")return[T({prim:"mutez"}),...t.slice(2)];throw new Pt(x,t,`${x.prim}: can't subtract ${d[0].prim} from ${d[1].prim}`)}case"SUB_MUTEZ":return s(0,["mutez"],["mutez"]),[T({prim:"option",args:[{prim:"mutez"}]}),...t.slice(2)];case"MUL":{const d=s(0,["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(d[0].prim==="nat"&&d[1].prim==="int"||d[0].prim==="int"&&d[1].prim==="nat")return[T({prim:"int"}),...t.slice(2)];if(d[0].prim==="nat"&&d[1].prim==="mutez"||d[0].prim==="mutez"&&d[1].prim==="nat")return[T({prim:"mutez"}),...t.slice(2)];if((d[0].prim==="bls12_381_g1"||d[0].prim==="bls12_381_g2"||d[0].prim==="bls12_381_fr")&&d[1].prim==="bls12_381_fr"||(d[0].prim==="nat"||d[0].prim==="int")&&d[0].prim===d[1].prim)return[T(d[0]),...t.slice(2)];if((d[0].prim==="nat"||d[0].prim==="int")&&d[1].prim==="bls12_381_fr"||(d[1].prim==="nat"||d[1].prim==="int")&&d[0].prim==="bls12_381_fr")return[T({prim:"bls12_381_fr"}),...t.slice(2)];throw new Pt(x,t,`${x.prim}: can't multiply ${d[0].prim} by ${d[1].prim}`)}case"EDIV":{const d=(R,S)=>({prim:"option",args:[{prim:"pair",args:[{prim:R},{prim:S}]}]}),A=s(0,["nat","int","mutez"],["nat","int","mutez"]);if(A[0].prim==="nat"&&A[1].prim==="nat")return[T(d("nat","nat")),...t.slice(2)];if((A[0].prim==="nat"||A[0].prim==="int")&&(A[1].prim==="nat"||A[1].prim==="int"))return[T(d("int","nat")),...t.slice(2)];if(A[0].prim==="mutez"&&A[1].prim==="nat")return[T(d("mutez","mutez")),...t.slice(2)];if(A[0].prim==="mutez"&&A[1].prim==="mutez")return[T(d("nat","mutez")),...t.slice(2)];throw new Pt(x,t,`${x.prim}: can't euclideally divide ${A[0].prim} by ${A[1].prim}`)}case"ABS":return s(0,["int"]),[T({prim:"nat"}),...t.slice(1)];case"ISNAT":return s(0,["int"]),[T({prim:"option",args:[{prim:"nat"}]}),...t.slice(1)];case"INT":return s(0,["nat","bls12_381_fr"]),[T({prim:"int"}),...t.slice(1)];case"NEG":{const d=s(0,["nat","int","bls12_381_g1","bls12_381_g2","bls12_381_fr"])[0];return d.prim==="nat"||d.prim==="int"?[T({prim:"int"}),...t.slice(1)]:[T(d),...t.slice(1)]}case"LSL":case"LSR":return s(0,["nat"],["nat"]),[T({prim:"nat"}),...t.slice(2)];case"OR":case"XOR":{const d=s(0,["nat","bool"],["nat","bool"]);if(d[0].prim!==d[1].prim)throw new Pt(x,t,`${x.prim}: both arguments must be of the same type: ${d[0].prim}, ${d[1].prim}`);return[T(d[1]),...t.slice(2)]}case"AND":{const d=s(0,["nat","bool","int"],["nat","bool"]);if((d[0].prim!=="int"||d[1].prim!=="nat")&&d[0].prim!==d[1].prim)throw new Pt(x,t,`${x.prim}: both arguments must be of the same type: ${d[0].prim}, ${d[1].prim}`);return[T(d[1]),...t.slice(2)]}case"NOT":return s(0,["nat","bool","int"])[0].prim==="bool"?[T({prim:"bool"}),...t.slice(1)]:[T({prim:"int"}),...t.slice(1)];case"COMPARE":{const d=s(0,null,null);return y(d[0]),y(d[1]),[T({prim:"int"}),...t.slice(2)]}case"EQ":case"NEQ":case"LT":case"GT":case"LE":case"GE":return s(0,["int"]),[T({prim:"bool"}),...t.slice(1)];case"SELF":{if(r?.contract===void 0)throw new Pt(x,t,`${x.prim}: contract required`);const d=C({f:1,v:1}),A=Ru(r.contract,(c=d.f)===null||c===void 0?void 0:c[0]);if(A===null)throw new Pt(x,t,`${x.prim}: contract has no entrypoint ${A}`);return[k({prim:"contract",args:[A]},{v:d.v?d.v:["@self"]}),...t]}case"TRANSFER_TOKENS":{const d=s(0,null,["mutez"],["contract"]);return f(d[0],d[2].args[0]),[T({prim:"operation"}),...t.slice(3)]}case"SET_DELEGATE":{const d=s(0,["option"])[0];if(ne(d.args[0])!=="key_hash")throw new Pt(x,t,`${x.prim}: key hash expected: ${ne(d.args[0])}`);return[T({prim:"operation"}),...t.slice(1)]}case"IMPLICIT_ACCOUNT":return s(0,["key_hash"]),[T({prim:"contract",args:[{prim:"unit"}]}),...t.slice(1)];case"NOW":return[T({prim:"timestamp"},"@now"),...t];case"AMOUNT":return[T({prim:"mutez"},"@amount"),...t];case"BALANCE":return[T({prim:"mutez"},"@balance"),...t];case"CHECK_SIGNATURE":return s(0,["key"],["signature"],["bytes"]),[T({prim:"bool"}),...t.slice(3)];case"BLAKE2B":case"SHA256":case"SHA512":case"KECCAK":case"SHA3":return s(0,["bytes"]),[T({prim:"bytes"}),...t.slice(1)];case"HASH_KEY":return s(0,["key"]),[T({prim:"key_hash"}),...t.slice(1)];case"SOURCE":return[T({prim:"address"},"@source"),...t];case"SENDER":return[T({prim:"address"},"@sender"),...t];case"ADDRESS":{const d=s(0,["contract"])[0],A=C({v:1});return[k({prim:"address",[h0]:d},{v:A.v?A.v:$(u(d),"address")}),...t.slice(1)]}case"SELF_ADDRESS":{const d={prim:"address"};return r?.contract!==void 0&&(d[h0]={prim:"contract",args:[bn(r.contract,"parameter").args[0]]}),[T(d,"@address"),...t]}case"CHAIN_ID":return[T({prim:"chain_id"}),...t];case"DROP":{C({});const d=x.args!==void 0?parseInt(x.args[0].int,10):1;return s(d-1,null),t.slice(d)}case"DIG":{C({});const d=parseInt(x.args[0].int,10);return[s(d,null)[0],...t.slice(0,d),...t.slice(d+1)]}case"DUG":{C({});const d=parseInt(x.args[0].int,10);return[...t.slice(1,d+1),s(0,null)[0],...t.slice(d+1)]}case"NONE":return xe(x.args[0]),[k({prim:"option",args:[x.args[0]]},C({t:1,v:1})),...t];case"LEFT":case"RIGHT":{const d=s(0,null)[0],A=C({f:2,t:1,v:1},{specialFields:!0}),R=u(d),S=[k(d,{t:null,v:null,f:A.f&&A.f.length>0&&A.f[0]!=="%"?A.f[0]==="%@"?R.v?["%"+R.v[0].slice(1)]:void 0:A.f:void 0}),k(x.args[0],{t:null,f:A.f&&A.f.length>1&&A.f[1]!=="%"?A.f:void 0})];return[k({prim:"or",args:x.prim==="LEFT"?S:[S[1],S[0]]},{t:A.t,v:A.v}),...t.slice(1)]}case"NIL":return xe(x.args[0]),[k({prim:"list",args:[x.args[0]]},C({t:1,v:1})),...t];case"UNPACK":return s(0,["bytes"]),xe(x.args[0]),[T({prim:"option",args:[x.args[0]]},"@unpacked"),...t.slice(1)];case"CONTRACT":{const d=s(0,["address"])[0];xe(x.args[0]);const A=C({v:1,f:1}),R=d[h0];if(R!==void 0){const S=Ru(R,(l=A.f)===null||l===void 0?void 0:l[0]);if(S===null)throw new Pt(x,t,`${x.prim}: contract has no entrypoint ${S}`);f(S,x.args[0])}return[k({prim:"option",args:[{prim:"contract",args:[x.args[0]]}]},{v:A.v?A.v:$(u(d),"contract")}),...t.slice(1)]}case"CAST":{C({});const d=s(0,null)[0];return xe(x.args[0]),f(x.args[0],d),[x.args[0],...t.slice(1)]}case"IF_NONE":{C({});const d=s(0,["option"])[0],A=t.slice(1),R=Ce(x.args[0],A,r),S=Ce(x.args[1],[k(d.args[0],{t:null,v:$(u(d),"some")}),...A],r);return O(R,S)}case"IF_LEFT":{C({});const d=s(0,["or"])[0],A=u(d),R=u(d.args[0]),S=u(d.args[1]),p=t.slice(1),P=Ce(x.args[0],[k(d.args[0],{t:null,v:$(A,R.f?R.f[0].slice(1):"left")}),...p],r),H=Ce(x.args[1],[k(d.args[1],{t:null,v:$(A,S.f?S.f[0].slice(1):"right")}),...p],r);return O(P,H)}case"IF_CONS":{C({});const d=s(0,["list"])[0],A=u(d),R=t.slice(1),S=Ce(x.args[0],[k(d.args[0],{t:null,v:$(A,"hd")}),k(d,{t:null,v:$(A,"tl")}),...R],r),p=Ce(x.args[1],R,r);return O(S,p)}case"IF":{C({}),s(0,["bool"]);const d=t.slice(1),A=Ce(x.args[0],d,r),R=Ce(x.args[1],d,r);return O(A,R)}case"MAP":{const d=s(0,["list","map","option"])[0],A=t.slice(1),R=d.prim==="map"?{prim:"pair",args:d.args}:d.args[0],S=Ce(x.args[0],[k(R,{t:null,v:$(u(d),"elt")}),...A],r);if("failed"in S){if(!("prim"in S.failed)||S.failed.prim!=="never")throw new Pt(x,t,`${x.prim}: FAIL is not allowed in MAP`);return{failed:S.failed,level:S.level+1}}if(S.length<1)throw new Pt(x,t,`${x.prim}: function must return a value`);return h(S.slice(1),A),d.prim==="list"?[T({prim:"list",args:[S[0]]}),...A]:d.prim==="map"?[T({prim:"map",args:[d.args[0],S[0]]}),...A]:[T({prim:"option",args:[S[0]]}),...A]}case"ITER":{C({});const d=s(0,["set","list","map"])[0],A=t.slice(1),R=d.prim==="map"?{prim:"pair",args:d.args}:d.args[0],S=Ce(x.args[0],[k(R,{t:null,v:$(u(d),"elt")}),...A],r);return"failed"in S?{failed:S.failed,level:S.level+1}:(h(S,A),A)}case"LOOP":{C({}),s(0,["bool"]);const d=t.slice(1),A=Ce(x.args[0],d,r);return"failed"in A?{failed:A.failed,level:A.level+1}:(h(A,[{prim:"bool"},...d]),d)}case"LOOP_LEFT":{C({});const d=s(0,["or"])[0],A=t.slice(1),R=Ce(x.args[0],[k(d.args[0],{t:null,v:$(u(d),"left")}),...A],r);return"failed"in R?{failed:R.failed,level:R.level+1}:(h(R,[d,...A]),[k(d.args[1],{t:null,v:C({v:1}).v}),...A])}case"DIP":{C({});const d=x.args.length===2?parseInt(x.args[0].int,10):1;s(d-1,null);const A=t.slice(0,d),R=t.slice(d),S=x.args.length===2?Ce(x.args[1],R,r):Ce(x.args[0],R,r);return"failed"in S?{failed:S.failed,level:S.level+1}:[...A,...S]}case"CREATE_CONTRACT":{const d=C({v:2}),A=s(0,["option"],["mutez"],null);if(ne(A[0].args[0])!=="key_hash")throw new Pt(x,t,`${x.prim}: key hash expected: ${ne(A[0].args[0])}`);L(A[2])&&(Vp(x.args[0]),Kr(bn(x.args[0],"storage").args[0],A[2]));const R=(g=d.v)===null||g===void 0?void 0:g.map(S=>S!=="@"?[S]:void 0);return[k({prim:"operation"},{v:R?.[0]}),k({prim:"address",[h0]:{prim:"contract",args:[bn(x.args[0],"parameter").args[0]]}},{v:R?.[1]}),...t.slice(3)]}case"PUSH":return xe(x.args[0]),$r(x.args[1],x.args[0],Object.assign(Object.assign({},r),{contract:void 0})),[T(x.args[0]),...t];case"EMPTY_SET":return xe(x.args[0]),y(x.args[0]),[k({prim:"set",args:x.args},C({t:1,v:1})),...t];case"EMPTY_MAP":return xe(x.args[0]),y(x.args[0]),xe(x.args[1]),[k({prim:"map",args:x.args},C({t:1,v:1})),...t];case"EMPTY_BIG_MAP":return xe(x.args[0]),y(x.args[0]),xe(x.args[1]),B(x.args[0]),[k({prim:"big_map",args:x.args},C({t:1,v:1})),...t];case"LAMBDA":{xe(x.args[0]),xe(x.args[1]);const d=Ce(x.args[2],[x.args[0]],Object.assign(Object.assign({},r),{contract:void 0}));if("failed"in d)return{failed:d.failed,level:d.level+1};if(d.length!==1)throw new Pt(x,t,`${x.prim}: function must return a value`);return f(x.args[1],d[0]),[T({prim:"lambda",args:[x.args[0],x.args[1]]}),...t]}case"LEVEL":return[T({prim:"nat"},"@level"),...t];case"TOTAL_VOTING_POWER":return[T({prim:"nat"}),...t];case"VOTING_POWER":return s(0,["key_hash"]),[T({prim:"nat"}),...t.slice(1)];case"TICKET":{const d=s(0,null,["nat"])[0];return y(d),[k({prim:"ticket",args:[d]},C({t:1,v:1})),...t.slice(2)]}case"JOIN_TICKETS":{const d=Hr("pair",s(0,["pair"])[0]);if(ne(d.args[0])!=="ticket")throw new Pt(x,t,`${x.prim}: ticket expected: ${ne(d.args[0])}`);return f(d.args[0],d.args[1]),[T({prim:"option",args:[k(d.args[0],{t:null})]}),...t.slice(1)]}case"SPLIT_TICKET":{const d=s(0,["ticket"],["pair"]),A=Hr("pair",d[1]);if(ne(A.args[0])!=="nat")throw new Pt(x,t,`${x.prim}: nat expected: ${ne(A.args[0])}`);return f(A.args[0],A.args[1]),[T({prim:"option",args:[{prim:"pair",args:[k(d[0],{t:null}),k(d[0],{t:null})]}]}),...t.slice(2)]}case"READ_TICKET":{const d=C({v:2}),A=s(0,["ticket"])[0],R=(v=d.v)===null||v===void 0?void 0:v.map(S=>S!=="@"?[S]:void 0);return[k({prim:"pair",args:[{prim:"address"},k(A.args[0],{t:null}),{prim:"nat"}]},{v:R?.[0]}),k(A,{v:R?.[1],t:null}),...t.slice(1)]}case"PAIRING_CHECK":{const d=s(0,["list"])[0].args[0];if(!di(d))throw new Pt(x,t,`${x.prim}: pair expected: ${ne(d)}`);const A=Hr("pair",d);if(ne(A.args[0])!=="bls12_381_g1")throw new Pt(x,t,`${x.prim}: bls12_381_g1 expected: ${ne(A.args[0])}`);if(ne(A.args[1])!=="bls12_381_g2")throw new Pt(x,t,`${x.prim}: bls12_381_g2 expected: ${ne(A.args[1])}`);return[T({prim:"bool"}),...t.slice(1)]}case"SAPLING_EMPTY_STATE":return[k({prim:"sapling_state",args:[x.args[0]]},C({v:1,t:1})),...t];case"SAPLING_VERIFY_UPDATE":{const d=s(0,["sapling_transaction"],["sapling_state"]);if(parseInt(d[0].args[0].int,10)!==parseInt(d[1].args[0].int,10))throw new Pt(x,t,`${x.prim}: sapling memo size mismatch: ${d[0].args[0].int} != ${d[1].args[0].int}`);return Po(n,hi.PtJakarta)?[T({prim:"option",args:[{prim:"pair",args:[{prim:"int"},k(d[1],{t:null})]}]}),...t.slice(2)]:[T({prim:"option",args:[{prim:"pair",args:[{prim:"bytes"},{prim:"pair",args:[{prim:"int"},k(d[1],{t:null})]}]}]}),...t.slice(2)]}case"OPEN_CHEST":return s(0,["chest_key"],["chest"],["nat"]),[T({prim:"or",args:[{prim:"bytes"},{prim:"bool"}]}),...t.slice(3)];case"VIEW":{const d=s(0,null,["address"]);return I(d[0]),[T({prim:"option",args:[x.args[1]]}),...t.slice(2)]}case"MIN_BLOCK_TIME":return[T({prim:"nat"}),...t];default:throw new wr(x,`unexpected instruction: ${x.prim}`)}})(i);if(r?.traceCallback!==void 0){const x={op:i,in:t,out:M};r.traceCallback(x)}return M}function bn(e,t){for(const r of e)if(r.prim===t)return r;throw new wr(e,`missing contract section: ${t}`)}function RS(e){const t={};for(const r of e)r.prim==="view"&&(t[r.args[0].string]=r);return t}function zp(e){if(Array.isArray(e)){for(const t of e)if("prim"in t&&(t.prim==="parameter"||t.prim==="storage"||t.prim==="code"))return!0}return!1}function Ru(e,t){t=t||"%default";const r=b0(e).find(n=>n[0]===t);return r!==void 0?r[1]:t==="%default"?zp(e)?bn(e,"parameter").args[0]:e:null}function LS(e){return Array.isArray(e)||e.prim==="or"}function b0(e){if(zp(e)){const t=bn(e,"parameter"),r=b0(t.args[0]),n=Is(t);return n.f?[[n.f[0],t.args[0]],...r]:r}if(LS(e)){const t=x0(e),r=n=>{const i=Is(t[n]);if(ne(t[n])==="or"){const s=b0(t[n]);return i.f?[[i.f[0],t[n]],...s]:s}return i.f?[[i.f[0],t[n]]]:[]};return[...r(0),...r(1)]}return[]}function Vp(e,t){const r=(u,h,f,y)=>{xe(u,!0),xe(h);const w={prim:"pair",args:[Object.assign(Object.assign({},u),{annots:["@parameter"]}),Object.assign(Object.assign({},h),{annots:["@storage"]})]},L=Ce(y,[w],Object.assign(Object.assign({},t),{contract:e}));if("failed"in L)return L;try{Kp(L,[f])}catch(I){throw I instanceof wr?new Pt(y,L,I.message):I}return L},n=bn(e,"parameter").args[0],i=bn(e,"storage").args[0],s=bn(e,"code").args[0],a=r(n,i,{prim:"pair",args:[{prim:"list",args:[{prim:"operation"}]},i]},s);for(const u of Object.values(RS(e)))r(u.args[1],i,u.args[2],u.args[3]);return a}function jp(e,t,r){xe(t),$r(e,t,r||null)}function OS(e,t,r){for(const n of t)xe(n);if(r?.contract!==void 0)for(const n of["parameter","storage"]){const i=bn(r.contract,n).args[0];xe(i)}return Ce(e,t,r||null)}function IS(e,t,r){try{return jp(e,t,r),!0}catch{return!1}}class Lu{constructor(t,r){this.contract=t,this.ctx=Object.assign({contract:t},r),this.output=Vp(t,this.ctx)}static parse(t,r){const n=new li(r),i=typeof t=="string"?n.parseScript(t):n.parseJSON(t);if(i===null)throw new cS("empty contract");if(Up(i))return new Lu(i,r)}static parseTypeExpression(t,r){const n=new li(r),i=typeof t=="string"?n.parseScript(t):n.parseJSON(t);if(i===null)throw new uS("empty type expression");if(Hn(i)&&xe(i))return i;throw void 0}static parseDataExpression(t,r){const n=new li(r),i=typeof t=="string"?n.parseScript(t):n.parseJSON(t);if(i===null)throw new fS("empty data expression");if(qi(i))return i;throw void 0}section(t){return bn(this.contract,t)}entryPoints(){return b0(this.contract)}entryPoint(t){return Ru(this.contract,t)}assertDataValid(t,r){jp(t,r,this.ctx)}isDataValid(t,r){return IS(t,r,this.ctx)}assertParameterValid(t,r){const n=this.entryPoint(t||void 0);if(n===null)throw new hS(t?.toString());this.assertDataValid(r,n)}isParameterValid(t,r){try{return this.assertParameterValid(t,r),!0}catch{return!1}}functionType(t,r){return OS(t,r,this.ctx)}}new Lu([{prim:"parameter",args:[{prim:"unit"}]},{prim:"storage",args:[{prim:"unit"}]},{prim:"code",args:[[{prim:"CAR"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PAIR"}]]}]);const Gp=e=>e.reduce((t,r)=>t+r.toString(16).padStart(2,"0"),""),Qt=(e,t=8)=>e.toString(16).padStart(t,"0"),y0=31;var X;(function(e){e.SECRET="secret",e.RAW="raw",e.TZ1="tz1",e.BRANCH="branch",e.ZARITH="zarith",e.PUBLIC_KEY="public_key",e.PKH="pkh",e.DELEGATE="delegate",e.SCRIPT="script",e.BALLOT_STATEMENT="ballotStmt",e.PROPOSAL="proposal",e.PROPOSAL_ARR="proposalArr",e.INT32="int32",e.INT16="int16",e.PARAMETERS="parameters",e.ADDRESS="address",e.VALUE="value",e.MANAGER="manager",e.BLOCK_PAYLOAD_HASH="blockPayloadHash",e.ENTRYPOINT="entrypoint",e.OPERATION="operation",e.OP_ACTIVATE_ACCOUNT="activate_account",e.OP_DELEGATION="delegation",e.OP_TRANSACTION="transaction",e.OP_ORIGINATION="origination",e.OP_BALLOT="ballot",e.OP_ENDORSEMENT="endorsement",e.OP_SEED_NONCE_REVELATION="seed_nonce_revelation",e.OP_REVEAL="reveal",e.OP_PROPOSALS="proposals",e.OP_REGISTER_GLOBAL_CONSTANT="register_global_constant",e.OP_TRANSFER_TICKET="transfer_ticket",e.OP_TX_ROLLUP_ORIGINATION="tx_rollup_origination",e.OP_TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",e.BURN_LIMIT="burn_limit",e.TX_ROLLUP_ORIGINATION_PARAM="tx_rollup_origination_param",e.TX_ROLLUP_ID="tx_rollup_id",e.TX_ROLLUP_BATCH_CONTENT="tx_rollup_batch_content"})(X||(X={}));const Kn={"00":"parameter","01":"storage","02":"code","03":"False","04":"Elt","05":"Left","06":"None","07":"Pair","08":"Right","09":"Some","0a":"True","0b":"Unit","0c":"PACK","0d":"UNPACK","0e":"BLAKE2B","0f":"SHA256","10":"SHA512","11":"ABS","12":"ADD","13":"AMOUNT","14":"AND","15":"BALANCE","16":"CAR","17":"CDR","18":"CHECK_SIGNATURE","19":"COMPARE","1a":"CONCAT","1b":"CONS","1c":"CREATE_ACCOUNT","1d":"CREATE_CONTRACT","1e":"IMPLICIT_ACCOUNT","1f":"DIP","20":"DROP","21":"DUP","22":"EDIV","23":"EMPTY_MAP","24":"EMPTY_SET","25":"EQ","26":"EXEC","27":"FAILWITH","28":"GE","29":"GET","2a":"GT","2b":"HASH_KEY","2c":"IF","2d":"IF_CONS","2e":"IF_LEFT","2f":"IF_NONE","30":"INT","31":"LAMBDA","32":"LE","33":"LEFT","34":"LOOP","35":"LSL","36":"LSR","37":"LT","38":"MAP","39":"MEM","3a":"MUL","3b":"NEG","3c":"NEQ","3d":"NIL","3e":"NONE","3f":"NOT","40":"NOW","41":"OR","42":"PAIR","43":"PUSH","44":"RIGHT","45":"SIZE","46":"SOME","47":"SOURCE","48":"SENDER","49":"SELF","4a":"STEPS_TO_QUOTA","4b":"SUB","4c":"SWAP","4d":"TRANSFER_TOKENS","4e":"SET_DELEGATE","4f":"UNIT","50":"UPDATE","51":"XOR","52":"ITER","53":"LOOP_LEFT","54":"ADDRESS","55":"CONTRACT","56":"ISNAT","57":"CAST","58":"RENAME","59":"bool","5a":"contract","5b":"int","5c":"key","5d":"key_hash","5e":"lambda","5f":"list","60":"map","61":"big_map","62":"nat","63":"option","64":"or","65":"pair","66":"set","67":"signature","68":"string","69":"bytes","6a":"mutez","6b":"timestamp","6c":"unit","6d":"operation","6e":"address","6f":"SLICE","70":"DIG","71":"DUG","72":"EMPTY_BIG_MAP","73":"APPLY","74":"chain_id","75":"CHAIN_ID","76":"LEVEL","77":"SELF_ADDRESS","78":"never","79":"NEVER","7a":"UNPAIR","7b":"VOTING_POWER","7c":"TOTAL_VOTING_POWER","7d":"KECCAK","7e":"SHA3","7f":"PAIRING_CHECK","80":"bls12_381_g1","81":"bls12_381_g2","82":"bls12_381_fr","83":"sapling_state","84":"sapling_transaction","85":"SAPLING_EMPTY_STATE","86":"SAPLING_VERIFY_UPDATE","87":"ticket","88":"TICKET","89":"READ_TICKET","8a":"SPLIT_TICKET","8b":"JOIN_TICKETS","8c":"GET_AND_UPDATE","8d":"chest","8e":"chest_key","8f":"OPEN_CHEST","90":"VIEW","91":"view","92":"constant","93":"SUB_MUTEZ"},NS=(()=>{const e={};return Object.keys(Kn).forEach(t=>{e[Kn[t]]=t}),e})(),Ou={4:"activate_account",107:"reveal",110:"delegation",108:"transaction",109:"origination",6:"ballot",21:"endorsement",1:"seed_nonce_revelation",5:"proposals",111:"register_global_constant",150:"tx_rollup_origination",151:"tx_rollup_submit_batch",158:"transfer_ticket"},qp=(()=>{const e={};return Object.keys(Ou).forEach(t=>{const r=typeof t=="string"?parseInt(t,10):t;e[Ou[r]]=Qt(r,2)}),e})(),w0={"00":"default","01":"root","02":"do","03":"set_delegate","04":"remove_delegate"},E0=(()=>{const e={};return Object.keys(w0).forEach(t=>{e[w0[t]]=t}),e})();class MS extends Error{constructor(t){super(t),this.message=t,this.name="InvalidBlockHashError"}}class Wp extends Error{constructor(t){super(t),this.message=t,this.name="InvalidOperationSchemaError"}}class Iu extends Error{constructor(t){super(`Oversized entrypoint: ${t}. The maximum length of entrypoint is ${y0}`),this.entrypoint=t,this.name="OversizedEntryPointError"}}class BS extends Error{constructor(t){super(`The ballot value '${t}' is invalid`),this.ballotValue=t,this.name="InvalidBallotValueError"}}class CS extends Error{constructor(t){super(`Failed to decode ballot value ${t}`),this.ballotValue=t,this.name="DecodeBallotValueError"}}class Yp extends Error{constructor(t){super(`The hex string '${t}' is invalid`),this.hexString=t,this.name="InvalidHexStringError"}}class Xp extends Error{constructor(t){super(`Failed to encode michelson value '${t}'`),this.value=t,this.name="UnexpectedMichelsonValueError"}}class Zp extends Error{constructor(t){super(t),this.message=t,this.name="OperationDecodingError"}}class US extends Error{constructor(t){super(t),this.message=t,this.name="OperationEncodingError"}}class kS extends Error{constructor(t){super(`The operation '${t}' is unsupported`),this.op=t,this.name="UnsupportedOperationError"}}class nr{constructor(t,r=0){this.arr=t,this.offset=r}static fromHexString(t){const r=t.toLowerCase();if(/^(([a-f]|\d){2})*$/.test(r)){const n=new Uint8Array((r.match(/([a-z]|\d){2}/g)||[]).map(i=>parseInt(i,16)));return new nr(n)}else throw new Yp(r)}consume(t){const r=this.arr.subarray(this.offset,this.offset+t);return this.offset+=t,r}get(t){return this.arr[this.offset+t]}length(){return this.arr.length-this.offset}}const Jp=e=>"prim"in e,Qp=e=>"bytes"in e&&typeof e.bytes=="string",t1=e=>"string"in e&&typeof e.string=="string",e1=e=>"int"in e&&typeof e.int=="string",DS=e=>{const t=Wi(e.code),r=Wi(e.storage);return`${Qt(t.length/2,8)}${t}${Qt(r.length/2,8)}${r}`},FS=e=>{const t=qe(e),r=qe(e);return{code:vi(new nr(t)),storage:vi(new nr(r))}},Wi=e=>{if(Array.isArray(e)){const t=e.map(n=>Wi(n)).join(""),r=t.length/2;return`02${Qt(r)}${t}`}else{if(Jp(e))return HS(e);if(Qp(e))return r1(e);if(t1(e))return i1(e);if(e1(e))return o1(e)}throw new Xp(e)},vi=e=>{const t=e.consume(1);switch(t[0]){case 10:return n1(e);case 1:return s1(e);case 0:return a1(e);case 2:{const r=new nr(qe(e)),n=[];for(;r.length()>0;)n.push(vi(r));return n}default:return KS(e,t)}},qe=(e,t=4)=>{const r=e.consume(t),n=parseInt(Buffer.from(r).toString("hex"),16);return e.consume(n)},r1=e=>{if(!/^([A-Fa-f0-9]{2})*$/.test(e.bytes))throw new Yp(e.bytes);const t=e.bytes.length/2;return`0a${Qt(t)}${e.bytes}`},n1=e=>{const t=qe(e);return{bytes:Buffer.from(t).toString("hex")}},i1=e=>{const t=Buffer.from(e.string,"utf8").toString("hex"),r=t.length/2;return`01${Qt(r)}${t}`},s1=e=>{const t=qe(e);return{string:Buffer.from(t).toString("utf8")}},o1=({int:e})=>{const t=new vt(e,10),r=t.toString(2)[0]==="-"?"1":"0",n=t.toString(2).replace(/-/g,""),i=n.length<=6?6:(n.length-6)%7?n.length+7-(n.length-6)%7:n.length,o=n.padStart(i,"0").match(/\d{6,7}/g).reverse();return o[0]=r+o[0],`00${o.map((u,h)=>parseInt((h===o.length-1?"0":"1")+u,2).toString(16).padStart(2,"0")).join("")}`},a1=e=>{let t=e.consume(1)[0];const r=[],n=1<<7;for(;t&n;)r.push(t),t=e.consume(1)[0];r.push(t);const i=!!(1<<6&r[0]);r[0]=r[0]&127;const s=r.map((a,u)=>a.toString(2).slice(u===0?-6:-7).padStart(u===0?6:7,"0")).reverse();let o=new vt(s.join(""),2);return i&&(o=o.times(-1)),{int:o.toFixed()}},HS=e=>{const t=+Array.isArray(e.annots),r=Array.isArray(e.args)?e.args.length:0,n=Qt(Math.min(2*r+t+3,9),2),i=NS[e.prim];let s=(e.args||[]).map(a=>Wi(a)).join("");const o=Array.isArray(e.annots)?c1(e.annots):"";return e.prim==="LAMBDA"&&r&&(s=Qt(s.length/2)+s+Qt(0)),(e.prim==="pair"||e.prim==="Pair")&&r>2&&(s=o===""?Qt(s.length/2)+s+Qt(0):Qt(s.length/2)+s),e.prim==="view"&&e.args&&(s=Qt(s.length/2)+s+Qt(0)),`${n}${i}${s}${o}`},KS=(e,t)=>{const r=(t[0]-3)%2===1;let n=Math.floor((t[0]-3)/2);const i=e.consume(1)[0].toString(16).padStart(2,"0"),s={prim:Kn[i]};if(Kn[i]==="LAMBDA"&&e.consume(4),Kn[i]==="view")return n!=0?$S(e,s):s;let o,a;(Kn[i]==="pair"||Kn[i]==="Pair")&&n>2&&(o=zS(e),n=0,a=_0(e));const u=new Array(n).fill(0).map(()=>vi(e));return Kn[i]==="LAMBDA"&&e.consume(4),o?s.args=o:u.length&&(s.args=u),a&&a[0]!==""?s.annots=a:r&&(s.annots=_0(e)),s},$S=(e,t)=>(e.consume(4),t.args=new Array(4).fill(0).map(()=>vi(e)),e.consume(4),t),zS=e=>{const t=new nr(qe(e)),r=[];for(;t.length()>0;)r.push(vi(t));return r},c1=e=>{const t=e.map(n=>Buffer.from(n,"utf8").toString("hex")).join("20"),r=t.length/2;return`${Qt(r)}${t}`},_0=e=>{const t=e.consume(4),r=parseInt(Buffer.from(t).toString("hex"),16),n=e.consume(r);return Buffer.from(n).toString("hex").split("20").map(s=>Buffer.from(s,"hex").toString("utf8"))},Or=e=>t=>vo(Buffer.from(yd(t,er[e]))),Ir=e=>t=>{const r=t.consume(ld[e]);return oi(r,er[e])},VS=Ir(et.TZ1),jS=Ir(et.B),Nu=e=>{const t=e.consume(1);if(t[0]===0)return Ir(et.TZ1)(e);if(t[0]===1)return Ir(et.TZ2)(e);if(t[0]===2)return Ir(et.TZ3)(e)},GS=Or(et.B),qS=Or(et.TZ1),u1=e=>e?"ff":"00",f1=e=>Or(et.P)(e),h1=e=>Ir(et.P)(e),WS=e=>{const t=[];for(e.consume(4);e.length()>0;)t.push(h1(e));return t},YS=e=>Qt(32*e.length)+e.map(t=>f1(t)).join(""),XS=e=>{switch(e){case"yay":return"00";case"nay":return"01";case"pass":return"02";default:throw new BS(e)}},ZS=e=>{const t=e.consume(1);switch(t[0]){case 0:return"yay";case 1:return"nay";case 2:return"pass";default:throw new CS(t[0].toString())}},JS=e=>e?u1(!0)+Mu(e):u1(!1),QS=e=>{const t=parseInt(String(e),10),r=[];for(let n=0;n<4;n++){const i=(4-(n+1))*8;r.push((t&255<<i)>>i)}return Buffer.from(r).toString("hex")},tA=e=>{const t=e.consume(4);let r=0;for(let n=0;n<t.length;n++)r=r|t[n]<<(t.length-(n+1))*8;return r},eA=e=>{const t=parseInt(String(e),10),r=[];for(let n=0;n<2;n++){const i=(2-(n+1))*8;r.push((t&255<<i)>>i)}return Buffer.from(r).toString("hex")},rA=e=>{const t=e.consume(2);let r=0;for(let n=0;n<t.length;n++)r=r|t[n]<<(t.length-(n+1))*8;return r},nA=e=>e.consume(1)[0]===255,iA=e=>{if(nA(e))return Nu(e)},Mu=e=>{switch(e.substr(0,3)){case et.TZ1:return"00"+Or(et.TZ1)(e);case et.TZ2:return"01"+Or(et.TZ2)(e);case et.TZ3:return"02"+Or(et.TZ3)(e);default:throw new Jc(e)}},sA=e=>{switch(e.substr(0,4)){case et.EDPK:return"00"+Or(et.EDPK)(e);case et.SPPK:return"01"+Or(et.SPPK)(e);case et.P2PK:return"02"+Or(et.P2PK)(e);default:throw new dd(e)}},oA=e=>{switch(e.substr(0,3)){case et.TZ1:case et.TZ2:case et.TZ3:return"00"+Mu(e);case et.KT1:return"01"+Or(et.KT1)(e)+"00";default:throw new Pe(e)}},aA=e=>{switch(e.consume(1)[0]){case 0:return Ir(et.EDPK)(e);case 1:return Ir(et.SPPK)(e);case 2:return Ir(et.P2PK)(e);default:throw new dd(e.toString())}},cA=e=>{switch(e.consume(1)[0]){case 0:return Nu(e);case 1:{const r=Ir(et.KT1)(e);return e.consume(1),r}default:throw new Pe(e.toString())}},l1=e=>{const t=[];let r=new vt(e,10);if(r.isNaN())throw new TypeError(`Invalid zarith number ${e}`);for(;;)if(r.lt(128)){r.lt(16)&&t.push("0"),t.push(r.toString(16));break}else{let n=r.mod(128);r=r.minus(n),r=r.dividedBy(128),n=n.plus(128),t.push(n.toString(16))}return t.join("")},d1=e=>{let t=0;for(;t<e.length()&&(e.get(t)&128)!==0;)t+=1;let r=new vt(0);for(let n=t;n>=0;n-=1){const i=e.get(n)&127;r=r.multipliedBy(128),r=r.plus(i)}return e.consume(t+1),new vt(r).toString()},p1=e=>{const t=Qt(e.consume(1)[0],2);if(t in w0)return w0[t];{const r=qe(e,1),n=Buffer.from(r).toString("utf8");if(n.length>y0)throw new Iu(n);return n}},uA=e=>{if(e.consume(1)[0]!==0){const r=p1(e),n=qe(e),i=vi(new nr(n));return{entrypoint:r,value:i}}},fA=e=>{if(e in E0)return`${E0[e]}`;if(e.length>y0)throw new Iu(e);return`ff${Wi({string:e}).slice(8)}`},hA=e=>{if(!e||e.entrypoint==="default"&&"prim"in e.value&&e.value.prim==="Unit")return"00";const t=fA(e.entrypoint),r=Wi(e.value),n=(r.length/2).toString(16).padStart(8,"0");return`ff${t}${n}${r}`},lA=e=>{const t=Wi(e);return`${Qt(t.length/2)}${t}`},dA=e=>{const t=qe(e);return vi(new nr(t))},pA=Or(et.VH),gA=Ir(et.VH),S0={branch:X.BRANCH,contents:[X.OPERATION]},Io={pkh:X.TZ1,secret:X.SECRET},No={source:X.PKH,fee:X.ZARITH,counter:X.ZARITH,gas_limit:X.ZARITH,storage_limit:X.ZARITH,public_key:X.PUBLIC_KEY},Mo={source:X.PKH,fee:X.ZARITH,counter:X.ZARITH,gas_limit:X.ZARITH,storage_limit:X.ZARITH,delegate:X.DELEGATE},Bo={source:X.PKH,fee:X.ZARITH,counter:X.ZARITH,gas_limit:X.ZARITH,storage_limit:X.ZARITH,amount:X.ZARITH,destination:X.ADDRESS,parameters:X.PARAMETERS},Co={source:X.PKH,fee:X.ZARITH,counter:X.ZARITH,gas_limit:X.ZARITH,storage_limit:X.ZARITH,balance:X.ZARITH,delegate:X.DELEGATE,script:X.SCRIPT},Uo={source:X.PKH,period:X.INT32,proposal:X.PROPOSAL,ballot:X.BALLOT_STATEMENT},ko={slot:X.INT16,level:X.INT32,round:X.INT32,block_payload_hash:X.BLOCK_PAYLOAD_HASH},Do={level:X.INT32,nonce:X.RAW},Fo={source:X.PKH,period:X.INT32,proposals:X.PROPOSAL_ARR},Ho={source:X.PKH,fee:X.ZARITH,counter:X.ZARITH,gas_limit:X.ZARITH,storage_limit:X.ZARITH,value:X.VALUE},g1=e=>t=>{if(!(t.kind in e)||!(t.kind in qp))throw new ii(t.kind);return qp[t.kind]+e[t.kind](t)},v1=e=>t=>{const r=t.consume(1),n=Ou[r[0]];if(n===void 0)throw new kS(r[0].toString());const i=e[n](t);if(typeof i!="object")throw new Zp("Decoded invalid operation");return Object.assign({kind:n},i)},ge=e=>t=>r=>Object.keys(t).reduce((i,s)=>{const o=t[s];if(r&&Array.isArray(o)){const a=e[o[0]],u=r[s];if(!Array.isArray(u))throw new US(`Expected value to be Array ${JSON.stringify(u)}`);return i+u.reduce((h,f)=>h+a(f),"")}else{const a=e[o];return i+a(r[s])}},""),ve=e=>t=>r=>Object.keys(t).reduce((i,s)=>{const o=t[s];if(Array.isArray(o)){const a=e[o[0]],u=[],h=r.length();for(;r.length()>0;)if(u.push(a(r)),h===r.length())throw new Zp("Unable to decode value");return Object.assign(Object.assign({},i),{[s]:u})}else{const u=e[o](r);return typeof u<"u"?Object.assign(Object.assign({},i),{[s]:u}):Object.assign({},i)}},{}),le={[X.SECRET]:e=>Gp(e.consume(20)),[X.RAW]:e=>Gp(e.consume(32)),[X.TZ1]:VS,[X.BRANCH]:jS,[X.ZARITH]:d1,[X.PUBLIC_KEY]:aA,[X.PKH]:Nu,[X.DELEGATE]:iA,[X.INT32]:tA,[X.SCRIPT]:FS,[X.BALLOT_STATEMENT]:ZS,[X.PROPOSAL]:h1,[X.PROPOSAL_ARR]:WS,[X.PARAMETERS]:uA,[X.ADDRESS]:cA,[X.VALUE]:dA,[X.INT16]:rA,[X.BLOCK_PAYLOAD_HASH]:gA};le[X.OPERATION]=v1(le),le[X.OP_ACTIVATE_ACCOUNT]=e=>ve(le)(Io)(e),le[X.OP_DELEGATION]=e=>ve(le)(Mo)(e),le[X.OP_TRANSACTION]=e=>ve(le)(Bo)(e),le[X.OP_ORIGINATION]=e=>ve(le)(Co)(e),le[X.OP_BALLOT]=e=>ve(le)(Uo)(e),le[X.OP_ENDORSEMENT]=e=>ve(le)(ko)(e),le[X.OP_SEED_NONCE_REVELATION]=e=>ve(le)(Do)(e),le[X.OP_PROPOSALS]=e=>ve(le)(Fo)(e),le[X.OP_REVEAL]=e=>ve(le)(No)(e),le[X.OP_REGISTER_GLOBAL_CONSTANT]=e=>ve(le)(Ho)(e),le[X.MANAGER]=ve(le)(S0);const de={[X.SECRET]:e=>e,[X.RAW]:e=>e,[X.TZ1]:qS,[X.BRANCH]:GS,[X.ZARITH]:l1,[X.PUBLIC_KEY]:sA,[X.PKH]:Mu,[X.DELEGATE]:JS,[X.SCRIPT]:DS,[X.BALLOT_STATEMENT]:XS,[X.PROPOSAL]:f1,[X.PROPOSAL_ARR]:YS,[X.INT32]:QS,[X.PARAMETERS]:hA,[X.ADDRESS]:oA,[X.VALUE]:lA,[X.INT16]:eA,[X.BLOCK_PAYLOAD_HASH]:pA};de[X.OPERATION]=g1(de),de[X.OP_ACTIVATE_ACCOUNT]=e=>ge(de)(Io)(e),de[X.OP_DELEGATION]=e=>ge(de)(Mo)(e),de[X.OP_TRANSACTION]=e=>ge(de)(Bo)(e),de[X.OP_ORIGINATION]=e=>ge(de)(Co)(e),de[X.OP_BALLOT]=e=>ge(de)(Uo)(e),de[X.OP_ENDORSEMENT]=e=>ge(de)(ko)(e),de[X.OP_SEED_NONCE_REVELATION]=e=>ge(de)(Do)(e),de[X.OP_PROPOSALS]=e=>ge(de)(Fo)(e),de[X.OP_REVEAL]=e=>ge(de)(No)(e),de[X.OP_REGISTER_GLOBAL_CONSTANT]=e=>ge(de)(Ho)(e),de[X.MANAGER]=ge(de)(S0);const Bu={source:X.PKH,fee:X.ZARITH,counter:X.ZARITH,gas_limit:X.ZARITH,storage_limit:X.ZARITH,ticket_contents:X.VALUE,ticket_ty:X.VALUE,ticket_ticketer:X.ADDRESS,ticket_amount:X.ZARITH,destination:X.ADDRESS,entrypoint:X.ENTRYPOINT},Cu={source:X.PKH,fee:X.ZARITH,counter:X.ZARITH,gas_limit:X.ZARITH,storage_limit:X.ZARITH,tx_rollup_origination:X.TX_ROLLUP_ORIGINATION_PARAM},Uu={source:X.PKH,fee:X.ZARITH,counter:X.ZARITH,gas_limit:X.ZARITH,storage_limit:X.ZARITH,rollup:X.TX_ROLLUP_ID,content:X.TX_ROLLUP_BATCH_CONTENT,burn_limit:X.BURN_LIMIT},m1={activate_account:Io,reveal:No,delegation:Mo,transaction:Bo,origination:Co,ballot:Uo,endorsement:ko,seed_nonce_revelation:Do,proposals:Fo,register_global_constant:Ho,transfer_ticket:Bu,tx_rollup_origination:Cu,tx_rollup_submit_batch:Uu},vA=(e,t)=>t.filter(r=>!e.includes(r)),mA=(e,t)=>e.filter(r=>r!==t),xA=e=>Object.keys(m1).includes(e),bA=e=>{const t=e.kind,r=Object.keys(e),n=mA(r,"kind"),i=Object.keys(m1[t]);return vA(n,i)};var Ko;(function(e){e.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",e.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",e.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",e.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",e.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",e.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",e.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",e.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",e.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",e.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",e.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",e.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(Ko||(Ko={}));const x1={Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd:4,PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU:5,PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS:5,PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb:6,PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo:7,PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA:8,PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i:9,PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV:10,PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx:11,Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A:12,PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY:13,ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK:14};function yA(e,t){return x1[e]<x1[t]}const mi=Object.assign(Object.assign({},Kn),{"84":"sapling_transaction_deprecated","94":"tx_rollup_l2_address","95":"MIN_BLOCK_TIME","96":"sapling_transaction"}),wA=(()=>{const e={};return Object.keys(mi).forEach(t=>{e[mi[t]]=t}),e})(),EA=e=>{const t=xi(e.code),r=xi(e.storage);return`${Qt(t.length/2,8)}${t}${Qt(r.length/2,8)}${r}`},_A=e=>{const t=qe(e),r=qe(e);return{code:bi(new nr(t)),storage:bi(new nr(r))}},xi=e=>{if(Array.isArray(e)){const t=e.map(n=>xi(n)).join(""),r=t.length/2;return`02${Qt(r)}${t}`}else{if(Jp(e))return SA(e);if(Qp(e))return r1(e);if(t1(e))return i1(e);if(e1(e))return o1(e)}throw new Xp("Unexpected value")},bi=e=>{const t=e.consume(1);switch(t[0]){case 10:return n1(e);case 1:return s1(e);case 0:return a1(e);case 2:{const r=new nr(qe(e)),n=[];for(;r.length()>0;)n.push(bi(r));return n}default:return AA(e,t)}},SA=e=>{const t=+Array.isArray(e.annots),r=Array.isArray(e.args)?e.args.length:0,n=Qt(Math.min(2*r+t+3,9),2),i=wA[e.prim];let s=(e.args||[]).map(a=>xi(a)).join("");const o=Array.isArray(e.annots)?c1(e.annots):"";return e.prim==="LAMBDA"&&r&&(s=Qt(s.length/2)+s+Qt(0)),(e.prim==="pair"||e.prim==="Pair")&&r>2&&(s=o===""?Qt(s.length/2)+s+Qt(0):Qt(s.length/2)+s),e.prim==="view"&&e.args&&(s=Qt(s.length/2)+s+Qt(0)),`${n}${i}${s}${o}`},AA=(e,t)=>{const r=(t[0]-3)%2===1;let n=Math.floor((t[0]-3)/2);const i=e.consume(1)[0].toString(16).padStart(2,"0"),s={prim:mi[i]};if(mi[i]==="LAMBDA"&&e.consume(4),mi[i]==="view")return n!=0?PA(e,s):s;let o,a;(mi[i]==="pair"||mi[i]==="Pair")&&n>2&&(o=TA(e),n=0,a=_0(e));const u=new Array(n).fill(0).map(()=>bi(e));return mi[i]==="LAMBDA"&&e.consume(4),o?s.args=o:u.length&&(s.args=u),a&&a[0]!==""?s.annots=a:r&&(s.annots=_0(e)),s},PA=(e,t)=>(e.consume(4),t.args=new Array(4).fill(0).map(()=>bi(e)),e.consume(4),t),TA=e=>{const t=new nr(qe(e)),r=[];for(;t.length()>0;)r.push(bi(t));return r},RA=e=>{if(e.consume(1)[0]!==0){const r=p1(e),n=qe(e),i=bi(new nr(n));return{entrypoint:r,value:i}}},LA=e=>{const t=qe(e);return bi(new nr(t))},OA=e=>{if(e in E0)return`${E0[e]}`;if(e.length>y0)throw new Iu(e);return`ff${xi({string:e}).slice(8)}`},IA=e=>`${xi({string:e}).slice(2)}`,NA=e=>{const t=qe(e);return Buffer.from(t).toString("utf8")},MA=e=>{if(!e||e.entrypoint==="default"&&"prim"in e.value&&e.value.prim==="Unit")return"00";const t=OA(e.entrypoint),r=xi(e.value),n=(r.length/2).toString(16).padStart(8,"0");return`ff${t}${n}${r}`},BA=e=>{const t=xi(e);return`${Qt(t.length/2)}${t}`},CA=e=>"",UA=e=>({}),kA=Or(et.TXR1),DA=Ir(et.TXR1),FA=e=>`${Qt(e.length/2)}${e}`,HA=e=>{const t=qe(e);return Buffer.from(t).toString("hex")},KA=e=>e?`ff${l1(e)}`:"00",$A=e=>{const t=e.consume(1);if(Buffer.from(t).toString("hex")!=="00")return d1(e)},te=Object.assign(Object.assign({},de),{[X.SCRIPT]:EA,[X.PARAMETERS]:MA,[X.VALUE]:BA,[X.ENTRYPOINT]:IA,[X.TX_ROLLUP_ORIGINATION_PARAM]:CA,[X.TX_ROLLUP_ID]:kA,[X.TX_ROLLUP_BATCH_CONTENT]:FA,[X.BURN_LIMIT]:KA});te[X.OPERATION]=g1(te),te[X.OP_ACTIVATE_ACCOUNT]=e=>ge(te)(Io)(e),te[X.OP_DELEGATION]=e=>ge(te)(Mo)(e),te[X.OP_TRANSACTION]=e=>ge(te)(Bo)(e),te[X.OP_ORIGINATION]=e=>ge(te)(Co)(e),te[X.OP_BALLOT]=e=>ge(te)(Uo)(e),te[X.OP_ENDORSEMENT]=e=>ge(te)(ko)(e),te[X.OP_SEED_NONCE_REVELATION]=e=>ge(te)(Do)(e),te[X.OP_PROPOSALS]=e=>ge(te)(Fo)(e),te[X.OP_REVEAL]=e=>ge(te)(No)(e),te[X.OP_REGISTER_GLOBAL_CONSTANT]=e=>ge(te)(Ho)(e),te[X.OP_TRANSFER_TICKET]=e=>ge(te)(Bu)(e),te[X.OP_TX_ROLLUP_ORIGINATION]=e=>ge(te)(Cu)(e),te[X.OP_TX_ROLLUP_SUBMIT_BATCH]=e=>ge(te)(Uu)(e),te[X.MANAGER]=ge(te)(S0);const ee=Object.assign(Object.assign({},le),{[X.SCRIPT]:_A,[X.PARAMETERS]:RA,[X.VALUE]:LA,[X.ENTRYPOINT]:NA,[X.TX_ROLLUP_ORIGINATION_PARAM]:UA,[X.TX_ROLLUP_ID]:DA,[X.TX_ROLLUP_BATCH_CONTENT]:HA,[X.BURN_LIMIT]:$A});ee[X.OPERATION]=v1(ee),ee[X.OP_ACTIVATE_ACCOUNT]=e=>ve(ee)(Io)(e),ee[X.OP_DELEGATION]=e=>ve(ee)(Mo)(e),ee[X.OP_TRANSACTION]=e=>ve(ee)(Bo)(e),ee[X.OP_ORIGINATION]=e=>ve(ee)(Co)(e),ee[X.OP_BALLOT]=e=>ve(ee)(Uo)(e),ee[X.OP_ENDORSEMENT]=e=>ve(ee)(ko)(e),ee[X.OP_SEED_NONCE_REVELATION]=e=>ve(ee)(Do)(e),ee[X.OP_PROPOSALS]=e=>ve(ee)(Fo)(e),ee[X.OP_REVEAL]=e=>ve(ee)(No)(e),ee[X.OP_REGISTER_GLOBAL_CONSTANT]=e=>ve(ee)(Ho)(e),ee[X.OP_TRANSFER_TICKET]=e=>ve(ee)(Bu)(e),ee[X.OP_TX_ROLLUP_ORIGINATION]=e=>ve(ee)(Cu)(e),ee[X.OP_TX_ROLLUP_SUBMIT_BATCH]=e=>ve(ee)(Uu)(e),ee[X.MANAGER]=ve(ee)(S0);const zA=Ko.Psithaca2;function VA(e,t){return t===Ko.Psithaca2||yA(t,Ko.Psithaca2)?{encoder:de[e],decoder:r=>{const n=nr.fromHexString(r);return le[e](n)}}:{encoder:te[e],decoder:r=>{const n=nr.fromHexString(r);return ee[e](n)}}}class b1{constructor(t=zA){this.protocolHash=t,this.codec=VA(X.MANAGER,this.protocolHash)}forge(t){if(AE(t.branch)!==bt.VALID)throw new MS(`The block hash ${t.branch} is invalid`);for(const n of t.contents){if(!xA(n.kind))throw new ii(n.kind);const i=bA(n);if(i.length===1){if(n.kind==="delegation"&&i[0]==="delegate")continue;if(n.kind==="origination"&&i[0]==="delegate")continue;if(n.kind==="transaction"&&i[0]==="parameters")continue;if(n.kind==="tx_rollup_submit_batch"&&i[0]==="burn_limit")continue;throw new Wp(`Missing properties: ${i.join(", ").toString()}`)}else if(i.length>1)throw new Wp(`Missing properties: ${i.join(", ").toString()}`)}const r=this.codec.encoder(t).toLowerCase();return Promise.resolve(r)}parse(t){return Promise.resolve(this.codec.decoder(t))}}new b1;function Yi(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function tt(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{h(n.next(f))}catch(y){o(y)}}function u(f){try{h(n.throw(f))}catch(y){o(y)}}function h(f){f.done?s(f.value):i(f.value).then(a,u)}h((n=n.apply(e,t||[])).next())})}class jA{constructor(t){this.context=t}inject(t){return this.context.rpc.injectOperation(t)}}class A0 extends Error{constructor(){super("No signer has been configured. Please configure one by calling setProvider({signer}) on your TezosToolkit instance."),this.name="UnconfiguredSignerError"}}class ku{publicKey(){return tt(this,void 0,void 0,function*(){throw new A0})}publicKeyHash(){return tt(this,void 0,void 0,function*(){throw new A0})}secretKey(){return tt(this,void 0,void 0,function*(){throw new A0})}sign(t,r){return tt(this,void 0,void 0,function*(){throw new A0})}}function y1(e){return new Se(t=>(e.on("data",r=>{t.next(r)}),e.on("error",r=>{t.error(r)}),e.on("close",()=>{t.complete()}),()=>{e.close()}))}var yi;(function(e){e[e.DELEGATION=10600]="DELEGATION",e[e.ORIGINATION=10600]="ORIGINATION",e[e.TRANSFER=10600]="TRANSFER",e[e.REVEAL=1100]="REVEAL"})(yi||(yi={}));var wi;(function(e){e[e.DELEGATION=1257]="DELEGATION",e[e.ORIGINATION=1e4]="ORIGINATION",e[e.TRANSFER=1e4]="TRANSFER",e[e.REVEAL=374]="REVEAL"})(wi||(wi={}));var Ei;(function(e){e[e.DELEGATION=0]="DELEGATION",e[e.ORIGINATION=257]="ORIGINATION",e[e.TRANSFER=257]="TRANSFER",e[e.REVEAL=0]="REVEAL"})(Ei||(Ei={}));var ir;(function(e){e.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",e.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",e.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",e.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",e.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",e.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",e.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",e.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",e.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",e.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",e.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",e.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",e.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(ir||(ir={})),ir.Pt24m4xi,ir.PsBABY5H,ir.PsBabyM1,ir.PsCARTHA,ir.PsDELPH1,ir.PtEdo2Zk,ir.PsFLorena,ir.PtGRANADs,ir.PtHangz2,ir.PsiThaCa,ir.Psithaca2,ir.PtJakart2,ir.ProtoALpha;var w1;(function(e){e.MAINNET="NetXdQprcVkpaWU",e.CARTHAGENET="NetXjD3HPJJjmcd",e.DELPHINET="NetXm8tYqnMWky1",e.EDONET="NetXSgo1ZT2DRUG",e.FLORENCENET="NetXxkAx4woPLyu",e.GRANADANET="NetXz969SFaFn8k",e.HANGZHOUNET="NetXZSsxBpMQeAT",e.ITHACANET="NetXbhmtAbMukLc",e.ITHACANET2="NetXnHfVqm9iesp",e.JAKARTANET2="NetXLH1uAxK7CCh"})(w1||(w1={}));const GA=6,qA=3;function E1(e){switch(e){case"tz":return GA;case"mtz":return qA;case"mutez":default:return 0}}function Du(e="mutez",t="mutez",r){const n=new vt(r);return n.isNaN()?r:n.multipliedBy(Math.pow(10,E1(e))).dividedBy(Math.pow(10,E1(t)))}class _1 extends Error{constructor(t,r,n){super(`${t} Received ${n.length} arguments while expecting one of the following signatures (${JSON.stringify(r)})`),this.smartContractMethodName=t,this.sigs=r,this.args=n,this.name="Invalid parameters error"}}class WA extends Error{constructor(t){super(`Since Babylon delegation source can no longer be a contract address ${t}. Please use the smart contract abstraction to set your delegate.`),this.source=t,this.name="Invalid delegation source error"}}class P0 extends Error{constructor(t,r){super(t),this.message=t,this.data=r,this.name="InvalidCodeParameter"}}class S1 extends Error{constructor(t,r){super(t),this.message=t,this.data=r,this.name="InvalidInitParameter"}}class YA extends Error{constructor(t,r,n,i){super(`Unable to encode the parameter of the view: ${t}. Received ${n} as parameter while expecting one of the following signatures (${JSON.stringify(r)})`),this.smartContractViewName=t,this.sigs=r,this.args=n,this.originalError=i,this.name="Invalid view parameters error",this.cause=i}}class A1 extends Error{constructor(t,r,n,i){super(t),this.message=t,this.viewName=r,this.failWith=n,this.originalError=i,this.name="ViewSimulationError"}}const XA=e=>{if(ZA(e.body)){const t=JSON.parse(e.body);if(Array.isArray(t)&&"with"in t[t.length-1])return t[t.length-1].with}},ZA=e=>{try{JSON.parse(e)}catch{return!1}return!0};class P1 extends Error{constructor(t){super(`${t} Please configure the context of the view execution in the executeView method.`),this.info=t,this.name="InvalidViewSimulationContext"}}class JA extends Error{constructor(t){super(t),this.message=t,this.name="RevealOperationError"}}class QA extends Error{constructor(t){super(t),this.message=t,this.name="OriginationParameterError"}}const T0=({code:e,init:t,balance:r="0",delegate:n,storage:i,fee:s=wi.ORIGINATION,gasLimit:o=yi.ORIGINATION,storageLimit:a=Ei.ORIGINATION,mutez:u=!1})=>tt(void 0,void 0,void 0,function*(){if(i!==void 0&&t!==void 0)throw new QA("Storage and Init cannot be set a the same time. Please either use storage or init but not both.");if(!Array.isArray(e))throw new P0("Wrong code parameter type, expected an array",e);let h;if(i!==void 0){const w=e.find(I=>"prim"in I&&I.prim==="storage");if(w?.args===void 0)throw new P0("The storage section is missing from the script",e);h=new ar(w.args[0]).Encode(i)}else if(t!==void 0&&typeof t=="object")h=t;else throw new S1("Wrong init parameter type, expected JSON Michelson",t);const f={code:e,storage:h},y={kind:ct.ORIGINATION,fee:s,gas_limit:o,storage_limit:a,balance:u?r.toString():Du("tz","mutez",r).toString(),script:f};return n&&(y.delegate=n),y}),R0=({to:e,amount:t,parameter:r,fee:n=wi.TRANSFER,gasLimit:i=yi.TRANSFER,storageLimit:s=Ei.TRANSFER,mutez:o=!1})=>tt(void 0,void 0,void 0,function*(){return{kind:ct.TRANSACTION,fee:n,gas_limit:i,storage_limit:s,amount:o?t.toString():Du("tz","mutez",t).toString(),destination:e,parameters:r}}),L0=({delegate:e,source:t,fee:r=wi.DELEGATION,gasLimit:n=yi.DELEGATION,storageLimit:i=Ei.DELEGATION})=>tt(void 0,void 0,void 0,function*(){return{kind:ct.DELEGATION,source:t,fee:r,gas_limit:n,storage_limit:i,delegate:e}}),T1=({fee:e=wi.DELEGATION,gasLimit:t=yi.DELEGATION,storageLimit:r=Ei.DELEGATION},n)=>tt(void 0,void 0,void 0,function*(){return{kind:ct.DELEGATION,fee:e,gas_limit:t,storage_limit:r,delegate:n}}),$o=({fee:e=wi.REVEAL,gasLimit:t=yi.REVEAL,storageLimit:r=Ei.REVEAL},n,i)=>tt(void 0,void 0,void 0,function*(){return{kind:ct.REVEAL,fee:e,public_key:i,source:n,gas_limit:t,storage_limit:r}}),O0=({value:e,source:t,fee:r,gasLimit:n,storageLimit:i})=>tt(void 0,void 0,void 0,function*(){return{kind:ct.REGISTER_GLOBAL_CONSTANT,value:e,fee:r,gas_limit:n,storage_limit:i,source:t}}),I0=({source:e,fee:t,gasLimit:r,storageLimit:n})=>tt(void 0,void 0,void 0,function*(){return{kind:ct.TX_ROLLUP_ORIGINATION,fee:t,gas_limit:r,storage_limit:n,source:e,tx_rollup_origination:{}}}),N0=({content:e,rollup:t,source:r,fee:n,gasLimit:i,storageLimit:s})=>tt(void 0,void 0,void 0,function*(){return{kind:ct.TX_ROLLUP_SUBMIT_BATCH,fee:n,gas_limit:i,storage_limit:s,source:r,content:e,rollup:t}}),Fu=(e,t)=>Object.assign(Object.assign({},e),{kind:t}),R1=(e,t)=>{if(Array.isArray(e)){const r=e.find(n=>n.kind===t);if(r&&t3(r,t))return r}},t3=(e,t)=>e.kind===t,L1=e=>["transaction","delegation","origination","reveal","register_global_constant","tx_rollup_origination","tx_rollup_submit_batch"].indexOf(e.kind)!==-1,Hu=e=>["transaction","delegation","origination","register_global_constant","tx_rollup_origination","tx_rollup_submit_batch"].indexOf(e.kind)!==-1,Ku=e=>"metadata"in e,Cs=e=>Ku(e)&&"operation_result"in e.metadata,e3=e=>Ku(e)&&"internal_operation_results"in e.metadata,r3=e=>"with"in e;class O1 extends Error{constructor(t,r){super(),this.errors=t,this.errorDetails=r,this.name="TezosOperationError";const n=t[t.length-1];this.id=n.id,this.kind=n.kind,this.message=`(${this.kind}) ${this.id}`,r3(n)&&(n.with.string?this.message=n.with.string:n.with.int?this.message=n.with.int:this.message=JSON.stringify(n.with))}}class n3 extends Error{constructor(t){super("Preapply returned an unexpected result"),this.result=t,this.name="TezosPreapplyFailureError"}}const yn=e=>{const t=Array.isArray(e)?e:[e],r=[];for(let n=0;n<t.length;n++)for(let i=0;i<t[n].contents.length;i++){const s=t[n].contents[i];Cs(s)&&(r.push(Object.assign({fee:s.fee},s.metadata.operation_result)),Array.isArray(s.metadata.internal_operation_results)&&s.metadata.internal_operation_results.forEach(o=>r.push(o.result)))}return r},Us=(e,t="failed")=>{const r=Array.isArray(e)?e:[e];let n=[];for(let i=0;i<r.length;i++)for(let s=0;s<r[i].contents.length;s++){const o=r[i].contents[s];if(Ku(o)&&(Cs(o)&&o.metadata.operation_result.status===t&&(n=n.concat(o.metadata.operation_result.errors||[])),e3(o)&&Array.isArray(o.metadata.internal_operation_results)))for(const a of o.metadata.internal_operation_results)"result"in a&&a.result.status===t&&(n=n.concat(a.result.errors||[]))}return n};class i3 extends Error{constructor(t){super(t),this.message=t,this.name="OriginationOperationError"}}class I1 extends Error{constructor(t){super(t),this.message=t,this.name="InvalidConfirmationCountError"}}class s3 extends Error{constructor(t){super(t),this.message=t,this.name="ConfirmationUndefinedError"}}class o3 extends Error{constructor(t){super(t),this.message=t,this.name="InvalidFilterExpressionError"}}class $n{constructor(t,r,n,i){if(this.hash=t,this.raw=r,this.results=n,this.context=i,this._pollingConfig$=new o0(1),this.currentHead$=this._pollingConfig$.pipe($i(s=>Yd(()=>y1(this.context.stream.subscribeBlock("head"))).pipe(np(s.timeout*1e3,au(new Error("Confirmation polling timed out"))))),So({refCount:!0})),this.confirmed$=this.currentHead$.pipe(Hi(s=>{for(let o=3;o>=0;o--)s.operations[o].forEach(a=>{a.hash===this.hash&&(this._foundAt=s.header.level)});if(s.header.level-this._foundAt>=0)return this._foundAt}),c0(s=>s!==void 0),Rn(),So()),this._foundAt=Number.POSITIVE_INFINITY,bd(this.hash)!==bt.VALID)throw new pd(this.hash);this.confirmed$.pipe(Rn(),lu(()=>yo(Hd))).subscribe()}get includedInBlock(){return this._foundAt}get revealOperation(){return Array.isArray(this.results)&&this.results.find(t=>t.kind==="reveal")}get revealStatus(){return this.revealOperation?this.revealOperation.metadata.operation_result.status:"unknown"}get status(){return this.results.map(t=>Cs(t)?t.metadata.operation_result.status:"unknown")[0]||"unknown"}confirmation(t,r){return tt(this,void 0,void 0,function*(){if(typeof t<"u"&&t<1)throw new I1("Confirmation count must be at least 1");const{defaultConfirmationCount:n,confirmationPollingTimeoutSecond:i}=this.context.config;this._pollingConfig$.next({timeout:r||i});const s=t!==void 0?t:n;return new Promise((o,a)=>{this.confirmed$.pipe($i(()=>this.currentHead$),c0(u=>u.header.level-this._foundAt>=s-1),Rn()).subscribe(u=>{o(this._foundAt+(s-1))},a)})})}}class a3 extends $n{constructor(t,r,n,i,s,o){super(t,i,s,o),this.params=r,this.source=n}sumProp(t,r){return t.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}get status(){return this.results.filter(t=>N1.indexOf(t.kind)!==-1).map(t=>Cs(t)?t.metadata.operation_result.status:"unknown")[0]||"unknown"}get fee(){return this.sumProp(this.params,"fee")}get gasLimit(){return this.sumProp(this.params,"gas_limit")}get storageLimit(){return this.sumProp(this.params,"storage_limit")}get consumedGas(){return String(this.sumProp(yn({contents:this.results}),"consumed_gas"))}get storageDiff(){return String(this.sumProp(yn({contents:this.results}),"paid_storage_size_diff"))}get errors(){return Us({contents:this.results})}}class M0{constructor(t){this.context=t}get rpc(){return this.context.rpc}get signer(){return this.context.signer}isRevealOpNeeded(t,r){return tt(this,void 0,void 0,function*(){return!(!(yield this.isAccountRevealRequired(r))||!this.isRevealRequiredForOpType(t))})}isAccountRevealRequired(t){return tt(this,void 0,void 0,function*(){return!(yield this.context.readProvider.isAccountRevealed(t,"head"))})}isRevealRequiredForOpType(t){let r=!1;for(const n of t)Hu(n)&&(r=!0);return r}prepareOperation({operation:t,source:r},n){return tt(this,void 0,void 0,function*(){const i={};let s=[];const o=this.context.readProvider.getBlockHash("head~2"),a=this.context.readProvider.getNextProtocol("head");Array.isArray(t)?s=[...t]:s=[t];const u=n||(yield this.signer.publicKeyHash());let h=Promise.resolve(void 0);for(let T=0;T<s.length;T++)if(Hu(s[T])||s[T].kind==="reveal"){h=this.context.readProvider.getCounter(u,"head");break}const[f,y,w]=yield Promise.all([o,a,h]),L=parseInt(w||"0",10);(!i[u]||i[u]<L)&&(i[u]=L);const I=T=>({counter:`${++i[u]}`,fee:typeof T.fee>"u"?"0":`${T.fee}`,gas_limit:typeof T.gas_limit>"u"?"0":`${T.gas_limit}`,storage_limit:typeof T.storage_limit>"u"?"0":`${T.storage_limit}`}),B=T=>({source:typeof T.source>"u"?r||u:T.source}),k=(T=>T.map(D=>{switch(D.kind){case ct.ACTIVATION:return Object.assign({},D);case ct.ORIGINATION:return Object.assign(Object.assign(Object.assign(Object.assign({},D),{balance:typeof D.balance<"u"?`${D.balance}`:"0"}),B(D)),I(D));case ct.TRANSACTION:{const F=Object.assign(Object.assign(Object.assign(Object.assign({},D),{amount:typeof D.amount<"u"?`${D.amount}`:"0"}),B(D)),I(D));if(F.source.toLowerCase().startsWith("kt1"))throw new gd(`KT1 addresses are not supported as source since ${ir.PsBabyM1}`);return F}case ct.REVEAL:case ct.DELEGATION:case ct.REGISTER_GLOBAL_CONSTANT:case ct.TX_ROLLUP_ORIGINATION:case ct.TX_ROLLUP_SUBMIT_BATCH:return Object.assign(Object.assign(Object.assign({},D),B(D)),I(D));default:throw new ii(D.kind)}}))(s);return{opOb:{branch:f,contents:k,protocol:y},counter:L}})}forge({opOb:{branch:t,contents:r,protocol:n},counter:i}){return tt(this,void 0,void 0,function*(){return{opbytes:yield this.context.forger.forge({branch:t,contents:r}),opOb:{branch:t,contents:r,protocol:n},counter:i}})}simulate(t){return tt(this,void 0,void 0,function*(){return{opResponse:yield this.rpc.runOperation(t),op:t,context:this.context.clone()}})}estimate(t,r){var{fee:n,gasLimit:i,storageLimit:s}=t,o=Yi(t,["fee","gasLimit","storageLimit"]);return tt(this,void 0,void 0,function*(){let a=n,u=i,h=s;if(n===void 0||i===void 0||s===void 0){const f=yield r(Object.assign({fee:n,gasLimit:i,storageLimit:s},o));a===void 0&&(a=f.suggestedFeeMutez),u===void 0&&(u=f.gasLimit),h===void 0&&(h=f.storageLimit)}return{fee:a,gasLimit:u,storageLimit:h}})}signAndInject(t){return tt(this,void 0,void 0,function*(){const r=yield this.signer.sign(t.opbytes,new Uint8Array([3]));t.opbytes=r.sbytes,t.opOb.signature=r.prefixSig;const n=[],i=yield this.rpc.preapplyOperations([t.opOb]);if(!Array.isArray(i))throw new n3(i);for(let o=0;o<i.length;o++)for(let a=0;a<i[o].contents.length;a++)n.push(i[o].contents[a]);const s=Us(i);if(s.length)throw new O1(s,"Error occurred during validation simulation of operation");return{hash:yield this.context.injector.inject(t.opbytes),forgedBytes:t,opResponse:n,context:this.context.clone()}})}}const N1=[ct.ACTIVATION,ct.ORIGINATION,ct.TRANSACTION,ct.DELEGATION];class M1 extends M0{constructor(t,r){super(t),this.estimator=r,this.operations=[]}withTransfer(t){if(ye(t.to)!==bt.VALID)throw new Pe(t.to);return this.operations.push(Object.assign({kind:ct.TRANSACTION},t)),this}withContractCall(t){return this.withTransfer(t.toTransferParams())}withDelegation(t){if(t.source&&ye(t.source)!==bt.VALID)throw new Pe(t.source);if(t.delegate&&ye(t.delegate)!==bt.VALID)throw new Pe(t.delegate);return this.operations.push(Object.assign({kind:ct.DELEGATION},t)),this}withActivation({pkh:t,secret:r}){if(Qc(t)!==bt.VALID)throw new Jc(t);return this.operations.push({kind:ct.ACTIVATION,pkh:t,secret:r}),this}withOrigination(t){return this.operations.push(Object.assign({kind:ct.ORIGINATION},t)),this}withRegisterGlobalConstant(t){return this.operations.push(Object.assign({kind:ct.REGISTER_GLOBAL_CONSTANT},t)),this}withTxRollupOrigination(t){return this.operations.push(Object.assign({kind:ct.TX_ROLLUP_ORIGINATION},t)),this}withTxRollupSubmitBatch(t){return this.operations.push(Object.assign({kind:ct.TX_ROLLUP_SUBMIT_BATCH},t)),this}getRPCOp(t){return tt(this,void 0,void 0,function*(){switch(t.kind){case ct.TRANSACTION:return R0(Object.assign({},t));case ct.ORIGINATION:return T0(yield this.context.parser.prepareCodeOrigination(Object.assign({},t)));case ct.DELEGATION:return L0(Object.assign({},t));case ct.ACTIVATION:return Object.assign({},t);case ct.REGISTER_GLOBAL_CONSTANT:return O0(Object.assign({},t));case ct.TX_ROLLUP_ORIGINATION:return I0(Object.assign({},t));case ct.TX_ROLLUP_SUBMIT_BATCH:return N0(Object.assign({},t));default:throw new ii(t.kind)}})}with(t){for(const r of t)switch(r.kind){case ct.TRANSACTION:this.withTransfer(r);break;case ct.ORIGINATION:this.withOrigination(r);break;case ct.DELEGATION:this.withDelegation(r);break;case ct.ACTIVATION:this.withActivation(r);break;case ct.REGISTER_GLOBAL_CONSTANT:this.withRegisterGlobalConstant(r);break;case ct.TX_ROLLUP_ORIGINATION:this.withTxRollupOrigination(r);break;case ct.TX_ROLLUP_SUBMIT_BATCH:this.withTxRollupSubmitBatch(r);break;default:throw new ii(r.kind)}return this}send(t){return tt(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.signer.publicKey(),i=yield this.estimator.batch(this.operations),s=yield this.isRevealOpNeeded(this.operations,r);let o=s?1:0;const a=[];for(const B of this.operations){if(L1(B)){const C=yield this.estimate(B,()=>tt(this,void 0,void 0,function*(){return i[o]}));a.push(yield this.getRPCOp(Object.assign(Object.assign({},B),C)))}else a.push(Object.assign({},B));o++}if(s){const B={kind:ct.REVEAL},C=yield this.estimate(B,()=>tt(this,void 0,void 0,function*(){return i[0]}));a.unshift(yield $o(Object.assign({},C),r,n))}const u=t&&t.source||r,h=yield this.prepareOperation({operation:a,source:u}),f=yield this.forge(h),{hash:y,context:w,forgedBytes:L,opResponse:I}=yield this.signAndInject(f);return new a3(y,a,u,L,I,w)})}}class c3{constructor(t,r){this.context=t,this.estimator=r}batch(t){const r=new M1(this.context,this.estimator);return Array.isArray(t)&&r.with(t),r}}const u3=(e,{ALLOCATION_BURN:t,ORIGINATION_BURN:r}={ALLOCATION_BURN:257,ORIGINATION_BURN:257})=>{const n=yn({contents:e});let i=new vt(0),s=new vt(0),o=new vt(0),a=new vt(0),u=new vt(0),h=new vt(0);return n.forEach(f=>{o=o.plus(f.fee||0),a=a.plus(Array.isArray(f.originated_contracts)?f.originated_contracts.length*r:0),u=u.plus("allocated_destination_contract"in f?t:0),i=i.plus(f.consumed_gas||0),h=h.plus("paid_storage_size_diff"in f&&Number(f.paid_storage_size_diff)||0)}),s=s.plus(u).plus(a).plus(h),{totalFee:o,totalGas:i,totalStorage:s,totalAllocationBurn:u,totalOriginationBurn:a,totalPaidStorageDiff:h,totalStorageBurn:new vt(s.multipliedBy(1e3))}};class f3 extends Error{constructor(){super("Taquito missed a block while waiting for operation confirmation and was not able to find the operation"),this.name="MissedBlockDuringConfirmationError"}}const h3=60;class zo{constructor(t,r,n){if(this.opHash=t,this.context=r,this._newHead$=n,this._operationResult=new o0(1),this._includedInBlock=new o0(1),this._included=!1,this.newHead$=this._newHead$.pipe(du(i=>{if(!this._included&&this.lastHead&&i.header.level-this.lastHead.header.level>1)throw new f3;this.lastHead=i}),So({bufferSize:1,refCount:!0})),this.confirmed$=this.newHead$.pipe(Hi(i=>{for(const s of i.operations)for(const o of s)if(o.hash===this.opHash)return this._included=!0,this._includedInBlock.next(i),this._operationResult.next(o.contents),i}),c0(i=>typeof i<"u"),Rn(),So({bufferSize:1,refCount:!0})),bd(this.opHash)!==bt.VALID)throw new pd(this.opHash);this.confirmed$.pipe(Rn(),lu(()=>yo(void 0))).subscribe()}operationResults(){return tt(this,void 0,void 0,function*(){return this._operationResult.pipe(Rn()).toPromise()})}receipt(){return tt(this,void 0,void 0,function*(){return u3(yield this.operationResults())})}getCurrentConfirmation(){return tt(this,void 0,void 0,function*(){return this._included?Wd([this._includedInBlock,Ki(this.context.readProvider.getBlock("head"))]).pipe(Hi(([t,r])=>r.header.level-t.header.level+1),Rn()).toPromise():0})}isInCurrentBranch(t="head"){return tt(this,void 0,void 0,function*(){if(!this._included)return!0;const r=yield this.context.readProvider.getBlockLevel(t),n=yield this._includedInBlock.pipe(Rn()).toPromise(),i=r-n.header.level;if(i<=0)return!0;const s=Math.min(n.header.level+i,n.header.level+h3);return new Set(yield this.context.readProvider.getLiveBlocks(s)).has(n.hash)})}confirmationObservable(t){if(typeof t<"u"&&t<1)throw new I1("Confirmation count must be at least 1");const{defaultConfirmationCount:r}=this.context.config,n=t!==void 0?t:r;if(n===void 0)throw new s3("Default confirmation count can not be undefined!");return Wd([this._includedInBlock,this.newHead$]).pipe(Qd(([,i],[,s])=>i.hash===s.hash),Hi(([i,s])=>({block:s,expectedConfirmation:n,currentConfirmation:s.header.level-i.header.level+1,completed:s.header.level-i.header.level>=n-1,isInCurrentBranch:()=>this.isInCurrentBranch(s.hash)})),n6(({completed:i})=>!i,!0))}confirmation(t){return this.confirmationObservable(t).toPromise()}}class l3 extends zo{constructor(t,r,n){super(t,r,n),this.opHash=t,this.context=r}revealOperation(){return tt(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ct.REVEAL)})}status(){return tt(this,void 0,void 0,function*(){return this._included?(yield this.operationResults()).filter(r=>N1.indexOf(r.kind)!==-1).map(r=>Cs(r)?r.metadata.operation_result.status:"unknown")[0]||"unknown":"pending"})}}class d3 extends zo{constructor(t,r,n){super(t,r,n),this.opHash=t,this.context=r}revealOperation(){return tt(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ct.REVEAL)})}delegationOperation(){return tt(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ct.DELEGATION)})}status(){return tt(this,void 0,void 0,function*(){if(!this._included)return"pending";const t=yield this.delegationOperation();return t?t.metadata.operation_result.status:"unknown"})}}class p3 extends zo{constructor(t,r,n){super(t,r,n),this.opHash=t,this.context=r}originationOperation(){return tt(this,void 0,void 0,function*(){const t=yield this.operationResults();return R1(t,ct.ORIGINATION)})}revealOperation(){return tt(this,void 0,void 0,function*(){const t=yield this.operationResults();return R1(t,ct.REVEAL)})}status(){return tt(this,void 0,void 0,function*(){if(!this._included)return"pending";const t=yield this.originationOperation();return t?t.metadata.operation_result.status:"unknown"})}contract(){return tt(this,void 0,void 0,function*(){const t=yield this.originationOperation(),r=(t?.metadata.operation_result.originated_contracts||[])[0];return this.context.wallet.at(r)})}}class g3 extends zo{constructor(t,r,n){super(t,r,n),this.opHash=t,this.context=r}revealOperation(){return tt(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ct.REVEAL)})}transactionOperation(){return tt(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ct.TRANSACTION)})}status(){return tt(this,void 0,void 0,function*(){if(!this._included)return"pending";const t=yield this.transactionOperation();return t?t.metadata.operation_result.status:"unknown"})}}const v3=(e,t,r)=>e.pipe(np(t.config.confirmationPollingTimeoutSecond*1e3,au(new Error("Confirmation polling timed out")),r),So({refCount:!0,scheduler:r}));class m3{constructor(t){this.context=t,this.sharedHeadObs=Yd(()=>y1(this.context.stream.subscribeBlock("head")))}createNewHeadObservable(){return tt(this,void 0,void 0,function*(){return v3(this.sharedHeadObs,this.context)})}createPastBlockWalker(t,r=1){return Ki(this.context.readProvider.getBlock(t)).pipe($i(n=>r===1?yo(n):P_(n.header.level,r-1).pipe(Z_(n),Jd(i=>tt(this,void 0,void 0,function*(){return this.context.readProvider.getBlock(typeof i=="number"?i:i.header.level)})))))}createHeadObservableFromConfig({blockIdentifier:t}){return tt(this,void 0,void 0,function*(){const r=[];return t&&r.push(this.createPastBlockWalker(t)),r.push(yield this.createNewHeadObservable()),hu(...r)})}createOperation(t,r={}){return tt(this,void 0,void 0,function*(){return new zo(t,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createBatchOperation(t,r={}){return tt(this,void 0,void 0,function*(){return new l3(t,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createTransactionOperation(t,r={}){return tt(this,void 0,void 0,function*(){return new g3(t,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createDelegationOperation(t,r={}){return tt(this,void 0,void 0,function*(){return new d3(t,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createOriginationOperation(t,r={}){return tt(this,void 0,void 0,function*(){return new p3(t,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}}class x3 extends M0{constructor(t){super(t)}getBalance(t){return tt(this,void 0,void 0,function*(){if(ye(t)!==bt.VALID)throw new Pe(t);return this.context.readProvider.getBalance(t,"head")})}getDelegate(t){return tt(this,void 0,void 0,function*(){if(ye(t)!==bt.VALID)throw new Pe(t);return this.context.readProvider.getDelegate(t,"head")})}activate(t,r){return tt(this,void 0,void 0,function*(){if(Qc(t)!==bt.VALID)throw new Jc(t);const n={kind:ct.ACTIVATION,pkh:t,secret:r},i=yield this.prepareOperation({operation:[n],source:t}),s=yield this.forge(i),o=`${s.opbytes}00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000`;return new $n(yield this.rpc.injectOperation(o),Object.assign(Object.assign({},s),{opbytes:o}),[],this.context.clone())})}}const B0=100,b3=1,y3=.1,B1=100;class Nr{constructor(t,r,n,i,s=B0){this._milligasLimit=t,this._storageLimit=r,this.opSize=n,this.minimalFeePerStorageByteMutez=i,this.baseFeeMutez=s}get burnFeeMutez(){return this.roundUp(Number(this.storageLimit)*Number(this.minimalFeePerStorageByteMutez))}get storageLimit(){const t=Math.max(Number(this._storageLimit),0);return t>0?t:0}get gasLimit(){return this.roundUp(Number(this._milligasLimit)/1e3+B1)}get operationFeeMutez(){return(Number(this._milligasLimit)/1e3+B1)*y3+Number(this.opSize)*b3}roundUp(t){return Math.ceil(Number(t))}get minimalFeeMutez(){return this.roundUp(B0+this.operationFeeMutez)}get suggestedFeeMutez(){return this.roundUp(this.operationFeeMutez+B0*2)}get usingBaseFeeMutez(){return Math.max(Number(this.baseFeeMutez),B0)+this.roundUp(this.operationFeeMutez)}get totalCost(){return this.minimalFeeMutez+this.burnFeeMutez}get consumedMilligas(){return Number(this._milligasLimit)}static createEstimateInstanceFromProperties(t){let r=0,n=0,i=0,s=0,o;return t.forEach(a=>{r+=a.milligasLimit,n+=a.storageLimit,i+=a.opSize,s=Math.max(a.minimalFeePerStorageByteMutez,s),a.baseFeeMutez&&(o=o?o+a.baseFeeMutez:a.baseFeeMutez)}),new Nr(r,n,i,s,o)}static createArrayEstimateInstancesFromProperties(t){return t.map(r=>new Nr(r.milligasLimit,r.storageLimit,r.opSize,r.minimalFeePerStorageByteMutez,r.baseFeeMutez))}}class C1 extends Error{constructor(){super("Unable to estimate the reveal operation, the public key is unknown"),this.name="Reveal Estimate Error"}}const Mr=(e,t)=>({fee:typeof e.fee>"u"?t.fee:e.fee,gasLimit:typeof e.gasLimit>"u"?t.gasLimit:e.gasLimit,storageLimit:typeof e.storageLimit>"u"?t.storageLimit:e.storageLimit}),w3="edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg";class E3 extends M0{constructor(){super(...arguments),this.ALLOCATION_STORAGE=257,this.ORIGINATION_STORAGE=257,this.OP_SIZE_REVEAL=128}getKeys(){return tt(this,void 0,void 0,function*(){const t=this.context.isAnySignerConfigured();return{publicKeyHash:t?yield this.signer.publicKeyHash():yield this.context.walletProvider.getPKH(),publicKey:t?yield this.signer.publicKey():void 0}})}getAccountLimits(t,r,n){return tt(this,void 0,void 0,function*(){const i=yield this.context.readProvider.getBalance(t,"head"),{hard_gas_limit_per_operation:s,hard_gas_limit_per_block:o,hard_storage_limit_per_operation:a,cost_per_byte:u}=r;return{fee:0,gasLimit:n?Math.floor(this.ajustGasForBatchOperation(o,s,n).toNumber()):s.toNumber(),storageLimit:Math.floor(vt.min(i.dividedBy(u),a).toNumber())}})}ajustGasForBatchOperation(t,r,n){return vt.min(r,t.div(n+1))}getEstimationPropertiesFromOperationContent(t,r,n,i){const s=yn({contents:[t]});let o=0,a=0,u=0;return s.forEach(h=>{u+="originated_contracts"in h&&typeof h.originated_contracts<"u"?h.originated_contracts.length*this.ORIGINATION_STORAGE:0,u+="allocated_destination_contract"in h?this.ALLOCATION_STORAGE:0,o+=Number(h.consumed_gas)||0,a+=Number(h.consumed_milligas)||0,u+="paid_storage_size_diff"in h&&Number(h.paid_storage_size_diff)||0,u+="storage_size"in h&&"global_address"in h&&Number(h.storage_size)||0,u+="originated_rollup"in h?i:0}),o!==0&&a===0&&(a=o*1e3),L1(t)?{milligasLimit:a||0,storageLimit:Number(u||0),opSize:r,minimalFeePerStorageByteMutez:n.toNumber()}:{milligasLimit:0,storageLimit:0,opSize:r,minimalFeePerStorageByteMutez:n.toNumber(),baseFeeMutez:0}}prepareEstimate(t,r,n){return tt(this,void 0,void 0,function*(){const i=yield this.prepareOperation(t,n),{opbytes:s,opOb:{branch:o,contents:a}}=yield this.forge(i),u={operation:{branch:o,contents:a,signature:w3},chain_id:yield this.context.readProvider.getChainId()},{opResponse:h}=yield this.simulate(u),{cost_per_byte:f,tx_rollup_origination_size:y}=r,w=[...Us(h,"backtracked"),...Us(h)];if(w.length)throw new O1(w,"Error occurred during estimation");let L=1;return Array.isArray(t.operation)&&t.operation.length>1&&(L=h.contents[0].kind==="reveal"?t.operation.length-1:t.operation.length),h.contents.map(I=>this.getEstimationPropertiesFromOperationContent(I,I.kind==="reveal"?this.OP_SIZE_REVEAL/2:s.length/2/L,f,y??0))})}originate(t){var{fee:r,storageLimit:n,gasLimit:i}=t,s=Yi(t,["fee","storageLimit","gasLimit"]);return tt(this,void 0,void 0,function*(){const{publicKeyHash:o}=yield this.getKeys(),a=yield this.context.readProvider.getProtocolConstants("head"),u=yield this.getAccountLimits(o,a),h=yield T0(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},s),Mr({fee:r,storageLimit:n,gasLimit:i},u)))),f=yield this.isRevealOpNeeded([h],o),y=f?yield this.addRevealOp([h],o):h,w=yield this.prepareEstimate({operation:y,source:o},a,o);return f&&w.shift(),Nr.createEstimateInstanceFromProperties(w)})}transfer(t){var{fee:r,storageLimit:n,gasLimit:i}=t,s=Yi(t,["fee","storageLimit","gasLimit"]);return tt(this,void 0,void 0,function*(){if(ye(s.to)!==bt.VALID)throw new Pe(s.to);if(s.source&&ye(s.source)!==bt.VALID)throw new Pe(s.source);const o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),u=yield this.getAccountLimits(o,a),h=yield R0(Object.assign(Object.assign({},s),Mr({fee:r,storageLimit:n,gasLimit:i},u))),f=yield this.isRevealOpNeeded([h],o),y=f?yield this.addRevealOp([h],o):h,w=yield this.prepareEstimate({operation:y,source:o},a,o);return f&&w.shift(),Nr.createEstimateInstanceFromProperties(w)})}setDelegate(t){var{fee:r,gasLimit:n,storageLimit:i}=t,s=Yi(t,["fee","gasLimit","storageLimit"]);return tt(this,void 0,void 0,function*(){if(s.source&&ye(s.source)!==bt.VALID)throw new Pe(s.source);if(s.delegate&&ye(s.delegate)!==bt.VALID)throw new Pe(s.delegate);const o=(yield this.getKeys()).publicKeyHash,a=s.source||o,u=yield this.context.readProvider.getProtocolConstants("head"),h=yield this.getAccountLimits(a,u),f=yield L0(Object.assign(Object.assign({},s),Mr({fee:r,storageLimit:i,gasLimit:n},h))),y=yield this.isRevealOpNeeded([f],o),w=y?yield this.addRevealOp([f],o):f,L=yield this.prepareEstimate({operation:w,source:o},u,o);return y&&L.shift(),Nr.createEstimateInstanceFromProperties(L)})}batch(t){return tt(this,void 0,void 0,function*(){const{publicKeyHash:r}=yield this.getKeys();let n=[];const i=yield this.context.readProvider.getProtocolConstants("head"),s=yield this.getAccountLimits(r,i,t.length);for(const u of t)switch(u.kind){case ct.TRANSACTION:n.push(yield R0(Object.assign(Object.assign({},u),Mr(u,s))));break;case ct.ORIGINATION:n.push(yield T0(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},u),Mr(u,s)))));break;case ct.DELEGATION:n.push(yield L0(Object.assign(Object.assign({},u),Mr(u,s))));break;case ct.ACTIVATION:n.push(Object.assign(Object.assign({},u),s));break;case ct.REGISTER_GLOBAL_CONSTANT:n.push(yield O0(Object.assign(Object.assign({},u),Mr(u,s))));break;case ct.TX_ROLLUP_ORIGINATION:n.push(yield I0(Object.assign(Object.assign({},u),Mr(u,s))));break;case ct.TX_ROLLUP_SUBMIT_BATCH:n.push(yield N0(Object.assign(Object.assign({},u),Mr(u,s))));break;default:throw new ii(t.kind)}n=(yield this.isRevealOpNeeded(n,r))?yield this.addRevealOp(n,r):n;const a=yield this.prepareEstimate({operation:n,source:r},i,r);return Nr.createArrayEstimateInstancesFromProperties(a)})}registerDelegate(t){return tt(this,void 0,void 0,function*(){const r=(yield this.getKeys()).publicKeyHash,n=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.getAccountLimits(r,n),s=yield T1(Object.assign(Object.assign({},t),i),r),o=yield this.isRevealOpNeeded([s],r),a=o?yield this.addRevealOp([s],r):s,u=yield this.prepareEstimate({operation:a,source:r},n,r);return o&&u.shift(),Nr.createEstimateInstanceFromProperties(u)})}reveal(t){return tt(this,void 0,void 0,function*(){const{publicKeyHash:r,publicKey:n}=yield this.getKeys();if(!n)throw new C1;if(yield this.isAccountRevealRequired(r)){const i=yield this.context.readProvider.getProtocolConstants("head"),s=yield this.getAccountLimits(r,i),o=yield $o(Object.assign(Object.assign({},t),s),r,n),a=yield this.prepareEstimate({operation:o,source:r},i,r);return Nr.createEstimateInstanceFromProperties(a)}})}registerGlobalConstant(t){var{fee:r,storageLimit:n,gasLimit:i}=t,s=Yi(t,["fee","storageLimit","gasLimit"]);return tt(this,void 0,void 0,function*(){const o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),u=yield this.getAccountLimits(o,a),h=yield O0(Object.assign(Object.assign({},s),Mr({fee:r,storageLimit:n,gasLimit:i},u))),f=yield this.isRevealOpNeeded([h],o),y=f?yield this.addRevealOp([h],o):h,w=yield this.prepareEstimate({operation:y,source:o},a,o);return f&&w.shift(),Nr.createEstimateInstanceFromProperties(w)})}txRollupOriginate(t){return tt(this,void 0,void 0,function*(){t=t||{};const{fee:r,storageLimit:n,gasLimit:i}=t,s=Yi(t,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),u=yield this.getAccountLimits(o,a),h=yield I0(Object.assign(Object.assign({},s),Mr({fee:r,storageLimit:n,gasLimit:i},u))),f=yield this.isRevealOpNeeded([h],o),y=f?yield this.addRevealOp([h],o):h,w=yield this.prepareEstimate({operation:y,source:o},a,o);return f&&w.shift(),Nr.createEstimateInstanceFromProperties(w)})}txRollupSubmitBatch(t){return tt(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=t,s=Yi(t,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),u=yield this.getAccountLimits(o,a),h=yield N0(Object.assign(Object.assign({},s),Mr({fee:r,storageLimit:n,gasLimit:i},u))),f=yield this.isRevealOpNeeded([h],o),y=f?yield this.addRevealOp([h],o):h,w=yield this.prepareEstimate({operation:y,source:o},a,o);return f&&w.shift(),Nr.createEstimateInstanceFromProperties(w)})}addRevealOp(t,r){return tt(this,void 0,void 0,function*(){const{publicKey:n}=yield this.getKeys();if(!n)throw new C1;return t.unshift(yield $o(Object.assign({fee:wi.REVEAL,gasLimit:yi.REVEAL,storageLimit:Ei.REVEAL}),r,yield this.signer.publicKey())),t})}}class U1 extends $n{constructor(t,r,n,i,s,o){super(t,i,s,o),this.params=r,this.source=n}get operationResults(){const t=Array.isArray(this.results)&&this.results.find(n=>n.kind==="delegation"),r=t&&t.metadata&&t.metadata.operation_result;return r||void 0}get status(){const t=this.operationResults;return t?t.status:"unknown"}get delegate(){return this.delegate}get isRegisterOperation(){return this.delegate===this.source}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){const t=this.operationResults&&this.operationResults.consumed_gas;return t||void 0}get errors(){return this.operationResults&&this.operationResults.errors}}class _3 extends $n{constructor(t,r,n,i,s,o){super(t,n,i,s),this.params=r,this.contractProvider=o;const a=this.operationResults&&this.operationResults.originated_contracts;Array.isArray(a)&&(this.contractAddress=a[0])}get status(){const t=this.operationResults;return t?t.status:"unknown"}get operationResults(){const t=Array.isArray(this.results)&&this.results.find(n=>n.kind==="origination"),r=t&&Cs(t)&&t.metadata.operation_result;return r||void 0}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){const t=this.operationResults&&this.operationResults.consumed_gas;return t||void 0}get storageDiff(){const t=this.operationResults&&this.operationResults.paid_storage_size_diff;return t||void 0}get storageSize(){const t=this.operationResults&&this.operationResults.storage_size;return t||void 0}get errors(){return this.operationResults&&this.operationResults.errors}contract(t,r){return tt(this,void 0,void 0,function*(){if(!this.contractAddress)throw new i3("No contract was originated in this operation");return yield this.confirmation(t,r),this.contractProvider.at(this.contractAddress)})}}class S3 extends $n{constructor(t,r,n,i,s,o){super(t,i,s,o),this.params=r,this.source=n,this.globalConstantHash=this.operationResults&&this.operationResults.global_address}get operationResults(){const t=Array.isArray(this.results)&&this.results.find(n=>n.kind==="register_global_constant"),r=t&&t.metadata&&t.metadata.operation_result;return r||void 0}get status(){const t=this.operationResults;return t?t.status:"unknown"}get registeredExpression(){return this.params.value}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){return this.operationResults&&this.operationResults.errors}}class A3 extends $n{constructor(t,r,n,i,s,o){super(t,i,s,o),this.params=r,this.source=n}get operationResults(){const t=Array.isArray(this.results)&&this.results.find(r=>r.kind==="reveal");return t?[t]:[]}get status(){const r=this.operationResults[0];return r?r.metadata.operation_result.status:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get publicKey(){return this.params.public_key}sumProp(t,r){return t.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}get consumedGas(){return String(this.sumProp(yn({contents:this.operationResults}),"consumed_gas"))}get storageDiff(){return String(this.sumProp(yn({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(yn({contents:this.operationResults}),"storage_size"))}get errors(){return Us({contents:this.operationResults})}}class P3 extends $n{constructor(t,r,n,i,s,o){super(t,i,s,o),this.params=r,this.source=n}get operationResults(){const t=Array.isArray(this.results)&&this.results.find(r=>r.kind==="transaction");return t?[t]:[]}get status(){const r=this.operationResults[0];return r?r.metadata.operation_result.status:"unknown"}get amount(){return new vt(this.params.amount)}get destination(){return this.params.destination}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}sumProp(t,r){return t.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}get consumedGas(){return String(this.sumProp(yn({contents:this.operationResults}),"consumed_gas"))}get storageDiff(){return String(this.sumProp(yn({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(yn({contents:this.operationResults}),"storage_size"))}get errors(){return Us({contents:this.operationResults})}}class T3{constructor(t,r,n,i,s,o=!0,a=!1){this.provider=t,this.address=r,this.parameterSchema=n,this.name=i,this.args=s,this.isMultipleEntrypoint=o,this.isAnonymous=a}validateArgs(t,r,n){const i=r.ExtractSignatures();if(!i.find(s=>s.length===t.length))throw new _1(n,i,t)}get schema(){return this.isAnonymous?this.parameterSchema.ExtractSchema()[this.name]:this.parameterSchema.ExtractSchema()}getSignature(){if(this.isAnonymous){const t=this.parameterSchema.ExtractSignatures().find(r=>r[0]===this.name);if(t)return t.shift(),t}else{const t=this.parameterSchema.ExtractSignatures();return t.length==1?t[0]:t}}send(t={}){return this.provider instanceof C0?this.provider.transfer(this.toTransferParams(t)).send():this.provider.transfer(this.toTransferParams(t))}toTransferParams({fee:t,gasLimit:r,storageLimit:n,source:i,amount:s=0,mutez:o=!1}={}){return{to:this.address,amount:s,fee:t,mutez:o,source:i,gasLimit:r,storageLimit:n,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:ks,value:this.isAnonymous?this.parameterSchema.Encode(this.name,...this.args):this.parameterSchema.Encode(...this.args)}}}}class R3{constructor(t,r){this.walletProvider=t,this.context=r,this.operations=[]}withTransfer(t){if(ye(t.to)!==bt.VALID)throw new Pe(t.to);return this.operations.push(Object.assign({kind:ct.TRANSACTION},t)),this}withContractCall(t){return this.withTransfer(t.toTransferParams())}withDelegation(t){if(t.delegate&&ye(t.delegate)!==bt.VALID)throw new Pe(t.delegate);return this.operations.push(Object.assign({kind:ct.DELEGATION},t)),this}withOrigination(t){return this.operations.push(Object.assign({kind:ct.ORIGINATION},t)),this}mapOperation(t){return tt(this,void 0,void 0,function*(){switch(t.kind){case ct.TRANSACTION:return this.walletProvider.mapTransferParamsToWalletParams(()=>tt(this,void 0,void 0,function*(){return t}));case ct.ORIGINATION:return this.walletProvider.mapOriginateParamsToWalletParams(()=>tt(this,void 0,void 0,function*(){return this.context.parser.prepareCodeOrigination(Object.assign({},t))}));case ct.DELEGATION:return this.walletProvider.mapDelegateParamsToWalletParams(()=>tt(this,void 0,void 0,function*(){return t}));default:throw new ii(t.kind)}})}with(t){for(const r of t)switch(r.kind){case ct.TRANSACTION:this.withTransfer(r);break;case ct.ORIGINATION:this.withOrigination(r);break;case ct.DELEGATION:this.withDelegation(r);break;default:throw new ii(r.kind)}return this}send(){return tt(this,void 0,void 0,function*(){const t=[];for(const n of this.operations)t.push(yield this.mapOperation(n));const r=yield this.walletProvider.sendOperations(t);return this.context.operationFactory.createBatchOperation(r)})}}class C0{constructor(t){this.context=t,this.walletCommand=r=>({send:r})}get walletProvider(){return this.context.walletProvider}pkh({forceRefetch:t}={}){return tt(this,void 0,void 0,function*(){return(!this._pkh||t)&&(this._pkh=yield this.walletProvider.getPKH()),this._pkh})}originate(t){return this.walletCommand(()=>tt(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapOriginateParamsToWalletParams(()=>this.context.parser.prepareCodeOrigination(Object.assign({},t))),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createOriginationOperation(n)}))}setDelegate(t){if(t.delegate&&ye(t.delegate)!==bt.VALID)throw new Pe(t.delegate);return this.walletCommand(()=>tt(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>tt(this,void 0,void 0,function*(){return t})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createDelegationOperation(n)}))}registerDelegate(){return this.walletCommand(()=>tt(this,void 0,void 0,function*(){const t=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>tt(this,void 0,void 0,function*(){return{delegate:yield this.pkh()}})),r=yield this.walletProvider.sendOperations([t]);return this.context.operationFactory.createDelegationOperation(r)}))}transfer(t){if(ye(t.to)!==bt.VALID)throw new Pe(t.to);return this.walletCommand(()=>tt(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapTransferParamsToWalletParams(()=>tt(this,void 0,void 0,function*(){return t})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createTransactionOperation(n)}))}batch(t){const r=new R3(this.walletProvider,this.context);return Array.isArray(t)&&r.with(t),r}at(t,r=n=>n){return tt(this,void 0,void 0,function*(){if(Ss(t)!==bt.VALID)throw new t0(t);const n=this.context.withExtensions().rpc,i=this.context.withExtensions().readProvider,s=yield i.getScript(t,"head"),o=yield i.getEntrypoints(t),a=new D1(t,s,this,this.context.contract,o,n,i);return r(a,this.context)})}}class k1{constructor(t){this.context=t}getPKH(){return tt(this,void 0,void 0,function*(){return this.context.signer.publicKeyHash()})}mapTransferParamsToWalletParams(t){return tt(this,void 0,void 0,function*(){return Fu(yield t(),ct.TRANSACTION)})}mapOriginateParamsToWalletParams(t){return tt(this,void 0,void 0,function*(){return Fu(yield t(),ct.ORIGINATION)})}mapDelegateParamsToWalletParams(t){return tt(this,void 0,void 0,function*(){return Fu(yield t(),ct.DELEGATION)})}sendOperations(t){return tt(this,void 0,void 0,function*(){return(yield this.context.batch.batch(t).send()).hash})}}class L3{constructor(t,r,n,i,s="unit",o=!0,a=!1){this.provider=t,this.address=r,this.parameterSchema=n,this.name=i,this.args=s,this.isMultipleEntrypoint=o,this.isAnonymous=a}getSignature(){return this.isAnonymous?this.parameterSchema.ExtractSchema()[this.name]:this.parameterSchema.ExtractSchema()}send(t={}){return this.provider instanceof C0?this.provider.transfer(this.toTransferParams(t)).send():this.provider.transfer(this.toTransferParams(t))}toTransferParams({fee:t,gasLimit:r,storageLimit:n,source:i,amount:s=0,mutez:o=!1}={}){return{to:this.address,amount:s,fee:t,mutez:o,source:i,gasLimit:r,storageLimit:n,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:ks,value:this.isAnonymous?this.parameterSchema.EncodeObject({[this.name]:this.args}):this.parameterSchema.EncodeObject(this.args)}}}}const O3=(e,t,r,n,i,s,o,a,u,h="0")=>({script:[{prim:"parameter",args:[{prim:"pair",args:[e,r]}]},{prim:"storage",args:[{prim:"option",args:[t]}]},{prim:"code",args:[[{prim:"CAR"},n,{prim:"SOME"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PAIR"}]]}],storage:{prim:"None"},input:{prim:"Pair",args:[i,s]},amount:h,balance:o,chain_id:a,source:u});class I3{constructor(t,r,n,i,s,o="Unit"){this._rpc=t,this._readProvider=r,this._contractAddress=n,this._smartContractViewSchema=i,this._contractStorageType=s,this._args=o}getSignature(){return{parameter:this._smartContractViewSchema.extractArgsSchema(),result:this._smartContractViewSchema.extractResultSchema()}}executeView(t){return tt(this,void 0,void 0,function*(){this.verifyContextExecution(t);const r=(yield this._readProvider.getBalance(this._contractAddress,"head")).toString(),n=yield this._readProvider.getChainId(),i=yield this._readProvider.getStorage(this._contractAddress,"head");return this.executeViewAndDecodeResult(O3(this._smartContractViewSchema.viewArgsType,this._smartContractViewSchema.viewReturnType,this._contractStorageType,this.adaptViewCodeToContext(this._smartContractViewSchema.instructions,t.viewCaller,r),this.transformArgsToMichelson(),i,r,n,t.source))})}verifyContextExecution(t){if(t.source&&ye(t.source)!==bt.VALID)throw new P1(`The source account who initialized the view execution is invalid: ${t.source}.`);if(!t.viewCaller||ye(t.viewCaller)!==bt.VALID)throw new P1(`The contract which is the caller of view is invalid: ${t.viewCaller}.`)}transformArgsToMichelson(){try{return this._smartContractViewSchema.encodeViewArgs(this._args)}catch(t){throw new YA(this._smartContractViewSchema.viewName,this.getSignature(),this._args,t)}}adaptViewCodeToContext(t,r,n){const i={BALANCE:[{prim:"PUSH",args:[{prim:"mutez"},{int:n}]}],SENDER:[{prim:"PUSH",args:[{prim:"address"},{string:r}]}],SELF_ADDRESS:[{prim:"PUSH",args:[{prim:"address"},{string:this._contractAddress}]}],AMOUNT:[{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]}]};return t.forEach((s,o)=>{s.prim in i&&(t[o]=Object(i)[s.prim]),s.args&&s.args.length!==0?this.adaptViewCodeToContext(s.args,r,n):Array.isArray(s)&&this.adaptViewCodeToContext(s,r,n)}),t}executeViewAndDecodeResult(t){return tt(this,void 0,void 0,function*(){let r;try{r=(yield this._rpc.runCode(t)).storage}catch(n){const i=XA(n);throw i?new A1(`The simulation of the on-chain view named ${this._smartContractViewSchema.viewName} failed with: ${JSON.stringify(i)}`,this._smartContractViewSchema.viewName,i,n):n}if(!r.args)throw new A1(`View simulation failed with an invalid result: ${r}`,this._smartContractViewSchema.viewName);return this._smartContractViewSchema.decodeViewResult(r.args[0])})}}class N3{constructor(t,r){this.provider=t,this.contractAddress=r}createContractMethodFlatParams(t,r,n,i=!0,s=!1){return new T3(this.provider,this.contractAddress,t,r,n,i,s)}createContractMethodObjectParam(t,r,n,i=!0,s=!1){return new L3(this.provider,this.contractAddress,t,r,n,i,s)}createContractViewObjectParam(t,r,n,i,s){return new I3(t,r,this.contractAddress,n,i,s)}}const ks="default";class M3{constructor(t,r,n,i,s,o,a){this.currentContract=t,this.name=r,this.callbackParametersSchema=n,this.parameterSchema=i,this.args=s,this.rpc=o,this.readProvider=a}read(t){return tt(this,void 0,void 0,function*(){if(Ss(t??"")==bt.VALID)throw new gd("Since version 12, the lambda view no longer depends on a lambda contract. The read method no longer accepts a contract address as a parameter.");if(t&&xd(t)!==bt.VALID)throw new vE(t);const r=this.parameterSchema.Encode(...this.args),n=yield this.rpc.runView({contract:this.currentContract.address,entrypoint:this.name,input:r,chain_id:t||(yield this.readProvider.getChainId())});return this.callbackParametersSchema.Execute(n.data)})}}const B3=(e,t,r)=>{const n=t.ExtractSignatures();if(!n.find(i=>i.length===e.length))throw new _1(r,n,e)},C3=e=>{let t=!1;if("prim"in e&&e.prim==="pair"&&e.args){const r=e.args[e.args.length-1];"prim"in r&&r.prim==="contract"&&(t=!0)}return t};class D1{constructor(t,r,n,i,s,o,a){this.address=t,this.script=r,this.storageProvider=i,this.entrypoints=s,this.rpc=o,this.readProvider=a,this.methods={},this.methodsObject={},this.views={},this.contractViews={},this.contractMethodFactory=new N3(n,t),this.schema=ar.fromRPCResponse({script:this.script}),this.parameterSchema=Rs.fromRPCResponse({script:this.script}),this.viewSchema=xu.fromRPCResponse({script:this.script}),this.viewSchema.length!==0&&this._initializeOnChainViews(this,o,this.readProvider,this.viewSchema),this._initializeMethods(this,this.entrypoints.entrypoints,this.rpc,this.readProvider)}_initializeMethods(t,r,n,i){const s=this.parameterSchema,o=Object.keys(r);if(s.isMultipleEntryPoint)o.forEach(u=>{const h=new Rs(r[u]);if(this.methods[u]=function(...f){return t.contractMethodFactory.createContractMethodFlatParams(h,u,f)},this.methodsObject[u]=function(f){return t.contractMethodFactory.createContractMethodObjectParam(h,u,f)},C3(r[u])){const f=function(...y){const w=r[u].args[0],L=new Rs(w),I=r[u].args[1].args[0],B=new Rs(I);return B3(y,L,u),new M3(t,u,B,L,y,n,i)};this.views[u]=f}}),Object.keys(s.ExtractSchema()).filter(u=>Object.keys(r).indexOf(u)===-1).forEach(u=>{this.methods[u]=function(...h){return t.contractMethodFactory.createContractMethodFlatParams(s,u,h,!1,!0)},this.methodsObject[u]=function(h){return t.contractMethodFactory.createContractMethodObjectParam(s,u,h,!1,!0)}});else{const a=this.parameterSchema;this.methods[ks]=function(...u){return t.contractMethodFactory.createContractMethodFlatParams(a,ks,u,!1)},this.methodsObject[ks]=function(u){return t.contractMethodFactory.createContractMethodObjectParam(a,ks,u,!1)}}}_initializeOnChainViews(t,r,n,i){const s=this.schema.val;i.forEach(o=>{this.contractViews[o.viewName]=function(a){return t.contractMethodFactory.createContractViewObjectParam(r,n,o,s,a)}})}storage(){return this.storageProvider.getStorage(this.address,this.schema)}bigMap(t){return this.storageProvider.getBigMapKey(this.address,t,this.schema)}}class U3{constructor(t,r,n){this.id=t,this.schema=r,this.provider=n}get(t,r){return tt(this,void 0,void 0,function*(){try{return yield this.provider.getBigMapKeyByID(this.id.toString(),t,this.schema,r)}catch(n){if(n instanceof ra&&n.status===$s.NOT_FOUND)return;throw n}})}getMultipleValues(t,r,n=5){return tt(this,void 0,void 0,function*(){return this.provider.getBigMapKeysByID(this.id.toString(),t,this.schema,r,n)})}toJSON(){return this.id.toString()}toString(){return this.id.toString()}}class k3{constructor(t,r){this.id=t,this.provider=r}getSaplingDiff(t){return tt(this,void 0,void 0,function*(){return this.provider.getSaplingDiffByID(this.id.toString(),t)})}getId(){return this.id.toString()}}const F1=e=>({big_map:(t,r)=>{if(!t||!("int"in t)||t.int===void 0)return{};{const n=new ar(r);return new U3(new vt(t.int),n,e)}},sapling_state:t=>!t||!("int"in t)||t.int===void 0?{}:new k3(new vt(t.int),e)});class D3 extends $n{constructor(t,r,n,i,s,o){super(t,i,s,o),this.params=r,this.source=n,this.originatedRollup=this.operationResults&&this.operationResults.originated_rollup}get operationResults(){const t=Array.isArray(this.results)&&this.results.find(n=>n.kind==="tx_rollup_origination"),r=t&&t.metadata&&t.metadata.operation_result;return r||void 0}get status(){const t=this.operationResults;return t?t.status:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){return this.operationResults&&this.operationResults.errors}}class F3 extends $n{constructor(t,r,n,i,s,o){super(t,i,s,o),this.params=r,this.source=n}get operationResults(){const t=Array.isArray(this.results)&&this.results.find(n=>n.kind==="tx_rollup_submit_batch"),r=t&&t.metadata&&t.metadata.operation_result;return r||void 0}get status(){const t=this.operationResults;return t?t.status:"unknown"}get content(){return this.params.content}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){return this.operationResults&&this.operationResults.errors}}class H3 extends M0{constructor(t,r){super(t),this.estimator=r,this.contractProviderTypeSymbol=Symbol.for("taquito--provider-type-symbol")}getStorage(t,r){return tt(this,void 0,void 0,function*(){if(Ss(t)!==bt.VALID)throw new t0(t);const n=yield this.context.readProvider.getScript(t,"head");r||(r=n);let i;return ar.isSchema(r)?i=r:i=ar.fromRPCResponse({script:r}),i.Execute(n.storage,F1(this))})}getBigMapKey(t,r,n){return tt(this,void 0,void 0,function*(){if(Ss(t)!==bt.VALID)throw new t0(t);n||(n=(yield this.rpc.getContract(t)).script);let i;ar.isSchema(n)?i=n:i=ar.fromRPCResponse({script:n});const s=i.EncodeBigMapKey(r),o=yield this.rpc.getBigMapKey(t,s);return i.ExecuteOnBigMapValue(o)})}getBigMapKeyByID(t,r,n,i){return tt(this,void 0,void 0,function*(){const{key:s,type:o}=n.EncodeBigMapKey(r),{packed:a}=yield this.context.packer.packData({data:s,type:o}),u=PE(a),h=i?yield this.context.readProvider.getBigMapValue({id:t.toString(),expr:u},i):yield this.context.readProvider.getBigMapValue({id:t.toString(),expr:u},"head");return n.ExecuteOnBigMapValue(h,F1(this))})}getBigMapKeysByID(t,r,n,i,s=5){return tt(this,void 0,void 0,function*(){const o=yield this.getBlockForRequest(r,i),a=new xr;let u=0,h=[];for(;u<r.length;){const y=r.slice(u,u+s).map(w=>this.getBigMapValueOrUndefined(w,t,n,o));h=[...h,...yield Promise.all(y)],u+=s}for(let f=0;f<h.length;f++)a.set(r[f],h[f]);return a})}getBlockForRequest(t,r){return tt(this,void 0,void 0,function*(){return t.length===1||typeof r<"u"?r:yield this.context.readProvider.getBlockLevel("head")})}getBigMapValueOrUndefined(t,r,n,i){return tt(this,void 0,void 0,function*(){try{return yield this.getBigMapKeyByID(r,t,n,i)}catch(s){if(s instanceof ra&&s.status===$s.NOT_FOUND)return;throw s}})}getSaplingDiffByID(t,r){return tt(this,void 0,void 0,function*(){return r?yield this.context.readProvider.getSaplingDiffById({id:t.toString()},r):yield this.context.readProvider.getSaplingDiffById({id:t.toString()},"head")})}addRevealOperationIfNeeded(t,r){return tt(this,void 0,void 0,function*(){if(Hu(t)){const n=[t],i=yield this.signer.publicKey(),s=yield this.estimator.reveal();if(s){const o={kind:ct.REVEAL},a=yield this.estimate(o,()=>tt(this,void 0,void 0,function*(){return s}));return n.unshift(yield $o(Object.assign({},a),r,i)),n}}return t})}originate(t){return tt(this,void 0,void 0,function*(){const r=yield this.estimate(t,this.estimator.originate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield T0(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},t),r))),s=yield this.addRevealOperationIfNeeded(i,n),o=yield this.prepareOperation({operation:s,source:n}),a=yield this.forge(o),{hash:u,context:h,forgedBytes:f,opResponse:y}=yield this.signAndInject(a);return new _3(u,i,f,y,h,this)})}setDelegate(t){return tt(this,void 0,void 0,function*(){if(t.source&&ye(t.source)!==bt.VALID)throw new Pe(t.source);if(t.delegate&&ye(t.delegate)!==bt.VALID)throw new Pe(t.delegate);if(/kt1/i.test(t.source))throw new WA(t.source);const r=yield this.estimate(t,this.estimator.setDelegate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield L0(Object.assign(Object.assign({},t),r)),s=t.source||n,o=yield this.addRevealOperationIfNeeded(i,n),a=yield this.prepareOperation({operation:o,source:s}),u=yield this.forge(a),{hash:h,context:f,forgedBytes:y,opResponse:w}=yield this.signAndInject(u);return new U1(h,i,s,y,w,f)})}registerDelegate(t){return tt(this,void 0,void 0,function*(){const r=yield this.estimate(t,this.estimator.registerDelegate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield T1(Object.assign(Object.assign({},t),r),n),s=yield this.addRevealOperationIfNeeded(i,n),o=yield this.prepareOperation({operation:s}),a=yield this.forge(o),{hash:u,context:h,forgedBytes:f,opResponse:y}=yield this.signAndInject(a);return new U1(u,i,n,f,y,h)})}transfer(t){return tt(this,void 0,void 0,function*(){if(ye(t.to)!==bt.VALID)throw new Pe(t.to);if(t.source&&ye(t.source)!==bt.VALID)throw new Pe(t.source);const r=yield this.signer.publicKeyHash(),n=yield this.estimate(t,this.estimator.transfer.bind(this.estimator)),i=yield R0(Object.assign(Object.assign({},t),n)),s=t.source||r,o=yield this.addRevealOperationIfNeeded(i,r),a=yield this.prepareOperation({operation:o,source:t.source}),u=yield this.forge(a),{hash:h,context:f,forgedBytes:y,opResponse:w}=yield this.signAndInject(u);return new P3(h,i,s,y,w,f)})}reveal(t){return tt(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimator.reveal(t);if(n){const i=yield this.estimate(t,()=>tt(this,void 0,void 0,function*(){return n})),s=yield $o(Object.assign({},i),r,yield this.signer.publicKey()),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:u,context:h,forgedBytes:f,opResponse:y}=yield this.signAndInject(a);return new A3(u,s,r,f,y,h)}else throw new JA(`The publicKeyHash '${r}' has already been revealed.`)})}registerGlobalConstant(t){return tt(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(t,this.estimator.registerGlobalConstant.bind(this.estimator)),i=yield O0(Object.assign(Object.assign({},t),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:u,context:h,forgedBytes:f,opResponse:y}=yield this.signAndInject(a);return new S3(u,i,r,f,y,h)})}txRollupOriginate(t){return tt(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(t||{},this.estimator.txRollupOriginate.bind(this.estimator)),i=yield I0(Object.assign(Object.assign({},t),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:u,context:h,forgedBytes:f,opResponse:y}=yield this.signAndInject(a);return new D3(u,i,r,f,y,h)})}txRollupSubmitBatch(t){return tt(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(t,this.estimator.txRollupSubmitBatch.bind(this.estimator)),i=yield N0(Object.assign(Object.assign({},t),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:u,context:h,forgedBytes:f,opResponse:y}=yield this.signAndInject(a);return new F3(u,i,r,f,y,h)})}at(t,r=n=>n){return tt(this,void 0,void 0,function*(){if(Ss(t)!==bt.VALID)throw new t0(t);const n=this.context.withExtensions().rpc,i=this.context.withExtensions().readProvider,s=yield i.getScript(t,"head"),o=yield i.getEntrypoints(t),a=new D1(t,s,this,this,o,n,i);return r(a,this.context)})}batch(t){const r=new M1(this.context,this.estimator);return Array.isArray(t)&&r.with(t),r}}class K3{constructor(t){this.context=t}getNextProto(){return tt(this,void 0,void 0,function*(){if(!this.context.proto){const t=yield this.context.readProvider.getNextProtocol("head");this.context.proto=t}return this.context.proto})}parseScript(t){return tt(this,void 0,void 0,function*(){return new li({protocol:yield this.getNextProto()}).parseScript(t)})}parseMichelineExpression(t){return tt(this,void 0,void 0,function*(){return new li({protocol:yield this.getNextProto()}).parseMichelineExpression(t)})}parseJSON(t){return tt(this,void 0,void 0,function*(){return new li({protocol:yield this.getNextProto()}).parseJSON(t)})}prepareCodeOrigination(t){return tt(this,void 0,void 0,function*(){const r=t;if(r.code=yield this.formatCodeParam(t.code),t.init)r.init=yield this.formatInitParam(t.init);else if(t.storage){const n=r.code.find(o=>"prim"in o&&o.prim==="storage");if(!n?.args)throw new P0("The storage section is missing from the script",t.code);const i=new ar(n.args[0]),s=yield this.findGlobalConstantsHashAndValue(i);if(Object.keys(s).length!==0){const a=new li({expandGlobalConstant:s}).parseJSON(n.args[0]),u=new ar(a);r.init=u.Encode(t.storage)}else r.init=i.Encode(t.storage);delete r.storage}return r})}formatCodeParam(t){return tt(this,void 0,void 0,function*(){let r;if(typeof t=="string"){const n=yield this.parseScript(t);if(n===null)throw new P0("Invalid code parameter",t);r=n}else{const n=yield this.parseJSON(t),i=["parameter","storage","code"];r=n.sort((s,o)=>i.indexOf(s.prim)-i.indexOf(o.prim))}return r})}formatInitParam(t){return tt(this,void 0,void 0,function*(){let r;if(typeof t=="string"){const n=yield this.parseMichelineExpression(t);if(n===null)throw new S1("Invalid init parameter",t);r=n}else r=yield this.parseJSON(t);return r})}findGlobalConstantsHashAndValue(t){return tt(this,void 0,void 0,function*(){const r=t.findToken("constant"),n={};if(r.length!==0)for(const i of r){const s=i.tokenVal.args;if(s){const o=s[0];if(o.string){const a=o.string,u=yield this.context.globalConstantsProvider.getGlobalConstantByHash(a);Object.assign(n,{[a]:u})}}}return n})}}class H1{constructor(t){this.context=t}packData(t){return tt(this,void 0,void 0,function*(){return this.context.rpc.packData(t)})}}class $3 extends Error{constructor(){super("No {} constants provider has been configured. Please configure one by calling setGlobalConstantsProvider({globalConstantsProvider}) on your TezosToolkit instance."),this.name="UnconfiguredGlobalConstantsProviderError"}}class K1{getGlobalConstantByHash(t){return tt(this,void 0,void 0,function*(){throw new $3})}}class $1{constructor(t){this.context=t}getBalance(t,r){return tt(this,void 0,void 0,function*(){return this.context.rpc.getBalance(t,{block:String(r)})})}getDelegate(t,r){return tt(this,void 0,void 0,function*(){return this.context.rpc.getDelegate(t,{block:String(r)})})}getNextProtocol(t){return tt(this,void 0,void 0,function*(){return(yield this.context.rpc.getProtocols({block:String(t)})).next_protocol})}getProtocolConstants(t){return tt(this,void 0,void 0,function*(){const{time_between_blocks:r,minimal_block_delay:n,hard_gas_limit_per_operation:i,hard_gas_limit_per_block:s,hard_storage_limit_per_operation:o,cost_per_byte:a,tx_rollup_origination_size:u}=yield this.context.rpc.getConstants({block:String(t)});return{time_between_blocks:r,minimal_block_delay:n,hard_gas_limit_per_operation:i,hard_gas_limit_per_block:s,hard_storage_limit_per_operation:o,cost_per_byte:a,tx_rollup_origination_size:u}})}getScript(t,r){return tt(this,void 0,void 0,function*(){const{script:n}=yield this.context.rpc.getContract(t,{block:String(r)});return n})}getStorage(t,r){return tt(this,void 0,void 0,function*(){return this.context.rpc.getStorage(t,{block:String(r)})})}getBlockHash(t){return tt(this,void 0,void 0,function*(){const{hash:r}=yield this.context.rpc.getBlockHeader({block:String(t)});return r})}getBlockLevel(t){return tt(this,void 0,void 0,function*(){const{level:r}=yield this.context.rpc.getBlockHeader({block:String(t)});return r})}getCounter(t,r){return tt(this,void 0,void 0,function*(){const{counter:n}=yield this.context.rpc.getContract(t,{block:String(r)});return n||"0"})}getBlockTimestamp(t){return tt(this,void 0,void 0,function*(){const{timestamp:r}=yield this.context.rpc.getBlockHeader({block:String(t)});return r})}getBigMapValue(t,r){return tt(this,void 0,void 0,function*(){return this.context.rpc.getBigMapExpr(t.id,t.expr,{block:String(r)})})}getSaplingDiffById(t,r){return tt(this,void 0,void 0,function*(){return this.context.rpc.getSaplingDiffById(t.id,{block:String(r)})})}getEntrypoints(t){return tt(this,void 0,void 0,function*(){return this.context.rpc.getEntrypoints(t)})}getChainId(){return tt(this,void 0,void 0,function*(){return this.context.rpc.getChainId()})}isAccountRevealed(t,r){return tt(this,void 0,void 0,function*(){const n=yield this.context.rpc.getManagerKey(t,{block:String(r)});return n&&typeof n=="object"?!!n.key:!!n})}getBlock(t){return tt(this,void 0,void 0,function*(){return this.context.rpc.getBlock({block:String(t)})})}getLiveBlocks(t){return this.context.rpc.getLiveBlocks({block:String(t)})}}const z3=(e,t)=>e.hash===t.opHash,V3=(e,t)=>{switch(e.kind){case"endorsement":return"metadata"in e&&e.metadata.delegate===t.source;case"activate_account":return"metadata"in e&&e.pkh===t.source;default:return"source"in e&&e.source===t.source}},j3=(e,t)=>"kind"in e&&e.kind===t.kind,G3=(e,t)=>{switch(e.kind){case"delegation":return e.delegate===t.destination;case"origination":if("metadata"in e&&"operation_result"in e.metadata&&"originated_contracts"in e.metadata.operation_result&&Array.isArray(e.metadata.operation_result.originated_contracts))return e.metadata.operation_result.originated_contracts.some(r=>r===t.destination);break;case"transaction":return e.destination===t.destination;default:return!1}},q3=(e,t)=>"opHash"in t?z3(e,t):"source"in t?V3(e,t):"kind"in t?j3(e,t):"destination"in t?G3(e,t):!1,W3=(e,t)=>{if(Array.isArray(t.and))return t.and.every(r=>$u(e,r));if(Array.isArray(t.or))return t.or.some(r=>$u(e,r));throw new o3("Filter expression must contain either and/or property")},$u=(e,t)=>{const r=[];return Array.isArray(t)?r.push(...t):r.push(t),r.every(n=>"and"in n||"or"in n?W3(e,n):q3(e,n))};class z1 extends Error{constructor(t){super(t),this.message=t,this.name="UnsupportedEventError"}}class zu{constructor(t,r=!1,n=rp()){this.shouldRetry=r,this.operatorFunction=n,this.errorListeners=[],this.messageListeners=[],this.closeListeners=[],this.completed$=new Ps,t.pipe(t6(this.completed$),du(i=>{this.call(this.messageListeners,i)},i=>{this.call(this.errorListeners,i)},()=>{this.call(this.closeListeners)}),this.shouldRetry?n:du(),lu(()=>__)).subscribe()}call(t,r){for(const n of t)try{n(r)}catch(i){console.error(i)}}remove(t,r){const n=t.indexOf(r);n!==-1&&t.splice(n,1)}on(t,r){switch(t){case"data":this.messageListeners.push(r);break;case"error":this.errorListeners.push(r);break;case"close":this.closeListeners.push(r);break;default:throw new z1(`Trying to register on an unsupported event: ${t}`)}}off(t,r){switch(t){case"data":this.remove(this.messageListeners,r);break;case"error":this.remove(this.errorListeners,r);break;case"close":this.remove(this.closeListeners,r);break;default:throw new z1(`Trying to unregister on an unsupported event: ${t}`)}}close(){this.completed$.next()}}const Y3={shouldObservableSubscriptionRetry:!1,observableSubscriptionRetryFunction:rp()},X3=e=>Ki(e.rpc.getBlock()).pipe(Rn()),Z3=e=>Jd(t=>new Se(r=>{for(const n of t.operations)for(const i of n)for(const s of i.contents)$u(Object.assign({hash:i.hash},s),e)&&r.next(Object.assign({hash:i.hash},s));r.complete()}));class Vu{constructor(t,r={}){this.context=t,this._config$=new Ud(Object.assign(Object.assign({},Y3),r)),this.timer$=this._config$.pipe(ep("pollingIntervalMilliseconds"),$i(n=>n?Zd(0,n):Ki(this.getConfirmationPollingInterval()).pipe($i(i=>Zd(0,i))))),this.newBlock$=this.timer$.pipe($i(()=>X3(this.context)),k_("hash"),q_(),Cd())}get config(){return this._config$.getValue()}getConfirmationPollingInterval(){return tt(this,void 0,void 0,function*(){if(!this.config.pollingIntervalMilliseconds)try{const n=yield this.context.readProvider.getProtocolConstants("head"),s=(n.minimal_block_delay?n.minimal_block_delay.multipliedBy(1e3):n.time_between_blocks?n.time_between_blocks[0].multipliedBy(1e3):new vt(5e3)).dividedBy(3);this.config.pollingIntervalMilliseconds=s.toNumber()===0?1e3:s.toNumber()}catch{return 5e3}return this.config.pollingIntervalMilliseconds})}subscribeBlock(t){return new zu(this.newBlock$,this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribe(t){return new zu(this.newBlock$.pipe(ep("hash")),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeOperation(t){return new zu(this.newBlock$.pipe(Z3(t)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}}class V1{constructor(t){this.context=t}getNextProto(){return tt(this,void 0,void 0,function*(){if(!this.context.proto){const t=yield this.context.readProvider.getNextProtocol("head");this.context.proto=t}return this.context.proto})}forge({branch:t,contents:r}){return tt(this,void 0,void 0,function*(){return new b1(yield this.getNextProto()).forge({branch:t,contents:r})})}}const J3={defaultConfirmationCount:1,confirmationPollingTimeoutSecond:180};class U0{constructor(t,r=new ku,n,i=new Ud(Object.assign({},J3)),s,o,a,u,h,f,y,w){this._rpc=t,this._signer=r,this._proto=n,this._config=i,this.providerDecorator=[],this.tz=new x3(this),this.estimate=new E3(this),this.contract=new H3(this,this.estimate),this.batch=new c3(this,this.estimate),this.wallet=new C0(this),this.withExtensions=()=>{let L=this.clone();return this.providerDecorator.forEach(I=>{L=I(L)}),L},typeof this._rpc=="string"?this._rpcClient=new e0(this._rpc):this._rpcClient=this._rpc,this._forger=s||new V1(this),this._injector=o||new jA(this),this.operationFactory=new m3(this),this._walletProvider=u||new k1(this),this._parser=h||new K3(this),this._packer=a||new H1(this),this._globalConstantsProvider=f||new K1,this._readProvider=y||new $1(this),this._stream=w||new Vu(this)}get config(){return this._config.getValue()}set config(t){this._config.next(Object.assign({},t))}setPartialConfig(t){this._config.next(Object.assign(Object.assign({},this._config.getValue()),t))}get rpc(){return this._rpcClient}set rpc(t){this._rpcClient=t}get injector(){return this._injector}set injector(t){this._injector=t}get forger(){return this._forger}set forger(t){this._forger=t}get signer(){return this._signer}set signer(t){this._signer=t}get walletProvider(){return this._walletProvider}set walletProvider(t){this._walletProvider=t}set proto(t){this._proto=t}get proto(){return this._proto}get parser(){return this._parser}set parser(t){this._parser=t}get packer(){return this._packer}set packer(t){this._packer=t}get globalConstantsProvider(){return this._globalConstantsProvider}set globalConstantsProvider(t){this._globalConstantsProvider=t}get readProvider(){return this._readProvider}set readProvider(t){this._readProvider=t}get stream(){return this._stream}set stream(t){this._stream=t}isAnyProtocolActive(t=[]){return tt(this,void 0,void 0,function*(){if(this._proto)return t.includes(this._proto);{const r=yield this.readProvider.getNextProtocol("head");return t.includes(r)}})}isAnySignerConfigured(){return!(this.signer instanceof ku)}clone(){return new U0(this.rpc,this.signer,this.proto,this._config,this.forger,this._injector,this.packer,this._walletProvider,this._parser,this._globalConstantsProvider,this._readProvider,this._stream)}registerProviderDecorator(t){this.providerDecorator.push(t)}}const Q3={commitHash:"6d90b3d5e616a6e9b9ad9dd8453b5068e7396fff",version:"13.0.1"};class t8{constructor(t){this._rpc=t,this._options={},this.format=Du,typeof this._rpc=="string"?this._rpcClient=new e0(this._rpc):this._rpcClient=this._rpc,this._context=new U0(t),this._wallet=new C0(this._context),this.setProvider({rpc:this._rpcClient}),this.batch=this._context.batch.batch.bind(this._context.batch)}setProvider({rpc:t,stream:r,signer:n,protocol:i,config:s,forger:o,wallet:a,packer:u,globalConstantsProvider:h,readProvider:f}){this.setRpcProvider(t),this.setStreamProvider(r),this.setSignerProvider(n),this.setForgerProvider(o),this.setWalletProvider(a),this.setPackerProvider(u),this.setGlobalConstantsProvider(h),this.setReadProvider(f),this._context.proto=i,s&&this._context.setPartialConfig(s)}setSignerProvider(t){!this._options.signer&&typeof t>"u"?(this._context.signer=new ku,this._options.signer=t):typeof t<"u"&&(this._context.signer=t,this._options.signer=t)}setRpcProvider(t){typeof t=="string"?this._rpcClient=new e0(t):t===void 0||(this._rpcClient=t),this._options.rpc=this._rpcClient,this._context.rpc=this._rpcClient}setForgerProvider(t){if(typeof t<"u")this._options.forger=t,this._context.forger=t;else if(this._options.forger===void 0){const r=this.getFactory(V1)();this._options.forger=r,this._context.forger=r}}setStreamProvider(t){if(typeof t=="string"){const r=new Vu(new U0(new e0(t)));this._options.stream=r,this._context.stream=r}else if(typeof t<"u")this._options.stream=t,this._context.stream=t;else if(this._options.stream===void 0){const r=this.getFactory(Vu)();this._options.stream=r,this._context.stream=r}}setWalletProvider(t){if(!this._options.wallet&&typeof t>"u"){const r=this.getFactory(k1)();this._options.wallet=r,this._context.walletProvider=r}else typeof t<"u"&&(this._options.wallet=t,this._context.walletProvider=t)}setPackerProvider(t){if(!this._options.packer&&typeof t>"u"){const r=this.getFactory(H1)();this._context.packer=r,this._options.packer=r}else typeof t<"u"&&(this._context.packer=t,this._options.packer=t)}setGlobalConstantsProvider(t){if(!this._options.globalConstantsProvider&&typeof t>"u"){const r=new K1;this._context.globalConstantsProvider=r,this._options.globalConstantsProvider=r}else typeof t<"u"&&(this._context.globalConstantsProvider=t,this._options.globalConstantsProvider=t)}setReadProvider(t){const r=typeof t>"u"?this.getFactory($1)():t;this._options.readProvider=r,this._context.readProvider=r}get tz(){return this._context.tz}get contract(){return this._context.contract}get wallet(){return this._wallet}get operation(){return this._context.operationFactory}get estimate(){return this._context.estimate}get stream(){return this._context.stream}get rpc(){return this._context.rpc}get signer(){return this._context.signer}get globalConstants(){return this._context.globalConstantsProvider}addExtension(t){Array.isArray(t)?t.forEach(r=>r.configureContext(this._context)):t.configureContext(this._context)}getFactory(t){return(...r)=>new t(this._context,...r)}getVersionInfo(){return Q3}}var pr=(e=>(e.kUSD="kUSD",e.hDAO="hDAO",e.PLENTY="PLENTY",e.xPLENTY="xPLENTY",e.wXTZ="wXTZ",e.STKR="STKR",e.tzBTC="tzBTC",e.USDtz="USDtz",e.ETHtz="ETHtz",e.CRUNCH="CRUNCH",e.WRAP="WRAP",e.wAAVE="wAAVE",e.wBUSD="wBUSD",e.wCEL="wCEL",e.wCOMP="wCOMP",e.wCRO="wCRO",e.wDAI="wDAI",e.wFTT="wFTT",e.wHT="wHT",e.wHUSD="wHUSD",e.wLEO="wLEO",e.wLINK="wLINK",e.wMATIC="wMATIC",e.wMKR="wMKR",e.wOKB="wOKB",e.wPAX="wPAX",e.wSUSHI="wSUSHI",e.wUNI="wUNI",e.wUSDC="wUSDC",e.wUSDT="wUSDT",e.wWBTC="wWBTC",e.wWETH="wWETH",e.crDAO="crDAO",e.FLAME="FLAME",e.KALAM="KALAM",e.PAUL="PAUL",e.SMAK="SMAK",e.GOT="GOT",e.HERA="HERA",e.kDAO="kDAO",e.QUIPU="QUIPU",e.uUSD="uUSD",e.YOU="YOU",e.ctez="ctez",e.MAG="MAG",e.PXL="PXL",e.uDEFI="uDEFI",e.pxlDAO="pxlDAO",e.fDAO="fDAO",e.BTCtz="BTCtz",e.IDZ="IDZ",e.GIF="GIF",e.TezDAO="TezDAO",e.uBTC="uBTC",e.ANTI="ANTI",e.DOGA="DOGA",e.MTTR="MTTR",e.WTZ="WTZ",e.BUSDE="BUSD.e",e.USDCE="USDC.e",e.EURL="EURL",e.USDT="USDT",e.DAIE="DAI.e",e))(pr||{}),zn=(e=>(e.USD="USD",e.EUR="EUR",e.CAD="CAD",e.GBP="GBP",e.SGD="SGD",e.RUB="RUB",e.CNY="CNY",e.BTC="BTC",e))(zn||{}),k0=(e=>(e["PLENTY-XTZ-LP"]="PLENTY-XTZ-LP",e["PLENTY-hDAO-LP"]="PLENTY-hDAO-LP",e["PLENTY-ETHtz-LP"]="PLENTY-ETHtz-LP",e["PLENTY-wBUSD"]="PLENTY-wBUSD",e["PLENTY-wUSDC"]="PLENTY-wUSDC",e["PLENTY-wWBTC"]="PLENTY-wWBTC",e["PLENTY-USDtz-LP"]="PLENTY-USDtz-LP",e["PLENTY-wMATIC-LP"]="PLENTY-wMATIC-LP",e["PLENTY-wLINK-LP"]="PLENTY-wLINK-LP",e["PLENTY-QUIPU-LP"]="PLENTY-QUIPU-LP",e["PLENTY-kUSD-LP"]="PLENTY-kUSD-LP",e["PLENTY-wWETH-LP"]="PLENTY-wWETH-LP",e["PLENTY-tzBTC-LP"]="PLENTY-tzBTC-LP",e["PLENTY-WRAP-LP"]="PLENTY-WRAP-LP",e["PLENTY-UNO-LP"]="PLENTY-UNO-LP",e["PLENTY-SMAK-LP"]="PLENTY-SMAK-LP",e["PLENTY-KALAM-LP"]="PLENTY-KALAM-LP",e["PLENTY-wDAI-LP"]="PLENTY-wDAI-LP",e["PLENTY-Ctez-LP"]="PLENTY-Ctez-LP",e["PLENTY-uUSD-LP"]="PLENTY-uUSD-LP",e["PLENTY-CTEZ-TEZ-LP"]="PLENTY-CTEZ-TEZ-LP",e["PLENTY-DOGA-CTEZ-LP"]="PLENTY-DOGA-CTEZ-LP",e["xPLENTY-Staking"]="xPLENTY-Staking",e["uUSD-YOU-LP"]="uUSD-YOU-LP",e["uUSD-wUSDC-LP"]="uUSD-wUSDC-LP",e["uUSD-uDEFI-LP"]="uUSD-uDEFI-LP",e["Ctez-kUSD-LP"]="Ctez-kUSD-LP",e["QUIPUSWAP-PLENTY"]="QUIPUSWAP-PLENTY",e["QUIPUSWAP-KUSD"]="QUIPUSWAP-KUSD",e["QUIPUSWAP-USDtz"]="QUIPUSWAP-USDtz",e["QUIPUSWAP-ETHtz"]="QUIPUSWAP-ETHtz",e["QUIPUSWAP-CRUNCH"]="QUIPUSWAP-CRUNCH",e["CRUNCHY-FARMS"]="CRUNCHY-FARMS",e["PAUL-PAUL"]="PAUL-PAUL",e["PAUL-XTZ"]="PAUL-XTZ",e["MAG-XTZ"]="MAG-XTZ",e["QUIPU-PAUL"]="QUIPU-PAUL",e["wWBTC-PAUL"]="wWBTC-PAUL",e["wUSDC-PAUL"]="wUSDC-PAUL",e["wWETH-PAUL"]="wWETH-PAUL",e["PAUL-uUSD"]="PAUL-uUSD",e["PAUL-kUSD-uUSD"]="PAUL-kUSD-uUSD",e["PAUL-YOU"]="PAUL-YOU",e["KUSD-QUIPU-LP"]="KUSD-QUIPU-LP",e["KUSD-KDAO"]="KUSD-KDAO",e["KUSD-QL"]="KUSD-QL",e["KDAO-KUSD-UUSD"]="KDAO-KUSD-UUSD",e["WRAP-STACKING"]="WRAP-STACKING",e["WRAP-XTZ-LM"]="WRAP-XTZ-LM",e["wAAVE-XTZ-LM"]="wAAVE-XTZ-LM",e["wBUSD-XTZ-LM"]="wBUSD-XTZ-LM",e["wCEL-XTZ-LM"]="wCEL-XTZ-LM",e["wCOMP-XTZ-LM"]="wCOMP-XTZ-LM",e["wCRO-XTZ-LM"]="wCRO-XTZ-LM",e["wDAI-XTZ-LM"]="wDAI-XTZ-LM",e["wFTT-XTZ-LM"]="wFTT-XTZ-LM",e["wHT-XTZ-LM"]="wHT-XTZ-LM",e["wHUSD-XTZ-LM"]="wHUSD-XTZ-LM",e["wLEO-XTZ-LM"]="wLEO-XTZ-LM",e["wLINK-XTZ-LM"]="wLINK-XTZ-LM",e["wMATIC-XTZ-LM"]="wMATIC-XTZ-LM",e["wMKR-XTZ-LM"]="wMKR-XTZ-LM",e["wOKB-XTZ-LM"]="wOKB-XTZ-LM",e["wPAX-XTZ-LM"]="wPAX-XTZ-LM",e["wSUSHI-XTZ-LM"]="wSUSHI-XTZ-LM",e["wUNI-XTZ-LM"]="wUNI-XTZ-LM",e["wUSDC-XTZ-LM"]="wUSDC-XTZ-LM",e["wUSDT-XTZ-LM"]="wUSDT-XTZ-LM",e["wWBTC-XTZ-LM"]="wWBTC-XTZ-LM",e["wWETH-XTZ-LM"]="wWETH-XTZ-LM",e["WRAP-FM"]="WRAP-FM",e["WRAP-wAAVE-FM"]="WRAP-wAAVE-FM",e["WRAP-wBUSD-FM"]="WRAP-wBUSD-FM",e["WRAP-wCEL-FM"]="WRAP-wCEL-FM",e["WRAP-wCOMP-FM"]="WRAP-wCOMP-FM",e["WRAP-wCRO-FM"]="WRAP-wCRO-FM",e["WRAP-wDAI-FM"]="WRAP-wDAI-FM",e["WRAP-wFTT-FM"]="WRAP-wFTT-FM",e["WRAP-wHT-FM"]="WRAP-wHT-FM",e["WRAP-wHUSD-FM"]="WRAP-wHUSD-FM",e["WRAP-wLEO-FM"]="WRAP-wLEO-FM",e["WRAP-wLINK-FM"]="WRAP-wLINK-FM",e["WRAP-wMATIC-FM"]="WRAP-wMATIC-FM",e["WRAP-wMKR-FM"]="WRAP-wMKR-FM",e["WRAP-wOKB-FM"]="WRAP-wOKB-FM",e["WRAP-wPAX-FM"]="WRAP-wPAX-FM",e["WRAP-wSUSHI-FM"]="WRAP-wSUSHI-FM",e["WRAP-wUNI-FM"]="WRAP-wUNI-FM",e["WRAP-wUSDC-FM"]="WRAP-wUSDC-FM",e["WRAP-wUSDT-FM"]="WRAP-wUSDT-FM",e["WRAP-wWBTC-FM"]="WRAP-wWBTC-FM",e["WRAP-wWETH-FM"]="WRAP-wWETH-FM",e["YOUVES-UUSD-WUSDC"]="YOUVES-UUSD-WUSDC",e["YOUVES-UUSD-UBTC"]="YOUVES-UUSD-UBTC",e["YOUVES-UUSD-KUSD"]="YOUVES-UUSD-KUSD",e["YOUVES-UUSD-USDTZ"]="YOUVES-UUSD-USDTZ",e["YOUVES-YOU-UBTC"]="YOUVES-YOU-UBTC",e["YOUVES-YOU-UUSD"]="YOUVES-YOU-UUSD",e["YOUVES-UUSD-SAVING"]="YOUVES-UUSD-SAVING",e["YOUVES-UDEFI-SAVING"]="YOUVES-UDEFI-SAVING",e["YOUVES-UBTC-SAVING"]="YOUVES-UBTC-SAVING",e["YOUVES-YOU-STAKING"]="YOUVES-YOU-STAKING",e["SMLK-XTZ-ANTI"]="SMLK-XTZ-ANTI",e["QUIPU-FARM-0"]="QUIPU-FARM-0",e["QUIPU-FARM-1"]="QUIPU-FARM-1",e["QUIPU-FARM-2"]="QUIPU-FARM-2",e["QUIPU-FARM-3"]="QUIPU-FARM-3",e["QUIPU-FARM-4"]="QUIPU-FARM-4",e["QUIPU-FARM-5"]="QUIPU-FARM-5",e["QUIPU-FARM-6"]="QUIPU-FARM-6",e["MATTER-uUSD-wTZ"]="MATTER-uUSD-wTZ",e["PLENTY-BUSDE-USDCE-LP"]="PLENTY-BUSDE-USDCE-LP",e["PLENTY-KUSD-USDCE-LP"]="PLENTY-KUSD-USDCE-LP",e["PLENTY-USDTZ-USDCE-LP"]="PLENTY-USDTZ-USDCE-LP",e["PLENTY-KUSD-USDT-LP"]="PLENTY-KUSD-USDT-LP",e["PLENTY-UUSD-USDT-LP"]="PLENTY-UUSD-USDT-LP",e["PLENTY-DAIE-USDCE-LP"]="PLENTY-DAIE-USDCE-LP",e["PLENTY-UUSD-USDCE-LP"]="PLENTY-UUSD-USDCE-LP",e))(k0||{}),_i={version:"5.0.0",rpcUrl:"https://mainnet.api.tez.ie",availableRpcUrls:["https://mainnet.api.tez.ie","https://eu01-node.teztools.net","https://teznode.letzbake.com/","https://mainnet.smartpy.io"],validFiats:[{code:zn.USD,name:"US dollar",symbol:"$"},{code:zn.EUR,name:"Euro",symbol:"\u20AC"},{code:zn.CAD,name:"Canadian Dollar",symbol:"CA$"},{code:zn.GBP,name:"British pound",symbol:"\xA3"},{code:zn.SGD,name:"Singapore dollar",symbol:"S$"},{code:zn.RUB,name:"Russian ruble",symbol:"\u20BD"},{code:zn.CNY,name:"Chinese yuan",symbol:"\xA5"},{code:zn.BTC,name:"Bitcoin",symbol:"\u20BF"}],lbContracts:["KT1TxqZ8QtKvLu3V3JH7Gx58n7Co8pgtpQU5","KT1AafHA1C1vk959wvHWBispY9Y2f3fxBUUo"],kolibriOvenOwnersUrl:"https://kolibri-data.s3.amazonaws.com/mainnet/oven-key-data.json",kusdLiquidityPoolAddress:"KT1AxaBxkFLCUi3f8rdDAAxBKHfzY8LfKDRA",quipuswapFactories:{fa1_2Factory:["KT1FWHLMk5tHbwuSsp31S4Jum4dTVmkXpfJw","KT1Lw8hCoaBrHeTeMXbqHPG4sS4K1xn7yKcD"],fa2Factory:["KT1PvEyN1xCFCgorN92QCfYjw3axS6jawCiJ","KT1SwH9P1Tx8a58Mm6qBExQFTcy2rwZyZiXS"]},plentyDexAddresses:{"PLENTY-wBUSD":"KT1XXAavg3tTj12W1ADvd3EEnm1pu6XTmiEF","PLENTY-wUSDC":"KT1PuPNtDFLR6U7e7vDuxunDoKasVT6kMSkz","PLENTY-wWBTC":"KT19Dskaofi6ZTkrw3Tq4pK7fUqHqCz4pTZ3","PLENTY-USDtz-LP":"KT1D36ZG99YuhoCRZXLL86tQYAbv36bCq9XM","PLENTY-wMATIC-LP":"KT1VeNQa4mucRj36qAJ9rTzm4DTJKfemVaZT","PLENTY-wLINK-LP":"KT1XVrXmWY9AdVri6KpxKo4CWxizKajmgzMt","PLENTY-QUIPU-LP":"KT1NtsnKQ1c3rYB12ZToP77XaJs8WDBvF221","PLENTY-tzBTC-LP":"KT1HaDP8fRW7kavK2beST7o4RvzuvZbn5VwV","PLENTY-WRAP-LP":"KT1C2SXoGcje3VVMJHKRVhYXuWuNmv5ztJcw","PLENTY-UNO-LP":"KT1Wu8fGYxX5DfxYP8P97ZUNzrXFKjsWm7dD","PLENTY-SMAK-LP":"KT1BEC9uHmADgVLXCm3wxN52qJJ85ohrWEaU","PLENTY-KALAM-LP":"KT1HZkD2T4uczgYkZ6fb9gm1fymeJoRuezLz","PLENTY-hDAO-LP":"KT1XutoFJ9dXvWxT7ttG86N2tSTUEpatFVTm","PLENTY-ETHtz-LP":"KT1AbuUaPQmYLsB8n8FdSzBrxvrsm8ctwW1V","PLENTY-wWETH-LP":"KT1HUnqM6xFJa51PM2xHfLs7s6ARvXungtyq","PLENTY-kUSD-LP":"KT1UNBvCJXiwJY6tmHM7CJUVwNPew53XkSfh","PLENTY-uUSD-LP":"KT1Cba383ZJpEearqnUyUKUMsgu5Z3TXBgeH","PLENTY-wUSDT":"KT1Bi4yoALg6tuP4PKaFNDtSsDdpGLrDiGAS","PLENTY-wDAI-LP":"KT1KDmpYSDogNtEtEnEaHQLaySuqLr8aEfJW","PLENTY-YOU-LP":"KT1EM6NjJdJXmz3Pj13pfu3MWVDwXEQnoH3N","PLENTY-Ctez-LP":"KT1C9gJRfkpPbNdBn3XyYbrUHT6XgfPzZqXP","uUSD-YOU-LP":"KT1TnrLFrdemNZ1AnnWNfi21rXg7eknS484C","uUSD-wUSDC-LP":"KT1JbUFVGrMCpW39UtH97dMkG2nMMrefQLLa","uUSD-uDEFI-LP":"KT1EAw8hL5zseB3SLpJhBqPQfP9aWrWh8iMW","Ctez-kUSD-LP":"KT1X1nkqJDR1UHwbfpcnME5Z7agJLjUQNguB","Ctez-PAUL-LP":"KT1LixgLzdK4nseeD6MmmVpokuw9CvpVX9KW","Ctez-wWBTC-LP":"KT1XPUvZHc1YKTJYnGbB755V95hDgvS1qQYf","Ctez-USDtz-LP":"KT1PWAXfPatPWBNJUxTHin4ECin1kYJHHnsr","Ctez-wUSDC-LP":"KT1PZpbmKtGE6ZyYeF8entfjuGGT7CRUCF5g","Ctez-wUSDT-LP":"KT1AfTwam4bNPawLv4bWqSj9GsVDPsf5F5bQ","Ctez-wBUSD-LP":"KT1GN7PHpFsH43ypFyE2hxNMdxqTuiCGm4Pm","Ctez-wDAI-LP":"KT1L5qd9xPWjiEX6ZNovhaty228ASg6jCE5p","Ctez-KALAM-LP":"KT1HuZVo3ZKRhkaHDsYXZ2fvmVfkY1FrbEDj","Ctez-GIF-LP":"KT1VnFPwDGJRt5ufMgcWafM2WWcZCC77gpT3","Ctez-ETHtz-LP":"KT1GSYhwanehtwCK3NPfkMFbD1bNQmvosbqL","Ctez-QUIPU-LP":"KT1Ss8rb1UFVqG2LYEU5g4NEbK5SqW5Xadwp","Ctez-hDAO-LP":"KT1RSxExbbRwQdYBpRHWup9vxvw1Hp25vFVM","Ctez-kDAO-LP":"KT1SP9WsMeLFTiHBXqEumTASYbF3CXh22aVV","Ctez-wWETH-LP":"KT1WwqM2MH38PSQbECxPngBVLSbqJUHzCFAH","Ctez-uUSD-LP":"KT1Rx3pQzsn4FBuuYhcWsqUS7vWFx3ktqSWD","Ctez-FLAME-LP":"KT1Bp3JAeeMP4GvJaspFw6zah6WydqqqHPNw","Ctez-SMAK-LP":"KT1Qg4FmXDmViQgyYLT5QkgZQSmPKvKjZbzn","Ctez-crDAO-LP":"KT1JkHBYp3Pq4TRSkFdc2CRoXFgDkJrfCqUe","Ctez-PXL-LP":"KT1WR19YA8Go6GbTvtrMpUEEGSuQYxgz2ZVW","Ctez-UNO-LP":"KT1XLFZ2RS8vCUmHwBG39mq7zELhnLKn9JUz","Ctez-WRAP-LP":"KT19Qe4KbEVAiaVeNsgo9Tkqa6qvZho8c4W5","Ctez-tzBTC-LP":"KT1Wryxte8NnVCm569yb8dcSPmvFBVs4ufD6","Ctez-INSTA-LP":"KT1EnESbHxmzd2XeENyYNege4L5TKxeatJk9","Ctez-CRUNCH-LP":"KT1WZztBneC9NrhVqvo9yXq8St7p8c1JVTxm","PLENTY-CTEZ-TEZ-LP":"KT1CAYNQGvYSF5UvHK21grMrKpe2563w9UcX","PLENTY-BUSDE-USDCE-LP":"KT1LutmpUK8TDkA19tLCQNr7Eh7kbEsP3uiP","PLENTY-KUSD-USDCE-LP":"KT1HgFcDE8ZXNdT1aXXKpMbZc6GkUS2VHiPo","PLENTY-USDTZ-USDCE-LP":"KT1995R6hTYzXjV52mGtf6MboPRhzbJBJe6q","PLENTY-KUSD-USDT-LP":"KT1XfZi2K6gVM3wXDyeCwMhaT88JueVEAB8r","PLENTY-UUSD-USDT-LP":"KT19XPttmgtKtnpKXbcn41AqbcUqX7cweAmu","PLENTY-DAIE-USDCE-LP":"KT1Hxn43imdKTWXEZsLVdoUsS1R4hWTSXgDs","PLENTY-UUSD-USDCE-LP":"KT1Ji4hVDeQ5Ru7GW1Tna9buYSs3AppHLwj9"},plentyLptAddresses:{"PLENTY-wBUSD-LP":"KT1UC3vcVZ4K9b39uQxaMNA2N1RuJXKLCnoA","PLENTY-wUSDC-LP":"KT1Gz1mx1jm7JHqU7GuMVWF6soB9RjsfLN3o","PLENTY-wWBTC-LP":"KT1La1qZiJtDRcd9ek8w5KYD47i9MQqAQHmP","PLENTY-wMATIC-LP":"KT1WCGPFvy97wwGxewKfvTr1QYPvpEgUKToS","PLENTY-wLINK-LP":"KT1Brqb3JvXNKzwjW82F8pUAxQ7ipCfApWki","PLENTY-USDtz-LP":"KT18qSo4Ch2Mfq4jP3eME7SWHB8B8EDTtVBu","PLENTY-hDAO-LP":"KT1B2SzTBtb7PgTePbDLV5BmUZQ2PC1sdSHZ","PLENTY-ETHtz-LP":"KT1VvcbAjMWHVUbhLENpiVBejbzXYDt3PusE","PLENTY-wWETH-LP":"KT1SULRhejhoBWUmMnU53YHJrQZ3rxqsamdm","PLENTY-kUSD-LP":"KT1XTpd8JPexGxBL2dAmU9h2o9fcd9LEUG2t","PLENTY-QUIPU-LP":"KT1VDSyTqS95wkB4tRGy6saMa4izRKwrEg26","PLENTY-tzBTC-LP":"KT1SqQimKz3RbQbckpSHhn4nanUmDuRqkFH3","PLENTY-WRAP-LP":"KT1AHndbp9xVpaJrfTHfYzSXKHDVHMdKxcW2","PLENTY-UNO-LP":"KT1B6ALzWXQp5wUavuo2VTMNjRdTGm8wx37w","PLENTY-KALAM-LP":"KT1G3QTnrpWNhZr9x3Prprw3GH6gAMqV113D","PLENTY-SMAK-LP":"KT1NLZah1MKeWuveQvdsCqAUCjksKw8J296z","PLENTY-uUSD-LP":"KT1E8CrG6uznYAG9vZVGtApMJwwTScxPEUKq","PLENTY-wUSDT-LP":"KT1PcM1LUqgVdkXqKvZ4CeC9aiwLgYYCEHMH","PLENTY-wDAI-LP":"KT19vdNapeT6MALXvkvW745KiVKGXmD4AZq5","PLENTY-YOU-LP":"KT1UaU5fbSYqYeFmhmsjLkqQXZ1ZG54Qs2vh","kUSD-USDtz-LP":"KT1HEdGi7rq1zgZ68dhAtKMZYKeD3EM5vYdf","wUSDC-USDtz-LP":"KT1FaoPYSyT4itmgTncvdshV7SeqqXk9RJXd","wWETH-ETHtz-LP":"KT1GubVxQVJucUJfJvysvAJKWpLwj3LKuWHn","PLENTY-Ctez-LP":"KT1LdX5pUkZZGwYPePcAFSpETbqfbGCwJpfw","uUSD-YOU-LP":"KT1Tmncfgpp4ZSp6aEogL7uhBqHTiKsSPegK","uUSD-wUSDC-LP":"KT1A2W6mBjn49yqzjJbt9T7xNVD9gDeL45qD","uUSD-uDEFI-LP":"KT1RQvdYD9yc763j8FiVLyXbKPVVbZqGRx5m","Ctez-kUSD-LP":"KT19bFNh8pZCRtTy7Pi9kpEcb2Yd7KWArAik","Ctez-USDtz-LP":"KT1DQfEUBsaZo43G3j1CbFF9BiWZXS72DuCh","Ctez-wUSDC-LP":"KT1SXZTX9ZCW5atMnBng1y4pmdS2xi231oMt","Ctez-wUSDT-LP":"KT1KgCx6CYVSyLxfiFdo5hVuMwZBPQy1XZaf","Ctez-wBUSD-LP":"KT1K7GRKUWzfNJ9jzGprb13XDVqqp6GE67ZU","Ctez-wDAI-LP":"KT1VLLdUaMfFbJw87b1PaVG1ac6UYM5xzqC5","Ctez-KALAM-LP":"KT1N3mKQMnWEwt4FB3J4qP2X8LwYgndGDZrn","Ctez-GIF-LP":"KT1KdPxrn7UTx6CUWxuUBaGx4bVv6ZJKWUWr","Ctez-ETHtz-LP":"KT1GAvdLT9tkpKkRmkuChuL9T83esBtatgKm","Ctez-QUIPU-LP":"KT1C6Q4Mnnpns8vSQy7kJitZNMsED24SMw9m","Ctez-hDAO-LP":"KT1DidqBuSaxGbVaDq2gLVkfh262dYyoGeSH","Ctez-kDAO-LP":"KT1KmkH1T2CQV2Q5AcMeZy3GHhwNac48FBap","Ctez-wWETH-LP":"KT1BAiXZkKG4R9W7LAKiAQahC8Wg7ZpJBaEs","Ctez-uUSD-LP":"KT1BX8F7Xrtsy1tJ91iLovu4nJ8ZyVv4Dac2","Ctez-FLAME-LP":"KT1UfvQiYexnpag6rZ3LMGsn5YFiEHrXrtbq","Ctez-SMAK-LP":"KT1NeR3ExLddfdAbs5nwpQMm6DqBekyJTc4R","Ctez-crDAO-LP":"KT1MQcJCLZL8ASHYGmT5LVzeXV64ruy7RAuH","Ctez-PXL-LP":"KT1GhzTxzgXgdv1rRCppAB5D4poXiUgp8yoU","Ctez-UNO-LP":"KT1WKWhTNMY4h4eHunbsnJ1oAtDWXCz4qNQm","Ctez-WRAP-LP":"KT1MX73dim8HKqQLjTHvkJnpRUp37C1HXdkt","Ctez-wWBTC-LP":"KT1XWRUcvtcgpsETcasdUnNkq9rJeWmz8ihD","Ctez-tzBTC-LP":"KT1TMZjKBvSVKzETZTyRsTxYEu4uZLLs6VpJ","Ctez-PAUL-LP":"KT1N93veCzepAPydFGGUhDFiA69PoawasxXi","Ctez-INSTA-LP":"KT1GkTwzN2gR6UdBicDSu2JEaRtv5KAPunrj","Ctez-CRUNCH-LP":"KT1QSA2SMDEKzEnJhGrVGheWb94Ux8Wyfuy6","PLENTY-BUSDE-USDCE-LP":"KT1G76qEBDqmAXLCCVg4ZuNbrENsxFe8aECe","PLENTY-KUSD-USDCE-LP":"KT1J5HNUXnQwonSam3kmDQ5WbhynPPpVtgdN","PLENTY-USDTZ-USDCE-LP":"KT1P9GyfYrW9EZ8m3jej2cMu49fpmEbYa2h5","PLENTY-KUSD-USDT-LP":"KT1JaYzZooZmq9JP9FScjLShbUco8Pn8Ckct","PLENTY-UUSD-USDT-LP":"KT1Doix5iZZsQzKY3ANDkoca6GfCtJbXY9sk","PLENTY-DAIE-USDCE-LP":"KT1TupjqgajsoArMKK3ifmNveKhU2XpTJrH8","PLENTY-UUSD-USDCE-LP":"KT1Ah4Fe2hjcRdVCiCQDhRDZ2vDYLdYNjY51"},wrapLiquidityMiningDexAddress:{"WRAP-XTZ-LM":"KT1FG63hhFtMEEEtmBSX2vuFmP87t9E7Ab4t","wBUSD-XTZ-LM":"KT1UMAE2PBskeQayP5f2ZbGiVYF7h8bZ2gyp","wDAI-XTZ-LM":"KT1PQ8TMzGMfViRq4tCMFKD2QF5zwJnY67Xn","wUSDC-XTZ-LM":"KT1U2hs5eNdeCpHouAvQXGMzGFGJowbhjqmo","wUSDT-XTZ-LM":"KT1T4pfr6NL8dUiz8ibesjEvH2Ne3k6AuXgn","wWBTC-XTZ-LM":"KT1DksKXvCBJN7Mw6frGj6y6F3CbABWZVpj1","wWETH-XTZ-LM":"KT1DuYujxrmgepwSDHtADthhKBje9BosUs1w"},vortexDexAddresses:{"XTZ-ANTI":"KT1VFUkjYDh6QG8iLx5uKHPU3BWFMeYoVPTL"},quipuFarmsContract:"KT1RdoweZPFjttwMUsaTo1E2EWNX3WcR9nxZ",lbContractAddress:"KT1TxqZ8QtKvLu3V3JH7Gx58n7Co8pgtpQU5",lqtContractAddress:"KT1AafHA1C1vk959wvHWBispY9Y2f3fxBUUo",matterFarms:{KT1UefQz7nP8BuuDk5Dd5LWo22N1ZPB7JB5o:"MATTER-uUSD-wTZ"}};function D0(){}function e8(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function r8(e,...t){if(e==null)return D0;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function Xi(e){let t;return r8(e,r=>t=r)(),t}Promise.resolve();const Ds=[];function n8(e,t=D0){let r;const n=new Set;function i(a){if(e8(e,a)&&(e=a,r)){const u=!Ds.length;for(const h of n)h[1](),Ds.push(h,e);if(u){for(let h=0;h<Ds.length;h+=2)Ds[h][0](Ds[h+1]);Ds.length=0}}}function s(a){i(a(e))}function o(a,u=D0){const h=[a,u];return n.add(h),n.size===1&&(r=t(i)||D0),a(e),()=>{n.delete(h),n.size===0&&(r(),r=null)}}return{set:i,update:s,subscribe:o}}function Fs(){return Fs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fs.apply(this,arguments)}var j1,G1,ju=function(e){return Object.keys(e)},Gu=function(e){return Object.values(e)},qu=function(e,t){for(var r=Math.min(e.length,t.length),n=Array(r),i=-1;++i<r;)n[i]=[e[i],t[i]];return n},q1={map:function(e){return this.tag==="Some"?Hs(e(this.value)):this},flatMap:function(e){return this.tag==="Some"?e(this.value):this},getWithDefault:function(e){return this.tag==="Some"?this.value:e},match:function(e){return this.tag==="Some"?e.Some(this.value):e.None()},tap:function(e){return e(this),this},toUndefined:function(){return this.tag==="Some"?this.value:void 0},toNull:function(){return this.tag==="Some"?this.value:null},toResult:function(e){return this.match({Some:function(t){return oe.Ok(t)},None:function(){return oe.Error(e)}})},isSome:function(){return this.tag==="Some"},isNone:function(){return this.tag==="None"},__boxed_type__:"Option"},i8=Fs({},q1,{get:function(){return this.value}}),Hs=function(e){var t=Object.create(i8);return t.tag="Some",t.value=e,t},s8=((j1=Object.create(q1)).tag="None",j1),Vo=function(){return s8},Wu={Some:Hs,None:Vo,fromNullable:function(e){return e==null?Vo():Hs(e)},fromNull:function(e){return e===null?Vo():Hs(e)},fromUndefined:function(e){return e===void 0?Vo():Hs(e)},all:function(e){for(var t=e.length,r=Wu.Some([]),n=0,i=function(){if(n>=t)return{v:r};var o=e[n];o!=null&&(r=r.flatMap(function(a){return o.map(function(u){return a.push(u),a})})),n++};;){var s=i();if(typeof s=="object")return s.v}},allFromDict:function(e){var t=ju(e);return this.all(Gu(e)).map(function(r){return Object.fromEntries(qu(t,r))})},equals:function(e,t,r){return e.tag==="Some"&&t.tag==="Some"?r(e.value,t.value):e.tag===t.tag},pattern:{Some:function(e){return{tag:"Some",value:e}},None:{tag:"None"}}},W1={map:function(e){return this.tag==="Ok"?Y1(e(this.value)):this},mapError:function(e){return this.tag==="Ok"?this:X1(e(this.value))},flatMap:function(e){return this.tag==="Ok"?e(this.value):this},flatMapError:function(e){return this.tag==="Ok"?this:e(this.value)},getWithDefault:function(e){return this.tag==="Ok"?this.value:e},match:function(e){return this.tag==="Ok"?e.Ok(this.value):e.Error(this.value)},tap:function(e){return e(this),this},tapOk:function(e){return this.tag==="Ok"&&e(this.value),this},tapError:function(e){return this.tag==="Error"&&e(this.value),this},toOption:function(){return this.tag==="Ok"?Hs(this.value):Vo()},isOk:function(){return this.tag==="Ok"},isError:function(){return this.tag==="Error"},__boxed_type__:"Result"},o8=Fs({},W1,{get:function(){return this.value}}),a8=Fs({},W1,{getError:function(){return this.value}}),Y1=function(e){var t=Object.create(o8);return t.tag="Ok",t.value=e,t},X1=function(e){var t=Object.create(a8);return t.tag="Error",t.value=e,t},oe={Ok:Y1,Error:X1,fromExecution:function(e){try{return oe.Ok(e())}catch(t){return oe.Error(t)}},fromPromise:function(e){try{return Promise.resolve(function(t,r){try{var n=Promise.resolve(e).then(function(i){return oe.Ok(i)})}catch(i){return r(i)}return n&&n.then?n.then(void 0,r):n}(0,function(t){return oe.Error(t)}))}catch(t){return Promise.reject(t)}},fromOption:function(e,t){return e.toResult(t)},all:function(e){for(var t=e.length,r=oe.Ok([]),n=0,i=function(){if(n>=t)return{v:r};var o=e[n];o!=null&&(r=r.flatMap(function(a){return o.map(function(u){return a.push(u),a})})),n++};;){var s=i();if(typeof s=="object")return s.v}},allFromDict:function(e){var t=ju(e);return oe.all(Gu(e)).map(function(r){return Object.fromEntries(qu(t,r))})},equals:function(e,t,r){return e.tag===t.tag&&(e.tag==="Error"&&t.tag==="Error"||r(e.value,t.value))},pattern:{Ok:function(e){return{tag:"Ok",value:e}},Error:function(e){return{tag:"Error",value:e}}}},Yu={map:function(e){return this.tag==="Done"?u8(e(this.value)):this},flatMap:function(e){return this.tag==="Done"?e(this.value):this},getWithDefault:function(e){return this.tag==="Done"?this.value:e},match:function(e){return this.tag==="Done"?e.Done(this.value):this.tag==="Loading"?e.Loading():e.NotAsked()},tap:function(e){return e(this),this},toOption:function(){return this.tag==="Done"?Wu.Some(this.value):Wu.None()},isDone:function(){return this.tag==="Done"},isLoading:function(){return this.tag==="Loading"},isNotAsked:function(){return this.tag==="NotAsked"},__boxed_type__:"AsyncData"},c8=Fs({},Yu,{get:function(){return this.value}}),u8=function(e){var t=Object.create(c8);return t.tag="Done",t.value=e,t};(G1=Object.create(Yu)).tag="Loading",function(){var e=Object.create(Yu);return e.tag="NotAsked",e}();function f8(e){var t=this;this._state={tag:"Pending"},this._state.cancel=e(function(r){var n;t._state.tag==="Pending"&&((n=t._state.resolveCallbacks)==null||n.forEach(function(i){return i(r)}),t._state={tag:"Resolved",value:r})})}var Zi=function(){function e(r){this._state=void 0,this._state={tag:"Pending"}}e.fromPromise=function(r){return e.make(function(n){r.then(function(i){return n(oe.Ok(i))},function(i){return n(oe.Error(i))})})};var t=e.prototype;return t.onResolve=function(r){var n;this._state.tag==="Pending"?(this._state.resolveCallbacks=(n=this._state.resolveCallbacks)!=null?n:[],this._state.resolveCallbacks.push(r)):this._state.tag==="Resolved"&&r(this._state.value)},t.onCancel=function(r){var n;this._state.tag==="Pending"?(this._state.cancelCallbacks=(n=this._state.cancelCallbacks)!=null?n:[],this._state.cancelCallbacks.push(r)):this._state.tag==="Cancelled"&&r()},t.cancel=function(){if(this._state.tag==="Pending"){var r=this._state,n=r.cancel,i=r.cancelCallbacks;this._state={tag:"Cancelled"},n?.(),i?.forEach(function(s){return s()})}},t.map=function(r,n){var i=this;n===void 0&&(n=!1);var s=e.make(function(o){if(i.onResolve(function(a){o(r(a))}),n)return function(){i.cancel()}});return this.onCancel(function(){s.cancel()}),s},t.then=function(r){return this.onResolve(r),this},t.flatMap=function(r,n){var i=this;n===void 0&&(n=!1);var s=e.make(function(o){if(i.onResolve(function(a){var u=r(a);u.onResolve(o),u.onCancel(function(){return s.cancel()})}),n)return function(){i.cancel()}});return this.onCancel(function(){s.cancel()}),s},t.tap=function(r){return this.onResolve(r),this},t.tapOk=function(r){return this.onResolve(function(n){n.match({Ok:function(i){return r(i)},Error:function(){}})}),this},t.tapError=function(r){return this.onResolve(function(n){n.match({Ok:function(){},Error:function(i){return r(i)}})}),this},t.mapResult=function(r,n){return n===void 0&&(n=!1),this.map(function(i){return i.match({Ok:function(s){return r(s)},Error:function(){return i}})},n)},t.mapOk=function(r,n){return n===void 0&&(n=!1),this.map(function(i){return i.match({Ok:function(s){return oe.Ok(r(s))},Error:function(){return i}})},n)},t.mapError=function(r,n){return n===void 0&&(n=!1),this.map(function(i){return i.match({Ok:function(){return i},Error:function(s){return oe.Error(r(s))}})},n)},t.flatMapOk=function(r,n){return n===void 0&&(n=!1),this.flatMap(function(i){return i.match({Ok:function(s){return r(s)},Error:function(){return e.value(i)}})},n)},t.flatMapError=function(r,n){return n===void 0&&(n=!1),this.flatMap(function(i){return i.match({Ok:function(){return e.value(i)},Error:function(s){return r(s)}})},n)},t.toPromise=function(){var r=this;return new Promise(function(n){r.onResolve(n)})},t.resultToPromise=function(){var r=this;return new Promise(function(n,i){r.onResolve(function(s){s.match({Ok:n,Error:i})})})},e}();Zi.make=function(e){var t=Object.create(Z1);return f8.call(t,e),t},Zi.value=function(e){var t=Object.create(Z1);return t._state={tag:"Resolved",value:e},t},Zi.all=function(e,t){t===void 0&&(t=!1);for(var r=e.length,n=Zi.value([]),i=0,s=function(){if(i>=r)return{v:n};var a=e[i];a!=null&&(n=n.flatMap(function(u){return a.map(function(h){return u.push(h),u},t)},t)),i++};;){var o=s();if(typeof o=="object")return o.v}},Zi.allFromDict=function(e){var t=ju(e);return Zi.all(Gu(e)).map(function(r){return Object.fromEntries(qu(t,r))})};var Z1=Object.create(null,Object.getOwnPropertyDescriptors(Zi.prototype));const h8={isAppReady:!1,settings:{rpcUrl:_i.rpcUrl,defiData:"QmWb9Xe2SUfEtnciV3atJVG9VtvCN199rcYeaoLRvD3Fq2"},Tezos:void 0,wallet:void 0,userAddress:void 0,userName:void 0,userBalance:void 0,xtzExchangeRate:void 0,xtzPriceHistoric:[],userTokens:void 0,tokens:void 0,investments:void 0,currentLevel:0,serviceFee:.003,admin:"tz1TURQUcdTHQAGJNvv6TBHZ1YZEHLXXn5At",localStorage:void 0,lbData:{xtzPool:0,tokenPool:0,lqtTotal:0},blurryBalances:!1},sr=n8(h8),Ji={subscribe:sr.subscribe,updateAppReady:()=>sr.update(e=>({...e,isAppReady:!0})),updateTezos:e=>sr.update(t=>({...t,Tezos:e})),updateWallet:e=>sr.update(t=>({...t,wallet:e})),updateUserAddress:e=>{sr.update(t=>({...t,userAddress:e}))},updateUserName:e=>{sr.update(t=>({...t,userName:e}))},updateUserBalance:e=>{sr.update(t=>({...t,userBalance:e}))},updateXtzExchangeRate:e=>sr.update(t=>({...t,xtzExchangeRate:e})),updatePriceHistoric:e=>sr.update(t=>({...t,xtzPriceHistoric:e})),updateUserTokens:e=>sr.update(t=>({...t,userTokens:e})),updateTokens:e=>sr.update(t=>{let r;return t.tokens?r=t.tokens:r={},e.forEach(([n,i])=>r[n]=i),{...t,tokens:r}}),updateInvestments:e=>sr.update(t=>{let r;return t.investments?r=t.investments:r={},e.forEach(([n,i])=>{(Object.values(k0).includes(n)||n.includes("QUIPU-FARM"))&&i&&(r[n]=i)}),{...t,investments:r}}),updateCurrentLevel:e=>sr.update(t=>({...t,currentLevel:e})),updateLocalStorage:e=>sr.update(t=>({...t,localStorage:e})),updateLbData:e=>sr.update(t=>({...t,lbData:e})),updateBlurryBalances:()=>sr.update(e=>({...e,blurryBalances:!e.blurryBalances}))},J1=(e,t=4)=>isNaN(e)?"NaN":(e=+e,e?(+e.toFixed(t)/1).toLocaleString("en-US",{maximumFractionDigits:t}):"0"),Xu=async(e,t,r)=>{const n=new vt(r);if(n.isZero())return new vt(0);const s=await(await e.wallet.at(t)).storage();return n.times(s.storage.tez_pool).idiv(s.storage.total_supply)},Zu=async(e,t,r)=>{const n=new vt(r);if(n.isZero())return new vt(0);const s=await(await e.wallet.at(t)).storage();return n.times(s.storage.token_pool).idiv(s.storage.total_supply)},Q1=({lqTokens:e,pool:t,lqtTotal:r,decimals:n})=>+e*(t/10**n)/r,tg=({lqTokens:e,xtzPool:t,tokenPool:r,lqtTotal:n,tokenDecimal:i})=>{const s=Q1({lqTokens:e,pool:t,lqtTotal:n,decimals:6}),o=Q1({lqTokens:e,pool:r,lqtTotal:n,decimals:i});return{xtz:s,tokens:o}},jo=(e,t,r,n)=>{let i=new vt(0),s=new vt(0),o=new vt(0),a=new vt(0);try{i=new vt(e),s=new vt(t),o=new vt(r),a=new vt(n)}catch{return null}if(i.isGreaterThan(0)&&s.isGreaterThan(0)&&o.isGreaterThan(0)&&a.isGreaterThan(0)){const u=o.times(i).dividedBy(s),h=a.times(i).dividedBy(s);return{token1Output:u,token2Output:h}}else return null},l8=(e,t,r,n)=>{const i=new vt(e);return t?new vt(t).multipliedBy(i.minus(r)).dividedBy(10**n).toNumber():0},d8=async(e,t,r)=>{const n=Xi(Ji);let i,s;if(e.id===k0["YOUVES-UUSD-UBTC"]){const o=pr.uUSD,a=pr.uBTC,u="KT1VNEzpf631BLsdPJjt2ZhgUitR392x6cSi",y=await(await(await t.wallet.at(u)).storage()).storage.pairs.get(21);if(y){const{token_a_pool:w,token_b_pool:L,total_supply:I}=y,B=jo(e.balance,I,w,L);if(B){const{token1Output:V,token2Output:z}=B,$=V.toNumber(),O=z.toNumber();i=$/10**n.tokens.uUSD.decimals*n.tokens[o].getExchangeRate()+O/10**n.tokens.uBTC.decimals*n.tokens[a].getExchangeRate()}const C=jo(I,I,w,L);if(C){const{token1Output:V,token2Output:z}=C;s={inToken:I.toNumber(),inTez:V.toNumber()/10**n.tokens.uUSD.decimals*n.tokens[o].getExchangeRate()+z.toNumber()/10**n.tokens.uBTC.decimals*n.tokens[a].getExchangeRate()}}const T=await(await t.wallet.at(e.address)).storage(),D=await T.stakes.get(r),F=l8(T.dist_factor,D.stake.dividedBy(10**e.decimals),D.dist_factor,e.decimals);F&&F/10**n.tokens.YOU.decimals,Date.parse(D.age_timestamp)+180*24*60*60*1e3}}else if(e.id===k0["YOUVES-UUSD-WUSDC"]){const o=pr.uUSD,a=pr.wUSDC,u="KT1JeWiS8j1kic4PHx7aTnEr9p4xVtJNzk5b",f=await(await t.wallet.at(u)).storage(),{cashPool:y,tokenPool:w,lqtTotal:L}=f,I=jo(e.balance,L,w,y);if(I){const{token1Output:B,token2Output:C}=I,k=B.toNumber(),T=C.toNumber();i=k/10**n.tokens.uUSD.decimals*n.tokens[o].getExchangeRate()+T/10**n.tokens.wUSDC.decimals*n.tokens[a].getExchangeRate();const D=jo(L,L,w,y);if(D){const{token1Output:F,token2Output:V}=D;s={inToken:L.toNumber(),inTez:F.toNumber()/10**n.tokens.uUSD.decimals*n.tokens[o].getExchangeRate()+V.toNumber()/10**n.tokens.wUSDC.decimals*n.tokens[a].getExchangeRate()}}}}else i=e.balance/10**n.tokens.YOU.decimals*n.tokens.YOU.getExchangeRate();return i&&!isNaN(i)?oe.Ok({stakeInXtz:i,totalSupply:s}):oe.Error(`Stake in XTZ coudn't be computed for ${e.alias}`)},p8=async(e,t)=>{let r,n=Xi(Ji);if(e.id==="KUSD-KDAO")r=+(e.balance/10**n.tokens.kUSD.decimals*n.tokens.kUSD.getExchangeRate()).toFixed(5)/1;else if(e.id==="KUSD-QUIPU-LP"){const s=(await Xu(n.Tezos,"KT1K4EwTpbvYN9agJdjpyJm4ZZdhpUNKB3F6",e.balance)).toNumber()/10**6,a=(await Zu(t,"KT1K4EwTpbvYN9agJdjpyJm4ZZdhpUNKB3F6",e.balance)).toNumber()/10**n.tokens.kUSD.decimals*n.tokens.kUSD.getExchangeRate();r=+J1(s+a)}else if(e.id==="KUSD-QL"){const s=await(await t.wallet.at(n.tokens.kUSD.address)).storage(),a=await(await t.wallet.at(_i.kusdLiquidityPoolAddress)).storage();let u=await s.balances.get(_i.kusdLiquidityPoolAddress);u===void 0?u=new vt(0):u=u.balance;const h=a.totalSupply,f=Math.pow(10,18),y=Math.pow(10,36),w=u.dividedBy(f),L=h.dividedBy(y),I=w.dividedBy(L).toFixed(2);r=+J1(+(e.balance/10**e.decimals)*I*n.tokens.kUSD.getExchangeRate())}else if(e.id==="KDAO-KUSD-UUSD"){const i="KT1AVbWyM8E7DptyBCu4B5J5B7Nswkq7Skc6",o=await(await t.wallet.at(i)).storage(),a=jo(e.balance,o.lqtTotal,o.cashPool,o.tokenPool);if(a){const u=a.token1Output.toNumber()/10**n.tokens.kUSD.decimals*n.tokens.kUSD.getExchangeRate(),h=a.token2Output.toNumber()/10**n.tokens.uUSD.decimals*n.tokens.uUSD.getExchangeRate();r=u+h}}return r&&!isNaN(r)?oe.Ok(r):oe.Error(`Stake in XTZ coudn't be computed for ${e.alias}`)},g8=async e=>{const{Tezos:t,amountOfTokens:r,tokens:n}=e,i=1e18,s=new vt(r),a=await(await t.wallet.at("KT1DqhpvkfyBySVR4KV8Yu3K3jGSmLy7PTbr")).storage(),u=new li,h=`{ Pair (Pair (Pair "${n[0].address}" ${n[0].tokenId}) (Pair ${n[0].tokenType==="fa2"?"(Right Unit)":"(Left Unit)"} "${n[1].address}")) (Pair ${n[1].tokenId} ${n[1].tokenType==="fa2"?"(Right Unit)":"(Left Unit)"}) }`,f=u.parseMichelineExpression(h),y=u.parseMichelineExpression("(pair (pair (pair address nat) (pair (or unit unit) address)) (pair nat (or unit unit)))"),w=await t.rpc.packData({data:f[0],type:y}),L=await a.storage.token_to_id.get(w.packed);if(L){const{token_a_pool:I,token_b_pool:B,total_supply:C}=await a.storage.pairs.get(L.toNumber()),k=s.times(1e6).times(I).idiv(C).idiv(i),T=s.times(1e6).times(B).idiv(C).idiv(i);return{tokenAAmount:k.toNumber(),tokenBAmount:T.toNumber()}}else return null},v8=async e=>{let{Tezos:t,id:r,balance:n,paulToken:i}=e,s="";if(r==="PAUL-XTZ"?s="KT1K8A8DLUTVuHaDBCZiG6AJdvKJbtH8dqmN":r==="MAG-XTZ"&&(s="KT1WREc3cpr36Nqjvegr6WSPgQKwDjL7XxLN"),!s)return null;const a=(await Xu(t,s,n)).toNumber()/10**6,h=(await Zu(t,s,n)).toNumber()/10**i.decimals*i.exchangeRate;return a+h},m8=async(e,t)=>{let r,n=Xi(Ji);if(e.id==="PAUL-XTZ"||e.id==="MAG-XTZ"?r=await v8({Tezos:t,id:e.id,balance:e.balance,paulToken:{decimals:n.tokens.PAUL.decimals,exchangeRate:n.tokens.PAUL.getExchangeRate()}}):e.id==="PAUL-PAUL"?r=e.balance/10**e.decimals*n.tokens.PAUL.getExchangeRate():r=null,e.info?.includes("paul-lqt")){const i=await g8({Tezos:t,amountOfTokens:e.balance,tokens:e.icons.map(s=>{const{address:o,tokenId:a=0,type:u}=n.tokens[s];return{address:o,tokenId:a,tokenType:u}})});if(i){const s=i.tokenAAmount/10**n.tokens[e.icons[0]].decimals*n.tokens[e.icons[0]].getExchangeRate()/1e6,o=i.tokenBAmount/10**n.tokens[e.icons[1]].decimals*n.tokens[e.icons[1]].getExchangeRate()/10**6;r=s+o}}return r&&!isNaN(r)?oe.Ok(r):oe.Error(`Stake in XTZ coudn't be computed for ${e.alias} (${e.platform})`)},x8=(e,t)=>{switch(t){case"Ctez-PAUL-LP":case"Ctez-wWBTC-LP":return e/10**11;case"PLENTY-SMAK-LP":return e/10**8;case"PLENTY-wUSDC":case"PLENTY-USDtz-LP":case"PLENTY-QUIPU-LP":case"PLENTY-hDAO-LP":case"PLENTY-wUSDT-LP":case"PLENTY-Ctez-LP":case"Ctez-kUSD-LP":case"Ctez-wDAI-LP":case"PLENTY-CTEZ-TEZ-LP":return e/10**6;case"PLENTY-wWBTC":case"PLENTY-tzBTC-LP":case"PLENTY-WRAP-LP":case"PLENTY-UNO-LP":case"PLENTY-DOGA-CTEZ-LP":return e/10**5;case"PLENTY-uUSD-LP":case"PLENTY-KALAM-LP":return e/10**4;case"PLENTY-YOU-LP":return e/10**3;default:return t.match(/Ctez-[a-zA-Z]+-LP/)?e/10**12:e}},b8=(e,t,r,n)=>{const i=e*n/r,s=t*n/r;return{token1Amount:i,token2Amount:s}},y8=async(e,t,r,n)=>{try{if(!t)throw`No exchange address for ${e}`;const i=x8(r,e),o=await(await n.wallet.at(t)).storage();let a,u,h,f;return e==="PLENTY-CTEZ-TEZ-LP"?(a=o.tezPool.toNumber(),u=o.ctezPool.toNumber(),h=o.lqtTotal.toNumber(),f=pr.ctez):["PLENTY-BUSDE-USDCE-LP","PLENTY-KUSD-USDCE-LP","PLENTY-USDTZ-USDCE-LP","PLENTY-KUSD-USDT-LP","PLENTY-UUSD-USDT-LP","PLENTY-DAIE-USDCE-LP","PLENTY-UUSD-USDCE-LP"].includes(e)?(a=o.token1Pool.toNumber(),u=o.token2Pool.toNumber(),h=o.lqtTotal.toNumber(),f=(()=>{switch(e){case"PLENTY-BUSDE-USDCE-LP":return pr.USDCE;case"PLENTY-KUSD-USDCE-LP":return pr.USDCE;case"PLENTY-USDTZ-USDCE-LP":return pr.USDCE;case"PLENTY-KUSD-USDT-LP":return pr.USDT;case"PLENTY-UUSD-USDT-LP":return pr.USDT;case"PLENTY-DAIE-USDCE-LP":return pr.USDCE;case"PLENTY-UUSD-USDCE-LP":return pr.USDCE}})()):(a=o.token1_pool.toNumber(),u=o.token2_pool.toNumber(),h=o.totalSupply.toNumber(),f=e.split("-")[1]),{...b8(a,u,h,i),token2:f}}catch(i){return console.error(i),null}},w8=async({isPlentyLpToken:e,id:t,balance:r,decimals:n,exchangeRate:i,rewardToken:s})=>{if(!r)return 0;const o=Xi(Ji);if(e){const a=await y8(t,_i.plentyDexAddresses[t],r,o.Tezos);if(a){let u=0;return s===pr.YOU?u=a.token1Amount/10**o.tokens.uUSD.decimals*o.tokens.uUSD.getExchangeRate()+a.token2Amount/10**o.tokens[a.token2].decimals*o.tokens[a.token2].getExchangeRate():t==="PLENTY-CTEZ-TEZ-LP"?u=a.token1Amount+a.token2Amount*o.tokens.ctez.getExchangeRate():t==="PLENTY-DOGA-CTEZ-LP"?u=a.token2Amount/10**o.tokens.ctez.decimals*o.tokens.ctez.getExchangeRate()+a.token1Amount/10**o.tokens.DOGA.decimals*o.tokens.DOGA.getExchangeRate():u=a.token1Amount/10**o.tokens.PLENTY.decimals*o.tokens.PLENTY.getExchangeRate()+a.token2Amount/10**o.tokens[a.token2].decimals*o.tokens[a.token2].getExchangeRate(),+u}else return 0}else return+(r/10**n*i).toFixed(5)/1},E8=async e=>{const t=Xi(Ji),r=await w8({isPlentyLpToken:e.platform==="plenty",id:e.id,balance:e.balance,decimals:e.decimals,exchangeRate:t.tokens[e.rewardToken].getExchangeRate(),rewardToken:e.rewardToken});return(r||r===0)&&!isNaN(r)?oe.Ok(r):oe.Error(`Stake in XTZ coudn't be computed for ${e.alias}`)},_8=async(e,t)=>{const r=e.id.replace("QUIPU-FARM-",""),s=await(await(await t.wallet.at(e.address)).storage()).storage.farms.get(r);if(s?.stake_params?.staked_token?.fA2?.token){const o=s.stake_params.staked_token.fA2.token,u=await(await t.wallet.at(o)).storage();if(u.storage){const{tez_pool:h,token_pool:f,total_supply:y}=u.storage;if(h&&f&&y){const w=tg({lqTokens:e.balance,xtzPool:h.toNumber(),tokenPool:f.toNumber(),lqtTotal:y.toNumber(),tokenDecimal:e.decimals});return oe.Ok(w)}else return oe.Error(`Missing properties in storage for Quipu staked token at ${o}`)}else return oe.Error(`Unexpected storage for Quipu staked token at ${o}`)}else return oe.Error(`Couldn't retrieve staked token address for ${e.id} at ${e.address}`)},S8=async(e,t)=>{const r=Xi(Ji);let n;const s=await(await e.wallet.at(t.address)).storage(),{input_token_address:o}=s,u=await(await e.wallet.at(o)).storage(),{total_supply:h}=u,f=_i.vortexDexAddresses[`${t.icons[0]}-${t.icons[1]}`];if(h&&f){const w=await(await e.wallet.at(f)).storage(),{xtzPool:L,tokenPool:I}=w,B=tg({lqTokens:t.balance,xtzPool:L,tokenPool:I,lqtTotal:h.toNumber(),tokenDecimal:r.tokens[t.icons[1]].decimals});B&&!isNaN(B.xtz)&&!isNaN(B.tokens)&&(n=B.xtz*2)}return n&&!isNaN(n)?oe.Ok(n):oe.Error(`Stake in XTZ coudn't be computed for ${t.alias}`)};var A8={exports:{}},jt={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Kt,function(){var r=r||function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof{}<"u"&&{}.crypto&&(s={}.crypto),!s&&typeof wf=="function")try{s=require("crypto")}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function T(){}return function(D){var F;return T.prototype=D,F=new T,T.prototype=null,F}}(),u={},h=u.lib={},f=h.Base=function(){return{extend:function(T){var D=a(this);return T&&D.mixIn(T),(!D.hasOwnProperty("init")||this.init===D.init)&&(D.init=function(){D.$super.init.apply(this,arguments)}),D.init.prototype=D,D.$super=this,D},create:function(){var T=this.extend();return T.init.apply(T,arguments),T},init:function(){},mixIn:function(T){for(var D in T)T.hasOwnProperty(D)&&(this[D]=T[D]);T.hasOwnProperty("toString")&&(this.toString=T.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),y=h.WordArray=f.extend({init:function(T,D){T=this.words=T||[],D!=i?this.sigBytes=D:this.sigBytes=T.length*4},toString:function(T){return(T||L).stringify(this)},concat:function(T){var D=this.words,F=T.words,V=this.sigBytes,z=T.sigBytes;if(this.clamp(),V%4)for(var $=0;$<z;$++){var O=F[$>>>2]>>>24-$%4*8&255;D[V+$>>>2]|=O<<24-(V+$)%4*8}else for(var M=0;M<z;M+=4)D[V+M>>>2]=F[M>>>2];return this.sigBytes+=z,this},clamp:function(){var T=this.words,D=this.sigBytes;T[D>>>2]&=4294967295<<32-D%4*8,T.length=n.ceil(D/4)},clone:function(){var T=f.clone.call(this);return T.words=this.words.slice(0),T},random:function(T){for(var D=[],F=0;F<T;F+=4)D.push(o());return new y.init(D,T)}}),w=u.enc={},L=w.Hex={stringify:function(T){for(var D=T.words,F=T.sigBytes,V=[],z=0;z<F;z++){var $=D[z>>>2]>>>24-z%4*8&255;V.push(($>>>4).toString(16)),V.push(($&15).toString(16))}return V.join("")},parse:function(T){for(var D=T.length,F=[],V=0;V<D;V+=2)F[V>>>3]|=parseInt(T.substr(V,2),16)<<24-V%8*4;return new y.init(F,D/2)}},I=w.Latin1={stringify:function(T){for(var D=T.words,F=T.sigBytes,V=[],z=0;z<F;z++){var $=D[z>>>2]>>>24-z%4*8&255;V.push(String.fromCharCode($))}return V.join("")},parse:function(T){for(var D=T.length,F=[],V=0;V<D;V++)F[V>>>2]|=(T.charCodeAt(V)&255)<<24-V%4*8;return new y.init(F,D)}},B=w.Utf8={stringify:function(T){try{return decodeURIComponent(escape(I.stringify(T)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(T){return I.parse(unescape(encodeURIComponent(T)))}},C=h.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new y.init,this._nDataBytes=0},_append:function(T){typeof T=="string"&&(T=B.parse(T)),this._data.concat(T),this._nDataBytes+=T.sigBytes},_process:function(T){var D,F=this._data,V=F.words,z=F.sigBytes,$=this.blockSize,O=$*4,M=z/O;T?M=n.ceil(M):M=n.max((M|0)-this._minBufferSize,0);var x=M*$,b=n.min(x*4,z);if(x){for(var c=0;c<x;c+=$)this._doProcessBlock(V,c);D=V.splice(0,x),F.sigBytes-=b}return new y.init(D,b)},clone:function(){var T=f.clone.call(this);return T._data=this._data.clone(),T},_minBufferSize:0});h.Hasher=C.extend({cfg:f.extend(),init:function(T){this.cfg=this.cfg.extend(T),this.reset()},reset:function(){C.reset.call(this),this._doReset()},update:function(T){return this._append(T),this._process(),this},finalize:function(T){T&&this._append(T);var D=this._doFinalize();return D},blockSize:16,_createHelper:function(T){return function(D,F){return new T.init(F).finalize(D)}},_createHmacHelper:function(T){return function(D,F){return new k.HMAC.init(T,F).finalize(D)}}});var k=u.algo={};return u}(Math);return r})})(jt);var Go={exports:{}};(function(e,t){(function(r,n){e.exports=n(jt.exports)})(Kt,function(r){return function(n){var i=r,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(h,f){this.high=h,this.low=f}}),u.WordArray=o.extend({init:function(h,f){h=this.words=h||[],f!=n?this.sigBytes=f:this.sigBytes=h.length*8},toX32:function(){for(var h=this.words,f=h.length,y=[],w=0;w<f;w++){var L=h[w];y.push(L.high),y.push(L.low)}return a.create(y,this.sigBytes)},clone:function(){for(var h=o.clone.call(this),f=h.words=this.words.slice(0),y=f.length,w=0;w<y;w++)f[w]=f[w].clone();return h}})}(),r})})(Go);var eg={exports:{}};(function(e,t){(function(r,n){e.exports=n(jt.exports)})(Kt,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,i=n.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var h=u.byteLength,f=[],y=0;y<h;y++)f[y>>>2]|=u[y]<<24-y%4*8;o.call(this,f,h)}else o.apply(this,arguments)};a.prototype=s}}(),r.lib.WordArray})})(eg);var rg={exports:{}};(function(e,t){(function(r,n){e.exports=n(jt.exports)})(Kt,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var h=u.words,f=u.sigBytes,y=[],w=0;w<f;w+=2){var L=h[w>>>2]>>>16-w%4*8&65535;y.push(String.fromCharCode(L))}return y.join("")},parse:function(u){for(var h=u.length,f=[],y=0;y<h;y++)f[y>>>1]|=u.charCodeAt(y)<<16-y%2*16;return s.create(f,h*2)}},o.Utf16LE={stringify:function(u){for(var h=u.words,f=u.sigBytes,y=[],w=0;w<f;w+=2){var L=a(h[w>>>2]>>>16-w%4*8&65535);y.push(String.fromCharCode(L))}return y.join("")},parse:function(u){for(var h=u.length,f=[],y=0;y<h;y++)f[y>>>1]|=a(u.charCodeAt(y)<<16-y%2*16);return s.create(f,h*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),r.enc.Utf16})})(rg);var Qi={exports:{}};(function(e,t){(function(r,n){e.exports=n(jt.exports)})(Kt,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.enc;o.Base64={stringify:function(u){var h=u.words,f=u.sigBytes,y=this._map;u.clamp();for(var w=[],L=0;L<f;L+=3)for(var I=h[L>>>2]>>>24-L%4*8&255,B=h[L+1>>>2]>>>24-(L+1)%4*8&255,C=h[L+2>>>2]>>>24-(L+2)%4*8&255,k=I<<16|B<<8|C,T=0;T<4&&L+T*.75<f;T++)w.push(y.charAt(k>>>6*(3-T)&63));var D=y.charAt(64);if(D)for(;w.length%4;)w.push(D);return w.join("")},parse:function(u){var h=u.length,f=this._map,y=this._reverseMap;if(!y){y=this._reverseMap=[];for(var w=0;w<f.length;w++)y[f.charCodeAt(w)]=w}var L=f.charAt(64);if(L){var I=u.indexOf(L);I!==-1&&(h=I)}return a(u,h,y)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,h,f){for(var y=[],w=0,L=0;L<h;L++)if(L%4){var I=f[u.charCodeAt(L-1)]<<L%4*2,B=f[u.charCodeAt(L)]>>>6-L%4*2,C=I|B;y[w>>>2]|=C<<24-w%4*8,w++}return s.create(y,w)}}(),r.enc.Base64})})(Qi);var ng={exports:{}};(function(e,t){(function(r,n){e.exports=n(jt.exports)})(Kt,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.enc;o.Base64url={stringify:function(u,h=!0){var f=u.words,y=u.sigBytes,w=h?this._safe_map:this._map;u.clamp();for(var L=[],I=0;I<y;I+=3)for(var B=f[I>>>2]>>>24-I%4*8&255,C=f[I+1>>>2]>>>24-(I+1)%4*8&255,k=f[I+2>>>2]>>>24-(I+2)%4*8&255,T=B<<16|C<<8|k,D=0;D<4&&I+D*.75<y;D++)L.push(w.charAt(T>>>6*(3-D)&63));var F=w.charAt(64);if(F)for(;L.length%4;)L.push(F);return L.join("")},parse:function(u,h=!0){var f=u.length,y=h?this._safe_map:this._map,w=this._reverseMap;if(!w){w=this._reverseMap=[];for(var L=0;L<y.length;L++)w[y.charCodeAt(L)]=L}var I=y.charAt(64);if(I){var B=u.indexOf(I);B!==-1&&(f=B)}return a(u,f,w)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,h,f){for(var y=[],w=0,L=0;L<h;L++)if(L%4){var I=f[u.charCodeAt(L-1)]<<L%4*2,B=f[u.charCodeAt(L)]>>>6-L%4*2,C=I|B;y[w>>>2]|=C<<24-w%4*8,w++}return s.create(y,w)}}(),r.enc.Base64url})})(ng);var ts={exports:{}};(function(e,t){(function(r,n){e.exports=n(jt.exports)})(Kt,function(r){return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,h=[];(function(){for(var B=0;B<64;B++)h[B]=n.abs(n.sin(B+1))*4294967296|0})();var f=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(B,C){for(var k=0;k<16;k++){var T=C+k,D=B[T];B[T]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}var F=this._hash.words,V=B[C+0],z=B[C+1],$=B[C+2],O=B[C+3],M=B[C+4],x=B[C+5],b=B[C+6],c=B[C+7],l=B[C+8],g=B[C+9],v=B[C+10],d=B[C+11],A=B[C+12],R=B[C+13],S=B[C+14],p=B[C+15],P=F[0],H=F[1],G=F[2],Y=F[3];P=y(P,H,G,Y,V,7,h[0]),Y=y(Y,P,H,G,z,12,h[1]),G=y(G,Y,P,H,$,17,h[2]),H=y(H,G,Y,P,O,22,h[3]),P=y(P,H,G,Y,M,7,h[4]),Y=y(Y,P,H,G,x,12,h[5]),G=y(G,Y,P,H,b,17,h[6]),H=y(H,G,Y,P,c,22,h[7]),P=y(P,H,G,Y,l,7,h[8]),Y=y(Y,P,H,G,g,12,h[9]),G=y(G,Y,P,H,v,17,h[10]),H=y(H,G,Y,P,d,22,h[11]),P=y(P,H,G,Y,A,7,h[12]),Y=y(Y,P,H,G,R,12,h[13]),G=y(G,Y,P,H,S,17,h[14]),H=y(H,G,Y,P,p,22,h[15]),P=w(P,H,G,Y,z,5,h[16]),Y=w(Y,P,H,G,b,9,h[17]),G=w(G,Y,P,H,d,14,h[18]),H=w(H,G,Y,P,V,20,h[19]),P=w(P,H,G,Y,x,5,h[20]),Y=w(Y,P,H,G,v,9,h[21]),G=w(G,Y,P,H,p,14,h[22]),H=w(H,G,Y,P,M,20,h[23]),P=w(P,H,G,Y,g,5,h[24]),Y=w(Y,P,H,G,S,9,h[25]),G=w(G,Y,P,H,O,14,h[26]),H=w(H,G,Y,P,l,20,h[27]),P=w(P,H,G,Y,R,5,h[28]),Y=w(Y,P,H,G,$,9,h[29]),G=w(G,Y,P,H,c,14,h[30]),H=w(H,G,Y,P,A,20,h[31]),P=L(P,H,G,Y,x,4,h[32]),Y=L(Y,P,H,G,l,11,h[33]),G=L(G,Y,P,H,d,16,h[34]),H=L(H,G,Y,P,S,23,h[35]),P=L(P,H,G,Y,z,4,h[36]),Y=L(Y,P,H,G,M,11,h[37]),G=L(G,Y,P,H,c,16,h[38]),H=L(H,G,Y,P,v,23,h[39]),P=L(P,H,G,Y,R,4,h[40]),Y=L(Y,P,H,G,V,11,h[41]),G=L(G,Y,P,H,O,16,h[42]),H=L(H,G,Y,P,b,23,h[43]),P=L(P,H,G,Y,g,4,h[44]),Y=L(Y,P,H,G,A,11,h[45]),G=L(G,Y,P,H,p,16,h[46]),H=L(H,G,Y,P,$,23,h[47]),P=I(P,H,G,Y,V,6,h[48]),Y=I(Y,P,H,G,c,10,h[49]),G=I(G,Y,P,H,S,15,h[50]),H=I(H,G,Y,P,x,21,h[51]),P=I(P,H,G,Y,A,6,h[52]),Y=I(Y,P,H,G,O,10,h[53]),G=I(G,Y,P,H,v,15,h[54]),H=I(H,G,Y,P,z,21,h[55]),P=I(P,H,G,Y,l,6,h[56]),Y=I(Y,P,H,G,p,10,h[57]),G=I(G,Y,P,H,b,15,h[58]),H=I(H,G,Y,P,R,21,h[59]),P=I(P,H,G,Y,M,6,h[60]),Y=I(Y,P,H,G,d,10,h[61]),G=I(G,Y,P,H,$,15,h[62]),H=I(H,G,Y,P,g,21,h[63]),F[0]=F[0]+P|0,F[1]=F[1]+H|0,F[2]=F[2]+G|0,F[3]=F[3]+Y|0},_doFinalize:function(){var B=this._data,C=B.words,k=this._nDataBytes*8,T=B.sigBytes*8;C[T>>>5]|=128<<24-T%32;var D=n.floor(k/4294967296),F=k;C[(T+64>>>9<<4)+15]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,C[(T+64>>>9<<4)+14]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,B.sigBytes=(C.length+1)*4,this._process();for(var V=this._hash,z=V.words,$=0;$<4;$++){var O=z[$];z[$]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return V},clone:function(){var B=a.clone.call(this);return B._hash=this._hash.clone(),B}});function y(B,C,k,T,D,F,V){var z=B+(C&k|~C&T)+D+V;return(z<<F|z>>>32-F)+C}function w(B,C,k,T,D,F,V){var z=B+(C&T|k&~T)+D+V;return(z<<F|z>>>32-F)+C}function L(B,C,k,T,D,F,V){var z=B+(C^k^T)+D+V;return(z<<F|z>>>32-F)+C}function I(B,C,k,T,D,F,V){var z=B+(k^(C|~T))+D+V;return(z<<F|z>>>32-F)+C}i.MD5=a._createHelper(f),i.HmacMD5=a._createHmacHelper(f)}(Math),r.MD5})})(ts);var F0={exports:{}};(function(e,t){(function(r,n){e.exports=n(jt.exports)})(Kt,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=i.Hasher,a=n.algo,u=[],h=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(f,y){for(var w=this._hash.words,L=w[0],I=w[1],B=w[2],C=w[3],k=w[4],T=0;T<80;T++){if(T<16)u[T]=f[y+T]|0;else{var D=u[T-3]^u[T-8]^u[T-14]^u[T-16];u[T]=D<<1|D>>>31}var F=(L<<5|L>>>27)+k+u[T];T<20?F+=(I&B|~I&C)+1518500249:T<40?F+=(I^B^C)+1859775393:T<60?F+=(I&B|I&C|B&C)-1894007588:F+=(I^B^C)-899497514,k=C,C=B,B=I<<30|I>>>2,I=L,L=F}w[0]=w[0]+L|0,w[1]=w[1]+I|0,w[2]=w[2]+B|0,w[3]=w[3]+C|0,w[4]=w[4]+k|0},_doFinalize:function(){var f=this._data,y=f.words,w=this._nDataBytes*8,L=f.sigBytes*8;return y[L>>>5]|=128<<24-L%32,y[(L+64>>>9<<4)+14]=Math.floor(w/4294967296),y[(L+64>>>9<<4)+15]=w,f.sigBytes=y.length*4,this._process(),this._hash},clone:function(){var f=o.clone.call(this);return f._hash=this._hash.clone(),f}});n.SHA1=o._createHelper(h),n.HmacSHA1=o._createHmacHelper(h)}(),r.SHA1})})(F0);var Ju={exports:{}};(function(e,t){(function(r,n){e.exports=n(jt.exports)})(Kt,function(r){return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,h=[],f=[];(function(){function L(k){for(var T=n.sqrt(k),D=2;D<=T;D++)if(!(k%D))return!1;return!0}function I(k){return(k-(k|0))*4294967296|0}for(var B=2,C=0;C<64;)L(B)&&(C<8&&(h[C]=I(n.pow(B,1/2))),f[C]=I(n.pow(B,1/3)),C++),B++})();var y=[],w=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(h.slice(0))},_doProcessBlock:function(L,I){for(var B=this._hash.words,C=B[0],k=B[1],T=B[2],D=B[3],F=B[4],V=B[5],z=B[6],$=B[7],O=0;O<64;O++){if(O<16)y[O]=L[I+O]|0;else{var M=y[O-15],x=(M<<25|M>>>7)^(M<<14|M>>>18)^M>>>3,b=y[O-2],c=(b<<15|b>>>17)^(b<<13|b>>>19)^b>>>10;y[O]=x+y[O-7]+c+y[O-16]}var l=F&V^~F&z,g=C&k^C&T^k&T,v=(C<<30|C>>>2)^(C<<19|C>>>13)^(C<<10|C>>>22),d=(F<<26|F>>>6)^(F<<21|F>>>11)^(F<<7|F>>>25),A=$+d+l+f[O]+y[O],R=v+g;$=z,z=V,V=F,F=D+A|0,D=T,T=k,k=C,C=A+R|0}B[0]=B[0]+C|0,B[1]=B[1]+k|0,B[2]=B[2]+T|0,B[3]=B[3]+D|0,B[4]=B[4]+F|0,B[5]=B[5]+V|0,B[6]=B[6]+z|0,B[7]=B[7]+$|0},_doFinalize:function(){var L=this._data,I=L.words,B=this._nDataBytes*8,C=L.sigBytes*8;return I[C>>>5]|=128<<24-C%32,I[(C+64>>>9<<4)+14]=n.floor(B/4294967296),I[(C+64>>>9<<4)+15]=B,L.sigBytes=I.length*4,this._process(),this._hash},clone:function(){var L=a.clone.call(this);return L._hash=this._hash.clone(),L}});i.SHA256=a._createHelper(w),i.HmacSHA256=a._createHmacHelper(w)}(Math),r.SHA256})})(Ju);var ig={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,Ju.exports)})(Kt,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var h=a._doFinalize.call(this);return h.sigBytes-=4,h}});n.SHA224=a._createHelper(u),n.HmacSHA224=a._createHmacHelper(u)}(),r.SHA224})})(ig);var Qu={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,Go.exports)})(Kt,function(r){return function(){var n=r,i=n.lib,s=i.Hasher,o=n.x64,a=o.Word,u=o.WordArray,h=n.algo;function f(){return a.create.apply(a,arguments)}var y=[f(1116352408,3609767458),f(1899447441,602891725),f(3049323471,3964484399),f(3921009573,2173295548),f(961987163,4081628472),f(1508970993,3053834265),f(2453635748,2937671579),f(2870763221,3664609560),f(3624381080,2734883394),f(310598401,1164996542),f(607225278,1323610764),f(1426881987,3590304994),f(1925078388,4068182383),f(2162078206,991336113),f(2614888103,633803317),f(3248222580,3479774868),f(3835390401,2666613458),f(4022224774,944711139),f(264347078,2341262773),f(604807628,2007800933),f(770255983,1495990901),f(1249150122,1856431235),f(1555081692,3175218132),f(1996064986,2198950837),f(2554220882,3999719339),f(2821834349,766784016),f(2952996808,2566594879),f(3210313671,3203337956),f(3336571891,1034457026),f(3584528711,2466948901),f(113926993,3758326383),f(338241895,168717936),f(666307205,1188179964),f(773529912,1546045734),f(1294757372,1522805485),f(1396182291,2643833823),f(1695183700,2343527390),f(1986661051,1014477480),f(2177026350,1206759142),f(2456956037,344077627),f(2730485921,1290863460),f(2820302411,3158454273),f(3259730800,3505952657),f(3345764771,106217008),f(3516065817,3606008344),f(3600352804,1432725776),f(4094571909,1467031594),f(275423344,851169720),f(430227734,3100823752),f(506948616,1363258195),f(659060556,3750685593),f(883997877,3785050280),f(958139571,3318307427),f(1322822218,3812723403),f(1537002063,2003034995),f(1747873779,3602036899),f(1955562222,1575990012),f(2024104815,1125592928),f(2227730452,2716904306),f(2361852424,442776044),f(2428436474,593698344),f(2756734187,3733110249),f(3204031479,2999351573),f(3329325298,3815920427),f(3391569614,3928383900),f(3515267271,566280711),f(3940187606,3454069534),f(4118630271,4000239992),f(116418474,1914138554),f(174292421,2731055270),f(289380356,3203993006),f(460393269,320620315),f(685471733,587496836),f(852142971,1086792851),f(1017036298,365543100),f(1126000580,2618297676),f(1288033470,3409855158),f(1501505948,4234509866),f(1607167915,987167468),f(1816402316,1246189591)],w=[];(function(){for(var I=0;I<80;I++)w[I]=f()})();var L=h.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(I,B){for(var C=this._hash.words,k=C[0],T=C[1],D=C[2],F=C[3],V=C[4],z=C[5],$=C[6],O=C[7],M=k.high,x=k.low,b=T.high,c=T.low,l=D.high,g=D.low,v=F.high,d=F.low,A=V.high,R=V.low,S=z.high,p=z.low,P=$.high,H=$.low,G=O.high,Y=O.low,rt=M,nt=x,q=b,Z=c,W=l,_=g,j=v,it=d,st=A,ut=R,ot=S,ht=p,Vt=P,yt=H,wt=G,fe=Y,dt=0;dt<80;dt++){var ft,Wt,xt=w[dt];if(dt<16)Wt=xt.high=I[B+dt*2]|0,ft=xt.low=I[B+dt*2+1]|0;else{var pt=w[dt-15],Xt=pt.high,N=pt.low,m=(Xt>>>1|N<<31)^(Xt>>>8|N<<24)^Xt>>>7,E=(N>>>1|Xt<<31)^(N>>>8|Xt<<24)^(N>>>7|Xt<<25),U=w[dt-2],K=U.high,J=U.low,Q=(K>>>19|J<<13)^(K<<3|J>>>29)^K>>>6,at=(J>>>19|K<<13)^(J<<3|K>>>29)^(J>>>6|K<<26),Dt=w[dt-7],lt=Dt.high,gt=Dt.low,Tt=w[dt-16],ae=Tt.high,ce=Tt.low;ft=E+gt,Wt=m+lt+(ft>>>0<E>>>0?1:0),ft=ft+at,Wt=Wt+Q+(ft>>>0<at>>>0?1:0),ft=ft+ce,Wt=Wt+ae+(ft>>>0<ce>>>0?1:0),xt.high=Wt,xt.low=ft}var Ai=st&ot^~st&Vt,pe=ut&ht^~ut&yt,Nt=rt&q^rt&W^q&W,Re=nt&Z^nt&_^Z&_,Mt=(rt>>>28|nt<<4)^(rt<<30|nt>>>2)^(rt<<25|nt>>>7),Rt=(nt>>>28|rt<<4)^(nt<<30|rt>>>2)^(nt<<25|rt>>>7),Le=(st>>>14|ut<<18)^(st>>>18|ut<<14)^(st<<23|ut>>>9),Bt=(ut>>>14|st<<18)^(ut>>>18|st<<14)^(ut<<23|st>>>9),Lt=y[dt],Oe=Lt.high,Ot=Lt.low,mt=fe+Bt,ue=wt+Le+(mt>>>0<fe>>>0?1:0),mt=mt+pe,ue=ue+Ai+(mt>>>0<pe>>>0?1:0),mt=mt+Ot,ue=ue+Oe+(mt>>>0<Ot>>>0?1:0),mt=mt+ft,ue=ue+Wt+(mt>>>0<ft>>>0?1:0),It=Rt+Re,Ct=Mt+Nt+(It>>>0<Rt>>>0?1:0);wt=Vt,fe=yt,Vt=ot,yt=ht,ot=st,ht=ut,ut=it+mt|0,st=j+ue+(ut>>>0<it>>>0?1:0)|0,j=W,it=_,W=q,_=Z,q=rt,Z=nt,nt=mt+It|0,rt=ue+Ct+(nt>>>0<mt>>>0?1:0)|0}x=k.low=x+nt,k.high=M+rt+(x>>>0<nt>>>0?1:0),c=T.low=c+Z,T.high=b+q+(c>>>0<Z>>>0?1:0),g=D.low=g+_,D.high=l+W+(g>>>0<_>>>0?1:0),d=F.low=d+it,F.high=v+j+(d>>>0<it>>>0?1:0),R=V.low=R+ut,V.high=A+st+(R>>>0<ut>>>0?1:0),p=z.low=p+ht,z.high=S+ot+(p>>>0<ht>>>0?1:0),H=$.low=H+yt,$.high=P+Vt+(H>>>0<yt>>>0?1:0),Y=O.low=Y+fe,O.high=G+wt+(Y>>>0<fe>>>0?1:0)},_doFinalize:function(){var I=this._data,B=I.words,C=this._nDataBytes*8,k=I.sigBytes*8;B[k>>>5]|=128<<24-k%32,B[(k+128>>>10<<5)+30]=Math.floor(C/4294967296),B[(k+128>>>10<<5)+31]=C,I.sigBytes=B.length*4,this._process();var T=this._hash.toX32();return T},clone:function(){var I=s.clone.call(this);return I._hash=this._hash.clone(),I},blockSize:1024/32});n.SHA512=s._createHelper(L),n.HmacSHA512=s._createHmacHelper(L)}(),r.SHA512})})(Qu);var sg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,Go.exports,Qu.exports)})(Kt,function(r){return function(){var n=r,i=n.x64,s=i.Word,o=i.WordArray,a=n.algo,u=a.SHA512,h=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var f=u._doFinalize.call(this);return f.sigBytes-=16,f}});n.SHA384=u._createHelper(h),n.HmacSHA384=u._createHmacHelper(h)}(),r.SHA384})})(sg);var og={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,Go.exports)})(Kt,function(r){return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,h=u.Word,f=i.algo,y=[],w=[],L=[];(function(){for(var C=1,k=0,T=0;T<24;T++){y[C+5*k]=(T+1)*(T+2)/2%64;var D=k%5,F=(2*C+3*k)%5;C=D,k=F}for(var C=0;C<5;C++)for(var k=0;k<5;k++)w[C+5*k]=k+(2*C+3*k)%5*5;for(var V=1,z=0;z<24;z++){for(var $=0,O=0,M=0;M<7;M++){if(V&1){var x=(1<<M)-1;x<32?O^=1<<x:$^=1<<x-32}V&128?V=V<<1^113:V<<=1}L[z]=h.create($,O)}})();var I=[];(function(){for(var C=0;C<25;C++)I[C]=h.create()})();var B=f.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var C=this._state=[],k=0;k<25;k++)C[k]=new h.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(C,k){for(var T=this._state,D=this.blockSize/2,F=0;F<D;F++){var V=C[k+2*F],z=C[k+2*F+1];V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,z=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360;var $=T[F];$.high^=z,$.low^=V}for(var O=0;O<24;O++){for(var M=0;M<5;M++){for(var x=0,b=0,c=0;c<5;c++){var $=T[M+5*c];x^=$.high,b^=$.low}var l=I[M];l.high=x,l.low=b}for(var M=0;M<5;M++)for(var g=I[(M+4)%5],v=I[(M+1)%5],d=v.high,A=v.low,x=g.high^(d<<1|A>>>31),b=g.low^(A<<1|d>>>31),c=0;c<5;c++){var $=T[M+5*c];$.high^=x,$.low^=b}for(var R=1;R<25;R++){var x,b,$=T[R],S=$.high,p=$.low,P=y[R];P<32?(x=S<<P|p>>>32-P,b=p<<P|S>>>32-P):(x=p<<P-32|S>>>64-P,b=S<<P-32|p>>>64-P);var H=I[w[R]];H.high=x,H.low=b}var G=I[0],Y=T[0];G.high=Y.high,G.low=Y.low;for(var M=0;M<5;M++)for(var c=0;c<5;c++){var R=M+5*c,$=T[R],rt=I[R],nt=I[(M+1)%5+5*c],q=I[(M+2)%5+5*c];$.high=rt.high^~nt.high&q.high,$.low=rt.low^~nt.low&q.low}var $=T[0],Z=L[O];$.high^=Z.high,$.low^=Z.low}},_doFinalize:function(){var C=this._data,k=C.words;this._nDataBytes*8;var T=C.sigBytes*8,D=this.blockSize*32;k[T>>>5]|=1<<24-T%32,k[(n.ceil((T+1)/D)*D>>>5)-1]|=128,C.sigBytes=k.length*4,this._process();for(var F=this._state,V=this.cfg.outputLength/8,z=V/8,$=[],O=0;O<z;O++){var M=F[O],x=M.high,b=M.low;x=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,b=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,$.push(b),$.push(x)}return new o.init($,V)},clone:function(){for(var C=a.clone.call(this),k=C._state=this._state.slice(0),T=0;T<25;T++)k[T]=k[T].clone();return C}});i.SHA3=a._createHelper(B),i.HmacSHA3=a._createHmacHelper(B)}(Math),r.SHA3})})(og);var ag={exports:{}};(function(e,t){(function(r,n){e.exports=n(jt.exports)})(Kt,function(r){/** @preserve
		(c) 2012 by Cédric Mesnil. All rights reserved.

		Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

		    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
		    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

		THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
		*/return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,h=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),f=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),y=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),w=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),L=o.create([0,1518500249,1859775393,2400959708,2840853838]),I=o.create([1352829926,1548603684,1836072691,2053994217,0]),B=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(z,$){for(var O=0;O<16;O++){var M=$+O,x=z[M];z[M]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var b=this._hash.words,c=L.words,l=I.words,g=h.words,v=f.words,d=y.words,A=w.words,R,S,p,P,H,G,Y,rt,nt,q;G=R=b[0],Y=S=b[1],rt=p=b[2],nt=P=b[3],q=H=b[4];for(var Z,O=0;O<80;O+=1)Z=R+z[$+g[O]]|0,O<16?Z+=C(S,p,P)+c[0]:O<32?Z+=k(S,p,P)+c[1]:O<48?Z+=T(S,p,P)+c[2]:O<64?Z+=D(S,p,P)+c[3]:Z+=F(S,p,P)+c[4],Z=Z|0,Z=V(Z,d[O]),Z=Z+H|0,R=H,H=P,P=V(p,10),p=S,S=Z,Z=G+z[$+v[O]]|0,O<16?Z+=F(Y,rt,nt)+l[0]:O<32?Z+=D(Y,rt,nt)+l[1]:O<48?Z+=T(Y,rt,nt)+l[2]:O<64?Z+=k(Y,rt,nt)+l[3]:Z+=C(Y,rt,nt)+l[4],Z=Z|0,Z=V(Z,A[O]),Z=Z+q|0,G=q,q=nt,nt=V(rt,10),rt=Y,Y=Z;Z=b[1]+p+nt|0,b[1]=b[2]+P+q|0,b[2]=b[3]+H+G|0,b[3]=b[4]+R+Y|0,b[4]=b[0]+S+rt|0,b[0]=Z},_doFinalize:function(){var z=this._data,$=z.words,O=this._nDataBytes*8,M=z.sigBytes*8;$[M>>>5]|=128<<24-M%32,$[(M+64>>>9<<4)+14]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,z.sigBytes=($.length+1)*4,this._process();for(var x=this._hash,b=x.words,c=0;c<5;c++){var l=b[c];b[c]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360}return x},clone:function(){var z=a.clone.call(this);return z._hash=this._hash.clone(),z}});function C(z,$,O){return z^$^O}function k(z,$,O){return z&$|~z&O}function T(z,$,O){return(z|~$)^O}function D(z,$,O){return z&O|$&~O}function F(z,$,O){return z^($|~O)}function V(z,$){return z<<$|z>>>32-$}i.RIPEMD160=a._createHelper(B),i.HmacRIPEMD160=a._createHmacHelper(B)}(),r.RIPEMD160})})(ag);var H0={exports:{}};(function(e,t){(function(r,n){e.exports=n(jt.exports)})(Kt,function(r){(function(){var n=r,i=n.lib,s=i.Base,o=n.enc,a=o.Utf8,u=n.algo;u.HMAC=s.extend({init:function(h,f){h=this._hasher=new h.init,typeof f=="string"&&(f=a.parse(f));var y=h.blockSize,w=y*4;f.sigBytes>w&&(f=h.finalize(f)),f.clamp();for(var L=this._oKey=f.clone(),I=this._iKey=f.clone(),B=L.words,C=I.words,k=0;k<y;k++)B[k]^=1549556828,C[k]^=909522486;L.sigBytes=I.sigBytes=w,this.reset()},reset:function(){var h=this._hasher;h.reset(),h.update(this._iKey)},update:function(h){return this._hasher.update(h),this},finalize:function(h){var f=this._hasher,y=f.finalize(h);f.reset();var w=f.finalize(this._oKey.clone().concat(y));return w}})})()})})(H0);var cg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,F0.exports,H0.exports)})(Kt,function(r){return function(){var n=r,i=n.lib,s=i.Base,o=i.WordArray,a=n.algo,u=a.SHA1,h=a.HMAC,f=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(y){this.cfg=this.cfg.extend(y)},compute:function(y,w){for(var L=this.cfg,I=h.create(L.hasher,y),B=o.create(),C=o.create([1]),k=B.words,T=C.words,D=L.keySize,F=L.iterations;k.length<D;){var V=I.update(w).finalize(C);I.reset();for(var z=V.words,$=z.length,O=V,M=1;M<F;M++){O=I.finalize(O),I.reset();for(var x=O.words,b=0;b<$;b++)z[b]^=x[b]}B.concat(V),T[0]++}return B.sigBytes=D*4,B}});n.PBKDF2=function(y,w,L){return f.create(L).compute(y,w)}}(),r.PBKDF2})})(cg);var Si={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,F0.exports,H0.exports)})(Kt,function(r){return function(){var n=r,i=n.lib,s=i.Base,o=i.WordArray,a=n.algo,u=a.MD5,h=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,y){for(var w,L=this.cfg,I=L.hasher.create(),B=o.create(),C=B.words,k=L.keySize,T=L.iterations;C.length<k;){w&&I.update(w),w=I.update(f).finalize(y),I.reset();for(var D=1;D<T;D++)w=I.finalize(w),I.reset();B.concat(w)}return B.sigBytes=k*4,B}});n.EvpKDF=function(f,y,w){return h.create(w).compute(f,y)}}(),r.EvpKDF})})(Si);var ze={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,Si.exports)})(Kt,function(r){r.lib.Cipher||function(n){var i=r,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,h=i.enc;h.Utf8;var f=h.Base64,y=i.algo,w=y.EvpKDF,L=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(x,b){return this.create(this._ENC_XFORM_MODE,x,b)},createDecryptor:function(x,b){return this.create(this._DEC_XFORM_MODE,x,b)},init:function(x,b,c){this.cfg=this.cfg.extend(c),this._xformMode=x,this._key=b,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(x){return this._append(x),this._process()},finalize:function(x){x&&this._append(x);var b=this._doFinalize();return b},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function x(b){return typeof b=="string"?M:z}return function(b){return{encrypt:function(c,l,g){return x(l).encrypt(b,c,l,g)},decrypt:function(c,l,g){return x(l).decrypt(b,c,l,g)}}}}()});s.StreamCipher=L.extend({_doFinalize:function(){var x=this._process(!0);return x},blockSize:1});var I=i.mode={},B=s.BlockCipherMode=o.extend({createEncryptor:function(x,b){return this.Encryptor.create(x,b)},createDecryptor:function(x,b){return this.Decryptor.create(x,b)},init:function(x,b){this._cipher=x,this._iv=b}}),C=I.CBC=function(){var x=B.extend();x.Encryptor=x.extend({processBlock:function(c,l){var g=this._cipher,v=g.blockSize;b.call(this,c,l,v),g.encryptBlock(c,l),this._prevBlock=c.slice(l,l+v)}}),x.Decryptor=x.extend({processBlock:function(c,l){var g=this._cipher,v=g.blockSize,d=c.slice(l,l+v);g.decryptBlock(c,l),b.call(this,c,l,v),this._prevBlock=d}});function b(c,l,g){var v,d=this._iv;d?(v=d,this._iv=n):v=this._prevBlock;for(var A=0;A<g;A++)c[l+A]^=v[A]}return x}(),k=i.pad={},T=k.Pkcs7={pad:function(x,b){for(var c=b*4,l=c-x.sigBytes%c,g=l<<24|l<<16|l<<8|l,v=[],d=0;d<l;d+=4)v.push(g);var A=a.create(v,l);x.concat(A)},unpad:function(x){var b=x.words[x.sigBytes-1>>>2]&255;x.sigBytes-=b}};s.BlockCipher=L.extend({cfg:L.cfg.extend({mode:C,padding:T}),reset:function(){var x;L.reset.call(this);var b=this.cfg,c=b.iv,l=b.mode;this._xformMode==this._ENC_XFORM_MODE?x=l.createEncryptor:(x=l.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==x?this._mode.init(this,c&&c.words):(this._mode=x.call(l,this,c&&c.words),this._mode.__creator=x)},_doProcessBlock:function(x,b){this._mode.processBlock(x,b)},_doFinalize:function(){var x,b=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(b.pad(this._data,this.blockSize),x=this._process(!0)):(x=this._process(!0),b.unpad(x)),x},blockSize:128/32});var D=s.CipherParams=o.extend({init:function(x){this.mixIn(x)},toString:function(x){return(x||this.formatter).stringify(this)}}),F=i.format={},V=F.OpenSSL={stringify:function(x){var b,c=x.ciphertext,l=x.salt;return l?b=a.create([1398893684,1701076831]).concat(l).concat(c):b=c,b.toString(f)},parse:function(x){var b,c=f.parse(x),l=c.words;return l[0]==1398893684&&l[1]==1701076831&&(b=a.create(l.slice(2,4)),l.splice(0,4),c.sigBytes-=16),D.create({ciphertext:c,salt:b})}},z=s.SerializableCipher=o.extend({cfg:o.extend({format:V}),encrypt:function(x,b,c,l){l=this.cfg.extend(l);var g=x.createEncryptor(c,l),v=g.finalize(b),d=g.cfg;return D.create({ciphertext:v,key:c,iv:d.iv,algorithm:x,mode:d.mode,padding:d.padding,blockSize:x.blockSize,formatter:l.format})},decrypt:function(x,b,c,l){l=this.cfg.extend(l),b=this._parse(b,l.format);var g=x.createDecryptor(c,l).finalize(b.ciphertext);return g},_parse:function(x,b){return typeof x=="string"?b.parse(x,this):x}}),$=i.kdf={},O=$.OpenSSL={execute:function(x,b,c,l){l||(l=a.random(64/8));var g=w.create({keySize:b+c}).compute(x,l),v=a.create(g.words.slice(b),c*4);return g.sigBytes=b*4,D.create({key:g,iv:v,salt:l})}},M=s.PasswordBasedCipher=z.extend({cfg:z.cfg.extend({kdf:O}),encrypt:function(x,b,c,l){l=this.cfg.extend(l);var g=l.kdf.execute(c,x.keySize,x.ivSize);l.iv=g.iv;var v=z.encrypt.call(this,x,b,g.key,l);return v.mixIn(g),v},decrypt:function(x,b,c,l){l=this.cfg.extend(l),b=this._parse(b,l.format);var g=l.kdf.execute(c,x.keySize,x.ivSize,b.salt);l.iv=g.iv;var v=z.decrypt.call(this,x,b,g.key,l);return v}})}()})})(ze);var ug={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,ze.exports)})(Kt,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),n.Decryptor=n.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,h=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=h}});function i(s,o,a,u){var h,f=this._iv;f?(h=f.slice(0),this._iv=void 0):h=this._prevBlock,u.encryptBlock(h,0);for(var y=0;y<a;y++)s[o+y]^=h[y]}return n}(),r.mode.CFB})})(ug);var fg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,ze.exports)})(Kt,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,h=this._iv,f=this._counter;h&&(f=this._counter=h.slice(0),this._iv=void 0);var y=f.slice(0);a.encryptBlock(y,0),f[u-1]=f[u-1]+1|0;for(var w=0;w<u;w++)s[o+w]^=y[w]}});return n.Decryptor=i,n}(),r.mode.CTR})})(fg);var hg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,ze.exports)})(Kt,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,h=a>>8&255,f=a&255;u===255?(u=0,h===255?(h=0,f===255?f=0:++f):++h):++u,a=0,a+=u<<16,a+=h<<8,a+=f}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=n.Encryptor=n.extend({processBlock:function(a,u){var h=this._cipher,f=h.blockSize,y=this._iv,w=this._counter;y&&(w=this._counter=y.slice(0),this._iv=void 0),s(w);var L=w.slice(0);h.encryptBlock(L,0);for(var I=0;I<f;I++)a[u+I]^=L[I]}});return n.Decryptor=o,n}(),r.mode.CTRGladman})})(hg);var lg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,ze.exports)})(Kt,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,h=this._iv,f=this._keystream;h&&(f=this._keystream=h.slice(0),this._iv=void 0),a.encryptBlock(f,0);for(var y=0;y<u;y++)s[o+y]^=f[y]}});return n.Decryptor=i,n}(),r.mode.OFB})})(lg);var dg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,ze.exports)})(Kt,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),n.Decryptor=n.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),n}(),r.mode.ECB})})(dg);var pg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,ze.exports)})(Kt,function(r){return r.pad.AnsiX923={pad:function(n,i){var s=n.sigBytes,o=i*4,a=o-s%o,u=s+a-1;n.clamp(),n.words[u>>>2]|=a<<24-u%4*8,n.sigBytes+=a},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Ansix923})})(pg);var gg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,ze.exports)})(Kt,function(r){return r.pad.Iso10126={pad:function(n,i){var s=i*4,o=s-n.sigBytes%s;n.concat(r.lib.WordArray.random(o-1)).concat(r.lib.WordArray.create([o<<24],1))},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Iso10126})})(gg);var vg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,ze.exports)})(Kt,function(r){return r.pad.Iso97971={pad:function(n,i){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,i)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})})(vg);var mg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,ze.exports)})(Kt,function(r){return r.pad.ZeroPadding={pad:function(n,i){var s=i*4;n.clamp(),n.sigBytes+=s-(n.sigBytes%s||s)},unpad:function(n){for(var i=n.words,s=n.sigBytes-1,s=n.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){n.sigBytes=s+1;break}}},r.pad.ZeroPadding})})(mg);var xg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,ze.exports)})(Kt,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})})(xg);var bg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,ze.exports)})(Kt,function(r){return function(n){var i=r,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,h=i.format;h.Hex={stringify:function(f){return f.ciphertext.toString(u)},parse:function(f){var y=u.parse(f);return o.create({ciphertext:y})}}}(),r.format.Hex})})(bg);var yg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,Qi.exports,ts.exports,Si.exports,ze.exports)})(Kt,function(r){return function(){var n=r,i=n.lib,s=i.BlockCipher,o=n.algo,a=[],u=[],h=[],f=[],y=[],w=[],L=[],I=[],B=[],C=[];(function(){for(var D=[],F=0;F<256;F++)F<128?D[F]=F<<1:D[F]=F<<1^283;for(var V=0,z=0,F=0;F<256;F++){var $=z^z<<1^z<<2^z<<3^z<<4;$=$>>>8^$&255^99,a[V]=$,u[$]=V;var O=D[V],M=D[O],x=D[M],b=D[$]*257^$*16843008;h[V]=b<<24|b>>>8,f[V]=b<<16|b>>>16,y[V]=b<<8|b>>>24,w[V]=b;var b=x*16843009^M*65537^O*257^V*16843008;L[$]=b<<24|b>>>8,I[$]=b<<16|b>>>16,B[$]=b<<8|b>>>24,C[$]=b,V?(V=O^D[D[D[x^O]]],z^=D[D[z]]):V=z=1}})();var k=[0,1,2,4,8,16,32,64,128,27,54],T=o.AES=s.extend({_doReset:function(){var D;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var F=this._keyPriorReset=this._key,V=F.words,z=F.sigBytes/4,$=this._nRounds=z+6,O=($+1)*4,M=this._keySchedule=[],x=0;x<O;x++)x<z?M[x]=V[x]:(D=M[x-1],x%z?z>6&&x%z==4&&(D=a[D>>>24]<<24|a[D>>>16&255]<<16|a[D>>>8&255]<<8|a[D&255]):(D=D<<8|D>>>24,D=a[D>>>24]<<24|a[D>>>16&255]<<16|a[D>>>8&255]<<8|a[D&255],D^=k[x/z|0]<<24),M[x]=M[x-z]^D);for(var b=this._invKeySchedule=[],c=0;c<O;c++){var x=O-c;if(c%4)var D=M[x];else var D=M[x-4];c<4||x<=4?b[c]=D:b[c]=L[a[D>>>24]]^I[a[D>>>16&255]]^B[a[D>>>8&255]]^C[a[D&255]]}}},encryptBlock:function(D,F){this._doCryptBlock(D,F,this._keySchedule,h,f,y,w,a)},decryptBlock:function(D,F){var V=D[F+1];D[F+1]=D[F+3],D[F+3]=V,this._doCryptBlock(D,F,this._invKeySchedule,L,I,B,C,u);var V=D[F+1];D[F+1]=D[F+3],D[F+3]=V},_doCryptBlock:function(D,F,V,z,$,O,M,x){for(var b=this._nRounds,c=D[F]^V[0],l=D[F+1]^V[1],g=D[F+2]^V[2],v=D[F+3]^V[3],d=4,A=1;A<b;A++){var R=z[c>>>24]^$[l>>>16&255]^O[g>>>8&255]^M[v&255]^V[d++],S=z[l>>>24]^$[g>>>16&255]^O[v>>>8&255]^M[c&255]^V[d++],p=z[g>>>24]^$[v>>>16&255]^O[c>>>8&255]^M[l&255]^V[d++],P=z[v>>>24]^$[c>>>16&255]^O[l>>>8&255]^M[g&255]^V[d++];c=R,l=S,g=p,v=P}var R=(x[c>>>24]<<24|x[l>>>16&255]<<16|x[g>>>8&255]<<8|x[v&255])^V[d++],S=(x[l>>>24]<<24|x[g>>>16&255]<<16|x[v>>>8&255]<<8|x[c&255])^V[d++],p=(x[g>>>24]<<24|x[v>>>16&255]<<16|x[c>>>8&255]<<8|x[l&255])^V[d++],P=(x[v>>>24]<<24|x[c>>>16&255]<<16|x[l>>>8&255]<<8|x[g&255])^V[d++];D[F]=R,D[F+1]=S,D[F+2]=p,D[F+3]=P},keySize:256/32});n.AES=s._createHelper(T)}(),r.AES})})(yg);var wg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,Qi.exports,ts.exports,Si.exports,ze.exports)})(Kt,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=i.BlockCipher,a=n.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],h=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],f=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],y=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],w=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],L=a.DES=o.extend({_doReset:function(){for(var k=this._key,T=k.words,D=[],F=0;F<56;F++){var V=u[F]-1;D[F]=T[V>>>5]>>>31-V%32&1}for(var z=this._subKeys=[],$=0;$<16;$++){for(var O=z[$]=[],M=f[$],F=0;F<24;F++)O[F/6|0]|=D[(h[F]-1+M)%28]<<31-F%6,O[4+(F/6|0)]|=D[28+(h[F+24]-1+M)%28]<<31-F%6;O[0]=O[0]<<1|O[0]>>>31;for(var F=1;F<7;F++)O[F]=O[F]>>>(F-1)*4+3;O[7]=O[7]<<5|O[7]>>>27}for(var x=this._invSubKeys=[],F=0;F<16;F++)x[F]=z[15-F]},encryptBlock:function(k,T){this._doCryptBlock(k,T,this._subKeys)},decryptBlock:function(k,T){this._doCryptBlock(k,T,this._invSubKeys)},_doCryptBlock:function(k,T,D){this._lBlock=k[T],this._rBlock=k[T+1],I.call(this,4,252645135),I.call(this,16,65535),B.call(this,2,858993459),B.call(this,8,16711935),I.call(this,1,1431655765);for(var F=0;F<16;F++){for(var V=D[F],z=this._lBlock,$=this._rBlock,O=0,M=0;M<8;M++)O|=y[M][(($^V[M])&w[M])>>>0];this._lBlock=$,this._rBlock=z^O}var x=this._lBlock;this._lBlock=this._rBlock,this._rBlock=x,I.call(this,1,1431655765),B.call(this,8,16711935),B.call(this,2,858993459),I.call(this,16,65535),I.call(this,4,252645135),k[T]=this._lBlock,k[T+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function I(k,T){var D=(this._lBlock>>>k^this._rBlock)&T;this._rBlock^=D,this._lBlock^=D<<k}function B(k,T){var D=(this._rBlock>>>k^this._lBlock)&T;this._lBlock^=D,this._rBlock^=D<<k}n.DES=o._createHelper(L);var C=a.TripleDES=o.extend({_doReset:function(){var k=this._key,T=k.words;if(T.length!==2&&T.length!==4&&T.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var D=T.slice(0,2),F=T.length<4?T.slice(0,2):T.slice(2,4),V=T.length<6?T.slice(0,2):T.slice(4,6);this._des1=L.createEncryptor(s.create(D)),this._des2=L.createEncryptor(s.create(F)),this._des3=L.createEncryptor(s.create(V))},encryptBlock:function(k,T){this._des1.encryptBlock(k,T),this._des2.decryptBlock(k,T),this._des3.encryptBlock(k,T)},decryptBlock:function(k,T){this._des3.decryptBlock(k,T),this._des2.encryptBlock(k,T),this._des1.decryptBlock(k,T)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=o._createHelper(C)}(),r.TripleDES})})(wg);var Eg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,Qi.exports,ts.exports,Si.exports,ze.exports)})(Kt,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,o=n.algo,a=o.RC4=s.extend({_doReset:function(){for(var f=this._key,y=f.words,w=f.sigBytes,L=this._S=[],I=0;I<256;I++)L[I]=I;for(var I=0,B=0;I<256;I++){var C=I%w,k=y[C>>>2]>>>24-C%4*8&255;B=(B+L[I]+k)%256;var T=L[I];L[I]=L[B],L[B]=T}this._i=this._j=0},_doProcessBlock:function(f,y){f[y]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var f=this._S,y=this._i,w=this._j,L=0,I=0;I<4;I++){y=(y+1)%256,w=(w+f[y])%256;var B=f[y];f[y]=f[w],f[w]=B,L|=f[(f[y]+f[w])%256]<<24-I*8}return this._i=y,this._j=w,L}n.RC4=s._createHelper(a);var h=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var f=this.cfg.drop;f>0;f--)u.call(this)}});n.RC4Drop=s._createHelper(h)}(),r.RC4})})(Eg);var _g={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,Qi.exports,ts.exports,Si.exports,ze.exports)})(Kt,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,o=n.algo,a=[],u=[],h=[],f=o.Rabbit=s.extend({_doReset:function(){for(var w=this._key.words,L=this.cfg.iv,I=0;I<4;I++)w[I]=(w[I]<<8|w[I]>>>24)&16711935|(w[I]<<24|w[I]>>>8)&4278255360;var B=this._X=[w[0],w[3]<<16|w[2]>>>16,w[1],w[0]<<16|w[3]>>>16,w[2],w[1]<<16|w[0]>>>16,w[3],w[2]<<16|w[1]>>>16],C=this._C=[w[2]<<16|w[2]>>>16,w[0]&4294901760|w[1]&65535,w[3]<<16|w[3]>>>16,w[1]&4294901760|w[2]&65535,w[0]<<16|w[0]>>>16,w[2]&4294901760|w[3]&65535,w[1]<<16|w[1]>>>16,w[3]&4294901760|w[0]&65535];this._b=0;for(var I=0;I<4;I++)y.call(this);for(var I=0;I<8;I++)C[I]^=B[I+4&7];if(L){var k=L.words,T=k[0],D=k[1],F=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,V=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,z=F>>>16|V&4294901760,$=V<<16|F&65535;C[0]^=F,C[1]^=z,C[2]^=V,C[3]^=$,C[4]^=F,C[5]^=z,C[6]^=V,C[7]^=$;for(var I=0;I<4;I++)y.call(this)}},_doProcessBlock:function(w,L){var I=this._X;y.call(this),a[0]=I[0]^I[5]>>>16^I[3]<<16,a[1]=I[2]^I[7]>>>16^I[5]<<16,a[2]=I[4]^I[1]>>>16^I[7]<<16,a[3]=I[6]^I[3]>>>16^I[1]<<16;for(var B=0;B<4;B++)a[B]=(a[B]<<8|a[B]>>>24)&16711935|(a[B]<<24|a[B]>>>8)&4278255360,w[L+B]^=a[B]},blockSize:128/32,ivSize:64/32});function y(){for(var w=this._X,L=this._C,I=0;I<8;I++)u[I]=L[I];L[0]=L[0]+1295307597+this._b|0,L[1]=L[1]+3545052371+(L[0]>>>0<u[0]>>>0?1:0)|0,L[2]=L[2]+886263092+(L[1]>>>0<u[1]>>>0?1:0)|0,L[3]=L[3]+1295307597+(L[2]>>>0<u[2]>>>0?1:0)|0,L[4]=L[4]+3545052371+(L[3]>>>0<u[3]>>>0?1:0)|0,L[5]=L[5]+886263092+(L[4]>>>0<u[4]>>>0?1:0)|0,L[6]=L[6]+1295307597+(L[5]>>>0<u[5]>>>0?1:0)|0,L[7]=L[7]+3545052371+(L[6]>>>0<u[6]>>>0?1:0)|0,this._b=L[7]>>>0<u[7]>>>0?1:0;for(var I=0;I<8;I++){var B=w[I]+L[I],C=B&65535,k=B>>>16,T=((C*C>>>17)+C*k>>>15)+k*k,D=((B&4294901760)*B|0)+((B&65535)*B|0);h[I]=T^D}w[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,w[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,w[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,w[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,w[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,w[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,w[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,w[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}n.Rabbit=s._createHelper(f)}(),r.Rabbit})})(_g);var Sg={exports:{}};(function(e,t){(function(r,n,i){e.exports=n(jt.exports,Qi.exports,ts.exports,Si.exports,ze.exports)})(Kt,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,o=n.algo,a=[],u=[],h=[],f=o.RabbitLegacy=s.extend({_doReset:function(){var w=this._key.words,L=this.cfg.iv,I=this._X=[w[0],w[3]<<16|w[2]>>>16,w[1],w[0]<<16|w[3]>>>16,w[2],w[1]<<16|w[0]>>>16,w[3],w[2]<<16|w[1]>>>16],B=this._C=[w[2]<<16|w[2]>>>16,w[0]&4294901760|w[1]&65535,w[3]<<16|w[3]>>>16,w[1]&4294901760|w[2]&65535,w[0]<<16|w[0]>>>16,w[2]&4294901760|w[3]&65535,w[1]<<16|w[1]>>>16,w[3]&4294901760|w[0]&65535];this._b=0;for(var C=0;C<4;C++)y.call(this);for(var C=0;C<8;C++)B[C]^=I[C+4&7];if(L){var k=L.words,T=k[0],D=k[1],F=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,V=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,z=F>>>16|V&4294901760,$=V<<16|F&65535;B[0]^=F,B[1]^=z,B[2]^=V,B[3]^=$,B[4]^=F,B[5]^=z,B[6]^=V,B[7]^=$;for(var C=0;C<4;C++)y.call(this)}},_doProcessBlock:function(w,L){var I=this._X;y.call(this),a[0]=I[0]^I[5]>>>16^I[3]<<16,a[1]=I[2]^I[7]>>>16^I[5]<<16,a[2]=I[4]^I[1]>>>16^I[7]<<16,a[3]=I[6]^I[3]>>>16^I[1]<<16;for(var B=0;B<4;B++)a[B]=(a[B]<<8|a[B]>>>24)&16711935|(a[B]<<24|a[B]>>>8)&4278255360,w[L+B]^=a[B]},blockSize:128/32,ivSize:64/32});function y(){for(var w=this._X,L=this._C,I=0;I<8;I++)u[I]=L[I];L[0]=L[0]+1295307597+this._b|0,L[1]=L[1]+3545052371+(L[0]>>>0<u[0]>>>0?1:0)|0,L[2]=L[2]+886263092+(L[1]>>>0<u[1]>>>0?1:0)|0,L[3]=L[3]+1295307597+(L[2]>>>0<u[2]>>>0?1:0)|0,L[4]=L[4]+3545052371+(L[3]>>>0<u[3]>>>0?1:0)|0,L[5]=L[5]+886263092+(L[4]>>>0<u[4]>>>0?1:0)|0,L[6]=L[6]+1295307597+(L[5]>>>0<u[5]>>>0?1:0)|0,L[7]=L[7]+3545052371+(L[6]>>>0<u[6]>>>0?1:0)|0,this._b=L[7]>>>0<u[7]>>>0?1:0;for(var I=0;I<8;I++){var B=w[I]+L[I],C=B&65535,k=B>>>16,T=((C*C>>>17)+C*k>>>15)+k*k,D=((B&4294901760)*B|0)+((B&65535)*B|0);h[I]=T^D}w[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,w[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,w[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,w[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,w[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,w[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,w[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,w[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}n.RabbitLegacy=s._createHelper(f)}(),r.RabbitLegacy})})(Sg),function(e,t){(function(r,n,i){e.exports=n(jt.exports,Go.exports,eg.exports,rg.exports,Qi.exports,ng.exports,ts.exports,F0.exports,Ju.exports,ig.exports,Qu.exports,sg.exports,og.exports,ag.exports,H0.exports,cg.exports,Si.exports,ze.exports,ug.exports,fg.exports,hg.exports,lg.exports,dg.exports,pg.exports,gg.exports,vg.exports,mg.exports,xg.exports,bg.exports,yg.exports,wg.exports,Eg.exports,_g.exports,Sg.exports)})(Kt,function(r){return r})}(A8);function tf(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{h(n.next(f))}catch(y){o(y)}}function u(f){try{h(n.throw(f))}catch(y){o(y)}}function h(f){f.done?s(f.value):i(f.value).then(a,u)}h((n=n.apply(e,t||[])).next())})}class Ag{constructor(){this.httpBackend=new Q0}getMetadata(t,{protocol:r,location:n},i){return tf(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:`${r}:${decodeURIComponent(n)}`,method:"GET",headers:{"Content-Type":"text/plain; charset=utf-8"},json:!1})})}}class P8 extends Error{constructor(){super("Non-compliance with the TZIP-016 standard. No big map named metadata was found in the contract storage."),this.name="BigMapMetadataNotFound"}}class T8 extends Error{constructor(t){super(`No metadata was found in the contract storage. ${t}`),this.info=t,this.name="MetadataNotFound"}}class R8 extends Error{constructor(t){super(`Non-compliance with the TZIP-016 standard. The URI is invalid: ${t}.`),this.uri=t,this.name="InvalidUri"}}class L8 extends Error{constructor(){super("The contract does not comply with the tzip16 standard. The type of metadata should be bytes."),this.name="InvalidMetadataType"}}const Pg={prim:"big_map",args:[{prim:"string"},{prim:"bytes"}],annots:["%metadata"]};class O8{constructor(){this.TEZOS_STORAGE_REGEX=/^(?:\/\/(KT1\w{33})(?:\.(.+))?\/)?([\w|%]+)$/}getMetadata(t,{location:r},n){return tf(this,void 0,void 0,function*(){const i=this.parseTezosStorageUri(r);if(!i)throw new R8(`tezos-storage:${r}`);const s=yield n.readProvider.getScript(i.contractAddress||t.address,"head"),o=ar.fromRPCResponse({script:s}).FindFirstInTopLevelPair(s.storage,Pg);if(!o||!o.int)throw new P8;const a=yield n.contract.getBigMapKeyByID(o.int.toString(),i.path,new ar(Pg));if(!a)throw new T8(`No '${i.path}' key found in the big map %metadata of the contract ${i.contractAddress||t.address}`);if(!/^[0-9a-fA-F]*$/.test(a))throw new L8;return OE(a)})}parseTezosStorageUri(t){const r=this.TEZOS_STORAGE_REGEX.exec(t);if(!!r)return{contractAddress:r[1],network:r[2],path:decodeURIComponent(r[3])}}}class I8{constructor(t){this.httpBackend=new Q0,this._ipfsGateway=t||"ipfs.io"}getMetadata(t,{location:r},n){return tf(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:`https://${this._ipfsGateway}/ipfs/${r.substring(2)}/`,method:"GET",headers:{"Content-Type":"text/plain; charset=utf-8"},json:!1})})}}var Tg;(function(e){e.MICHELSON_STORAGE="michelsonStorageView",e.REST_API_QUERY="restApiQuery"})(Tg||(Tg={})),new Ag,new Ag,new O8,new I8;const N8=async e=>{let{invData:t,balance:r,Tezos:n,tokenExchangeRate:i,tokenDecimals:s}=e;if(t&&r&&n){const o=await Xu(n,_i.wrapLiquidityMiningDexAddress[t.id],r),a=await Zu(n,_i.wrapLiquidityMiningDexAddress[t.id],r);return o&&a?o.toNumber()/10**6+a.toNumber()/10**s*i:null}else return null},M8=async(e,t)=>{let r,n=Xi(Ji);if(e.type==="fee-farming")r=+(e.balance/10**e.decimals*n.tokens.WRAP.getExchangeRate()).toFixed(5)/1;else if(e.type==="staking"){const i=await N8({invData:e,balance:e.balance,tokenExchangeRate:n.tokens[e.rewardToken].getExchangeRate(),tokenDecimals:n.tokens[e.rewardToken].decimals,Tezos:t});i?r=+i.toFixed(5)/1:r=null}else r=+(e.balance/10**e.decimals*n.tokens.WRAP.getExchangeRate()).toFixed(5)/1;return isNaN(r)?oe.Error(`Stake in XTZ coudn't be computed for ${e.alias}`):oe.Ok(r)},B8=self;let es;const C8=()=>{es=new t8(_i.rpcUrl)},U8=async(e,t)=>{let r;switch(e.platform){case"kdao":(await p8(e,es)).match({Ok:f=>{r=f},Error:f=>console.error(f)});break;case"paul":(await m8(e,es)).match({Ok:f=>{r=f},Error:f=>console.error(f)});break;case"plenty":(await E8(e)).match({Ok:f=>{r=f},Error:f=>console.error(f)});break;case"quipuswap":(await _8(e,es)).match({Ok:f=>{r=f},Error:f=>console.error(f)});break;case"smartlink":(await S8(es,e)).match({Ok:f=>{r=f},Error:f=>console.error(f)});break;case"wrap":(await M8(e,es)).match({Ok:f=>{r=f},Error:f=>console.error(f)});break;case"youves":(await d8(e,es,t)).match({Ok:f=>{r=f},Error:f=>console.error(f)});break}console.log({stakeInXtz:r})};B8.addEventListener("message",async e=>{e.data.type==="init"?(e.data.payload,C8()):e.data.type==="update-tokens"?console.log("update tokens"):e.data.type==="calc-stake"?U8(e.data.payload.invData,e.data.payload.userAddress):e.data.type==="calc-rewards"&&console.log("calc-rewards")})})();
